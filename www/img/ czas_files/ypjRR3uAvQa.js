/*!CK:443454498!*//*1433972996,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["xnYvC"]); }

__d("MessageThreadViewSource",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNSPECIFIED:"unspecified",LEGACY:"legacy",LEGACY_MESSAGES_PREVIEW:"legacy_messages_preview",REFRESH_SPRINGBOARD:"springboard",REFRESH_MESSAGETAB:"message_tab",REFRESH_PERMALINK:"permalink",REFRESH_HIGHLANDER_JEWEL:"highlander_jewel",REFRESH_SEARCH_TYPEAHEAD:"search_typeahead",MTOUCH_MESSAGE_TAB:"mtouch_message_tab",MBASIC_MESSAGE_TAB:"mbasic_message_tab"};},null);
__d("P2PChannelType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TRANSFER_STATUS_CHANGED:"P2P\/TransferStatusChanged"};},null);
__d("P2PPasswordProtectionParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={STATUS:"status"};},null);
__d("P2PPaymentCreditCardsTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SENDING:1,RECEIVING:2};},null);
__d("P2PTransferParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TRANSFER_ID:"transfer_id",STATUS:"status",SENDER_STATUS:"sender_status",RECEIVER_STATUS:"receiver_status",RISK_RESULT:"risk_result"};},null);
__d("P2PTransferStatus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18};},null);
__d("BlueBar",["Arbiter","Event","Run"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j;function k(event){if(g.inform('BlueBar/homeClick')===false)event.preventDefault();}function l(){if(j){j.remove();j=null;}}var m={listen:function(n){if(!j){j=h.listen(n,'click',k);i.onUnload(l);}}};e.exports=m;},null);
__d("NotificationCounter",["Arbiter","ChatConfig","DocumentTitle","JSLogger"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={messages:0,notifications:0,requests:0},l={init:function(m){g.subscribe('update_title',this._handleUpdate.bind(this));g.subscribe('jewel/count-updated',this._handleCountUpdate.bind(this));},getCount:function(){var m=0;for(var n in k){var o=Number(k[n]);if(typeof k[n]=='string'&&isNaN(o))return k[n];if(isNaN(o)||o<0){j.create('jewels').error('bad_count',{jewel:n,count:k[n]});continue;}m+=o;}return m;},updateTitle:function(){var m=this.getCount(),n=i.get();n=m?'('+m+') '+n:n;i.set(n,true);},_handleCountUpdate:function(m,n){if(h.get('remove_notification_count')&&n.jewel==='mercurymessages')return;k[n.jewel]=n.count;this.updateTitle();},_handleUpdate:function(m,n){this.updateTitle();}};e.exports=l;},null);
__d("XNotificationsSyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/notifications\/sync\/",{lastSync:{type:"Int",required:true}});},null);
__d("NotificationSync",["Arbiter","AsyncRequest","ChannelConstants","JSLogger","NotificationConstants","NotificationUpdates","XNotificationsSyncController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j.create('notifications'),o='channel_reload',p=0;function q(v){var w=l.getserverTime()?l.getserverTime():p,x=m.getURIBuilder().setInt('lastSync',w).getURI();v.setHandler(r).setOption('suppressErrorAlerts',true).setErrorHandler(s).setMethod('GET').setReadOnly(true).setURI(x).setAllowCrossPageTransition(true);}function r(v){var w=v.getPayload();if(w.syncPayload)l.handleUpdate(k.PayloadSourceType.SYNC,w.syncPayload);}function s(v){}function t(){var v=new h();v.setIsBackgroundRequest(true);q(v);v.send();n.bump(o);}var u={setup:function(v){p=v;g.subscribe(i.ON_INVALID_HISTORY,t);}};e.exports=u;},null);
__d("NotificationJewelController",["Arbiter","Event","NotificationConstants","NotificationCounter","NotificationSeenState","NotificationSync","NotificationUpdates","createObjectFrom","curry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=0;function q(s){g.inform('jewel/count-updated',{jewel:s,count:k.getUnseenIDs().length},g.BEHAVIOR_STATE);}function r(s,t,u,v){"use strict";j.init();var w=h.listen(s.getRoot(),'mouseover',function(){w.remove();w=null;t.open();});if(s.isOpen()){t.open();}else var x=s.subscribe('opened',function(){x.unsubscribe();x=null;t.open();});var y=t.pause.bind(t);s.subscribe('opened',function(){setTimeout(y,0);});s.subscribe('closed',function(){t.unpause();q(s.name);});m.subscribe('seen-state-updated',o(q,s.name));m.handleUpdate(i.PayloadSourceType.INITIAL_LOAD,{seenState:n(u,p)});l.setup(v);q(s.name);}e.exports=r;},null);
__d("NotificationJewelHeaderController",["DOM","Event","NotificationSeenState","NotificationUserActions","NotificationUpdates"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){"use strict";h.listen(m,'click',function(){var o=i.getUnreadIDs();if(o.length)j.markNotificationsAsRead(o);});k.subscribe('read-state-updated',function(){if(n)g.setContent(n,i.getUnreadCount());});}e.exports=l;},null);
__d("NotificationGNFState",["NotificationUpdates","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={};g.subscribe('update-notifications',function(l,m){var n=m.nodes;if(!n||!n.length)return;var o={};m.nodes.forEach(function(p){var q=p.alert_id;if(j[q]!==p.gaveGNF)o[q]=p.gaveGNF;});if(!i(o)){j=h(j,o);g.didUpdateGNFState(Object.keys(o));}});g.subscribe('update-gnf',function(l,m){if(m.gnfState){j=h(j,m.gnfState);g.didUpdateGNFState(Object.keys(m.gnfState));}});var k={gaveGNF:function(l){return !!j[l];}};e.exports=k;},null);
__d("NotificationHiddenState",["NotificationUpdates","NotificationConstants","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={};g.subscribe('update-notifications',function(m,n){var o=n.nodes,p=n.payloadsource;if(p===h.PayloadSourceType.LIVE_SEND&&o&&o.length){var q={};o.forEach(function(r){var s=r.alert_id;if(k[s])q[s]=false;});if(!j(q)){k=i(k,q);g.didUpdateHiddenState(Object.keys(q));}}});g.subscribe('update-hidden',function(m,n){if(n.hiddenState){k=i(k,n.hiddenState);g.didUpdateHiddenState(Object.keys(n.hiddenState));}});var l={isHidden:function(m){if(k[m])return k[m];return false;}};e.exports=l;},null);
__d("NotificationList.react",["NotificationConstants","NotificationGNFState","NotificationHiddenState","NotificationSeenState","NotificationStore","NotificationUpdates","NotificationUserActions","React","getObjectValues","isEmpty","mapObject","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=n,t=s.PropTypes,u=g.PayloadSourceType.LIVE_SEND,v=n.createClass({displayName:"NotificationList",propTypes:{businessID:t.string,hasEverBeenOpened:t.bool,maxHeight:t.number,negativeTracking:t.object,paused:t.bool,tracking:t.string,useChevron:t.bool,numPerPage:t.number.isRequired,listRenderer:t.func.isRequired,upsell:t.object},getInitialState:function(){this._currentlyFetching=false;this._pendingNotifs={};this._shouldScroll=false;var w=q(this.props.staticNotifs,function(x){return !!x.gaveGNF;});return {canFetchMore:true,notifs:{},hiddenState:{},readState:{},gnfState:w||{},showingChevron:false};},componentWillMount:function(){k.setBusinessID(this.props.businessID);this._subscriptions=[l.subscribe('notifications-updated',function(w,x){if(x.source==u&&!p(x.updates)){this._shouldScroll=true;if(this.props.paused!==false)this._pendingNotifs=r(this._pendingNotifs,x.updates);return;}this._fetchAndUpdate(k.getCount());}.bind(this)),l.subscribe(['hidden-state-updated','read-state-updated','gnf-state-updated'],function(w,x){if(w=='hidden-state-updated'){if(x.source!==u||!this.props.paused){var y={};Object.keys(x.updates).forEach(function(ba){y[ba]=i.isHidden(ba);});this.setState({hiddenState:r(this.state.hiddenState,y)});}}else if(w=='gnf-state-updated'){var z={};Object.keys(x.updates).forEach(function(ba){z[ba]=h.gaveGNF(ba);});this.setState({gnfState:r(this.state.gnfState,z)});}else{var aa={};Object.keys(x.updates).forEach(function(ba){aa[ba]=j.isRead(ba);});this.setState({readState:r(this.state.readState,aa)});}}.bind(this))];},componentWillUnmount:function(){if(this._subscriptions){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;}},_getNotifsWithCurrentOrder:function(w){var x=Object.keys(this.state.notifs),y=Object.keys(w).filter(function(aa){return !this.state.notifs[aa];}.bind(this));x=x.concat(y);var z={};x.forEach(function(aa){if(this._pendingNotifs[aa]){if(this.state.notifs[aa])z[aa]=this.state.notifs[aa];}else z[aa]=w[aa];}.bind(this));return z;},_fetchAndUpdate:function(w){this._currentlyFetching=true;k.getNotifications(w,function(x){var y=p(this._pendingNotifs)?x:this._getNotifsWithCurrentOrder(x),z={},aa={},ba={};o(y).forEach(function(ca){var da=ca.alert_id;if(!this.state||!this.state.readState[da])z[da]=j.isRead(da);if(!this.state||!this.state.hiddenState[da])aa[da]=i.isHidden(da);if(!this.state||!this.state.gnfState[da])ba[da]=h.gaveGNF(da);});this._currentlyFetching=false;this.setState({notifs:y,canFetchMore:k.canFetchMore()||k.getCount()!=Object.keys(y).length,readState:r(this.state.readState,z),hiddenState:r(this.state.hiddenState,aa),gnfState:r(this.state.gnfState,ba)});}.bind(this));},_fetchAndUpdateAll:function(){var w={};Object.keys(this._pendingNotifs).forEach(function(x){var y=i.isHidden(x);if(y!=this.state.hiddenState[x])w[x]=i.isHidden(x);}.bind(this));if(!p(w))this.setState({hiddenState:r(this.state.hiddenState,w)});this._pendingNotifs={};this._fetchAndUpdate(k.getCount());},_fetchNextSet:function(){if(!this._currentlyFetching){var w=Object.keys(this.state.notifs).length;this._fetchAndUpdate(w+this.props.numPerPage);}},_onScrollAndUpdate:function(w){if(this._currentlyFetching||!this.state.canFetchMore)return;if(w)this._fetchNextSet();},_onChevronShow:function(){this.setState({showingChevron:true});},_onChevronHide:function(){this.setState({showingChevron:false});},componentDidUpdate:function(w){var x=j.getUnseenIDs();if(!p(this._pendingNotifs))x=x.filter(function(y){return !this._pendingNotifs[y];}.bind(this));if(x.length&&this.props.paused)m.markNotificationsAsSeen(x);if(!w.hasEverBeenOpened&&this.props.hasEverBeenOpened){if(x.length>this.props.numPerPage){this._fetchAndUpdate(x.length);}else this._fetchNextSet();return;}if(w.paused&&!this.props.paused){this._shouldScroll=false;setTimeout(this._fetchAndUpdateAll,0);return;}},render:function(){var w=this.props.listRenderer;return (n.createElement(w,{hasEverBeenOpened:this.props.hasEverBeenOpened,paused:this.props.paused,tracking:this.props.tracking,negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,businessID:this.props.businessID,maxHeight:this.props.maxHeight,useChevron:this.props.useChevron,notifs:this.state.notifs,afterScroll:this._onScrollAndUpdate,onChevronShow:this._onChevronShow,onChevronHide:this._onChevronHide,canFetchMore:this.state.canFetchMore,hiddenState:this.state.hiddenState,readState:this.state.readState,gnfState:this.state.gnfState,showingChevron:this.state.showingChevron,shouldScroll:this._shouldScroll,upsell:this.props.upsell||null}));}});e.exports=v;},null);
__d("NotificationListPropTypes",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j={negativeTracking:i.object,tracking:i.string,useChevron:i.bool,notifs:i.object,afterScroll:i.func,onChevronShow:i.func,onChevronHide:i.func,canFetchMore:i.bool,hiddenState:i.object,readState:i.object,gnfState:i.object,showingChevron:i.bool,paused:i.bool,maxHeight:i.number,shouldScroll:i.bool,upsell:i.object};e.exports=j;},null);
__d("FlexibleBlock.react",["LeftRight.react","React","cx","invariant","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=k({left:true,right:true});function m(o){j(o.flex&&o.flex in n.FLEX);j(o.children&&o.children.length===2);}var n=h.createClass({displayName:"FlexibleBlock",render:function(){m(this.props);var o,p=this.props.children[0],q=this.props.children[1],r=this.props.flex==l.left,s;if(r){s=p;o=g.DIRECTION.right;}else{s=q;o=g.DIRECTION.left;}var t=h.createElement("div",{className:"_42ef"},s);return (h.createElement(g,h.__spread({},this.props,{direction:o}),r?t:this.props.children[0],r?this.props.children[1]:t));}});n.FLEX=l;e.exports=n;},null);
__d("ReadToggle.react",["React","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.PropTypes,m=g.createClass({displayName:"ReadToggle",propTypes:{isRead:l.bool.isRequired,onClick:l.func,readLabel:l.node,unreadLabel:l.node},getDefaultProps:function(){return {onClick:i};},render:function(){if(this.props.isRead){return (g.createElement("div",{"aria-label":this.props.readLabel,className:this._getClasses(),"data-hover":"tooltip","data-tooltip-alignh":"center",onClick:this.props.onClick}));}else return (g.createElement("div",{"aria-label":this.props.unreadLabel,className:this._getClasses(),"data-hover":"tooltip","data-tooltip-alignh":"center",onClick:this.props.onClick,role:"button",tabIndex:"0"}));},_getClasses:function(){return j(this.props.className,((!this.props.isRead?"_5c9q":'')+(this.props.isRead?' '+"_5c9_":'')));}});e.exports=m;},null);
__d("NotificationListItem.react",["AsyncResponse","BizSiteIdentifier.brands","BanzaiLogger","CloseButton.react","Event","FlexibleBlock.react","ImageBlock.react","Keys","List.react","NotificationPhotoThumbnail","NotificationTokens","NotificationURI","NotificationUserActions","React","TextWithEntities.react","ReadToggle.react","Timestamp.react","VaultBoxURI","XUIButton.react","PopoverMenu.react","ReactXUIMenu","cx","invariant","mergeObjects","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();var fa=aa.Item;function ga(ja,ka){return t.createElement("span",{className:"fwb"},ja);}function ha(ja){return !!(ja&&ja.id&&!ja.is_facebook_app);}var ia=t.createClass({displayName:"NotificationListItem",getInitialState:function(){return {showingOptions:false,negativeFeedbackConfirmation:null,canReportAsSpam:false,spamReportConfirmation:null,sendingFeedback:false,mayUndoHide:false,genericNegativeFeedbackConfirmation:null,isBizSite:h.isBizSite()};},_onKeyDownItem:function(ja){if(k.getKeyCode(ja.nativeEvent)==n.RETURN)this._markItemRead();},_markItemReadIfUnreadFromReadButton:function(){if(!this.props.isRead)s.setNextIsFromReadButton(true);this._markItemReadIfUnread();},_markItemReadIfUnread:function(){!this.props.isRead&&this._markItemRead();},_markItemRead:function(){s.markNotificationsAsRead([this.props.alert_id]);},_onFeedbackError:function(ja){g.defaultErrorHandler(ja);this.setState({sendingFeedback:false});},_onHideSuccess:function(ja){var ka=ja.getPayload();ca(ka.confirmation);this.setState({negativeFeedbackConfirmation:ka.confirmation,canReportAsSpam:ka.canReportAsSpam,sendingFeedback:false,showingOptions:true});},_onHideAppSuccess:function(ja){var ka=ja.getPayload(),la=ka.confirmation,ma=ka.canReportAsSpam;ca(la);this.setState({negativeFeedbackConfirmation:la,canReportAsSpam:ma,mayUndoHide:true,sendingFeedback:false,showingOptions:true});},_onSpamReportSuccess:function(ja){var ka=ja.getPayload().spamReportConfirmation;this.setState({negativeFeedbackConfirmation:null,spamReportConfirmation:ka,sendingFeedback:false});},_onHide:function(){s.markNotificationAsHidden(this.props.alert_id,this._onHideSuccess,this._onFeedbackError);this.setState({sendingFeedback:true,mayUndoHide:true});},_onShowSuccess:function(){this.setState({genericNegativeFeedbackConfirmation:null,negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false});},_onShow:function(){var ja=this.props.negative?this.props.negative.subscription_level:null;s.markNotificationAsVisible(this.props.alert_id,ja,this._onShowSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_onReportSpam:function(){s.markNotificationAsSpam(this.props.alert_id,this._onSpamReportSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsHidden:function(){s.markAppAsHidden(this.props.alert_id,this.props.application.id,this._onHideAppSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsVisible:function(){s.markAppAsVisible(this.props.alert_id,this.props.application.id,function(){this.setState({negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false,mayUndoHide:false});}.bind(this),this._onFeedbackError);this.setState({sendingFeedback:true});},_renderAttachedImage:function(ja){if(ja)return (t.createElement("img",{src:ja.uri,className:"_42td","aria-hidden":true}));return t.createElement("span",null);},_getModifiedTrackingString:function(ja){return JSON.stringify(da(JSON.parse(this.props.tracking),ja));},_onClickCloseButton:function(){if(this.props.useChevron){this.showCloseOptionOnMenuClose=true;}else this.setState({showingOptions:true});},_onCancelNegativeFeedback:function(){this.setState({showingOptions:false});},shouldComponentUpdate:function(ja,ka){return (this.props.visible!==ja.visible||this.props.isRead!==ja.isRead||this.props.timestamp!==ja.timestamp||this.props.gnfGiven!==ja.gnfGiven||this.state.showingOptions!==ka.showingOptions||this.state.sendingFeedback!==ka.sendingFeedback||this.state.canReportAsSpam!==ka.canReportAsSpam||this.state.spamReportConfirmation!==ka.spamReportConfirmation);},_onChevronHide:function(){this.props.onChevronHide();this._logChevronEvent('close');if(this.showCloseOptionOnMenuClose){this.showCloseOptionOnMenuClose=false;this._turnOff();}},_turnOff:function(){var ja=ha(this.props.application)?this._markAppAsHidden:this._onHide;ja();},_onChevronShow:function(){this.props.onChevronShow();this._logChevronEvent('open');},_logChevronEvent:function(ja){var ka={event:ja,notif_type:this.props.notif_type,notif_id:parseInt(q.untokenizeIDs([this.props.alert_id])[0],10)};i.log('NotifJewelMenuLoggerConfig',ka);},_onGenericSuccess:function(ja){this.setState({showingOptions:true,sendingFeedback:false,genericNegativeFeedbackConfirmation:ja});},_onClickGenericNegative:function(){this.setState({sendingFeedback:true,mayUndoHide:true});s.giveGenericNegativeFeedback(this.props.alert_id,this._onGenericSuccess,this._onFeedbackError);},_undoGenericNegative:function(){this.setState({sendingFeedback:true});s.undoGenericNegativeFeedback(this.props.alert_id,this._onShowSuccess,this._onFeedbackError);},_onOkayNegative:function(){this.setState({showingOptions:false,negativeFeedbackConfirmation:null,genericNegativeFeedbackConfirmation:null,spamReportConfirmation:null,mayUndoHide:false});},render:function(){if(!this.props.visible&&!this.state.mayUndoHide)return t.createElement("li",{className:"_4_62"});var ja=this.props.negative,ka=this.props.negativeTracking,la=(("_33c")+(!this.props.isRead?' '+"_4af":'')+(this.state.showingOptions?' '+"_4ag":'')+(this.state.sendingFeedback?' '+"_4m8s":''));if(this.state.negativeFeedbackConfirmation){var ma=this.state.negativeFeedbackConfirmation,na,oa;if(this.state.canReportAsSpam)if(!this.props.useChevron){na=t.createElement("span",null,t.createElement("span",{className:"mhs"},"Â·"),t.createElement("a",{href:"#",onClick:this._onReportSpam},ea._("Zg\u0142o\u015b aplikacj\u0119 wysy\u0142aj\u0105c\u0105 spam")));}else oa=t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onReportSpam,className:"mls"},ea._("Zg\u0142o\u015b aplikacj\u0119 wysy\u0142aj\u0105c\u0105 spam")));var pa=ha(this.props.application)?this._markAppAsVisible:this._onShow,qa=!this.props.useChevron?t.createElement("a",{href:"#",onClick:pa,className:"mls"},ea._("Cofnij")):null,ra=this.props.useChevron?t.createElement(o,{border:"none",spacing:"small",className:"_jeq"},t.createElement("li",null,t.createElement("a",{href:"#",onClick:pa,className:"mls"},ea._("Cofnij"))),oa,t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},ea._("OK")))):null;return (t.createElement("li",{className:la,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:ga,ranges:ma.ranges,aggregatedranges:ma.aggregated_ranges,text:ma.text}),qa,na),ra));}var sa=this.state.spamReportConfirmation;if(sa){var ta=this.props.useChevron?t.createElement(o,{border:"none",spacing:"small",className:"_jeq"},t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},ea._("OK")))):null;return (t.createElement("li",{className:la,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:ga,ranges:sa.ranges,aggregatedranges:sa.aggregated_ranges,text:sa.text})),ta));}if(this.state.genericNegativeFeedbackConfirmation){ma=this.state.genericNegativeFeedbackConfirmation;var ua=ja?t.createElement("li",null,t.createElement("a",{href:"#","data-gt":ab,onClick:this._turnOff,className:"mls",ref:"closeButton"},ja.menu_option_text)):null;return (t.createElement("li",{className:la,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:ga,ranges:ma.ranges,aggregatedranges:ma.aggregated_ranges,text:ma.text})),t.createElement(o,{border:"none",spacing:"small",className:"_jeq"},t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._undoGenericNegative,className:"mls"},ea._("Cofnij"))),ua,t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},ea._("OK"))))));}if(this.state.showingOptions&&!this.props.useChevron){var va=ha(this.props.application)?this._markAppAsHidden:this._onHide;return (t.createElement("li",{className:la,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement("div",null,t.createElement(u,{interpolator:ga,ranges:ja.confirm_question.ranges,aggregatedranges:ja.confirm_question.aggregated_ranges,text:ja.confirm_question.text})),t.createElement("div",{className:"mts"},t.createElement(y,{"data-gt":this._getModifiedTrackingString(ka.confirm),href:{url:'#'},label:ja.turn_off,use:"confirm",onClick:va,disabled:this.state.sendingFeedback}),t.createElement(y,{"data-gt":this._getModifiedTrackingString(ka.cancel),href:{url:'#'},label:ea._("Kontynuuj"),onClick:this._onCancelNegativeFeedback,disabled:this.state.sendingFeedback})))));}var wa=null;if(this.props.title)wa=t.createElement(u,{interpolator:ga,ranges:this.props.title.ranges,aggregatedranges:this.props.title.aggregated_ranges,text:this.props.title.text,renderEmoji:true,renderEmoticons:true});var xa=null,ya=null;if(ja){var za=this._onClickCloseButton,ab;ab=this._getModifiedTrackingString(ka.click);var bb=(("_4ah")+(' '+"_55m9"));xa=t.createElement(j,{className:bb,"data-gt":ab,size:"medium",tooltip:ja.button_tooltip,onClick:za,ref:"closeButton"});}var cb=r.localize(this.props.url),db=null;if(!this.props.noPhotoPreviews)db=p.getThumbnail(this.props.attachments,this.props.attached_story,this.props.feedback_context);var eb=db&&r.snowliftable(cb),fb=r.isVaultSetURI(cb),gb=r.isAlbumDraftRecoveryDialogURI(cb),hb=((this.props.useChevron?"_55ma":'')+(' '+"_55m9")),ib=t.createElement(v,{className:hb,isRead:!!this.props.isRead,onClick:this._markItemReadIfUnreadFromReadButton,readLabel:ea._("Przeczytane"),unreadLabel:ea._("Oznacz jako przeczytane")}),jb=null;if(this.props.useChevron){xa=null;var kb=(("_1_0c")+(' '+"_55m9")),lb=null;if(ja)lb=t.createElement(fa,{onclick:this._onClickCloseButton,"data-gt":ab,ref:"closeButton"},t.createElement("div",{className:"_3-y-"},ja.menu_option_title),t.createElement("div",{className:"_3-y_"},ja.menu_option_text));var mb=this.props.gnfGiven?t.createElement(fa,{onclick:this._undoGenericNegative},t.createElement("div",{className:"_3-y-"},ea._("Nie interesuje Ci\u0119 to")),t.createElement("div",{className:"_3-y_"},ea._("Cofnij"))):t.createElement(fa,{onclick:this._onClickGenericNegative},t.createElement("div",{className:"_3-y-"},ea._("Nie interesuje Ci\u0119 to?")),t.createElement("div",{className:"_3-y_"},ea._("Powiadom nas o tym"))),nb=t.createElement(aa,null,mb,lb);jb=t.createElement(z,{alignh:"right",menu:nb,className:kb,onShow:this._onChevronShow,onHide:this._onChevronHide},t.createElement("div",{className:"_1_0d"}));}var ob=(eb||fb||gb)?cb:this.props.ajaxify_url,pb=null,qb=null,rb=fb?x.getSyncedTabURI().toString():cb;if(eb){pb='theater';}else if(gb){pb='async-post';}else if(fb||ob)pb='dialog';var sb=null,tb=this.props.actors[0];if(tb)sb={backgroundImage:'url('+tb.profile_picture.uri+')'};var ub=false;this.props.attachments.forEach(function(vb){if(ub)return;ub=vb.style_list.indexOf("notification_target")>=0||vb.style_list.indexOf("question")>=0;if(ub)return;});return (t.createElement("li",{className:la,"data-gt":this.props.tracking,onMouseLeave:ya},t.createElement("div",{className:"anchorContainer"},t.createElement("a",{href:rb,ajaxify:ob,className:(("_33e")+(this.props.useChevron?' '+"_1_0e":'')),rel:pb,onClick:qb,onMouseDown:this._markItemRead,onKeyDown:this._onKeyDownItem},t.createElement(m,null,t.createElement("span",{style:sb,className:((!this.props.isNotifsPage?"_33h":'')+(this.props.isNotifsPage?' '+"_12u1":''))}),t.createElement(l,{flex:l.FLEX.left},t.createElement("div",{className:"_4l_v"},wa,t.createElement(m,{className:(("_33f")+(this.state.isBizSite?' '+"_2g48":''))},t.createElement("img",{className:"_10cu",src:this.props.icon.uri}),t.createElement("span",null,t.createElement(w,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose,className:"_33g"})))),this._renderAttachedImage(db)))),ib,xa,jb)));}});e.exports=ia;},null);
__d("NotificationJewelList.react",["Animation","Event","LoadingIndicator.react","NotificationListPropTypes","NotificationListItem.react","React","ScrollableArea.react","Vector","cx","debounce","fbt","getObjectValues","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=160,u=530,v=40,w=64,x=430,y=l.createClass({displayName:"NotificationJewelList",propTypes:j,_isLoadingIndicatorVisible:function(){var z=this.refs.loading;if(!z)return false;var aa=l.findDOMNode(this.refs.scrollable),ba=n.getElementDimensions(aa).y;if(ba===0)return false;var ca=n.getElementPosition(aa).y+ba,da=n.getElementPosition(l.findDOMNode(z)).y;da-=v;return da<ca;},_calculateHeight:function(){var z=n.getViewportDimensions().y,aa=Math.min(this.props.maxHeight||u,z-t);if(this.props.upsell)return Math.max(aa-w,0);return aa;},_keepOnLoading:function(){if(this.isMounted())this.props.afterScroll(this._isLoadingIndicatorVisible());},_renderItems:function(){return r(this.props.notifs).map(function(z){var aa=z.alert_id;return (l.createElement(k,l.__spread({key:aa,visible:!this.props.hiddenState[aa],isRead:this.props.readState[aa],gnfGiven:this.props.gnfState[aa],negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,useChevron:this.props.useChevron,onChevronShow:this.props.onChevronShow,onChevronHide:this.props.onChevronHide,parent:this},z)));}.bind(this));},componentDidMount:function(){var z=l.findDOMNode(this.refs.scrollable);h.listen(window,'resize',p(function(){if(!s(this.props.notifs))new g(z).to('height',this._calculateHeight()+'px').duration(100).go();}.bind(this)));},componentDidUpdate:function(z){if(this.props.paused&&!z.paused)if(this.props.shouldScroll&&this.refs.scrollable)this.refs.scrollable.getArea().scrollToTop(false);setTimeout(this._keepOnLoading,0);},render:function(){var z=this.props.notifs,aa=null,ba=null,ca=x,da=null;if(!s(z)){aa=l.createElement("ul",{"data-gt":this.props.tracking},this._renderItems());ba=this._calculateHeight();}else if(!this.props.canFetchMore)aa=l.createElement("div",{className:"_572e"},q._("Brak nowych powiadomie\u0144"));if(this.props.canFetchMore)da=l.createElement(i,{color:"white",size:"small",ref:"loading",className:"_33i"});var ea=null;if(this.props.upsell){var fa=this.props.upsell.module;ea=l.createElement(fa,l.__spread({},this.props.upsell.props));}var ga=(("_50-t")+(this.props.showingChevron?' '+"_2iy1":''));return (l.createElement("div",{className:ga},l.createElement(m,{ref:"scrollable",width:ca,height:ba,fade:true,persistent:true,onScroll:p(this._keepOnLoading)},aa,da),ea));}});e.exports=y;},null);
__d("NotificationJewelListController",["NotificationList.react","NotificationJewelList.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l){"use strict";this.$NotificationJewelListController0=k;this.$NotificationJewelListController1=l;this.$NotificationJewelListController2=false;this.$NotificationJewelListController3=false;this.$NotificationJewelListController4();}j.prototype.open=function(){"use strict";this.$NotificationJewelListController2=true;this.$NotificationJewelListController4();};j.prototype.pause=function(){"use strict";this.$NotificationJewelListController3=true;this.$NotificationJewelListController4();};j.prototype.unpause=function(){"use strict";this.$NotificationJewelListController3=false;this.$NotificationJewelListController4();};j.prototype.$NotificationJewelListController4=function(){"use strict";i.render(i.createElement(g,{hasEverBeenOpened:this.$NotificationJewelListController2,paused:this.$NotificationJewelListController3,tracking:this.$NotificationJewelListController1.tracking,negativeTracking:this.$NotificationJewelListController1.negativeTracking,shortenTimestamp:this.$NotificationJewelListController1.shortenTimestamp,businessID:this.$NotificationJewelListController1.businessID,maxHeight:this.$NotificationJewelListController1.maxHeight,useChevron:this.$NotificationJewelListController1.useChevron,numPerPage:5,listRenderer:h,upsell:this.$NotificationJewelListController1.upsell||null}),this.$NotificationJewelListController0);};e.exports=j;},null);
__d("PagesMessengerThreadDialogLink.react",["AsyncDialog","AsyncRequest","Link.react","MessageThreadViewSource","PagesMessagingConst","ReactComponentWithPureRenderMixin","React","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q=m.createClass({displayName:"PagesMessengerThreadDialogLink",mixins:[l],propTypes:{threadID:p.string.isRequired,viewer:p.string.isRequired,folder:p.string},getInitialState:function(){return {permalinkURI:'#'};},componentDidMount:function(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function(r){if(r.threadID!==this.props.threadID||r.folder!==this.props.folder)this._getPermalinkURI(r);},render:function(){return (m.createElement(i,{className:this.props.className,href:"#",onClick:this._handleClick,role:"button"},this.props.children));},_handleClick:function(r){r.preventDefault();g.send(new h(this.state.permalinkURI).setRelativeTo(r.target));},_getPermalinkURI:function(r){this.setState(this.getInitialState());var s=r.threadID,t=r.viewer,u=r.folder;d(['MercuryThreadIDMap'],function(v){var w=v.getForFBID(t);w.getFBIDFromClientID(s,function(x){this.isMounted()&&this.setState({permalinkURI:new n(k.LOAD_MESSAGE_THREAD_URI).setQueryData({pageid:t,threadid:s,threadElementID:x,folder:u,source:j.REFRESH_HIGHLANDER_JEWEL}).toString()});}.bind(this));}.bind(this));}});e.exports=q;},null);
__d("HashtagParser",["URLMatcher","getHashtagRegex"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=100,j=30,k=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function l(da){var ea=y(da),fa=0,ga=0;return n(da).map(function(ha){while(fa<ea.length){var ia=ea[fa],ja=ia.offset-ga;if(ja<ha.offset){ga+=ia.token.length-ia.name.length;fa++;}else break;}return {marker:ha.marker,tag:ha.hashtag,rawOffset:ha.offset+ga,offset:ha.offset};});}function m(da){return o(da,t(da));}function n(da){var ea=aa(da);return o(ea,p(da,ea));}function o(da,ea){return r(da).slice(0,j).filter(function(fa){var ga=v(fa.offset,fa.hashtag.length,ea);return !ga&&fa.hashtag.length<=i;});}function p(da,ea){return u(s(da),t(ea));}var q=h();function r(da){var ea=[];da.replace(q,function(fa,ga,ha,ia,ja){ea.push({marker:ha,hashtag:ia,offset:ja+ga.length});});return ea;}function s(da){return ba(da).map(function(ea){return [ea.offset,ea.name.length];});}function t(da){var ea=[],fa,ga=0;while((fa=g.permissiveMatch(da))){var ha=da.indexOf(fa);ea.push([ga+ha,fa.length]);da=da.substring(ha+fa.length);ga+=ha+fa.length;}return ea;}function u(da,ea){var fa=[],ga=0,ha=0,ia=0;while(ga<da.length&&ha<ea.length)if(da[ga][0]>ea[ha][0]){fa[ia++]=ea[ha++];}else fa[ia++]=da[ga++];return fa.concat(da.slice(ga),ea.slice(ha));}function v(da,ea,fa){if(!fa)return false;var ga=x(fa,da);return w(da,ea,fa,ga)||w(da,ea,fa,ga+1);}function w(da,ea,fa,ga){if(!fa[ga])return false;var ha=fa[ga][0],ia=fa[ga][1];return !((da+ea-1<ha)||(da>ha+ia-1));}function x(da,ea){var fa=0,ga=da.length-1;while(fa<=ga){var ha=Math.floor((fa+ga)/2),ia=da[ha][0];if(ia==ea){return ha;}else if(ia<ea){fa=ha+1;}else ga=ha-1;}return ga;}function y(da){var ea=[];da.replace(k,function(fa,ga,ha,ia,ja){ea.push({token:fa,id:ga,type:ha,name:ia,offset:ja});});return ea;}function z(da){return da?da.replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;}function aa(da){return da.replace(k,function(ea,fa,ga,ha,ia){return z(ha);});}function ba(da){var ea=0,fa=0;return y(da).map(function(ga){var ha=da.indexOf(ga.token,fa);fa=ha+1;ha-=ea;var ia=z(ga.name);ea+=ga.token.length-ia.length;if(ha>=0)return {id:ga.id,name:ia,type:ga.type,offset:ha};});}var ca={};ca.parse=l;ca.parseWithoutMentions=m;e.exports=ca;},null);
__d("FacebarResultStoreUtils",["FacebarGlobalOptions"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getQueryFeatures:function(i){var j={};if(g.enableBootstrapRanking){if(i.raw_text)j.FEATURE_QUERY_LENGTH=i.raw_text.length;if(i.tokens){j.FEATURE_QUERY_TOKENS=i.tokens.length;j.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var k=0;k<i.tokens.length;k++)j.FEATURE_QUERY_TOKEN_LENGTH_SUM+=i.tokens[k].length;}}return j;},addFeatures:function(i,j,k,l,m,n){if(!i.features)return;i.features={FEATURE_QUERY_LENGTH:l.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:l.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:l.FEATURE_QUERY_TOKEN_LENGTH_SUM};i.features.FEATURE_IS_EXACT_NAME_MATCH=m;i.features.FEATURE_IS_STOP_WORD_MATCH=n;if(j&&j.length>0){var o=j.split(' ').length,p=0;for(var q=0;q<i.termMatches.length;++q)if(j.search(i.termMatches[q])>=0)p++;i.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=p/o;}if(k.tokens&&k.tokens.length>0){var r=j.search(k.tokens[0]);i.features.FEATURE_FIRST_TERM_MATCH_POSITION=r;i.features.FEATURE_FIRST_TERM_MATCH_TOKEN=j.substring(0,r+k.tokens[0].length).split(' ').length;i.termMatches.some(function(s){if(s.search(k.tokens[0])===0){i.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=k.tokens[0].length/s.length;return true;}return false;});i.features.FEATURE_IN_ORDER_MATCH=1;if(k.tokens.length>1){r=j.search(k.tokens[1]);i.features.FEATURE_SECOND_TERM_MATCH_POSITION=r;i.features.FEATURE_SECOND_TERM_MATCH_TOKEN=j.substring(0,r+k.tokens[1].length).split(' ').length;i.termMatches.some(function(s){if(s.search(k.tokens[1])===0){i.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=k.tokens[0].length/s.length;return true;}return false;});if(i.features.FEATURE_SECOND_TERM_MATCH_TOKEN<i.features.FEATURE_FIRST_TERM_MATCH_POSITION)i.features.FEATURE_IN_ORDER_MATCH=0;}}return i;},processEntityResult:function(i,j,k,l,m,n,o,p,q){var r={semantic:j.toString(),structure:[{type:'ent:'+i,text:k,uid:j}],type:i,cost:l,cache_id_length:0,features:[]};r.tuid=JSON.stringify({semantic:r.semantic,structure:r.structure});if(g.enableBootstrapRanking){r.termMatches=o[j.toString()];r=this.addFeatures(r,k.toLowerCase(),m,n,p,q);}return r;},getRawTextFromStructured:function(i){var j=i.map(function(k){return k.getText();});return j.join('');},getTextFromResult:function(i){var j=i.structure,k='';j.forEach(function(l){k+=l.text;});return k;}};e.exports=h;},null);
__d("HashtagSearchResultUtils",["FacebarResultStoreUtils","HashtagParser","HashtagSearchResultConfig","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={getHashtagFromQuery:function(m){var n=h.parse(m);if(n&&n.length===1&&n[0].offset===0)return n[0].tag;return false;},makeTypeaheadResult:function(m){var n=k._("Znacznik #");return {category:n,path:new j('/hashtag/'+m).toString(),photo:i.image_url,rankType:null,replace_results:i.boost_result?true:false,scaled_score:1,score:0,text:'#'+m,type:'hashtag_exact',uid:'hashtag:'+m};},makeFacebarEntry:function(m){var n=k._("Znacznik #");return {category:n,path:new j('/hashtag/'+m).toString(),photo:i.image_url,replace_results:i.boost_result?true:false,text:'#'+m,type:'hashtag_exact',uid:'hashtag:'+m};},makeFacebarResult:function(m){var n=g.processEntityResult('hashtag_exact','hashtag:'+m,'#'+m,i.hashtag_cost);n.parse={display:[{type:'ent:hashtag_exact',uid:'hashtag:'+m}],remTokens:[],suffix:''};n.tags={hashtag:'hashtag'};return n;}};e.exports=l;},null);
__d("ContextualHelpSearchController",["Event","AsyncRequest","DOM","CSS","Focus","Input","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=400;function o(){this._token=null;this._timerID=0;this._lastQuery=null;this.typing_listener=null;this.clear_listener=null;this.async_request=null;}m(o.prototype,{init:function(p,q,r,s,t,u){this.loader=p;this.search_box=q;this.topics_area=r;this.results_area=s;this.clear_button=t;this.typing_listener=g.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=g.listen(this.clear_button,'click',this.clearResults.bind(this));if(u==null||u.focusSearchBox==null||u.focusSearchBox)k.set(this.search_box);},source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';l.reset(this.search_box);k.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}j.addClass(this.clear_button,'hidden_elem');},update:function(){var p=l.getValue(this.search_box);if(p===this._lastQuery)return;this._lastQuery=p;if(p===''){this.clearResults();return;}this.show(this.loader);var q={query:p,width:this._width||n,source:this.source};this.async_request=new h('/help/ajax/search/').setData(q).setHandler(function(r){this._update(r);}.bind(this));this.async_request.send();},_update:function(p){this.async_request=null;var q=p.getPayload().results;i.setContent(this.results_area,q);this.show(this.results_area);if(l.getValue(this.search_box)===''){this.clearResults();}else j.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(p){var q=[this.loader,this.topics_area,this.results_area];for(var r=0;r<q.length;r++)j.addClass(q[r],'hidden_elem');j.removeClass(p,'hidden_elem');}});e.exports=o;},null);
__d("RequestsJewel",["Animation","AccessibilityLogger","Arbiter","AsyncRequest","AsyncSignal","ChannelConstants","CSS","DOM","Event","LinkController","Parent","ScrollableArea","Vector","$","copyProperties","debounce","ge","shield","fbt","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();var aa=null;z(['FriendBrowserCheckboxController'],function(fa){return aa=fa;});var ba=530,ca=30,da=160;u(ea,{instance:null,getInstance:function(){return ea.instance;},replaceJewelTitle:function(fa,ga){n.setContent(t(fa),ga);},updateFromDOM:function(){if(ea.instance)ea.instance.fromDom();},setInitialHeight:function(){if(ea.instance)ea.instance.setHeight();},maybeLoadJewel:function(){if(ea.instance)ea.instance.maybeLoadJewel();}});function ea(fa,ga,ha){"use strict";ea.instance=this;this.countNew=0;this.jewel=fa;this.jewelFlyoutCase=fa.getRoot();this.jewelFlyout=w('fbRequestsFlyout');this.newCountSpan=w('newRequestCount');this.folder=ga;this.doNewMarkRead=ha;this.openTimestamp=0;this.$RequestsJewel0={};this.$RequestsJewel1=0;this.shouldClearPredictionAssocOnClick=false;var ia=w('requestsMarkReadButton');if(ia)o.listen(ia,'click',x(this.$RequestsJewel2,this));this.jewel.subscribe('marked-seen',x(this.$RequestsJewel3,this));this.jewel.subscribe('closed',x(this.$RequestsJewel4,this));this.jewel.subscribe('updated',this.$RequestsJewel5.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel6.bind(this));p.registerHandler(this.$RequestsJewel7.bind(this));i.subscribe(l.getArbiterType('jewel_requests_add'),this.$RequestsJewel8.bind(this));i.subscribe(l.getArbiterType('jewel_friending_notifs'),this.$RequestsJewel9.bind(this));i.subscribe(l.getArbiterType('jewel_requests_remove_old'),this.$RequestsJewela.bind(this));i.subscribe(l.getArbiterType('friend_requests_seen'),this.$RequestsJewelb.bind(this));o.listen(this.jewelFlyout,'submit',function(ka){var la=q.byClass(ka.getTarget(),'objectListItem');if(la){m.removeClass(la,'jewelItemNew');m.addClass(la,'jewelItemResponded');}}.bind(this));var ja=n.find(w('fbRequestsJewel'),'a[rel="toggle"]');o.listen(ja,'focus',function(ka){h.logFocusIn();}.bind(this));this.setupScroll();o.listen(window,'resize',v(function(){this.$RequestsJewelc();}.bind(this)));}ea.prototype.setupScroll=function(){"use strict";var fa=n.scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(fa){this.$RequestsJeweld=fa;this.$RequestsJewele=0;this.$RequestsJewelf=o.listen(fa,'scroll',this.$RequestsJewelg.bind(this),o.Priority.$RequestsJewelh);}};ea.prototype.fromDom=function(){"use strict";n.scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach(function(fa){var ga=fa.getAttribute('id');if(ga){var ha=w(ga+'_status'),ia=this.$RequestsJeweli(ga);if(ia.requester)this.$RequestsJewel0[ia.requester]=ga;++this.$RequestsJewel1;}}.bind(this));this.$RequestsJewelj();};ea.prototype.$RequestsJewelk=function(fa){"use strict";var ga=fa.match(/^(\d+)_(\d+)/);return (ga)?{requester:ga[1],type:ga[2]}:(void 0);};ea.prototype.$RequestsJeweli=function(fa){"use strict";var ga=fa?this.$RequestsJewelk(fa):(void 0),ha;if(ga&&ga.requester){ha=parseInt(ga.requester,10);if(isNaN(ha))ha=(void 0);}var ia;if(ga&&ga.type){ia=parseInt(ga.type,10);if(isNaN(ia))ia=(void 0);}return {requester:ha,type:ia};};ea.prototype.$RequestsJewell=function(){"use strict";if(this.countNew>0)this.countNew-=1;};ea.prototype.$RequestsJewel7=function(fa,event){"use strict";var ga=q.byClass(fa,'jewelItemNew');if(ga&&q.byClass(ga,'fbRequestList')&&q.byClass(ga,'beeperEnabled')){var ha=this.$RequestsJewelk(ga.id);ha&&this.$RequestsJewel3(ha.requester,ha.type);this.$RequestsJewell();i.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});m.removeClass(ga,'jewelItemNew');}return true;};ea.prototype.$RequestsJewelm=function(){"use strict";return n.scry(this.jewelFlyout,'.uiScrollableArea')[0];};ea.prototype.$RequestsJewelg=function(){"use strict";var fa=n.scry(this.$RequestsJeweld,'.uiMorePager');if(!fa)return;var ga=fa.pop();if(ga){var ha=s.getElementPosition(ga,'viewport').y;if(ha>0)m.addClass(q.byClass(this.$RequestsJeweld,'uiScrollableArea'),'contentAfter');var ia=n.find(ga,'a');if(!ia)return;var ja=s.getElementPosition(ia,'viewport').y;if(ja==this.$RequestsJewele)return;var ka=s.getElementPosition(this.$RequestsJeweld,'viewport').y+s.getElementDimensions(this.$RequestsJeweld).y;if(ja-300<ka&&ja>0){this.$RequestsJewele=ja;var la=ia.getAttribute('ajaxify');if(la){new j(la).setRelativeTo(ia).setStatusElement(q.byClass(ia,'stat_elem')).send();}else aa&&aa.getInstance('jewel').showMore();}}};ea.prototype.$RequestsJewel9=function(fa,ga){"use strict";if(!ga||this.jewel.isOpen())return;if(ga.obj.notif_type!=='friend_confirmed')return;if(w('fbRequestsJewelLoading')){new j().setURI('/ajax/requests/loader/').send();return;}var ha={};ha.reloadcontent=true;new j().setURI('/ajax/requests/loader/').setData(ha).send();};ea.prototype.$RequestsJewel8=function(fa,ga){"use strict";if(!ga)return;var ha=ga.obj.from,ia=ga.obj.suggester,ja=this.$RequestsJeweli(this.$RequestsJewel0[ha]).type,ka=ja===19&&!ia;if(!ka&&(ja||this.jewel.isOpen()))return;if(w('fbRequestsJewelLoading')){new j().setURI('/ajax/requests/loader/').send();}else{var la={};la.reloadcontent=true;new j().setURI('/ajax/requests/loader/').setData(la).send();}};ea.prototype.$RequestsJewela=function(fa,ga){"use strict";if(!ga||this.jewel.isOpen()||w('fbRequestsJewelLoading')!==null)return;var ha=this.$RequestsJewel0[ga.obj.from],ia=ha&&w(ha);if(ia){if(m.hasClass(ia,'jewelItemNew')){this.$RequestsJewell();i.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!m.hasClass(ia,'jewelItemResponded')){n.remove(ia);delete this.$RequestsJewel0[ga.obj.from];--this.$RequestsJewel1;this.$RequestsJewelj();}}};ea.prototype.$RequestsJewel2=function(){"use strict";this.jewel.markSeen();this.$RequestsJewelo();};ea.prototype.$RequestsJewel3=function(fa,ga){"use strict";var ha=n.scry(this.jewelFlyout,'li');new k('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:ha[0].id}).send();var ia=typeof fa!='undefined'&&typeof ga!='undefined'?{requester:fa,type:ga}:{};this.doNewMarkRead&&new k('/ajax/requests/mark_read/',ia).send();};ea.prototype.$RequestsJewelb=function(fa,ga){"use strict";i.inform('jewel/count-updated',{jewel:'requests',count:0});};ea.prototype.$RequestsJewelo=function(fa,ga){"use strict";n.scry(this.jewel.root,'li.jewelItemNew').forEach(function(ha){m.removeClass(ha,'jewelItemNew');});};ea.prototype.$RequestsJewel5=function(fa,ga){"use strict";this.countNew=ga.count;m.conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);m.conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var ha=this.countNew==1?y._("NOWE ZAPROSZENIA ({num})",[y.param("num",this.countNew)]):y._({"*":"NOWE ZAPROSZENIA ({num})"},[y.param("num",this.countNew,[0])]);n.setContent(this.newCountSpan,ha);}};ea.prototype.$RequestsJewelj=function(){"use strict";n.scry(this.jewelFlyout,'li.empty').forEach(function(fa){m.conditionShow(fa,this.$RequestsJewel1<=0);}.bind(this));};ea.prototype.$RequestsJewel6=function(){"use strict";i.inform('requestsJewel/opened');var fa=w('fbRequestsJewelLoading'),ga=this.$RequestsJewelm();if(!fa&&!ga){this.unhandledRequest=true;}else if(fa){var ha=Date.now();if(this.openTimestamp+5000<ha){this.openTimestamp=ha;new j().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var ia=Object.keys(this.$RequestsJewel0);if(ia.length>0)new j().setURI('/friends/requests/log_impressions').setData({ids:ia.join(','),ref:'jewel'}).send();}ga&&r.poke(ga);};ea.prototype.$RequestsJewel4=function(){"use strict";i.inform('requestsJewel/closed');this.$RequestsJewelo();};ea.prototype.$RequestsJewelp=function(){"use strict";return Math.min(Math.max(s.getViewportDimensions().y-da,ca),ba);};ea.prototype.$RequestsJewelc=function(){"use strict";if(this.$RequestsJewelm())new g(this.$RequestsJewelm()).to('height',this.$RequestsJewelp()+'px').duration(100).go();};ea.prototype.setHeight=function(){"use strict";this.$RequestsJewelm().style.height=this.$RequestsJewelp()+'px';};ea.prototype.maybeLoadJewel=function(){"use strict";if(this.unhandledRequest){this.unhandledRequest=false;this.$RequestsJewel6();}};e.exports=ea;},null);
__d("JewelX",["Event","Arbiter","ArbiterMixin","CSS","DOM","HTML","Keys","TabIsolation","Toggler","Run","csx","copyProperties","emptyFunction","reportData","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=function(w,x){w&&x&&this.init(w,x);};r(v,{_instancesByName:{},_resizeListener:null});r(v.prototype,i,{init:function(w,x){this.name=x.name;this.root=w;this.badge=x.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;this.bootload_module=x.bootload_module;this.bootload_args=x.bootload_args;this.bootload_done=false;this.togglerInstance=o.createInstance(w).setSticky(false);p.onAfterLoad(function(){return this._setupBootload();}.bind(this));if(x.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this._onPrePageTransition.bind(this));v._instancesByName[this.name]=this;var y=this.getFlyout(),z=new n(y);o.createInstance(y).setSticky(false);o.listen('show',this.root,function(aa){this._logFirstClick();this.hasNew()&&this.markSeen();this.reset();this.inform('opened');h.inform('layer_shown',{type:'Jewel'});z.enable();this.setupEvents();this._setupBootload();}.bind(this));o.listen('hide',this.root,function(aa,ba){this.hasNew()&&this.markSeen();this.reset();this.inform('closed');h.inform('layer_hidden',{type:'Jewel'});z.disable();this.removeEvents();}.bind(this));h.subscribe('jewel/count-updated',function(aa,ba){ba.jewel==this.name&&this.update(ba);}.bind(this));h.subscribe('jewel/count-initial',function(aa,ba){ba.jewel==this.name&&this.setInitial(ba);}.bind(this));h.subscribe('jewel/reset',function(aa,ba){ba.jewel==this.name&&this.reset();}.bind(this));h.subscribe('jewel/focus',function(aa,ba){if(this.isOpen())o.hide(this.root);}.bind(this));v._resizeListener=v._resizeListener||(function(){var aa=null;return g.listen(window,'resize',function(){clearTimeout(aa);aa=u(h.inform.bind(h,'jewel/resize'),100);});})();},getRoot:function(){return this.root;},getFlyout:function(){if(typeof this._flyout==='undefined')this._flyout=k.find(this.root,".__tw");return this._flyout;},hasNew:function(){return j.hasClass(this.root,'hasNew');},isOpen:function(){return j.hasClass(this.root,'openToggler');},reset:function(){j.removeClass(this.root,'hasNew');},setContent:function(w){var x=k.find(this.root,'ul.jewelItemList');k.setContent(x,l(w));},update:function(w){this.countNew=w.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var x=isNaN(this.countNew)||this.countNew>0;j.conditionClass(this.root,'hasNew',x);this.inform('updated',w);},setInitial:function(w){this.initialCount=w;},setupEvents:function(){this.escHandler=g.listen(document.documentElement,'keydown',function(w){if(w.keyCode===m.ESC&&this.isOpen())o.hide(this.root);}.bind(this));},removeEvents:function(){if(this.escHandler){this.escHandler.remove();this.escHandler=null;}},markSeen:function(){h.inform('jewel/count-updated',{jewel:this.name,count:0},h.BEHAVIOR_STATE);this.inform('marked-seen');},_onPrePageTransition:function(w,x){if(!this._isSnowliftURI(x.from)&&!this._isSnowliftURI(x.to))this.togglerInstance&&this.togglerInstance.hide();},_isSnowliftURI:function(w){return w&&w.getQueryData().hasOwnProperty('theater');},_logFirstClick:function(){this._logFirstClick=s;t('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});},_setupBootload:function(){if(this.bootload_done||!this.bootload_module)return;this.bootload_done=true;this.bootload_module.load().then(function(w){var x=w[0];return new x(this,this.bootload_args);}.bind(this));}});e.exports=v;},null);
__d("LitestandNewsfeedCountUpdater",["Arbiter","AsyncRequest","LitestandMessages","LitestandSidebarBookmarkConfig","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l,m;function n(){m&&clearTimeout(m);if(l)return;m=setTimeout(o,j.nf_count_query_interval_ms);}function o(){if(l)return;new h().setURI('/ajax/litestand/newsfeed_count').setHandler(function(r){if(l)return;p(r.getPayload());n();}).setAllowCrossPageTransition(true).send();}function p(r){g.inform(i.UPDATE_HOME_COUNT,{count:r,onHome:l},g.BEHAVIOR_STATE);}var q={init:function(){q.init=k;g.subscribe(i.NEWSFEED_LOAD,function(){l=true;p(0);});g.subscribe(i.LEAVE_HOME,function(){l=false;n();});n();}};e.exports=q;},null);
__d("LitestandChromeHomeCount",["Arbiter","CSS","DOM","Event","LitestandMessages","LitestandNewsfeedCountUpdater","Parent","UserAgent_DEPRECATED","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=20,r,s,t,u,v,w={init:function(x){v=x;s=i.find(document,"div._uaw ._5ahz");r=s.parentNode;t=m.byClass(r,"_1ayn");u=false;g.subscribe(k.UPDATE_HOME_COUNT,function(y,z){w.updateBadge(z.onHome?0:z.count);});j.listen(t,'click',function(event){var y=event.getModifiers();if(y.shift||(n.osx()&&y.meta)||(n.windows()&&y.control))w.updateBadge(0);});l.init();w.updateBadge(v);},updateBadge:function(x){v=x;var y=x>0;w.toggleBadge(y);if(y){var z=x>q?q+'+':x;i.setContent(s,z);}},toggleBadge:function(x){if(u===x)return;u=x;h.conditionClass(r,"_5ahy",!x);}};e.exports=w;},null);
__d("MercuryJewelCountControl",["Arbiter","MercuryServerRequests","MercuryThreadInformer","MercuryUnseenState","UserActivity"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m){"use strict";var n=h.get(),o=i.get();this.$MercuryJewelCountControl2=j.get();this.render();n.subscribe('model-update-completed',function(p,q){this.$MercuryJewelCountControl4(false);}.bind(this));o.subscribe('unseen-updated',function(){return this.render();}.bind(this));this.$MercuryJewelCountControl5=m;this.$MercuryJewelCountControl5.subscribe('marked-seen',function(){this.$MercuryJewelCountControl4(true);}.bind(this));}l.prototype.render=function(){"use strict";g.inform('jewel/count-updated',{jewel:'mercurymessages',count:this.$MercuryJewelCountControl2.getUnseenCount()},g.BEHAVIOR_STATE);};l.prototype.$MercuryJewelCountControl4=function(m){"use strict";if(m||(this.$MercuryJewelCountControl5.isOpen()&&k.isActive()))this.$MercuryJewelCountControl2.markAsSeen();};l.constructStores=function(){"use strict";j.get();};e.exports=l;},null);
__d("P2PJewelBanner.react",["Image.react","Layout.react","Link.react","React","XUIGrayText.react","cx","emptyFunction","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=h.FillColumn,p=h.Column,q=j,r=q.PropTypes,s=j.createClass({displayName:"P2PJewelBanner",propTypes:{actionURI:r.oneOfType([r.string,r.object]).isRequired,actionText:r.string.isRequired,bodyText:r.oneOfType([r.string,r.object]).isRequired,icon:r.oneOf(['warning','coin']),onClick:r.func.isRequired,titleText:r.string.isRequired},getDefaultProps:function(){return {actionURI:'#',onClick:m};},getImagePath:function(){var t=this.props.icon;if(t==="warning"){return n("/images/p2p/receiver-risk-notification.png");}else return n("/images/p2p/receiver-nux-notification.png");},render:function(){return (j.createElement("div",{className:"_5d0n",onClick:this.props.onClick},j.createElement(h,null,j.createElement(p,{className:"_5d0o"},j.createElement(g,{className:"_5d0q",height:28,src:this.getImagePath(),width:28})),j.createElement(o,{className:"_2pic"},j.createElement(k,{display:"block",shade:"medium",weight:"bold"},this.props.titleText),j.createElement(k,{display:"block",shade:"medium"},this.props.bodyText),j.createElement(i,{className:"_5d0t",href:this.props.actionURI,target:"_blank"},this.props.actionText)))));}});e.exports=s;},null);
__d("P2PPendingPushFailJewelBanner.react",["P2PJewelBanner.react","P2PTransferParam","XP2PTransactionDetailController","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"P2PPendingPushFailJewelBanner",propTypes:{transfer:m.object.isRequired},getActionText:function(){return k._("Zaktualizuj kart\u0119");},render:function(){var o=this.props.transfer;return (j.createElement(g,{actionText:k._("Zaktualizuj kart\u0119"),bodyText:k._("Karta prawdopodobnie utraci\u0142a wa\u017cno\u015b\u0107 lub jest nieprawid\u0142owa. Zaktualizuj kart\u0119, aby otrzyma\u0107 {amount} {currency} od u\u017cytkownika {sender_name}.",[k.param("currency",o.currency),k.param("amount",o.amount),k.param("sender_name",o.sender.name)]),icon:"warning",actionURI:(i.getURIBuilder()).setString('id',o[h.TRANSFER_ID]).getURI(),titleText:k._("Zaktualizuj kart\u0119")}));}});e.exports=n;},null);
__d("P2PLoadingMask.react",["React","XUISpinner.react","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"P2PLoadingMask",propTypes:{visible:k.bool},getDefaultProps:function(){return {visible:false};},render:function(){if(!this.props.visible)return null;return (g.createElement("div",{className:"_3de"},g.createElement(h,{background:"dark",size:"large",className:"_3df"}),g.createElement("div",{className:"_3dg"})));}});e.exports=l;},null);
__d("P2PAcceptMoneyDialog.react",["BootloadedComponent.react","Bootloader","CurrentEnvironment","P2PDialog.react","P2PLoadingMask.react","React","Run","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=l,q=p.PropTypes,r=i.messengerdotcom,s=l.createClass({displayName:"P2PAcceptMoneyDialog",propTypes:{creditCards:q.array.isRequired,useRedesignForm:q.bool,onClose:q.func,transfer:q.object},statics:{preload:function(){m.onAfterLoad(function(){t(o);});}},render:function(){return (l.createElement(g,l.__spread({bootloadComponent:t,bootloadPlaceholder:this._renderPlaceholder()},this.props)));},_renderPlaceholder:function(){return (l.createElement(j,{className:(("_309")+(r?' '+"_5ktw":'')),layerHideOnBlur:false,repositionOnUpdate:true,shown:true,width:r?350:300},l.createElement("div",{className:"_3w2b"},l.createElement(k,{visible:true}))));}});function t(u){h.loadModules(["P2PAcceptMoneyDialogImpl.react"],u);}e.exports=s;},null);
__d("P2PAPIUtils",["CreditCardFormParam","fbt","guid","merge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={genRequestID:function(){return 'id:'+i()+':'+Date.now();},getUncaughtErrorMessage:function(){return (h._("Wyst\u0105pi\u0142 b\u0142\u0105d. Spr\u00f3buj ponownie p\u00f3\u017aniej."));},prepareCardMutationData:function(l){var m={},n=l[g.CARD_NUMBER].replace(/ /g,'');m[g.CARD_NUMBER]=n;if(typeof l[g.CARD_EXPIRATION]==='string'){var o=l[g.CARD_EXPIRATION].split('/');m[g.MONTH]=o[0];m[g.YEAR]=o[1];m[g.CARD_EXPIRATION]={};m[g.CARD_EXPIRATION][g.MONTH]=m[g.MONTH];m[g.CARD_EXPIRATION][g.YEAR]=m[g.YEAR];}else{m[g.MONTH]=l[g.CARD_EXPIRATION][g.MONTH];m[g.YEAR]=l[g.CARD_EXPIRATION][g.YEAR];}return j(l,m);}};e.exports=k;},null);
__d("XP2PCardBINValidateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/card_bin\/validate\/",{bin_number:{type:"String",required:true}});},null);
__d("XP2PCreditCardDeleteController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_delete\/",{});},null);
__d("XP2PCreditCardUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_update\/",{});},null);
__d("XP2PCreditCardCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_create\/",{});},null);
__d("XP2PCreditCardVerifyController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_verify\/",{});},null);
__d("XP2PCreditCardsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/",{type:{type:"Int",defaultValue:1}});},null);
__d("XP2PPasswordProtectionStatusController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/password_protection_status\/",{});},null);
__d("XP2PPasswordProtectionStatusUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/password_protection_status\/_update\/",{});},null);
__d("XP2PPresetCreditCardSetController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/preset_credit_card\/_set\/",{});},null);
__d("XP2PTransactionsCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_create\/",{});},null);
__d("XP2PTransactionsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/",{since:{type:"Int"}});},null);
__d("XP2PTransactionsDeclineController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_decline\/",{});},null);
__d("XP2PTransactionsCancelController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_cancel\/",{});},null);
__d("XP2PUserEligibilityController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/user_eligibility\/",{user_ids:{type:"StringVector",required:true}});},null);
__d("P2PAPI",["AsyncRequest","CreditCardFormParam","P2PActions","P2PAPIUtils","P2PPasswordProtectionParam","P2PPaymentCreditCardsTypes","P2PTransferParam","ImmutableObject","URI","XP2PCardBINValidateController","XP2PCreditCardDeleteController","XP2PCreditCardUpdateController","XP2PCreditCardCreateController","XP2PCreditCardVerifyController","XP2PCreditCardsController","XP2PPasswordProtectionStatusController","XP2PPasswordProtectionStatusUpdateController","XP2PPresetCreditCardSetController","XP2PTransactionsCreateController","XP2PTransactionsController","XP2PTransactionsDeclineController","XP2PTransactionsCancelController","XP2PUserEligibilityController","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();'use strict';var ea={getAllCreditCards:function(){var fa=(u.getURIBuilder()).getURI();new g().setData({type:l.SENDING}).setURI(fa).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(ga){var ha=ga.getPayload();if(!ha.error)i.updateCreditCards(ha);}.bind(this)).send();},createTransaction:function(fa){var ga=(y.getURIBuilder()).getURI(),ha={},ia=fa.formData,ja=fa.success||da,ka=fa.error||da;ha[h.CREDENTIAL_ID]=ia[h.CREDENTIAL_ID];ha.amount=ia.amount;ha.receiver_id=ia.receiverId;ha.offline_threading_id=j.genRequestID();ha.group_thread_fbid=ia.group_thread_fbid;new g().setData(ha).setMethod('POST').setURI(ga).setAllowCrossPageTransition(true).setHandler(function(la){var ma=la?la.getPayload():{};if(ma.error){ka(ma.error);}else{ja(ma);this.getAllCreditCards();}}.bind(this)).setErrorHandler(function(){ka({message:j.getUncaughtErrorMessage()});}.bind(this)).send();},addCreditCard:function(fa){var ga=(s.getURIBuilder()).getURI().getPath(),ha=new o('/ajax/payment/token_proxy.php').addQueryData('tpe',ga);fa=j.prepareCardMutationData(fa);var ia=new n(fa);new g().setData(fa).setMethod('POST').setURI(ha).setHandler(function(ja){var ka=ja.getPayload(),la={};if(!ka.errors){la[h.CREDENTIAL_ID]=ka[h.CARD_FBID];la.isPreset=ka.isPreset;la.isVerified=ka.isVerified;la.passwordProtection=ka.passwordProtection;ia=n.set(ia,la);i.addCreditCard(ia);}else i.addCreditCardError(Object.assign({requestID:ia.requestID},ka));}.bind(this)).setErrorHandler(function(){i.addCreditCardError({requestID:ia.requestID,errors:{general:{message:j.getUncaughtErrorMessage()}}});}.bind(this)).send();},getTransactions:function(fa){fa=fa||{};var ga={},ha=fa,ia=(z.getURIBuilder()).getURI(),ja=new n(ha);if(ha.since)ga.since=ha.since;return new g().setData(ga).setURI(ia).setMethod('GET').setReadOnly(true).setHandler(function(ka){var la=ka.getPayload();if(!la.error){i.updateTransfers(la);}else i.updateTransfersError(Object.assign({requestID:ja.requestID},la));}.bind(this)).setErrorHandler(function(){i.updateTransfersError({error:{message:j.getUncaughtErrorMessage()},requestID:ja.requestID});}.bind(this)).send();},getNUXTransactions:function(){var fa=(new Date()),ga=Math.round((fa.setDate(fa.getDate()-15))/1000),ha=(z.getURIBuilder()).getURI();return new g().setData({since:ga}).setURI(ha).setMethod('GET').setReadOnly(true).setHandler(function(ia){var ja=ia.getPayload();if(!ja.error)i.updateNUXTransfers(ja);}.bind(this)).send();},updatePresetCreditCard:function(fa){var ga=(x.getURIBuilder()).getURI();new g().setData(fa).setURI(ga).setMethod('POST').setHandler(function(ha){var ia=ha.getPayload();if(!ia.error){i.updatePresetCreditCard(Object.assign({},ia,{requestID:fa.requestID}));i.transferAccepted();}else i.updatePresetCreditCardError(Object.assign({},ia,{requestID:fa.requestID}));}.bind(this)).setErrorHandler(function(){i.updatePresetCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:fa.requestID});}.bind(this)).send();},updateCreditCard:function(fa){var ga=(r.getURIBuilder()).getURI().getPath(),ha=new o('/ajax/payment/token_proxy.php').addQueryData('tpe',ga);fa=j.prepareCardMutationData(fa);var ia=new n(fa);new g().setData(fa).setMethod('POST').setURI(ha).setHandler(function(ja){var ka=ja.getPayload();if(!ka.errors){i.updateCreditCard(ia);}else i.updateCreditCardError(Object.assign({},ka,{requestID:ia.requestID}));}.bind(this)).setErrorHandler(function(){i.updateCreditCardError({errors:{general:{message:j.getUncaughtErrorMessage()}},requestID:ia.requestID});}.bind(this)).send();},deleteCreditCard:function(fa){var ga=(q.getURIBuilder()).getURI();new g().setData(fa).setMethod('POST').setURI(ga).setHandler(function(ha){var ia=ha.getPayload();if(!ia.error){i.deleteCreditCard(Object.assign({},ia,{requestID:fa.requestID}));}else i.deleteCreditCardError(Object.assign({},ia,{requestID:fa.requestID}));}.bind(this)).setErrorHandler(function(){i.deleteCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:fa.requestID});}.bind(this)).send();},getPasswordProtectionSetting:function(fa){var ga=(v.getURIBuilder()).getURI(),ha=fa.success||da,ia=fa.error||da;new g().setURI(ga).setMethod('GET').setReadOnly(true).setHandler(function(ja){var ka=ja?ja.getPayload():[];if(ka.error){ia();}else ha(ka);}.bind(this)).setErrorHandler(function(){ia();}.bind(this)).send();},setPasswordProtectionSetting:function(fa){var ga=(w.getURIBuilder()).getURI(),ha=fa.formData,ia=fa.success||da,ja=fa.error||da,ka={};ka[k.STATUS]=ha[k.STATUS];new g().setData(ka).setURI(ga).setMethod('POST').setHandler(function(la){var ma=la?la.getPayload():{};if(ma.error){ja(ma.error);}else ia();}.bind(this)).setErrorHandler(function(){ja();}.bind(this)).send();},declineTransaction:function(fa){var ga=(aa.getURIBuilder()).getURI(),ha=fa.formData,ia=fa.success||da,ja=fa.error||da,ka={};ka[m.TRANSFER_ID]=ha[m.TRANSFER_ID];new g().setData(ka).setURI(ga).setMethod('POST').setHandler(function(la){var ma=la?la.getPayload():{},na={};if(ma.error){ja(ma.error);}else{ia();na[m.TRANSFER_ID]=ka[m.TRANSFER_ID];i.transferDeclined(na);}}.bind(this)).setErrorHandler(function(){ja();}.bind(this)).send();},cancelTransaction:function(fa){var ga=(ba.getURIBuilder()).getURI(),ha=fa.formData,ia=fa.success||da,ja=fa.error||da,ka={};ka[m.TRANSFER_ID]=ha[m.TRANSFER_ID];new g().setData(ka).setURI(ga).setMethod('POST').setHandler(function(la){var ma=la?la.getPayload():{};if(ma.error){ja(ma.error);}else ia();}.bind(this)).setErrorHandler(function(){ja();}.bind(this)).send();},verifyCreditCard:function(fa){var ga=(t.getURIBuilder()).getURI().getPath(),ha=new o('/ajax/payment/token_proxy.php').addQueryData('tpe',ga);new g().setData(fa).setMethod('POST').setURI(ha).setHandler(function(ia){var ja=ia.getPayload();if(!ja.error){i.verifyCreditCard(Object.assign({},ja,{requestID:fa.requestID}));}else i.verifyCreditCardError(Object.assign({},ja,{requestID:fa.requestID}));}.bind(this)).setErrorHandler(function(){i.verifyCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:fa.requestID});}.bind(this)).send();},validateBINNumber:function(fa){fa=fa||{};var ga=new n(fa),ha=(p.getURIBuilder()).setString('bin_number',fa.binNumber).getURI();return new g().setURI(ha).setMethod('GET').setReadOnly(true).setHandler(function(ia){var ja=ia.getPayload();if(!ja.error){i.binNumberValidated(Object.assign({},ja,{requestID:fa.requestID}));}else i.binNumberValidatedError(Object.assign({},ja,{requestID:ga.requestID}));}.bind(this)).send();},getUserEligibility:function(fa){fa=fa||{};var ga=(ca.getURIBuilder()).setStringVector('user_ids',fa.userIDs).getURI();return new g().setURI(ga).setMethod('GET').setReadOnly(true).setHandler(function(ha){var ia=ha.getPayload();if(!ia.error)i.userEligibilityUpdated(ia);}.bind(this)).send();}};e.exports=ea;},null);
__d("P2PCreditCard",["CreditCardFormParam","CreditCardTypeEnum","PaymentMethodUtils","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={visa:{image:k('/images/payments/icons/visa.png'),imageLarge:k('/images/payments/icons/visa-lg.png'),name:'Visa'},mc:{image:k('/images/payments/icons/mc.png'),imageLarge:k('/images/payments/icons/mc-lg.png'),name:'MasterCard'},disc:{image:k('/images/payments/icons/disc.png'),imageLarge:k('/images/payments/icons/disc-lg.png'),name:'Discover'},jcb:{image:k('/images/payments/icons/jcb.png'),imageLarge:k('/images/payments/icons/jcb-lg.png'),name:'JCB'},amex:{image:k('/images/payments/icons/amex.png'),imageLarge:k('/images/payments/icons/amex-lg.png'),name:'American Express'},unknown:{image:k('/images/brands/credit_card/credit_32.png'),imageLarge:k('/images/brands/credit_card/credit_32.png'),name:j._("Nieznany typ karty")}};function m(n){this.setCredentialId(n[g.CREDENTIAL_ID]);this.setCardType(n[g.CARD_TYPE]);this.setCreditCardNumber(n[g.CARD_NUMBER]);this.setSelected(n.selected);this.setZipCode(n[g.ZIP]);this.setCSC(n[g.CSC]);this.setExp(n[g.CARD_EXPIRATION]);this.setIsPreset(n.isPreset);this.setIsVerified(n.isVerified);this.setIsMobileVerified(n.isMobileVerified);}m.prototype.getCreditCardNumber=function(){return this[g.CARD_NUMBER];};m.prototype.setCreditCardNumber=function(n){n=n.replace(/ /g,'');this.setCardProviderProps(this[g.CARD_TYPE],n);n=n.substr(n.length-4);this[g.CARD_NUMBER]=n;};m.prototype.setCardProviderProps=function(n,o){var p=this.$P2PCreditCard0(n,o);if(l[p]){this.setImage(l[p].image);this.setImageLarge(l[p].imageLarge);this.setName(l[p].name);}};m.prototype.getExp=function(){return this[g.CARD_EXPIRATION];};m.prototype.getExpFormatted=function(){var n=this[g.CARD_EXPIRATION];return n?n[g.MONTH]+'/'+n[g.YEAR]:'';};m.prototype.getExpFormattedShort=function(){var n=this[g.CARD_EXPIRATION],o='';if(n&&n[g.MONTH]&&n[g.YEAR]){o=n[g.MONTH]+'/';if(n[g.YEAR].length===4){o+=n[g.YEAR].substr(2);}else o+=n[g.YEAR];}return o;};m.prototype.setExp=function(n){if(!n)return;var o,p,q={};q[g.MONTH]=n[g.MONTH];q[g.YEAR]=n[g.YEAR];if(q[g.MONTH]&&q[g.MONTH].length===1)q[g.MONTH]='0'+q[g.MONTH];if(q[g.YEAR]&&q[g.YEAR].length===2){o=(new Date()).getFullYear()+'';p=o.substr(0,2);q[g.YEAR]=p+q[g.YEAR];}this[g.CARD_EXPIRATION]=q;};m.prototype.getCSC=function(){return this[g.CSC];};m.prototype.setCSC=function(n){this[g.CSC]=n;};m.prototype.getZipCode=function(){return this[g.ZIP];};m.prototype.setZipCode=function(n){this[g.ZIP]=n;};m.prototype.getSelected=function(){return this.$P2PCreditCard1;};m.prototype.setSelected=function(n){this.$P2PCreditCard1=n;};m.prototype.getCardType=function(){return this[g.CARD_TYPE];};m.prototype.setCardType=function(n){this[g.CARD_TYPE]=n;this.setCardProviderProps(n,this[g.CARD_NUMBER]);};m.prototype.getCredentialId=function(){return this[g.CREDENTIAL_ID];};m.prototype.setCredentialId=function(n){this[g.CREDENTIAL_ID]=n;};m.prototype.$P2PCreditCard0=function(n,o){var p='default',q,r;if(n){q=Object.keys(h).filter(function(s){return h[s]===n;})[0];p=this.$P2PCreditCard2(q);}else if(o){r=i.getCardType(o);if(r)p=r.name;}return p;};m.prototype.getImage=function(){return this.$P2PCreditCard3||l.unknown.image;};m.prototype.setImage=function(n){this.$P2PCreditCard3=n;};m.prototype.getImageLarge=function(){return this.$P2PCreditCard4||l.unknown.imageLarge;};m.prototype.setImageLarge=function(n){this.$P2PCreditCard4=n;};m.prototype.getName=function(){return this.$P2PCreditCard5||l.unknown.name;};m.prototype.setName=function(n){this.$P2PCreditCard5=n;};m.prototype.getIsPreset=function(){return this.$P2PCreditCard6;};m.prototype.setIsPreset=function(n){this.$P2PCreditCard6=n||false;};m.prototype.$P2PCreditCard2=function(n){switch(n){case 'VISA':n='visa';break;case 'AMERICANEXPRESS':n='amex';break;case 'MASTERCARD':n='mc';break;case 'DISCOVER':n='disc';break;case 'JCB':n='jcb';break;default:n='unknown';break;}return n;};m.prototype.getCreditCardNumberFormatted=function(){return '*'+this[g.CARD_NUMBER];};m.prototype.getCreditCardNumberMask=function(){return '**** **** **** '+this[g.CARD_NUMBER];};m.prototype.getMaxCSCLength=function(){var n=this.$P2PCreditCard0(this[g.CARD_TYPE],this[g.CARD_NUMBER]);return n==='amex'?4:3;};m.prototype.getIsVerified=function(){return this.$P2PCreditCard7||false;};m.prototype.setIsVerified=function(n){this.$P2PCreditCard7=n;};m.prototype.getIsMobileVerified=function(){return this.$P2PCreditCard8||false;};m.prototype.setIsMobileVerified=function(n){this.$P2PCreditCard8=n;};m.prototype.isExpired=function(){var n=this.getExp();if(!n)return false;var o=n,p=o.month,q=o.year,r=new Date(),s=r.getFullYear()+'',t=(r.getMonth()+1)+'';t=t.length===1?'0'+t:t;return q<s||(s===q&&p<t);};e.exports=m;},null);
__d("P2PCreditCardStore",["P2PActionConstants","CreditCardFormParam","EventEmitter","ImmutableObject","P2PAPI","P2PCreditCard","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n,o,p,q,r;function s(x,y){if(x)r[x]=new j(y);}function t(x,y){if(x)r[x]={error:y};}for(var u in i)if(i.hasOwnProperty(u))w[u]=i[u];var v=i===null?null:i.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=i;function w(){i.call(this);p=false;q=false;n=[];r={};o=m.register(this.onEventDispatched.bind(this));}w.prototype.onEventDispatched=function(x){var y=x.data,z=x.type;switch(z){case g.CREDIT_CARDS_UPDATED:this.handleCreditCardsUpdated(y);this.emit('change');break;case g.CREDIT_CARD_ADDED:this.handleCreditCardAdded(y);this.emit('change');break;case g.CREDIT_CARD_ADDED_ERROR:this.handleCreditCardAddedError(y);this.emit('change');break;case g.CREDIT_CARD_DELETED:this.handleCreditCardDeleted(y);this.emit('change');break;case g.CREDIT_CARD_DELETED_ERROR:this.handleCreditCardDeletedError(y);this.emit('change');break;case g.CREDIT_CARD_UPDATED:this.handleCreditCardUpdated(y);this.emit('change');break;case g.CREDIT_CARD_UPDATED_ERROR:this.handleCreditCardUpdatedError(y);this.emit('change');break;case g.PRESET_CREDIT_CARD_UPDATED:this.handlePresetCreditCardUpdated(y);this.emit('change');break;case g.PRESET_CREDIT_CARD_UPDATED_ERROR:this.handlePresetCreditCardUpdatedError(y);this.emit('change');break;case g.CREDIT_CARD_VERIFIED:this.handleCreditCardVerified(y);this.emit('change');break;case g.CREDIT_CARD_VERIFIED_ERROR:this.handleCreditCardVerifiedError(y);this.emit('change');break;case g.BIN_NUMBER_VALIDATED:this.handleBINNumberValidated(y);this.emit('change');break;case g.BIN_NUMBER_VALIDATED_ERROR:this.handleBINNumberValidatedError(y);this.emit('change');break;}};w.prototype.getAsyncRequestState=function(){return r;};w.prototype.isCreditCardsFetchComplete=function(){return p;};w.prototype.handleCreditCardsUpdated=function(x){p=true;n=x.map(function(y){return new l(y);});};w.prototype.handleCreditCardAdded=function(x){var y=false;s(x.requestID,x);n.forEach(function(z){if(z.getCredentialId()===x[h.CREDENTIAL_ID])y=true;});if(y)return;n.push(new l(x));};w.prototype.handleCreditCardAddedError=function(x){t(x.requestID,x.errors);};w.prototype.handleCreditCardDeleted=function(x){var y=x[h.CARD_FBID];s(x.requestID,x);n=n.filter(function(z){return z.getCredentialId()!==y;});};w.prototype.handleCreditCardDeletedError=function(x){t(x.requestID,x.error);};w.prototype.handleCreditCardUpdated=function(x){s(x.requestID,x);n.forEach(function(y,z){if(y.getCredentialId()===x[h.CREDENTIAL_ID]){y.setExp(x[h.CARD_EXPIRATION]);y.setZipCode(x[h.ZIP]);}});};w.prototype.handleCreditCardUpdatedError=function(x){t(x.requestID,x.errors);};w.prototype.handlePresetCreditCardUpdated=function(x){var y=x[h.CARD_FBID];s(x.requestID,x);var z=n.filter(function(ba){return ba.getIsPreset();})[0];if(z)z.setIsPreset(false);var aa=n.filter(function(ba){return ba.getCredentialId()===y;})[0];if(aa)aa.setIsPreset(true);};w.prototype.handlePresetCreditCardUpdatedError=function(x){t(x.requestID,x.error);};w.prototype.handleCreditCardVerified=function(x){s(x.requestID,x);n.forEach(function(y,z){if(y.getCredentialId()===x[h.CREDENTIAL_ID])y.setIsVerified(true);});};w.prototype.handleCreditCardVerifiedError=function(x){t(x.requestID,x.error);};w.prototype.handleBINNumberValidated=function(x){s(x.requestID,x);};w.prototype.handleBINNumberValidatedError=function(x){t(x.requestID,x.error);};w.prototype.getAll=function(){if(!q){q=true;k.getAllCreditCards();}return n;};w.prototype.getAllSettingsEligible=function(){var x=this.getAll();return x.filter(function(y){return y.getIsVerified()||y.getIsMobileVerified();});};w.prototype.getPresetCard=function(){var x=this.getAll();return x.filter(function(y){return y.getIsPreset();})[0];};e.exports=new w();},null);
__d("P2PTimeBasedAcceptMessage.react",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.PropTypes,k=g.createClass({displayName:"P2PTimeBasedAcceptMessage",propTypes:{transfer:j.object.isRequired},render:function(){var l=this.props.transfer,m=l.creationTime*1000,n=(1000*60*60*24),o=Date.now(),p=(o-m)/n,q=Math.max(14-Math.floor(p),1),r;if(p<=5){r=h._("Dodaj kart\u0119 debetow\u0105, a p\u0142atno\u015b\u0107 trafi prosto do Twojego banku.");}else if(p<=11){r=h._("Ta kwota zostanie odes\u0142ana po up\u0142ywie {days left} dni. Dodaj kart\u0119 debetow\u0105, aby zaakceptowa\u0107.",[h.param("days left",q)]);}else r=h._({"day":"Pozosta\u0142 {days left} dzie\u0144, aby doda\u0107 kart\u0119 debetow\u0105, zanim pieni\u0105dze zostan\u0105 odes\u0142ane do u\u017cytkownika {sender_name}.","days":"Masz jeszcze {days left} dni, aby doda\u0107 kart\u0119 debetow\u0105, zanim pieni\u0105dze zostan\u0105 odes\u0142ane do u\u017cytkownika {sender_name}."},[h.param("days left",q),h['enum'](q===1?'day':'days',{day:"day",days:"days"}),h.param("sender_name",l.sender.name)]);return g.createElement("div",null,r);}});e.exports=k;},null);
__d("P2PPendingRecipientNUXJewelBanner.react",["P2PAcceptMoneyDialog.react","P2PActions","P2PCreditCardStore","P2PJewelBanner.react","P2PTimeBasedAcceptMessage.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p=l.createClass({displayName:"P2PPendingRecipientNUXJewelBanner",propTypes:{transfer:o.object.isRequired},getInitialState:function(){return {creditCards:i.getAll()};},creditCardStoreSub:(null),componentDidMount:function(){this.creditCardStoreSub=i.addListener('change',this.onCreditCardStoreChange);},componentWillUnmount:function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},onCreditCardStoreChange:function(){var q={creditCards:i.getAll()};if(this.isMounted())this.setState(q);},handleClick:function(){this.showAcceptMoneyDialog();},showAcceptMoneyDialog:function(){h.showDialog(g,{creditCards:this.state.creditCards,onClose:h.hideDialog,transfer:this.props.transfer});},renderTimeBasedMessage:function(){return (l.createElement(k,{transfer:this.props.transfer}));},render:function(){var q=this.props.transfer;if(!i.isCreditCardsFetchComplete())return null;return (l.createElement(j,{actionText:m._("Dodaj kart\u0119 debetow\u0105"),bodyText:this.renderTimeBasedMessage(),icon:"coin",onClick:this.handleClick,titleText:m._("Zaakceptuj kwot\u0119 {amount} {currency} od u\u017cytkownika {sender_name}.",[m.param("currency",q.currency),m.param("amount",q.amount),m.param("sender_name",q.sender.name)])}));}});e.exports=p;},null);
__d("P2PVerificationFlowHelper",["AsyncDialog","AsyncRequest","P2PAPI","P2PTransferParam","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=null,m=null,n=null,o={startVerificationFlow:function(p,q,r){l=p;m=q;n=r||k;g.send(new h('/p2p/verify/dialog/?id='+p));},setupFlowExitHandler:function(p,q,r,s){var t=function(w){n(w);l=null;m=null;n=null;p.destroy();q.destroy();};if(r){p.subscribe('hide',function(){t(s);});}else{var u=false,v=false;p.subscribe('confirm',function(){u=true;});p.subscribe('hide',function(){if(u){p.destroy();q.destroy();}else if(m){q.show();}else t(false);});q.subscribe('confirm',function(){v=true;var w={};w[j.TRANSFER_ID]=l;i.cancelTransaction({formData:w});t(false);});q.subscribe('hide',function(){if(!v)p.show();});}}};e.exports=o;},null);
__d("P2PPendingRecipientVerificationJewelBanner.react",["P2PJewelBanner.react","P2PTransferParam","P2PVerificationFlowHelper","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"P2PPendingRecipientVerificationJewelBanner",propTypes:{transfer:m.object.isRequired},handleClick:function(){i.startVerificationFlow(this.props.transfer[h.TRANSFER_ID],false);},render:function(){return (j.createElement(g,{actionText:k._("Potwierd\u017a informacje"),bodyText:k._("Aby zaakceptowa\u0107 pieni\u0105dze wys\u0142ane Ci przez u\u017cytkownika {sender_name}, potwierd\u017a swoje dane.",[k.param("sender_name",this.props.transfer.sender.name)]),icon:"warning",onClick:this.handleClick,titleText:k._("Potwierd\u017a swoje dane")}));}});e.exports=n;},null);
__d("P2PNUXRendererUtils",["MercuryConstants","CurrentUser","ImmutableObject","MercuryAttachmentType","P2PTransferParam","P2PTransferStatus","StoryAttachmentStyle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g.MercurySupportedShareType,o={getTransferFromMessage:function(p){var q,r;if(!p||!p.attachments||!p.attachments.length)return;r=p.attachments[0];if(this.isShareAttachment(r)){q=r.share.target;}else if(r.share_data_type===n.FB_ORION)q=r.metadata;if(q)q=new i(q);return q;},isShareAttachment:function(p){return !!(typeof p!=='string'&&p.attach_type==j.SHARE&&p.share&&p.share.style_list&&p.share.style_list.indexOf(m.ORION)>=0);},doesNUXNeedCreditCards:function(p){var q=h.getID()===p.sender.id;return (!q&&p[k.STATUS]===l.PENDING_RECIPIENT_NUX);},isRecipientActionableStatus:function(p){var q=p[k.STATUS],r=h.getID()===p.sender.id;return (!r&&(q===l.PENDING_RECIPIENT_NUX||q===l.PENDING_RECIPIENT_VERIFICATION||q===l.PENDING_PUSH_FAIL));}};e.exports=o;},null);
__d("P2PTransferStore",["Arbiter","P2PActionConstants","ChannelConstants","CreditCardFormParam","EventEmitter","ImmutableObject","P2PActions","P2PAPI","P2PChannelType","P2PCreditCard","P2PDispatcher","P2PNUXRendererUtils","P2PTransferParam","P2PTransferStatus","MercuryThreadInformer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=b('MercuryThreadInformer').get(),v,w,x,y,z,aa,ba,ca,da,ea=null,fa=false;function ga(la,ma){if(la)da[la]=new l(ma);}function ha(la,ma){if(la)da[la]={error:ma};}for(var ia in k)if(k.hasOwnProperty(ia))ka[ia]=k[ia];var ja=k===null?null:k.prototype;ka.prototype=Object.create(ja);ka.prototype.constructor=ka;ka.__superConstructor__=k;function ka(){k.call(this);v=false;x=[];da={};z=g.subscribe(i.getArbiterType(o.TRANSFER_STATUS_CHANGED),this.handleChannelTransferStatusChanged.bind(this));aa=u.subscribe('messages-received',this.handleMessageReceived.bind(this));ba=u.subscribe('messages-updated',this.handleMessageUpdated.bind(this));y=q.register(this.onEventDispatched.bind(this));}ka.prototype.onEventDispatched=function(la){var ma=la.data,na=la.type;switch(na){case h.TRANSFERS_UPDATED:this.handleTransfersUpdated(ma);this.emit('change');break;case h.TRANSFERS_UPDATED_ERROR:this.handleTransfersUpdatedError(ma);this.emit('change');break;case h.NUX_TRANSFERS_UPDATED:this.handleNUXTransfersUpdated(ma);this.emit('change');break;case h.TRANSFER_ADDED:this.handleTransferAdded(ma);this.emit('change');break;case h.TRANSFER_UPDATED:this.handleTransferUpdated(ma);this.emit('change');break;case h.TRANSFER_ACCEPTED:this.handleTransferAccepted();this.emit('change');break;case h.TRANSFER_DECLINED:this.handleTransferDeclined(ma);this.emit('change');break;}};ka.prototype.getAsyncRequestState=function(){return da;};ka.prototype.handleTransfersUpdated=function(la){ca=null;fa=true;x=la.map(function(ma){var na={};if(ma.creditCard){na[j.CREDENTIAL_ID]=ma.creditCard[j.CREDENTIAL_ID];na[j.CARD_NUMBER]=ma.creditCard[j.CARD_NUMBER];na[j.CARD_TYPE]=ma.creditCard[j.CARD_TYPE];ma.creditCard=new p(na);}return new l(ma);});};ka.prototype.handleTransfersUpdatedError=function(la){ca=la.error;ha(la.requestID,la.error);};ka.prototype.handleNUXTransfersUpdated=function(la){if(!fa)this.handleTransfersUpdated(la);};ka.prototype.handleTransferAdded=function(la){var ma=null;ga(la.requestID,la);ma=x.filter(function(na){return (na[s.TRANSFER_ID]===la[s.TRANSFER_ID]);})[0];if(ma)return;x.push(new l(la));x=x.sort(function(na,oa){return oa.creationTime-na.creationTime;});};ka.prototype.handleTransferAddedError=function(la){ha(la.requestID,la.errors);};ka.prototype.handleChannelTransferStatusChanged=function(la,ma){ma=ma.obj;m.transferUpdated(ma);};ka.prototype.getPendingMessageAttachment=function(){return ea;};ka.prototype.handleMessageReceived=function(la,ma){for(var na in ma)if(ma.hasOwnProperty(na)){var oa=ma[na];for(var pa=0;pa<oa.length;pa++)if(oa[pa].attachments&&oa[pa].attachments.length){ea=oa[pa];return;}}};ka.prototype.handleMessageUpdated=function(la,ma){if(!ea)return;for(var na in ma)if(ma.hasOwnProperty(na)){var oa=ma[na];for(var pa in oa)if(oa.hasOwnProperty(pa)&&ea.message_id===pa){var qa=r.getTransferFromMessage(ea);if(qa){m.transferAdded(qa);ea=null;return;}}}};ka.prototype.handleTransferUpdated=function(la){for(var ma=0,na=x.length;ma<na;ma++)if(x[ma][s.TRANSFER_ID]===la[s.TRANSFER_ID])x[ma]=l.set(x[ma],la);};ka.prototype.handleTransferAccepted=function(){var la;for(var ma=0,na=x.length;ma<na;ma++)if(x[ma][s.STATUS]===t.PENDING_RECIPIENT_NUX){la={};la[s.STATUS]=t.COMPLETED;x[ma]=l.set(x[ma],la);}};ka.prototype.handleTransferDeclined=function(la){var ma;for(var na=0,oa=x.length;na<oa;na++)if(x[na][s.TRANSFER_ID]===la[s.TRANSFER_ID]&&x[na][s.STATUS]===t.PENDING_RECIPIENT_NUX){ma={};ma[s.STATUS]=t.CANCELED_DECLINED;x[na]=l.set(x[na],ma);break;}};ka.prototype.handleTransferUpdatedError=function(la){ha(la.requestID,la.errors);};ka.prototype.getTransferByID=function(la){return x.filter(function(ma){return la===ma[s.TRANSFER_ID];})[0];};ka.prototype.getAll=function(la){if(!v){v=true;n.getTransactions(la);}return x;};ka.prototype.getNUXTransfer=function(){var la=x.filter(function(ma){return r.isRecipientActionableStatus(ma);})[0];if(!la&&!w&&!v){w=true;n.getNUXTransactions();}return la;};ka.prototype.hasTransfers=function(){return x.length>0;};ka.prototype.hasReceivedFromSender=function(la){for(var ma=0,na=x.length;ma<na;ma++)if(x[ma].sender.id===la)return true;return false;};ka.prototype.getTransferFetchError=function(){return ca;};e.exports=new ka();},null);
__d("P2PJewelBannerContainer.react",["CurrentUser","P2PPendingPushFailJewelBanner.react","P2PPendingRecipientNUXJewelBanner.react","P2PPendingRecipientVerificationJewelBanner.react","P2PTransferParam","P2PTransferStatus","P2PTransferStore","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=n.createClass({displayName:"P2PJewelBannerContainer",getInitialState:function(){return {dialogComponent:null,transfer:m.getNUXTransfer()};},transferStoreSub:(null),componentDidMount:function(){this.transferStoreSub=m.addListener('change',this.onTransferStoreChange);},componentWillUnmount:function(){if(this.transferStoreSub){this.transferStoreSub.remove();this.transferStoreSub=null;}},onTransferStoreChange:function(){this.setState({transfer:m.getNUXTransfer()});},renderTransferBanner:function(){var q=this.state.transfer,r=q[k.STATUS];switch(r){case l.PENDING_RECIPIENT_NUX:return (n.createElement(i,{transfer:q}));case l.PENDING_RECIPIENT_VERIFICATION:return (n.createElement(j,{transfer:q}));case l.PENDING_PUSH_FAIL:return (n.createElement(h,{transfer:q}));}},render:function(){var q=this.state.transfer,r;if(q&&q.receiver.id==g.getID())r=this.renderTransferBanner();return (n.createElement("div",{className:"_1xfk"},r));}});e.exports=p;},null);
__d("MercuryThreadlistContainer.react",["Bootloader","immutable","MercuryAPIArgsSource","MercuryThreadlistConstants","P2PJewelBannerContainer.react","React","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p='search',q=l.createClass({displayName:"MercuryThreadlistContainer",propTypes:{ChildClass:o.func.isRequired,folder:o.string.isRequired,showCount:o.bool,showPresence:o.bool,threadCount:o.number,viewer:o.string.isRequired},getInitialState:function(){return {isLoading:true,isSearching:false,threads:h.Map()};},componentDidMount:function(){g.loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(r,s,t){this._threadlist=r.getForFBID(this.props.viewer);this._threads=t.getForFBID(this.props.viewer);this._informer=s.getForFBID(this.props.viewer);this._subscriptions=new m();this._subscriptions.addSubscriptions(this._informer.subscribe('threadlist-updated',function(u,v){this._updateThreads(this.props.folder);}.bind(this)));this._handleFolderChange(this.props.folder);}.bind(this));},componentWillReceiveProps:function(r){if(r.folder!==this.props.folder)this._handleFolderChange(r.folder);},componentWillUnmount:function(){this._cancelThreadsCallback();this._cancelThreadlistCallback();this._subscriptions&&this._subscriptions.release();},render:function(){var r=this.props,s=r.ChildClass,t=r.folder,u=(function(w,x){var y={},z=Object.prototype.hasOwnProperty;if(w==null)throw new TypeError();for(var aa in w)if(z.call(w,aa)&&!z.call(x,aa))y[aa]=w[aa];return y;})(r,{ChildClass:1,folder:1}),v=this.state.isSearching?this.state.threads.get(p)||[]:this.state.threads.get(t)||[];return (l.createElement(s,l.__spread({},u,{isLoaded:!!this._threadlist&&this._threadlist.hasLoadedThreadlist(t),isLoading:this.state.isLoading,isSearching:this.state.isSearching,onLoadMoreRequest:this._loadMoreThreads,onQuery:this._handleQuery,onSearchResults:this._handleSearchResults,p2pJewelBannerContainer:this._renderP2PJewelBannerContainer(),threads:v})));},_renderP2PJewelBannerContainer:function(){return (l.createElement(k,null));},_handleFolderChange:function(r){if(!this._hasInitialThreads(r)){this._loadThreads(r,this.props.threadCount||(j.JEWEL_THREAD_COUNT+1));}else if(this.state.isLoading){this.setState({isLoading:false},function(){this._updateThreads(r);}.bind(this));}else this._updateThreads(r);},_loadMoreThreads:function(){if(!this.state.isSearching&&!this.state.isLoading&&!this._threadlist.hasLoadedThreadlist(this.props.folder))this._loadThreads(this.props.folder,this._getThreadCount(this.props.folder)+j.JEWEL_MORE_COUNT+1);},_loadThreads:function(r,s){if(!this._threadlist)return;this._cancelThreadlistCallback();this.setState({isLoading:true},function(){var t=this._threadlist.getThreadlist(j.RECENT_THREAD_OFFSET,s,r,function(u){return this.setState({isLoading:false});}.bind(this),true,i.JEWEL);this._threadlistSub={subscriberID:t,folder:r};}.bind(this));},_updateThreads:function(r,s){if(!this._threadlist||!this._threads)return;this._cancelThreadsCallback();var t=s||this._threadlist.getAvailableThreadlistNow(r);this._threadsSub=this._threads.getMultiThreadMeta(t,function(u){this.setState({threads:this.state.threads.set(r,t.map(function(v){return u[v];}))});}.bind(this));},_hasInitialThreads:function(r){return !!(this._threadlist&&(this._threadlist.getThreadCount(r)>=j.JEWEL_THREAD_COUNT+1||this._threadlist.hasLoadedThreadlist(r)));},_getThreadCount:function(r){var s=this.state.threads.get(r);return s?s.length:0;},_cancelThreadsCallback:function(){this._threads&&this._threadsSub&&this._threads.unsubscribe(this._threadsSub);},_cancelThreadlistCallback:function(){this._threadlist&&this._threadlistSub&&this._threadlist.unsubscribe(this._threadlistSub.subscriberID,this._threadlistSub.folder);},_handleSearchResults:function(r,s){this.setState({isLoading:s,searchThreads:[]},function(){return this._updateThreads(p,r);}.bind(this));},_handleQuery:function(r){this.setState({isSearching:!!r});}});e.exports=q;},null);
__d("MercuryThreadlistRowContainer.react",["immutable","ImmutableObject","MercuryParticipants","React","StoreAndPropBasedStateMixin","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"MercuryThreadlistRowContainer",mixins:[k(i)],propTypes:{ChildClass:n.func.isRequired,thread:n.instanceOf(h).isRequired,viewer:n.string.isRequired},statics:{calculateState:function(p){return {participants:g.Map(g.Seq(p.thread.participants).map(function(q){return [q,i.getOrFetch(q)];}))};}},shouldComponentUpdate:function(p,q){return (!l(p,this.props)||!g.is(q.participants,this.state.participants));},render:function(){var p=this.props,q=p.ChildClass,r=(function(s,t){var u={},v=Object.prototype.hasOwnProperty;if(s==null)throw new TypeError();for(var w in s)if(v.call(s,w)&&!v.call(t,w))u[w]=s[w];return u;})(p,{ChildClass:1});return (j.createElement(q,j.__spread({},r,{participants:this.state.participants})));}});e.exports=o;},null);
__d("MercuryPresenceIndicator.react",["Arbiter","AvailableListConstants","MercuryIDs","PresenceStatus","ReactComponentWithPureRenderMixin","React","SubscriptionsHandler","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=l,q=p.PropTypes,r=l.createClass({displayName:"MercuryPresenceIndicator",mixins:[k],propTypes:{threadID:q.string.isRequired},componentDidMount:function(){this._subscriptions=new m();this._subscriptions.addSubscriptions(g.subscribe(h.ON_AVAILABILITY_CHANGED,function(){return this.forceUpdate();}.bind(this)));},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){var s=this._getPresence();return (l.createElement("span",{className:this._getClasses(s)},l.createElement("span",{className:"accessible_elem"},this._getLabel(s))));},_getPresence:function(){if(!i.isCanonical(this.props.threadID)){return null;}else{var s=i.getUserIDFromThreadID(this.props.threadID);return j.get(s);}},_getClasses:function(s){return (("presenceIndicator")+(i.isGroupChat(this.props.threadID)?' '+"groupThread":'')+(s==h.ACTIVE?' '+"presenceActive":'')+(s==h.MOBILE?' '+"presenceMobile":''));},_getLabel:function(s){switch(s){case h.ACTIVE:return (o._("Aktywna"));case h.MOBILE:return (o._("Telefon kom\u00f3rkowy"));default:return null;}}});e.exports=r;},null);
__d("MercurySeenIndicator.react",["MercuryDelayedRoger","MercuryIDs","React","SubscriptionsHandler","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"MercurySeenIndicator",propTypes:{thread:m.object.isRequired,viewer:m.string.isRequired},componentDidMount:function(){this._subscriptions=new j();this._subscriptions.addSubscriptions(g.subscribe('state-changed',function(o,p){p[this.props.thread.thread_id]&&this.forceUpdate();}.bind(this)));},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){var o=this._separateParticipants(),p=o.viewer,q=o.others,r=this._viewerLastToReply(p),s=this._seenByAll(q);return (i.createElement("span",{className:(("MercuryRepliedIndicator")+(r?' '+"repliedLast":'')+(r&&s?' '+"seenByAll":''))}));},_separateParticipants:function(){var o=h.getParticipantIDFromUserID(this.props.viewer),p=this.props.thread.participants.filter(function(q){return q!==o;});return {viewer:o,others:p};},_viewerLastToReply:function(o){var p=this.props.thread.participants;return p.length>0&&p[0]===o;},_seenByAll:function(o){var p=this.props.thread.thread_id;return g.getSeenBy(p).length===o.length;}});e.exports=n;},null);
__d("MercuryThreadPermalink.react",["HighlanderFinchGating","Link.react","PagesMessengerThreadDialogLink.react","ReactComponentWithPureRenderMixin","React","WebMessengerThreadPermalinks"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k,n=m.PropTypes,o=k.createClass({displayName:"MercuryThreadPermalink",mixins:[j],propTypes:{threadID:n.string.isRequired,viewer:n.string.isRequired,folder:n.string,onClick:n.func},getInitialState:function(){return {permalinkURI:'#'};},componentDidMount:function(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function(p){if(p.threadID!==this.props.threadID||p.folder!==this.props.folder)this._getPermalinkURI(p);},render:function(){if(g.HIGHLANDER_FINCH_GATING)return (k.createElement(i,{className:this.props.className,threadID:this.props.threadID,viewer:this.props.viewer,folder:this.props.folder},this.props.children));return (k.createElement(h,{className:this.props.className,href:this.state.permalinkURI,onClick:this.props.onClick,role:"button"},this.props.children));},_getPermalinkURI:function(p){if(g.HIGHLANDER_FINCH_GATING)return;this.setState(this.getInitialState());l.getThreadURI(p.threadID,function(q){return this.isMounted()&&this.setState({permalinkURI:q});}.bind(this),p.folder);}});e.exports=o;},null);
__d("MercuryThreadReadToggle.react",["MercuryThreadActions","ReactComponentWithPureRenderMixin","React","ReadToggle.react","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"MercuryThreadReadToggle",mixins:[h],propTypes:{threadID:n.string.isRequired,viewer:n.string.isRequired,unreadCount:n.number.isRequired},render:function(){l(this.props.unreadCount>=0);return (i.createElement(j,{isRead:this.props.unreadCount===0,onClick:this._handleClick,readLabel:k._("Oznacz jako nieprzeczytane"),unreadLabel:k._("Oznacz jako przeczytane")}));},_handleClick:function(p){p.preventDefault();p.stopPropagation();var q=g.getForFBID(this.props.viewer);this.props.unreadCount>0?q.markRead(this.props.threadID):q.markUnread(this.props.threadID);}});e.exports=o;},null);
__d("MercuryThreadSnippet.react",["immutable","MercuryAttachmentSnippet.react","MercuryIDs","React","TextWithEmoticons.react","fbt","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.PropTypes,p=j.createClass({displayName:"MercuryThreadSnippet",propTypes:{participants:o.instanceOf(g.Map).isRequired,shouldRenderYou:o.bool,thread:o.object.isRequired,viewer:o.string.isRequired},shouldComponentUpdate:function(s,t){return (!m(s,this.props)||!g.is(s.participants,this.props.participants));},render:function(){return (j.createElement("span",{className:this.props.className},this._renderAttachmentIndicator(),this._renderSnippet()));},_renderAttachmentIndicator:function(){if(!this.props.thread.snippet||!q(this.props.thread))return null;return j.createElement("span",{className:"MercuryAttachmentIndicator"});},_renderSnippet:function(){var s=this.props.thread,t=i.getParticipantIDFromUserID(this.props.viewer),u=this._renderInnerSnippet(),v=s.participants.length;if(s.is_subscribed)v--;if(r(s)||!s.snippet_sender)return u;if(s.snippet_sender===t){if(!this.props.shouldRenderYou)return u;return (l._("Ty: {conversation_snippet}",[l.param("conversation_snippet",u)]));}if(v<=1)return u;var w=this.props.participants.get(s.snippet_sender);if(!w||!w.short_name)return u;return (l._("{name}: {conversation_snippet}",[l.param("name",w.short_name),l.param("conversation_snippet",u)]));},_renderInnerSnippet:function(){var s=this.props.thread,t=s.snippet;if(t&&t.startsWith('?OTR'))return (l._("[wiadomo\u015b\u0107 zaszyfrowana]"));if(t)return (j.createElement(k,{renderEmoticons:true,renderEmoji:true,text:t.replace(/\r\n|[\r\n]/g,' ')}));if(q(s))return (j.createElement(h,{thread:s,viewer:this.props.viewer}));return null;}});function q(s){return (s.snippet_has_attachment&&s.snippet_attachments&&s.snippet_attachments.length>0);}function r(s){return !s.snippet&&q(s);}e.exports=p;},null);
__d("MercuryThreadTimestamp.react",["ReactComponentWithPureRenderMixin","React","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MercuryThreadTimestamp",mixins:[g],propTypes:{time:l.number,title:l.string,text:l.string},render:function(){var n=this.props.time;if(!n)return h.createElement("abbr",null);return (h.createElement("abbr",{className:j(this.props.className,'timestamp'),title:this.props.title||(new Date(n)).toLocaleDateString(),"data-utime":n/1000},this.props.text||i(new Date(n),'g:ia')));}});e.exports=m;},null);
__d("MessagesJewelInlineThumbnail.react",["MercuryAttachmentType","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.PropTypes,l=h.createClass({displayName:"MessagesJewelInlineThumbnail",propTypes:{thread:k.object.isRequired},render:function(){var m=this._getPhotoAttachments();if(m.length===0)return h.createElement("span",null);var n=m[0].thumbnail_url;if(!n)return h.createElement("span",null);var o=h.createElement("span",{className:"_56hv"},h.createElement("i",{style:{backgroundImage:("url("+n+")")}}));if(m.length>1)o=h.createElement("span",null,h.createElement("span",{className:"_56hy"}),o);return o;},_getPhotoAttachments:function(){var m=this.props.thread;if(!m.snippet_attachments)return [];return m.snippet_attachments.filter(function(n){return n.attach_type===g.PHOTO;});}});e.exports=l;},null);
__d("MessagesJewelThreadListRow.react",["ImageBlock.react","immutable","ImmutableObject","MercuryPresenceIndicator.react","MercurySeenIndicator.react","MercuryThreadImage.react","MercuryThreadPermalink.react","MercuryThreadReadToggle.react","MercuryThreadSnippet.react","MercuryThreadTimestamp.react","MercuryThreadTitle.react","MessagesJewelInlineThumbnail.react","ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=t,w=v.PropTypes,x=t.createClass({displayName:"MessagesJewelThreadListRow",mixins:[s],propTypes:{onClick:w.func,participants:w.instanceOf(h.Map).isRequired,showPresence:w.bool,thread:w.instanceOf(i).isRequired,viewer:w.string.isRequired,wasSeenByAll:w.bool},render:function(){return (t.createElement("li",{className:((this.props.thread.unread_count>0?"jewelItemNew":''))},t.createElement(m,{className:"messagesContent",threadID:this.props.thread.thread_id,viewer:this.props.viewer,folder:this.props.thread.folder,onClick:this.props.onClick},t.createElement(g,{spacing:"medium"},t.createElement("div",{className:"MercuryThreadImage"},t.createElement(l,{thread:this.props.thread,viewer:this.props.viewer})),t.createElement("div",{className:"content"},t.createElement("div",{className:"author"},t.createElement("strong",null,t.createElement(q,{thread:this.props.thread,viewer:this.props.viewer,showUnreadCount:true})),this._renderPresenceIndicator()),t.createElement("div",{className:"snippet preview"},t.createElement(k,{thread:this.props.thread,viewer:this.props.viewer}),t.createElement(o,{participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer})),t.createElement("div",{className:"time"},t.createElement(p,{time:this.props.thread.timestamp,title:this.props.thread.timestamp_absolute,text:this.props.thread.timestamp_relative}))),t.createElement("div",null,t.createElement(r,{thread:this.props.thread}),t.createElement("div",{className:"x_div"},t.createElement(n,{threadID:this.props.thread.thread_id,viewer:this.props.viewer,unreadCount:this.props.thread.unread_count})))))));},_renderPresenceIndicator:function(){if(!this.props.showPresence)return null;return (t.createElement(j,{threadID:this.props.thread.thread_id}));}});e.exports=x;},null);
__d("MessagesJewelThreadlistRowContainer.react",["ImmutableObject","MercuryDelayedRoger","MercuryThreadlistRowContainer.react","MessagesJewelThreadListRow.react","ReactComponentWithPureRenderMixin","React","StoreAndPropBasedStateMixin","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l,p=o.PropTypes,q;n(['ChatOpenTab'],function(s){q=s;});var r=l.createClass({displayName:"MessagesJewelThreadlistRowContainer",mixins:[k,m(h)],propTypes:{thread:p.instanceOf(g).isRequired,viewer:p.string.isRequired},statics:{calculateState:function(s){return {wasSeenByAll:h.wasSeenByAll(s.thread.thread_id)};}},componentDidMount:function(){if(!q)n(['ChatOpenTab'],function(s){this.forceUpdate();}.bind(this));},render:function(){return (l.createElement(i,{ChildClass:j,onClick:this._handleClick,showPresence:q&&q.canOpenTab(),thread:this.props.thread,viewer:this.props.viewer,wasSeenByAll:this.state.wasSeenByAll}));},_handleClick:function(s){if(s.button===1||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey)return;if(q&&q.canOpenTab()){s.preventDefault();q.openThread(this.props.thread.thread_id,'jewel');}}});e.exports=r;},null);
__d("MessagesJewelThreadList.react",["ImmutableObject","ScrollableArea.react","Link.react","MessagesJewelThreadlistRowContainer.react","React","XUISpinner.react","cx","fbt","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=k,q=p.PropTypes,r=k.createClass({displayName:"MessagesJewelThreadList",propTypes:{isLoaded:q.bool,isLoading:q.bool,onLoadMoreRequest:q.func,p2pJewelBannerContainer:q.element,threads:q.arrayOf(q.instanceOf(g)).isRequired,viewer:q.string.isRequired},render:function(){return (k.createElement(h,{onScroll:o(this._handleScroll,50),ref:"scrollable"},k.createElement("ul",{className:"jewelContent"},this.props.p2pJewelBannerContainer?k.createElement("li",null,this.props.p2pJewelBannerContainer):null,this.props.threads.map(function(s){return k.createElement(j,{key:s.thread_id,thread:s,viewer:this.props.viewer});}.bind(this))),this._renderLoadMoreLink()));},_renderLoadMoreLink:function(){if(this.props.isLoaded)return null;if(this.props.isLoading)return (k.createElement("div",{className:"_v8y"},k.createElement(l,null)));return (k.createElement("div",{className:"_v8y"},k.createElement(i,{href:"#",onClick:this._handleLoadMoreClick},n._("Poka\u017c starsze"))));},_handleScroll:function(){if(this.props.isLoaded)return;var s=this.refs.scrollable.getArea();if(s.getScrollTop()+s.getClientHeight()>=s.getScrollHeight()-1)this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();},_handleLoadMoreClick:function(s){s.preventDefault();this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();}});e.exports=r;},null);
__d("MercuryJewelThreadlistControl",["ArbiterMixin","CurrentUser","CSS","DOM","Event","JSLogger","MercuryConfig","MercuryThreadlistConstants","MercuryThreadlistContainer.react","MessagesJewelThreadList.react","MessagingTag","React","copyProperties","csx","cx","fbt","MercuryThreadInformer","MercuryUnreadState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=b('MercuryThreadInformer').get(),x=b('MercuryUnreadState').get(),y=l.create('mercury_jewel'),z=m.CoreGraphEnabled?q.PENDING:q.OTHER;function aa(ea){this._threadlistContainer=j.find(ea,"._3v_l");this._currentFolder=q.INBOX;this._jewelFolderLinks={};this._jewelFolderLinks[q.INBOX]=j.find(ea,"._1sde");this._jewelFolderLinks[z]=j.find(ea,"._1sdf");this._jewelFolderCounts={};this._jewelFolderCounts[q.INBOX]=j.find(ea,"._1sdg");this._jewelFolderCounts[z]=j.find(ea,"._1sdh");ca.bind(this)();this._markAllReadLink=j.find(ea,"._1c1m");k.listen(this._jewelFolderLinks[q.INBOX],'click',ba.bind(this,q.INBOX));k.listen(this._jewelFolderLinks[z],'click',ba.bind(this,z));k.listen(this._markAllReadLink,'click',function(fa){x.markFolderAsRead(this._currentFolder);fa.kill();}.bind(this));w.subscribe('unread-updated',ca.bind(this));this.render();y.bump('opened_threadlist_'+this._currentFolder);}s(aa.prototype,g);s(aa.prototype,{render:function(){r.render(r.createElement(o,{ChildClass:p,viewer:h.getID(),folder:this._currentFolder}),this._threadlistContainer);}});function ba(ea){if(this._currentFolder!=ea){y.bump('opened_threadlist_'+ea);i.addClass(this._jewelFolderLinks[ea],"_1sdd");i.removeClass(this._jewelFolderLinks[this._currentFolder],"_1sdd");this._currentFolder=ea;this.render();}}function ca(){da.bind(this)(q.INBOX);da.bind(this)(z);}function da(ea){var fa;if(x.exceedsMaxCount(ea)){fa=n.MAX_UNREAD_COUNT;}else fa=x.getUnreadCount(ea);var ga=this._jewelFolderCounts[ea];if(fa>0){if(fa==n.MAX_UNREAD_COUNT)fa+='+';j.setContent(ga,v._("({unread_count})",[v.param("unread_count",fa)]));}else j.setContent(ga,'');}e.exports=aa;},null);
__d("MercuryJewel",["MercuryJewelCountControl","MercuryServerRequests","MercuryChannelHandler"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('MercuryChannelHandler').get().turnOn();var i=false;function j(k,l){"use strict";g.constructStores();h.get().handleUpdate(l);var m=k.getFlyout();this.$MercuryJewel0=new g(k);if(k.getRoot()&&k.isOpen()){this.$MercuryJewel1(m);}else k.subscribeOnce('opened',this.$MercuryJewel1.bind(this,m));}j.prototype.$MercuryJewel1=function(k){"use strict";if(!i){d(['MercuryJewelThreadlistControl'],function(l){this.$MercuryJewel2=new l(k);}.bind(this));i=true;}};e.exports=j;},null);
__d("RenderManager",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this._isDirty=false;this._obj=h;}g.prototype.dirty=function(){"use strict";if(!this._isDirty){this._isDirty=true;setTimeout(this._doPaint.bind(this),0);}};g.prototype._doPaint=function(){"use strict";this._isDirty=false;this._obj.paint();};e.exports=g;},null);
__d("CounterDisplay",["Arbiter","CSS","DOM","RenderManager","Run","$","copyProperties","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(p,q,r,s,t,u){m(this,{_name:p,_valueNode:l(q),_wrapperNode:l(r)||null,_statusClass:t,_rm:new j(this),_arbiterSubscription:null,_count:0});var v=this._valueNode.firstChild;if(v){var w=parseInt(v.nodeValue,10);if(!isNaN(w))this._count=w;}this._statusNode=s?l(s):null;this._subscribeAll();o.instances.push(this);if(!u)k.onLeave(this._destroy.bind(this),true);}m(o,{EVENT_TYPE_ADJUST:'CounterDisplay/adjust',EVENT_TYPE_UPDATE:'CounterDisplay/update',instances:[],adjustCount:function(p,q){g.inform(o.EVENT_TYPE_ADJUST+'/'+p,q);},setCount:function(p,q){g.inform(o.EVENT_TYPE_UPDATE+'/'+p,q);}});m(o.prototype,{_destroy:function(){delete this._valueNode;delete this._wrapperNode;if(this._arbiterSubscription){this._arbiterSubscription.unsubscribe();delete this._arbiterSubscription;}n(o.instances,this);},adjustCount:function(p){this._count=Math.max(0,this._count+p);this._rm.dirty();return this;},setCount:function(p){this._count=Math.max(0,p);this._rm.dirty();return this;},paint:function(){i.setContent(this._valueNode,this._count);this._toggleNodes();},_toggleNodes:function(){if(this._wrapperNode)h.conditionClass(this._wrapperNode,'hidden_elem',this._count<=0);if(this._statusClass&&this._statusNode)h.conditionClass(this._statusNode,this._statusClass,this._count>0);},_subscribeAll:function(){var p=[o.EVENT_TYPE_ADJUST+'/'+this._name,o.EVENT_TYPE_UPDATE+'/'+this._name];this._arbiterSubscription=g.subscribe(p,this._onInform.bind(this),g.SUBSCRIBE_NEW);},_onInform:function(p,q){q=parseInt(q);if(isNaN(q))return;if(p.indexOf(o.EVENT_TYPE_ADJUST)!=-1){this.adjustCount(q);}else if(p.indexOf(o.EVENT_TYPE_UPDATE)!=-1){this.setCount(q);}else return;return;}});e.exports=o;},null);
__d("MessagingEvents",["Arbiter","ChannelConstants","arrayContains","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m=new g();function n(o){if(!k(l))return;for(var p in o)m.inform('count/'+p,o[p]);}m.subscribe('mark-as-read',function(o,p){(p.tids||p.chat_ids||[]).forEach(function(q){q=''+q;if(!(q in l)){l[q]=true;var r=function(){m.unsubscribe(s);clearTimeout(t);delete l[q];},s=m.subscribe('read',function(u,v){if(i((v.tids||[]),q)||i((v.chat_ids||[]),q))r();}),t=setTimeout(r,60000);}});});g.subscribe(h.getArbiterType('messaging'),function(o,p){var q=j({},p.obj),event=q.event||'';delete q.type;delete q.event;m.inform(event,q);if('unread_counts' in q){var r=q.unread_counts;n({unread:r.inbox,other_unseen:r.other});}});g.subscribe(h.getArbiterType('inbox'),function(o,p){var q=j(p.obj);delete q.type;n(q);});a.MessagingEvents=e.exports=m;},3);
__d("TitanLeftNav",["CounterDisplay","MessagingEvents"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={initialize:function(){h.subscribe('count/other_unseen',function(j,k){g.setCount('other_unseen',k);});}};e.exports=i;},null);
__d("AccessibilityShortcut",["AccessibilityLogger","Event","Focus","ge","onEnclosingPageletDestroy","warning"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={init:function(n,o){var p=h.listen(n,'click',function(q){q.preventDefault();var r=j(o);if(r){i.set(r);g.logSRKey();}else l(r,'Failed to set focus on element with ID: %s',o);});k(n,function(){return p.remove();});}};e.exports=m;},null);
__d("AccessibleMenu",["Event","CSS","DOM","Keys","TabbableElements","Toggler"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m,n,o;function p(){var x=i.scry(m,'a[rel="toggle"]')[0];x&&x.focus();l.getInstance(m).hide();}function q(x){if(!x)return false;h.removeClass(x,'selected');x.setAttribute('aria-selected','false');}function r(x){if(!x)return false;h.addClass(x,'selected');x.setAttribute('aria-selected','true');var y=k.find(x);if(y[0])y[0].focus();}function s(x){var y=i.scry(m,'.selected')[0],z=n.indexOf(y)+x,aa=n[z];if(!aa)return false;q(y);r(aa);}function t(x){if(!l.isShown()||l.getActive()!==m||h.hasClass(m,w.MENU_HIDDEN))return true;var y=g.getKeyCode(x);switch(y){case j.TAB:s(x.shiftKey?-1:1);g.prevent(x);break;case j.ESC:p();g.prevent(x);break;case j.UP:case j.DOWN:s(y===j.UP?-1:1);g.prevent(x);break;}}function u(x,y){m=y.getActive();n=i.scry(m,'[role="menuitem"]');if(!o)o=g.listen(document.documentElement,'keydown',t);}function v(){if(l.getActive()==m)q(i.scry(m,'.selected')[0]);}var w={init:function(x){l.listen('show',x,u);l.listen('hide',x,v);},MENU_HIDDEN:'menu_hidden'};e.exports=w;},null);
__d("isEmail",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/^[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+(:?\.[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i;function h(i){return g.test(i);}e.exports=h;},null);
__d("NotificationJewelReminder",["Arbiter","ContextualDialog","ContextualDialogXUITheme","DOM","Event","ImageBlock.react","LayerFadeOnHide","LayerFadeOnShow","NotificationConstants","NotificationStore","NotificationUpdates","React","SubscriptionsHandler","Toggler","$","cx","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=2,z="fbRequestsJewel",aa="fbNotificationsJewel";ba.init=function(ca){"use strict";new ba(ca);};function ba(ca){"use strict";this.$NotificationJewelReminder0=ca;if(ca.gk){if(ca.request.count>0){this.$NotificationJewelReminder1(z);}else this.$NotificationJewelReminder2();}else{if(p.getCount()){this.$NotificationJewelReminder3();return;}q.subscribeOnce('update-notifications',function(da,ea){if(ea.payloadsource===o.PayloadSourceType.INITIAL_LOAD)this.$NotificationJewelReminder3();}.bind(this));}}ba.prototype.$NotificationJewelReminder2=function(){"use strict";if(this.$NotificationJewelReminder0.gk)if(!this.$NotificationJewelReminder0.show_notif)return;if(p.getCount()){this.$NotificationJewelReminder3();return;}};ba.prototype.$NotificationJewelReminder3=function(){"use strict";p.getNotifications(p.getCount(),this.$NotificationJewelReminder5.bind(this));};ba.prototype.$NotificationJewelReminder5=function(ca){"use strict";var da=t.getInstance(u(aa));if(da&&da.isShown())return;var ea=[],fa,ga=Object.keys(ca);for(var ha=0;ha<ga.length;ha++){if(!ca[ga[ha]].showBeep)continue;var ia=ca[ga[ha]].actors;if(ia.length===0)continue;for(var ja=0;ja<ia.length;ja++){fa=fa||ia[ja].profile_picture.uri;if(ea.length<y&&ia[ja].name&&ea.indexOf(ia[ja].name)===-1)ea.push(ia[ja].name);}if(ea.length===y)break;}if(ea.length===0||!fa)return;var ka=this.$NotificationJewelReminder6(fa,ea,ga.length,aa);this.$NotificationJewelReminder7(ka);};ba.prototype.$NotificationJewelReminder6=function(ca,da,ea,fa){"use strict";var ga=r.createElement("div",{className:"_5bov"},r.createElement(l,null,r.createElement("img",{className:"_5bow",src:ca}),r.createElement("div",null,this.$NotificationJewelReminder8(ea,da,fa)))),ha=j.create('div');r.render(ga,ha);var ia=new h({alignment:'right',contextSelector:'#'+fa,offsetY:-10,position:'below',theme:i,width:210},ha);ia.enableBehaviors([n,m]);return ia;};ba.prototype.$NotificationJewelReminder8=function(ca,da,ea){"use strict";da=da.map(function(fa){return r.createElement("b",null,fa);});if(ea===aa){return (w._({"*":{"notifications":"Powiadomienia od u\u017cytkownika {notification senders}: {number}","notification":"{number} powiadomienie od u\u017cytkownika {notification senders}"}},[w.param("number",ca,[0]),w['enum'](ca>1?'notifications':'notification',{notifications:"notifications",notification:"notification"}),w.param("notification senders",x(da))]));}else return (w._({"*":{"requests":"Zaproszenia do znajomych ({number}) od: {request senders}","request":"{number} zaproszenie do znajomych od: {request senders}"}},[w.param("number",ca,[0]),w['enum'](ca>1?'requests':'request',{requests:"requests",request:"request"}),w.param("request senders",x(da))]));};ba.prototype.$NotificationJewelReminder7=function(ca){"use strict";ca.show();this.$NotificationJewelReminder9=ca;var da=ca.getRoot();this.$NotificationJewelRemindera=setTimeout(this.$NotificationJewelReminderb.bind(this),this.$NotificationJewelReminder0.show_time);this.$NotificationJewelReminderc=new s();this.$NotificationJewelReminderc.addSubscriptions(g.subscribe('layer_shown',function(ea,fa){if(fa&&fa.type==='Jewel')this.$NotificationJewelReminderb();}.bind(this)),k.listen(da,'mouseenter',function(){clearTimeout(this.$NotificationJewelRemindera);}.bind(this)),k.listen(da,'mouseleave',this.$NotificationJewelReminderb.bind(this)),k.listen(da,'click',function(){this.$NotificationJewelReminderb();t.show(u(aa));}.bind(this)));};ba.prototype.$NotificationJewelReminderb=function(){"use strict";clearTimeout(this.$NotificationJewelRemindera);this.$NotificationJewelReminder9.hide();this.$NotificationJewelReminderc.release();};ba.prototype.$NotificationJewelReminder1=function(ca){"use strict";if(!this.$NotificationJewelReminder0.show_request||!this.$NotificationJewelReminder0.request.count)return;var da=t.getInstance(u(ca));if(da&&da.isShown())return;var ea=this.$NotificationJewelReminder6(this.$NotificationJewelReminder0.request.pics[0],this.$NotificationJewelReminder0.request.names,this.$NotificationJewelReminder0.request.count,ca);this.$NotificationJewelReminderd(ea);};ba.prototype.$NotificationJewelReminderd=function(ca){"use strict";ca.show();this.$NotificationJewelRemindere=ca;var da=ca.getRoot();this.$NotificationJewelReminderf=setTimeout(this.$NotificationJewelReminderg.bind(this),this.$NotificationJewelReminder0.show_time);this.$NotificationJewelReminderh=new s();this.$NotificationJewelReminderh.addSubscriptions(g.subscribe('layer_shown',function(ea,fa){if(fa&&fa.type==='Jewel')this.$NotificationJewelReminderg();}.bind(this)),k.listen(da,'mouseenter',function(){clearTimeout(this.$NotificationJewelReminderf);}.bind(this)),k.listen(da,'mouseleave',this.$NotificationJewelReminderg.bind(this)),k.listen(da,'click',function(){this.$NotificationJewelReminderg();t.show(u(z));}.bind(this)));};ba.prototype.$NotificationJewelReminderg=function(){"use strict";clearTimeout(this.$NotificationJewelReminderf);this.$NotificationJewelRemindere.hide();this.$NotificationJewelReminderh.release();this.$NotificationJewelReminder2();};e.exports=ba;},null);
__d("PagesVoiceBar",["$","Arbiter","AsyncRequest","ChannelConstants","DOM","URI","ViewportBounds","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o='PagesVoiceBar/initialized',p='PagesVoiceBar/switchVoice',q='page_transition',r='pages_voice_bar_sync',s=null,t=null,u=null,v=false,w=m.addTop(0);function x(da,ea){new i('/ajax/pages/switch_voice.php').setData(ea).setHandler(function(fa){ba();}).send();}function y(){s=null;}function z(da,ea){if(ea.obj.profile_id&&ea.obj.profile_id===s)ba();}function aa(da){h.subscribe(o,da);}function ba(){l.getNextURI().go();}var ca={initVoiceBar:function(){if(v)return;t=g('pagesVoiceBarContent');h.subscribe(p,x);h.subscribe(q,y);h.subscribe(j.getArbiterType(r),z);v=true;u=k.scry(t,"^div._4f7n")[0];h.inform(o,null,h.BEHAVIOR_STATE);},update:function(da,ea){aa(function(){s=ea;k.setContent(t,da);var fa=t.offsetHeight;if(!u&&w.getSize()!==fa){w.remove();w=m.addTop(m.getTop()+fa);}});}};e.exports=ca;},null);
__d("XPrivacyCheckupSpawnDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/checkup\/dialog\/show\/",{source:{type:"Enum",enumType:1}});},null);
__d("PrivacyLiteFlyout",["Animation","Arbiter","ArbiterMixin","AsyncDialog","AsyncRequest","Banzai","CSS","DOM","Ease","Event","Parent","PrivacyConst","Style","SubscriptionsHandler","Toggler","XPrivacyCheckupSpawnDialogController","XPrivacyRemindersDismissController","copyProperties","csx","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba='PrivacyLiteFlyout/expandingSection',ca={},da={};function ea(ka,la,ma){var na=la?0:ka.offsetHeight;s.set(ka,'height',na+'px');s.set(ka,'overflow','hidden');m.show(ka);var oa=la?ka.scrollHeight:0,pa=n.getID(ka);ca[pa]&&ca[pa].stop();ca[pa]=new g(ka).to('height',oa).ondone(function(){ca[pa]=null;s.set(ka,'height','');s.set(ka,'overflow','');oa||m.hide(ka);ma();}).duration(Math.abs(oa-na)*1.5).ease(o.sineOut).go();}function fa(ka){var event='other_section';switch(ka){case 'who_can_see':case 'who_can_contact':case 'how_to_stop':event=ka;break;}return event;}var ga=null,ha=false,ia=false,ja=x({loadBody:function(){this._loadBody(false);},loadBodyFromMegaphone:function(){this._loadBody(true);},_loadBody:function(ka){if(!ha&&aa('fbPrivacyLiteFlyoutLoading')){ha=true;new k('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:ka}).send();}},_addListener:function(ka,event,la){return p.listen(ka,'click',function(){l.post('privacy_lite',{event:event,exit_point:la});});},addLoggingElem:function(ka,event,la){var ma=this._loggingElements.length,na={elem:ka,event:event,exit:la};this._loggingElements[ma]=na;},registerSettingsAndBasicsLinkLogging:function(ka,event,la,ma){var na=n.scry(ka,"._5cw0")[0],oa=n.scry(ka,"._3djx")[0];if(na){this._settingsLinkListener&&this._settingsLinkListener.release();this._settingsLinkListener=this._addListener(na,event,la);}if(oa){this._privacyBasicsLinkListener&&this._privacyBasicsLinkListener.release();this._privacyBasicsLinkListener=this._addListener(oa,event,ma);}},_subscribeListeners:function(){this._loggingElements&&this._loggingElements.forEach(function(ka){this._subscriptions&&this._subscriptions.addSubscriptions(this._addListener(ka.elem,ka.event,ka.exit));},this);},renderBody:function(ka,la){var ma=aa('fbPrivacyLiteFlyoutLoading');if(ma){n.replace(ma,ka);ja.registerCallback(function(){ja.inform('load',null,h.BEHAVIOR_STATE);},la);}},hideCleanup:function(ka){h.inform(ba);var la=n.scry(ka,"._2va0").forEach(function(ma){m.removeClass(ma,"_2va0");});},registerFlyoutToggler:function(ka,la,ma){this._loggingElements=[];ga=la;var na=u.createInstance(ka);na.setSticky(false);u.listen(['show','hide'],la,function(oa){ja.inform(oa);ia=oa==='show';if(!ia){ja.hideCleanup(ka);na.hide();this._subscriptions&&this._subscriptions.release();this._subscriptions=null;h.inform('layer_hidden',{type:'PrivacyShortcutsFlyout'});}else{h.inform('layer_shown',{type:'PrivacyShortcutsFlyout'});if(ma){ma.start(this);ma=null;}h.subscribeOnce(ba,function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=new t();this._subscribeListeners();}.bind(this));l.post('privacy_lite',{event:'show_flyout',exit_point:null});}}.bind(this));},isFlyoutVisible:function(){return ga&&u.getActive()===ga;},exists:function(){return !!n.scry(document.body,"._59fc")[0];},setFlyoutVisible:function(ka){ka?u.show(ga):u.hide(ga);},showSection:function(ka){var la=da[ka];if(!la)return;if(!la.sublist_container){ja.inform('expanded',ka,h.BEHAVIOR_STATE);return;}var ma=la.chevron,na=la.sublist_container;h.inform(ba,ma);if(ja.inform('expand',ka)!==false){m.removeClass(ma,"_9or");m.addClass(ma,"_9os");ea(na,true,function(){ja.inform('expanded',ka);});}},hideSection:function(ka,la,ma){var na=da[ka],oa=na.chevron,pa=na.sublist_container;if(ma===oa)return;if(ja.inform('collapse',ka)!==false){m.addClass(oa,"_9or");m.removeClass(oa,"_9os");ea(pa,false,function(){ja.inform('collapsed',ka);});}},toggleSection:function(ka){var la=da[ka].chevron;u.getInstance(la).hide();if(m.hasClass(la,"_9or")){ja.showSection(ka);l.post('privacy_lite',{event:fa(ka)+'_expand',exit_point:null});new k('/ajax/privacy/privacy_lite/log_section_expand').setData({section:ka}).send();}else{ja.hideSection(ka);l.post('privacy_lite',{event:fa(ka)+'_collapse',exit_point:null});}},registerSection:function(ka,la){da[ka]=la;if(la.sublist_container){h.subscribe(ba,ja.hideSection.bind(null,ka));p.listen(la.section_block,'click',ja.toggleSection.bind(null,ka));}ja.inform(ka);},registerInlineHelpOnAudienceChangeNewSelector:function(ka,la,ma,na){ka=ka.getInstance();ka.subscribe('changed',function(oa){this._registerInlineHelpOnAudienceChange(la,ma,na,ka.getSelectedBaseValue());}.bind(this));},registerSelectorLogging:function(ka,la,ma,na){ka=ka.getInstance();ka.subscribe('open',function(){l.post('privacy_lite',{event:la,exit_point:null});});ka.subscribe('close',function(){l.post('privacy_lite',{event:ma,exit_point:null});});ka.subscribe('changed',function(){l.post('privacy_lite',{event:na,exit_point:null});});},_registerInlineHelpOnAudienceChange:function(ka,la,ma,na){var oa=n.find(ka,"._9o_"),pa=n.find(ka,"._2v9_");if(ma){var qa=n.find(ka,"._5n9w"),ra=(na==r.BaseValue.EVERYONE);m.conditionShow(qa,ra);m.conditionShow(oa,!ra);if(qa&&ra){var sa=(w.getURIBuilder()).setString('type','delta_everyone').setBool('log_plite',true).getURI();new k(sa).send();}}else m.show(oa);m.hide(pa);if(la)new k('/ajax/privacy/privacy_lite/kill_intro').send();},registerInlineHelpXOutOnClick:function(ka,la,ma){p.listen(ka,'click',function(){m.addClass(la,"_9p0");});},registerBlockUnhideOnFocus:function(ka,la){p.listen(ka,'focus',function(ma){m.show(ma);l.post('privacy_lite',{event:'block_user_input_click',exit_point:null});}.bind(this,la));},registerMessageFilterSettingOnClick:function(ka,la){var ma=n.find(ka,"._fv0");p.listen(ka,'click',function(){if(ma.checked){new k('/ajax/mercury/change_filtering_type.php').setData({filtering_type:la,source:'privacy_lite'}).send();}else{var event='basic_filtering';if(la==='strict')event='strict_filtering';l.post('privacy_lite',{event:event,exit_point:null});}});},registerPrivacyCheckupListener:function(ka){p.listen(ka,'click',function(){this.setFlyoutVisible(false);j.send(new k((v.getURIBuilder()).setEnum('source','plite').getURI()));l.post('privacy_lite',{event:'exit_flyout',exit_point:'privacy_checkup'});}.bind(this));},displayPrivacyCheckup:function(ka){ka.show();}},i);e.exports=ja;},null);
__d("PrivacyLiteFlyoutHelp",["Event","Arbiter","AsyncRequest","Banzai","ContextualHelpSearchController","CSS","DOM","Parent","copyProperties","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r,s;function t(u,v,w,x,y){this._width=315;s=m.find(v,'input');var z=m.create('div');this.init(u,s,z,w,x,{focusSearchBox:false});r=n.byClass(v,"_8-a");g.listen(y,'click',function(){this._hideSearch(this);j.post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}.bind(this));h.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var aa=m.scry(r,"._d1r")[0];aa&&g.listen(aa,'click',function(){l.addClass(r,"_aw6");s.focus();j.post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new i('/ajax/privacy/privacy_lite/help_suggestions').setHandler(function(ba){var ca=ba.getPayload().searchSuggestions,da=m.find(r,"._4_8m");m.setContent(da,ca);l.addClass(r,"_4_8l");}.bind(this)).send();}.bind(this));}o(t.prototype,new k(),{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();l.removeClass(r,"_aw6");},show:function(u){if(u===this.topics_area){l.removeClass(r,"_aw7");return;}else if(u===this.loader){l.addClass(r,"_aw7");l.hide(this.results_area);}else l.hide(this.loader);l.show(u);}});e.exports=t;},null);
__d("ViewasChromeBar",["Event","Arbiter","AsyncRequest","CSS","DOM","Focus","ModalMask","PageTransitions","Parent","cx","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r='ViewasChromeBar/initialized',s=null,t=false;function u(x){h.subscribe(r,x);}function v(x){j.addClass(x,"_7g7");var y=k.find(x,"._7g0");l.set(k.find(y,'.textInput'));}var w={initChromeBar:function(x){if(t)return;s=x;t=true;h.inform(r,null,h.BEHAVIOR_STATE);},update:function(x,y){u(function(){k.setContent(s,x);if(y)new i('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(x){g.listen(x,'click',v.bind(null,o.byClass(x,"_7f-")));},registerFlyoutModalMask:function(){m.show();n.registerHandler(m.hide,10);}};e.exports=w;},null);
__d("SearchSingleState",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j,k,l,m){return {classNames:'grammar',groupIndex:0,indexInGroup:j,path:k,text:l,type:'grammar',uid:m};}var i={getSuggestions:function(j,k,l){if(l==='ent:user'){return this.getSuggestionsForUser(j,k);}else if(l==='ent:page'){return this.getSuggestionsForPage(j,k);}else if(l==='ent:app'){return this.getSuggestionsForApp(j,k);}else if(l==='ent:group')return this.getSuggestionsForGroup(j,k);},getSuggestionsForUser:function(j,k){return [h(0,'/search/'+j+'/photos-of',g._("zdj\u0119cia u\u017cytkownika {full name}",[g.param("full name",k)]),'photos_of_user'),h(1,'/search/'+j+'/friends',g._("znajomi u\u017cytkownika {full name}",[g.param("full name",k)]),'friends_of_user'),h(2,'/search/'+j+'/pages-liked',g._("ulubione strony u\u017cytkownika {full name}",[g.param("full name",k)]),'pages_liked_user'),h(3,'/search/str/'+k+'/users-named',g._("znajd\u017a wszystkich u\u017cytkownik\u00f3w o nazwie \u201e{full name}\u201d",[g.param("full name",k)]),'people_named_text')];},getSuggestionsForPage:function(j,k){return [h(0,'/search/'+j+'/photos-of',g._("zdj\u0119cia strony {name of page}",[g.param("name of page",k)]),'photos_of_page'),h(1,'/search/'+j+'/likers',g._("u\u017cytkownicy, kt\u00f3rzy lubi\u0105 stron\u0119 {name of page}",[g.param("name of page",k)]),'page_likers'),h(2,'/search/str/'+k+'/pages-named',g._("znajd\u017a wszystkie strony o nazwie \u201e{name of page}\u201d",[g.param("name of page",k)]),'pages_named_text')];},getSuggestionsForGroup:function(j,k){return [h(0,'/search/'+j+'/members',g._("Cz\u0142onkowie grupy {name of group}",[g.param("name of group",k)]),'members_of_group'),h(1,'/search/'+j+'/photos-in',g._("zdj\u0119cia w grupie {name of groups}",[g.param("name of groups",k)]),'photos_in_group'),h(2,'/search/'+j+'/creators',g._("Tw\u00f3rcy grupy {name of group}",[g.param("name of group",k)]),'creators_of_group'),h(3,'/search/'+j+'/admins',g._("Administratorzy grupy {name of group}",[g.param("name of group",k)]),'admins_of_group')];},getSuggestionsForApp:function(j,k){return [h(0,'/search/'+j+'/apps-similar-to',g._("aplikacje podobne do {name of app}",[g.param("name of app",k)]),'similar_apps'),h(1,'/search/'+j+'/app-users',g._("u\u017cytkownicy aplikacji {name of app}",[g.param("name of app",k)]),'app_users'),h(2,'/search/str/'+k+'/pages-named',g._("znajd\u017a wszystkie aplikacje o nazwie \u201e{name of page}\u201d",[g.param("name of page",k)]),'apps_named_text')];}};e.exports=i;},null);
__d("SearchDataSource",["Event","Arbiter","AsyncResponse","DataSource","HashtagSearchResultUtils","copyProperties","createArrayFromMixed","PageTransitions","SearchSingleState","UnicodeCJK","debounce","errorCode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=100,t='/typeahead/search/facebar/nullstate/';for(var u in j)if(j.hasOwnProperty(u))w[u]=j[u];var v=j===null?null:j.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=j;function w(x){"use strict";this._token=x.token||'';this._lazyonload=x.lazyonload===false?false:true;this._extraTypes=x.extraTypes;this._buckets=x.buckets;this._noMultiFetch=x.noMultiFetch||false;this._nullStateConfig=x.nullStateConfig||{};var y=x.maxResults||8;j.call(this,x);this._numResults={min:3,max:y};this.recordingRoute='non_banzai';this._enabledHashtag=x.enabledHashtag||false;this.logBackendQueriesWindow=x.logBackendQueriesWindow||25;this._genTime=x.genTime;this._bootstrapError=false;this.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:true,prefix_kana_drop_trailing_latin:x.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:x.cjkUiCacheHiraganaToKatakana});this.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:x.cjkDropLatinInCjTokens});}w.prototype.init=function(){"use strict";v.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=true;this._updateMaxResults();var x=q(this._updateMaxResults,s,this,true);g.listen(window,'resize',x);if(this._nullStateConfig.prefetchNullState)this.fetchNullState('');if(this._nullStateConfig.singleState)h.subscribe('page_transition',this.handlePageTransition.bind(this));if(this._nullStateConfig.prefetchNullState||this._nullStateConfig.singleState)h.subscribe('search/updateNullState',this.updateNullState.bind(this));if(this._nullStateConfig.recent)h.subscribe('search/refreshRecentSearchesNullstate',this.refreshRecentSearches.bind(this));};w.prototype.refreshRecentSearches=function(){"use strict";this.nullStateData=null;};w.prototype.handlePageTransition=function(){"use strict";this.nullStateParams={};};w.prototype.updateNullState=function(event,x){"use strict";this.nullStateParams=x;this.fetchNullState();};w.prototype.markResultsAsNullState=function(x){"use strict";var y,z,aa;if(x){var ba;for(y=x,z=Array.isArray(y),aa=0,y=z?y:y[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(z){if(aa>=y.length)break;ba=y[aa++];}else{aa=y.next();if(aa.done)break;ba=aa.value;}ba.isNullState=true;}}};w.prototype.markResultsAsSingleState=function(x){"use strict";var y,z,aa;if(x){var ba;for(y=x,z=Array.isArray(y),aa=0,y=z?y:y[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(z){if(aa>=y.length)break;ba=y[aa++];}else{aa=y.next();if(aa.done)break;ba=aa.value;}ba.isSingleState=true;}}};w.prototype.fetchNullState=function(x){"use strict";this.lastNullOrSingleStateFetchStartTime=Date.now();if(!this._nullStateConfig.hasNullState)return;var y=null;if(this.nullStateParams&&this.nullStateParams.uid){this.nullStateParams.query=x||'';y=this._fetchDataForSingleState();this.markResultsAsNullState(y);}else{y=this._fetchDataForNullState();this.markResultsAsSingleState(y);}if(y)this.inform('respond',{value:this.nullStateParams?this.nullStateParams.query:'',results:y,isAsync:false,nullState:true});};w.prototype._fetchDataForSingleState=function(){"use strict";if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==='ent:app'||this.nullStateParams.type==='ent:group'||this.nullStateParams.type==='ent:page'){this.fetch(t,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:true});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return;}var x=o.getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!x)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:x,profileID:this.nullStateParams.uid};return x;};w.prototype._shouldRefreshNullState=function(){"use strict";if(!this._nullStateConfig.recent)return false;var x=window.location.href;if(!x)return false;if(x.contains('allactivity')&&x.contains('log_filter=search'))return true;return false;};w.prototype._fetchDataForNullState=function(){"use strict";if(this.nullStateData&&!this._shouldRefreshNullState()){this.markResultsAsNullState(this.nullStateData);setTimeout(function(){this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});}.bind(this),0);return;}if(!this.fetchingNullState){this.fetchingNullState=true;this.fetch(t,{value:""},{nullState:true,value:''});}return null;};w.prototype.dirty=function(){"use strict";v.dirty.call(this);this._bootstrapError=false;this._fetchOnUseRequests=[];};w.prototype.asyncErrorHandler=function(x,y){"use strict";if(y.nullState)this.fetchingNullState=false;if(y.bootstrap)this._bootstrapError=true;this.inform('fetchError',{response:x,fetch_context:y});if(window.Dialog&&window.Dialog.getCurrent()==null&&x.getError()==1400003)i.verboseErrorHandler(x);};w.prototype.fetch=function(x,y,z){"use strict";z=z||{};z.fetch_start=Date.now();var aa=n.getMostRecentURI().path;y=l(y,{path:aa});v.fetch.call(this,x,y,z);};w.prototype.fetchHandler=function(x,y){"use strict";if(y.nullState){this.fetchingNullState=false;this.nullStateData=x.getPayload().entries;this.markResultsAsNullState(this.nullStateData);this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});return;}if(y.singleState){this.nullStateDataWithProfile.data=x.getPayload().entries;this.markResultsAsSingleState(this.nullStateDataWithProfile.data);this.inform('respond',{results:this.nullStateDataWithProfile.data,isAsync:true,value:this.nullStateParams?this.nullStateParams.query:'',nullState:true});return;}var z=x.getPayload(),aa=l({fetch_end:Date.now()},y),ba=aa.value?h.BEHAVIOR_EVENT:h.BEHAVIOR_PERSISTENT;this.inform('beginFetchHandler',{response:x});if(y.bootstrap)this._bootstrapError=false;if(y.type=='lean'){this._leanPayload=z;this._processLean();}else{if(z.coeff2_ts)aa.coeff2_ts=z.coeff2_ts;v.fetchHandler.call(this,x,y);if(y.bootstrap&&!x.getRequest().getData().no_cache)aa.browserCacheHit=(z.timestamp<this._genTime);if(y.bootstrap&&!z.no_data&&this._bootstrapRequestsPending>0){y.bootstrap=false;--this._bootstrapRequestsPending;!this._bootstrapRequestsPending&&this._bootstrapPostProcess();}if(z.no_data||z.stale||z.token!==this._token){var ca=l({},x.getRequest().getData());if(ca.lazy){delete ca.lazy;ca.token=this._token;this._fetchOnUse(ca,y);}}}this.inform('endpointStats',{info:aa,response:x},ba);if(y&&!!y.value)this.inform('completeFetch',{response:x,stats:aa});};w.prototype.respond=function(x,y,z){"use strict";this.inform('respondValidUids',y);this.inform('reorderResults',y);var aa=this.buildData(y,x);aa.forEach(function(ba,ca){ba.origIndex=ca;ba.fromCache=!z;});this.inform('respond',{value:x,results:aa,isAsync:!!z});return aa;};w.prototype.buildData=function(x,y){"use strict";if(!x||x.length===0)return [];var z=x.map(this.getEntry,this);z.length=Math.min(z.length,this._maxResults);return z;};w.prototype.fetchLean=function(){"use strict";this._fetchLean();};w.prototype._isQueryTooShort=function(x){"use strict";return x.length<this._minQueryLength&&!p.hasIdeoOrSyll(x);};w.prototype.shouldFetchMoreResults=function(x){"use strict";return x.length<this._maxResults;};w.prototype._bootstrapPostProcess=function(){"use strict";var x={time:Date.now()};this.inform('bootstrapped',x,h.BEHAVIOR_PERSISTENT);this._processLean();};w.prototype._processLean=function(){"use strict";if(this._leanPayload){var x,y=this._leanPayload.entries;for(var z in y){x=this.getEntry(z);x&&(x.index=y[z]);}this.setExclusions(this._leanPayload.blocked);this._leanPayload=null;}};w.prototype._updateMaxResults=function(){"use strict";var x=window.innerHeight||document.documentElement.clientHeight;this.setMaxResults(Math.max(this._numResults.min,Math.min(this._numResults.max,Math.ceil(2+((x-370)/56)))));};w.prototype._bootstrapFetch=function(x,y){"use strict";var z=l(y,this.bootstrapData);if(this._criticalOnly&&this._lazyonload)z.lazy=1;this.fetch(this.bootstrapEndpoint,z,{bootstrap:true,type:x});++this._bootstrapRequestsPending;};w.prototype._fetchOnUse=function(x,y){"use strict";for(var z in this.bootstrapData)!x.hasOwnProperty(z)&&(x[z]=this.bootstrapData[z]);if(this._criticalOnly){this._fetchOnUseRequests.push({args:x,ctx:y});}else this.fetch(this.bootstrapEndpoint,x,y);};w.prototype._fetchLean=function(){"use strict";var x={no_cache:1};x.options=m(x.options);x.options.push('lean');this._fetchOnUse(x,{type:'lean'});};w.prototype.bootstrap=function(x){"use strict";if(!x){this._criticalOnly=false;this._flushFetchOnUseRequests();}if(this._bootstrapped)return;var y={filter:['event'],no_cache:1};this._fetchOnUse(y,{type:'event'});var z=['app','page','group','friendlist'];z=z.concat(this._extraTypes||[]);if(this._noMultiFetch){z.push('user');this._bootstrapFetch('user',{filter:z});}else{this._bootstrapFetch('other',{filter:z});if(this._buckets){for(var aa=0;aa<this._buckets.length;++aa){var ba={filter:['user'],buckets:this._buckets[aa]};this._bootstrapFetch('user',ba);}}else this._bootstrapFetch('user',{filter:['user']});}this._fetchLean();this._bootstrapped=true;};w.prototype.getBootstrapError=function(){"use strict";return this._bootstrapError;};w.prototype._flushFetchOnUseRequests=function(){"use strict";var x=this._fetchOnUseRequests.length;for(var y=0;y<x;++y){var z=this._fetchOnUseRequests[y];this.fetch(this.bootstrapEndpoint,z.args,z.ctx);}if(x>0)this.inform('extra_bootstrap',{time:Date.now()},h.BEHAVIOR_PERSISTENT);this._fetchOnUseRequests=[];};w.prototype.onLoad=function(x,y){"use strict";this.inform('onload',{time:Date.now()},h.BEHAVIOR_PERSISTENT);if(x)setTimeout(this.bootstrap.bind(this,y),0);};w.prototype.mergeUids=function(x,y,z,aa){"use strict";var ba=this.getDynamicHashtagResult(aa);if(aa&&ba&&y.indexOf(ba)<=0)y.unshift(ba);var ca=z[0]?this.getEntry(z[0]):null,da=y[0]?this.getEntry(y[0]):null,ea=(ca&&ca.replace_results)?ca:null;ea=(!ea&&da&&da.replace_results)?da:ea;var fa=v.mergeUids.call(this,x,y,z,aa);if(ea){this.inform('backend_topreplace',{});return this.deduplicateByKey([ea.uid].concat(fa));}return fa;};w.prototype.getTextToIndexFromFields=function(x,y){"use strict";var z=[],aa=x.tokenVersion==="v2";for(var ba=0;ba<y.length;++ba){if(aa&&(y[ba]==="text"||y[ba]==="alias"))continue;var ca=x[y[ba]];if(ca)z.push(ca.join?ca.join(' '):ca);}return z.join(' ');};w.prototype.getDynamicHashtagResult=function(x){"use strict";if(!x||!this._enabledHashtag)return;var y=k.getHashtagFromQuery(x);if(!y)return;var z='hashtag:'+y,aa=this.getEntry(z);if(!aa)this.processEntries([k.makeTypeaheadResult(y)],x);return z;};e.exports=w;},null);
__d("legacy:SearchDataSource",["SearchDataSource"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.SearchDataSource=b('SearchDataSource');},3);
__d("SearchTypeaheadCore",["Arbiter","DOM","Event","Input","Parent","ScriptPath","TypeaheadCore"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q){"use strict";m.call(this,q);}p.prototype.init=function(q,r,s){"use strict";o.init.call(this,q,r,s);var t=k.byTag(s,'form'),u=this.reset.bind(this);g.subscribe('pre_page_transition',function(event,w){var x=/^\/search/,y=x.test(w.from.path),z=x.test(w.to.path);if(y&&!z)setTimeout(u,0);});if(t){var v=h.find(t,'input.search_sid_input');i.listen(t,'submit',function(){if(this.data&&this.data.queryData)v.value=this.data.queryData.sid;setTimeout(u,0);}.bind(this),i.Priority.URGENT);}};p.prototype.select=function(){"use strict";this.reset();this.element.focus();setTimeout((function(){this.element.blur();}).bind(this),0);l.setClickPointInfo({click:'Search'});};p.prototype.handleTab=function(event){"use strict";var q=this.view.getQuerySuggestion(this.value);if(q){j.setValue(this.element,q);this.checkValue();event.kill();}else o.handleTab.call(this,event);};p.prototype.getSearchType=function(){"use strict";return 'regular';};p.prototype.focus=function(){"use strict";o.focus.call(this);if(this.getValue().length===0||this.element.getAttribute('singlestate')==='true')this.data.fetchNullState(this.getValue());};p.prototype.keyup=function(){"use strict";o.keyup.call(this);if(this.getValue().length===0)this.data.fetchNullState(this.getValue());this.element.setAttribute('singlestate',false);};e.exports=p;},null);
__d("legacy:SearchTypeaheadCore",["SearchTypeaheadCore"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.SearchTypeaheadCore=b('SearchTypeaheadCore');},3);
__d("SearchPeopleSeeMore",["TokenizeUtil","URI","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l,m){"use strict";var n=m.placement,o=m.strategy,p=m.min_users,q=m.query_to_show;this.seeMoreUri=l;this.placement=n;this.strategy=o;this.min_users=p;this.query_to_show=q;}k.prototype.injectInto=function(l,m){"use strict";if(!l||l.length===0)return;var n=this.$SearchPeopleSeeMore0(l,m);if(!n)return;var o=this.createFindAllPeopleResult(n);this.$SearchPeopleSeeMore1(o,l);};k.prototype.$SearchPeopleSeeMore0=function(l,m){"use strict";if(this.strategy==='disabled')return null;if(l[0].type!=='user')return null;var n=l.filter(function(r){return r.type==='user';});if(n.length<this.min_users){return null;}else if(n.length>this.min_users)n=n.slice(0,this.min_users);var o,p=n[0];switch(this.strategy){case 'all_identical':var q=n.every(function(r){return this.$SearchPeopleSeeMore2(p.text,r.text);}.bind(this));o=q?p.text:null;break;case 'top_results_prefix':o=n.reduce(function(r,s){return this.$SearchPeopleSeeMore3(r,s.text);}.bind(this),p.text);break;default:j(false);}if(!o)return null;return this.query_to_show==='common'?o:m;};k.prototype.$SearchPeopleSeeMore1=function(l,m){"use strict";if(this.placement==='last'){var n=m.filter(function(p){return p.type==='user';}).length;m.splice(n,0,l);}else{var o=parseInt(this.placement,10);m.splice(o,0,l);}};k.prototype.createFindAllPeopleResult=function(l){"use strict";var m=i._("Znajd\u017a wszystkie osoby, kt\u00f3re nazywaj\u0105 si\u0119 \u201e{query}\u201d",[i.param("query",l.toLowerCase())]),n=new h(this.seeMoreUri).addQueryData({q:l,init:'psm'}).toString();return {uid:'people_search',type:'user',text:m,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',path:n};};k.prototype.$SearchPeopleSeeMore2=function(l,m){"use strict";if(l===m)return true;var n=g.tokenize(l),o=g.tokenize(m);if(n.length!==o.length)return false;return n.every(function(p,q){return p===o[q];});};k.prototype.$SearchPeopleSeeMore3=function(l,m){"use strict";if(!l||!m)return;if(l===m)return l;var n=g.tokenize(l),o=g.tokenize(m),p=[];for(var q=0;q<n.length&&q<o.length;q++)if(n[q]===o[q]){p.push(n[q]);}else break;if(p.length===0)return null;return p.join(' ');};e.exports=k;},null);
__d("SearchPeopleFriendsOf",["TokenizeUtil","URI","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l){"use strict";this.friendsOfUri=k;this.placementStrategy=l.placement_strategy;this.placementParams=l.placement_params;this.triggerStrategy=l.trigger_strategy;this.triggerParams=l.trigger_params;}j.prototype.injectInto=function(k,l){"use strict";if(!k||k.length===0||!this.$SearchPeopleFriendsOf0(k,l))return;if(k[0].type!=="user")return;var m=this.createFindAllFriendsOf(k[0].text,k[0].uid);this.$SearchPeopleFriendsOf1(m,k);};j.prototype.$SearchPeopleFriendsOf1=function(k,l){"use strict";var m=this.$SearchPeopleFriendsOf2(l);if(m==='last'){var n=l.filter(function(o){return o.type==='user';}).length;m=n;}l.splice(m,0,k);};j.prototype.$SearchPeopleFriendsOf0=function(k,l){"use strict";var m=this.$SearchPeopleFriendsOf3(this.triggerStrategy);return m(k,this.triggerParams,l);};j.prototype.$SearchPeopleFriendsOf2=function(k){"use strict";var l=this.$SearchPeopleFriendsOf3(this.placementStrategy);return l(k,this.placementParams);};j.prototype.$SearchPeopleFriendsOf3=function(k){"use strict";return this["$SearchPeopleFriendsOf_"+k];};j.prototype.$SearchPeopleFriendsOf4=function(k,l,m){"use strict";return false;};j.prototype.$SearchPeopleFriendsOf5=function(k,l,m){"use strict";return true;};j.prototype.$SearchPeopleFriendsOf6=function(k,l,m){"use strict";var n=parseInt(l,10),o=0;for(var p=0;p<k.length;p++){var q=k[p];if(q.type==='user'&&q.index_rank==-1)o++;if(o>n)return false;}return true;};j.prototype.$SearchPeopleFriendsOf7=function(k,l,m){"use strict";var n=parseInt(l,10),o=g.tokenize(m);o=o.map(function(w){return w.toLowerCase();});var p=0;for(var q=0;q<k.length;q++){var r=k[q];if(r.type!=='user'||r.index_rank!=-1)continue;var s=g.tokenize(r.text);s=s.map(function(w){return w.toLowerCase();});if(s.length<o.length)continue;var t=true;for(var u=0;u<o.length-1;u++)if(o[u]!==s[u]){t=false;break;}var v=o.length-1;if(t&&s[v].startsWith(o[v])){p++;if(p>=n)return false;}}return true;};j.prototype.$SearchPeopleFriendsOf8=function(k,l){"use strict";return "last";};j.prototype.$SearchPeopleFriendsOf9=function(k,l){"use strict";return 1;};j.prototype.createFindAllFriendsOf=function(k,l){"use strict";var m=i._("Znajomi u\u017cytkownika {name}",[i.param("name",k)]),n=new h(this.friendsOfUri).addQueryData({q:"",init:'psm',fofid:l}).toString();return {uid:'people_search',type:'user',text:m,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',logType:'grammar',path:n};};e.exports=j;},null);
__d("SearchTypeaheadView",["Arbiter","ContextualLayerUpdateOnScroll","ContextualTypeaheadView","copyProperties","DOM","goURI","MusicConstants","MusicEvents","SearchPeopleSeeMore","SearchPeopleSeeMoreOptions","SearchPeopleFriendsOf","SearchPeopleFriendsOfOptions","URI","fbt","isEmail"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();for(var v in i)if(i.hasOwnProperty(v))x[v]=i[v];var w=i===null?null:i.prototype;x.prototype=Object.create(w);x.prototype.constructor=x;x.__superConstructor__=i;function x(z,aa){"use strict";i.call(this,z,aa);this._peopleSeeMore=new o(this.getSeeMoreEndpoint('',true),p);this._peopleFriendsOf=new q(this.getSeeMoreEndpoint('',true),r);}x.prototype.initializeLayer=function(){"use strict";w.initializeLayer.call(this);this.layer.setOffsetY(-1);this.layer.enableBehavior(h);};x.prototype.ignoreClick=function(event){"use strict";event.prevent();};x.prototype.render=function(z,aa,ba){"use strict";if(!aa)return;if(this._bucketize)aa=y(aa);if(this.showPeopleSeeMore&&z)this._peopleSeeMore.injectInto(aa,z);if(this.showPeopleFriendsOf&&z)this._peopleFriendsOf.injectInto(aa,z);var ca={results:aa,value:z};this.inform('finalResultsReordering',ca);return w.render.call(this,z,ca.results,ba);};x.prototype.disableBucketization=function(){"use strict";this._bucketize=false;};x.prototype.buildBuckets=function(z,aa){"use strict";var ba=aa.length,ca=0,da;for(da=0;da<ba;++da)if(aa[da].type=='user')ca++;this._redirectToUsersResultsPage=this.showFilterResults&&ca===ba;this.setWebSuggLoggingParams(z,aa);if(!z&&this.showFindPeople)aa.unshift(this.buildFindPeople());if(this._bucketize)aa=w.buildBuckets.call(this,z,aa);if(z&&this._shouldShowSeeMore){aa.push(this.buildSeeMore(z,ba));if(u(z)&&(ca<1))aa.push(this.buildInvite(z));}return aa;};x.prototype.buildFindPeople=function(){"use strict";var z=t._("Znajd\u017a osoby");return {classNames:'seeAllUser seeAllUserNullState',logType:'grammar',path:this.getSeeMoreEndpoint(null,true),photo:'/images/search_typeahead/people_see_more.png',text:z,type:'no_header'};};x.prototype.buildSeeMore=function(z,aa){"use strict";var ba=this.getSeeMoreText(z,aa),ca=this.getSeeMoreSubtext(aa),da=k.create('li',{className:'calltoaction'},[k.create('a',{href:this.getSeeMoreEndpoint(z),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:'seeMore'},[ba,k.create('span',{className:'arrow'})]),k.create('span',{className:'subtext'},[ca])])])]);da.setAttribute('aria-label',ba);return {uid:'search',node:da,search:true};};x.prototype.getSeeMoreText=function(z,aa){"use strict";if(this.showKeywordResultsPage)return t._("Szukaj \u201e{query}\u201d",[t.param("query",z)]);if(aa<=0)return t._("Zobacz wyniki dla {query}",[t.param("query",z)]);if(this._redirectToUsersResultsPage)return t._("Filtruk wyniki wyszukiwania {query}",[t.param("query",z)]);return t._("Zobacz wi\u0119cej wynik\u00f3w dla {query}",[t.param("query",z)]);};x.prototype.getSeeMoreSubtext=function(z){"use strict";if(z===0)return t._("Brak wynik\u00f3w do wy\u015bwietlenia");if(z===1)return t._("Wy\u015bwietlanie najpopularniejszych wynik\u00f3w");return t._({"*":"Wy\u015bwietlanie {number} najlepszych wynik\u00f3w"},[t.param("number",z,[0])]);};x.prototype.buildInvite=function(z){"use strict";var aa=t._("Zapro\u015b {query} do Facebooka",[t.param("query",z)]),ba=k.create('li',{className:'calltoaction'},[k.create('a',{href:this.getInviteEndpoint(z),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:'invite'},[aa])])])]);ba.setAttribute('aria-label',aa);return {uid:'invite',node:ba,search:true};};x.prototype.searchPageQueryData=function(z){"use strict";return j({q:z},this.queryData||{});};x.prototype.searchPageTypeData=function(z){"use strict";return this._redirectToUsersResultsPage||z?{type:"users"}:{};};x.prototype.select=function(z){"use strict";var aa=this.index,ba=this.results[aa];if(!ba||ba.type=='header')return;var ca=this.items[aa],da=k.scry(ca,'a')[0];if(ba.song){if(da)n.inform(m.MUSIC_BUTTON.ACTIVATE,da);z&&this.inform('highlight',{index:aa,selected:ba});}else{w.select.call(this,z);if(da&&da.href)if(da.target=='_blank'){window.open(da.href);}else l(da.href);}};x.prototype.setSid=function(z){"use strict";this.queryData.tas=z;};x.prototype.getSeeMoreEndpoint=function(z,aa){"use strict";return new s(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(z)).addQueryData(this.searchPageTypeData(aa)).toString();};x.prototype.getInviteEndpoint=function(z){"use strict";return new s('/invite.php').addQueryData({email_list:z});};x.prototype.show=function(){"use strict";if(!this.isVisible()){g.inform('layer_shown',{type:'SearchTypeahead'});w.show.call(this);}};x.prototype.hide=function(){"use strict";if(this.isVisible()){g.inform('layer_hidden',{type:'SearchTypeahead'});w.hide.call(this);}};x.prototype.getQuerySuggestion=function(z){"use strict";var aa=this.results[this.index],ba=aa&&aa.type!='header'?aa.text.toLowerCase():'';return ba==z.toLowerCase()?'':ba;};x.prototype.setWebSuggLoggingParams=function(z,aa){"use strict";var ba=0,ca=0;for(var da=0;da<aa.length;da++)if(aa[da].type==='websuggestion'){if(ca===0)ca=da+1;var ea='FR'+(da-ba)+'AS'+ba,fa=da+1;aa[da].path+='&wssk='+ea+'&wssp='+fa+'&wspq='+encodeURIComponent(z);aa[da].path+='&wssrc='+aa[da].websuggestion_source;ba++;}var ga='&wssc='+aa.length+'-'+z.length+'&wsbp='+ba+'-'+ca;for(da=0;da<aa.length;da++)if(aa[da].type==='websuggestion')aa[da].path+=ga;};function y(z){var aa,ba,ca,da,ea=[],fa={};ba=z.length;for(aa=0;aa<ba;aa++){ca=z[aa];da=ca.render_type||ca.type;if(!fa.hasOwnProperty(da)){fa[da]=ea.length;ea.push([]);}ea[fa[da]].push(ca);}var ga=[];ba=ea.length;for(aa=0;aa<ba;++aa){ca=ea[aa][0];da=ca.render_type||ca.type;ga=ga.concat(ea[aa]);}return ga;}j(x.prototype,{_shouldShowSeeMore:true,_bucketize:true,queryData:{init:'quick'}});e.exports=x;},null);
__d("legacy:SearchTypeaheadView",["SearchTypeaheadView"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.SearchTypeaheadView=b('SearchTypeaheadView');},3);
__d("legacy:Typeahead",["Typeahead"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.Typeahead=b('Typeahead');},3);
__d("SearchTypeaheadRecorder",["AsyncRequest","Banzai","BanzaiNectar","BanzaiScuba","CurrentUser","Event","FacebarGlobalOptions","Keys","TokenizeUtil","Vector","clickRefAction","copyProperties","mapObject","ge","throttle","whitelistObjectKeys"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w={WAITING:'WAITING',SUCCESS:'SUCCESS',NO_RESULTS:'NO_RESULTS',ERROR:'ERROR'};function x(z){"use strict";this.init(z);this.initEvents();}x.prototype.init=function(z){"use strict";this.core=z.getCore();this.data=z.getData();this.view=z.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};var aa=t('search_first_focus');this.initStartTime=aa&&aa.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset();};x.prototype._reset=function(){"use strict";this.stats={};this.avgStats={};this.appendStats={};this._backspacing=false;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=false;this._inflightRequests={};var z=Math.random().toString();this.data.setQueryData({sid:z});this.view.setSid(z);this.recordStat('sid',z);this.recordStat('keypressed',0);};x.prototype.initEvents=function(){"use strict";this.core.subscribe('focus',function(event){if(!this.stats.session_start_time){this.recordStat('session_start_time',Date.now());var z=new Date(),aa=z.getTimezoneOffset(),ba=Date.now()-aa*60*1000;this.recordStat('session_start_time_user_timezone',ba);}}.bind(this));this.core.subscribe('blur',function(event){var z=Date.now();for(var aa in this._inflightRequests){var ba=this._inflightRequests[aa],ca=z-ba;this.recordAvgStat('search_endpoint_ms_from_js',ca);}this.recordStat('session_end_time',z);this.submit();}.bind(this));this.view.subscribe('select',function(z,aa){this.recordSelectInfo(aa);}.bind(this));this.view.subscribe('render',function(z,aa){this.recordRender(aa);}.bind(this));this.data.subscribe('logPerformanceTiming',function(z,aa){this.performanceTimings[aa.field]=aa.value;}.bind(this));this.data.subscribe('activity',function(z,aa){this.recordStat('pending_request',aa.activity);}.bind(this));this.data.subscribe('respondValidUids',function(z,aa){this.validUids=aa.slice(0);}.bind(this));this.data.subscribe('beforeQuery',function(z,aa){if(!aa.value){this.query='';this.results=[];this.data.lastNullOrSingleStateFetchStartTime=Date.now();return;}if(!this.stats.first_query_time)this.recordStat('first_query_time',Date.now());this.query=aa.value;if(!this.queryStartTime)this.queryStartTime=[];this.queryStartTime[this.query]=Date.now();this.recordCountStat('num_queries');}.bind(this));this.data.subscribe('queryEndpoint',function(z,aa){this.recordCountStat('num_search_ajax_requests');this.recordAvgStat('endpoint_query_length',aa.value.length);this._inflightRequests[aa.value]=Date.now();}.bind(this));this.data.subscribe('onload',function(z,aa){this._onloadTime=aa.time;}.bind(this));this.data.subscribe('bootstrapped',function(z,aa){this.bootstrapStats.endTime=aa.time;this.bootstrapStats.bootstrapped=1;}.bind(this));this.core.subscribe('recordFunction',function(z,aa){this._extraRecorder.push(aa);}.bind(this));this.data.subscribe('endpointStats',function(z,aa){var ba=aa.info,ca=ba.fetch_end-ba.fetch_start;if(ba.value){this.recordAvgStat('search_endpoint_ms_from_js',ca);}else this.bootstrapStats[ba.type]=ca;if(ba.coeff2_ts)this.bootstrapStats.coeff2_ts=ba.coeff2_ts;if(typeof ba.browserCacheHit!='undefined')this.recordCountStat(ba.browserCacheHit?'bootstrap_cachehits':'bootstrap_cachemisses');if(this._inflightRequests[ba.value])delete this._inflightRequests[ba.value];}.bind(this));this.data.subscribe('fetchComplete',function(z,aa){var ba=aa.entries,ca=aa.value;if(ca&&this.backendQueriesStatus[ca]){this._addDurationForBackendQuery(this.backendQueriesStatus[ca]);this.backendQueriesStatus[ca].status=ba&&ba.length>0?w.SUCCESS:w.NO_RESULTS;}}.bind(this));this.data.subscribe('fetchError',function(z,aa){var ba=aa.fetch_context,ca=ba.value;if(ba.bootstrap||!ca)return;if(this.backendQueriesStatus[ca]){this.backendQueriesStatus[ca].status=w.ERROR;this._addDurationForBackendQuery(this.backendQueriesStatus[ca]);}}.bind(this));this.data.subscribe('query',function(z,aa){this.recordAvgStat('num_results_from_cache',aa.results.length);}.bind(this));this.data.subscribe('backend_topreplace',function(z,aa){if(false===this._topreplace){this.recordStat("backend_topreplace",1);this._topreplace=true;}}.bind(this));this.data.subscribe('completeFetch',function(z,aa){if(this.core.scubaInfo){var ba=aa.response,ca={recv:aa.stats.fetch_end-aa.stats.fetch_start,render:Date.now()-aa.stats.fetch_start,payload_size:JSON.stringify(ba).length};if(!ba.payload.entities)ba.payload.entities=this.buildResults();this.logToScuba(ba,ca,this.core.scubaInfo,this.query,this.type);}}.bind(this));this.data.subscribe('completeCacheFetch',u(function(z,aa){if(this.core.scubaInfo)this.logToScuba({},{},this.core.scubaInfo,this.query,this.type);}.bind(this),500));l.listen(this.element,'keydown',function(event){this.recordStat('keypressed',1);this.recordCountStat('count_keys_pressed');if(l.getKeyCode(event)==n.BACKSPACE){if(!this._backspacing&&this.query){this._backspacing=true;this.recordAppendStat('before_backspace_queries',this.query);}}else this._backspacing=false;}.bind(this));this.data.subscribe('beforeFetch',function(z,aa){var ba=aa.request.data.value;if(!ba)return;this.backendQueries.push(ba);this.backendQueriesStatus[ba]={status:w.WAITING,start_time:Date.now()};}.bind(this));};x.prototype.recordStat=function(z,aa){"use strict";this.stats[z]=aa;};x.prototype.recordCountStat=function(z){"use strict";var aa=this.stats[z];this.stats[z]=aa?aa+1:1;};x.prototype.recordAvgStat=function(z,aa){"use strict";if(this.avgStats[z]){this.avgStats[z][0]+=aa;++this.avgStats[z][1];}else this.avgStats[z]=[aa,1];};x.prototype.recordAppendStat=function(z,aa){"use strict";if(!this.appendStats.hasOwnProperty(z))this.appendStats[z]=[];this.appendStats[z].push(aa);};x.prototype.recordRender=function(z){"use strict";this.results=z.filter(function(ha){return (ha.uid!='search'&&ha.type!='disabled_result'&&ha.type!='header');}).map(function(ha){return r(null,ha);});var aa=null;if(this.queryStartTime)aa=this.queryStartTime[this.query];var ba=this.results.every(function(ha){return ha.fromCache;}),ca=this.results.every(function(ha){return ha.isFromGSEF||ha.fromCache;}),da=this.results.every(function(ha){return ha.isNullState;}),ea=this.results.every(function(ha){return ha.isSingleState;});if(this.results.length&&this.data.lastNullOrSingleStateFetchStartTime&&da){this.recordStat('time_render_null_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null;}else if(this.data.lastNullOrSingleStateFetchStartTime&&this.results.length&&ea){this.recordStat('time_render_single_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null;}else if(aa){var fa=Date.now()-aa;this.recordAppendStat(ba?'times_render_local':'times_render_remote',fa);if(!ba&&ca)this.recordAppendStat('time_render_gs_early_fetch',fa);}var ga=p.getViewportDimensions();this.recordStat('window_size_width',ga.x);this.recordStat('window_size_height',ga.y);if(this.results.length>0&&!this.stats.first_result_time)this.recordStat('first_result_time',Date.now());};x.prototype.recordSelectInfo=function(z){"use strict";var aa=z.selected,ba=z.index;if(aa.groupIndex!==(void 0))ba=z.index-aa.groupIndex-1;var ca={href:aa.path},da=aa.dataGT?{gt:JSON.parse(aa.dataGT)}:{};q('click',ca,null,null,da);if(aa.uid=='search'||aa.uid=='people_search'){this.recordStat('selected_search',1);}else if(aa.uid=='invite'){this.recordStat('selected_invite',1);}else{var ea=aa.log_type||aa.rankType||aa.render_type||aa.type,fa=(ea=='friend'?'user':ea);this.recordStat('selected_'+fa,1);this.recordStat('selected_position',ba);this.recordStat('selected_type',ea);this.recordStat('selected_name_length',aa.text.length);this.recordStat('selected_id',aa.uid);this.recordStat('selected_degree',aa.bootstrapped?1:2);this.recordStat('selected_recent_search',aa.recent_search);var ga=o.parse(this.data.getTextToIndex(aa)).tokens,ha=y(ga,this.query);if(ha)this.recordStat('matched_terms',ha);}var ia={};this._extraRecorder.forEach(function(ja){ja(z,this.results,ia);}.bind(this));this.recordStat('extra_select_info',JSON.stringify(ia));if(aa.type==='websuggestion'){this.recordStat('selected_memcached_websuggestion',aa.fromMemcache);this.recordStat('selected_websuggestion_source',aa.websuggestion_source);}this.recordStat('selected_with_mouse',z.clicked?1:0);};x.prototype._addDurationForBackendQuery=function(z){"use strict";if(z.start_time){z.duration=Date.now()-z.start_time;delete z.start_time;}};x.prototype._dataToSubmit=function(){"use strict";this.recordStat('candidate_results',this.buildResults());this.recordStat('query',this.query);this.recordStat('init_time',this.initTime);if(this.initStartTime){this.recordStat('init_start_time',this.initStartTime);this.recordStat('onload_time',this._onloadTime);this.initStartTime=0;}this.recordStat('bootstrapped',this.bootstrapStats.bootstrapped);if(this.bootstrapStats.endTime){this.recordStat('bootstrapped_time',this.bootstrapStats.endTime);this.recordStat('user_bootstrap_ms',this.bootstrapStats.user);this.recordStat('other_bootstrap_ms',this.bootstrapStats.other);this.bootstrapStats.endTime=0;}var z=this.data.getBootstrapError();if(z)this.recordStat('bootstrap_error',1);this.recordStat('coeff2_ts',this.bootstrapStats.coeff2_ts);this.recordStat('max_results',this.data._maxResults);if(this.backendQueries.length>0){if(this.backendQueries.length>this.data.logBackendQueriesWindow)this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow);this.recordStat('backend_queries',this.backendQueries);var aa=v(this.backendQueriesStatus,this.backendQueries);s(aa,this._addDurationForBackendQuery,this);this.recordStat('backend_queries_status',aa);}if(m.taSessionLoggingSample){var ba=[];this.results.forEach(function(ga){ba.push([ga.text||'',ga.category||'',ga.subtext||'']);});this.recordStat('raw_suggestions_text',ba);}var ca=this.stats;for(var da in this.avgStats){var ea=this.avgStats[da];ca[da]=ea[0]/ea[1];}for(var fa in this.appendStats)ca[fa]=JSON.stringify(this.appendStats[fa]);return ca;};x.prototype.buildResults=function(){"use strict";var z=(this.results||[]).map(function(aa,ba){var ca=o.parse(this.data.getTextToIndex(aa)).tokens,da=aa.rankType||aa.render_type||aa.type,ea=aa.bootstrapped?1:0,fa=aa.s_token||'',ga=(typeof aa.index=='undefined')?100:aa.index,ha=y(ca,this.query)||this.query,ia=aa,ja=ia.index_rank,ka=ia.match_type,la=ia.l_type,ma=ia.vertical_type,na=ia.prefix_match,oa=ia.prefix_length,pa=ia.text,qa=ia.category,ra=ia.subtext,sa=ia.fromCache,ta=ia.isNullState,ua=ia.isSingleState;if(typeof aa.groupIndex=='number')return [aa.groupIndex,aa.indexInGroup,aa.uid,da,ea,fa,ha,ja,ka,na,oa,aa.origIndex,la,ma,pa,qa,ra,ga,sa,ta,ua];return [0,ba,aa.uid,da,ea,fa,ha,ja,ka,na,oa,aa.origIndex,la,ma,pa,qa,ra,ga,sa,ta,ua];}.bind(this));return JSON.stringify(z);};x.prototype.submit=function(){"use strict";var z=this._dataToSubmit();switch(this.data.recordingRoute){case 'banzai_vital':h.post(this._banzaiRoute,z,{delay:0,retry:true});break;default:this.submitThroughAsyncRequest(z);}this._reset();};x.prototype.addLatencyToSample=function(z,aa,ba,ca){"use strict";z.addInteger(ca+'query_start',ba.queryStart);z.addInteger(ca+'query_end',ba.queryEnd);z.addInteger(ca+'keypress_query_end',ba.keyPressToQueryEnd);z.addInteger(ca+'render',ba.render);z.addInteger(ca+'keypress_render',ba.keyPressToRender);aa[ca+'query_start']=ba.queryStart;aa[ca+'query_end']=ba.queryEnd;aa[ca+'keypress_query_end']=ba.keyPressToQueryEnd;aa[ca+'render']=ba.render;aa[ca+'keypress_render']=ba.keyPressToRender;};x.prototype.logToScuba=function(z,aa,ba,ca,da){"use strict";var ea={},fa=new j('search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{facebarGKs:true}});fa.addInteger('sample_rate',ba.sample_rate);ea.sample_rate=ba.sample_rate;fa.addNormal('site',ba.site);ea.site=ba.site;fa.addDenorm('query',ca);ea.query=ca;var ga=z.payload||{};if(ga.entities){fa.addInteger('num_entities',ga.entities.length);ea.num_entities=ga.entities.length;}Object.keys(this.performanceTimings).forEach(function(ia){fa.addInteger(ia,this.performanceTimings[ia]);ea[ia]=this.performanceTimings[ia];}.bind(this),this);if(ga.results||ga.entries){var ha=(ga.results||ga.entries).length;fa.addInteger('num_results',ha);ea.num_results=ha;}if(ga.gzipped_payload_size!==(void 0)){fa.addInteger('gzipped_payload_size',ga.gzipped_payload_size);ea.gzipped_payload_size=ga.gzipped_payload_size;}if(aa.recv&&aa.render>aa.recv){fa.addInteger('time_render',aa.render-aa.recv);ea.time_render=aa.render-aa.recv;fa.addInteger('time_js_async',aa.recv);ea.time_js_async=aa.recv;}if(aa.payload_size){fa.addInteger('payload_size',aa.payload_size);ea.payload_size=aa.payload_size;}if(this.stats.time_render_null_state&&(!ca||ca.length===0)){fa.addInteger('time_render_null_state',this.stats.time_render_null_state);ea.time_render_null_state=this.stats.time_render_null_state;}fa.addInteger('query_id',z.queryId);ea.query_id=z.queryId;fa.addDenorm('user_id',k.getID());ea.user_id=k.getID();fa.addDenorm('session_id',this.stats.sid);ea.session_id=this.stats.sid;fa.addNormal('typeahead_type',da);ea.typeahead_type=da;if(aa.remoteQueryLatencies){this.addLatencyToSample(fa,ea,aa.remoteQueryLatencies,'remote_');fa.addInteger('remote_keypress_query_dispatch',aa.remoteQueryLatencies.keyPressToQueryDispatch);ea.remote_keypress_query_dispatch=aa.remoteQueryLatencies.keyPressToQueryDispatch;fa.addInteger('remote_keypress_query_start',aa.remoteQueryLatencies.keyPressToQueryStart);ea.remote_keypress_query_start=aa.remoteQueryLatencies.keyPressToQueryStart;fa.addNormal('inflight_requests',aa.remoteQueryLatencies.inflightRequests);fa.addInteger('inflight_requests',aa.remoteQueryLatencies.inflightRequests);ea.inflight_requests=aa.remoteQueryLatencies.inflightRequests;fa.addNormal('waiting_queries',aa.remoteQueryLatencies.waitingQueries);fa.addInteger('waiting_queries',aa.remoteQueryLatencies.waitingQueries);ea.waiting_queries=aa.remoteQueryLatencies.waitingQueries;}if(aa.cacheQueryLatencies)this.addLatencyToSample(fa,ea,aa.cacheQueryLatencies,'cache_');fa.post();i.log('search_facebar_js','typeahead',ea);};x.prototype.submitThroughAsyncRequest=function(z){"use strict";if(Object.keys(z).length>0)new g().setURI(this._endPoint).setMethod('POST').setData({stats:z}).setOption('handleErrorAfterUnload',true).setErrorHandler(function(aa){z.retry=true;new g().setURI(this._endPoint).setMethod('POST').setData({stats:z}).setOption('asynchronous',false).send();}.bind(this)).send();};var y=function(z,aa){if(!z||!aa)return;var ba=o.parse(aa);if(ba.flatValue[ba.flatValue.length-1]===' ')return ba.flatValue;var ca=ba.tokens[ba.tokens.length-1],da={};z.forEach(function(ia){da[ia]=(da[ia]||0)+1;});var ea={},fa=ba.tokens.slice(0,ba.tokens.length-1);fa.forEach(function(ia){ea[ia]=(ea[ia]||0)+1;});for(var ga=0;ga<z.length;++ga){var ha=z[ga];if(ha.indexOf(ca)===0&&(da[ha]-(ea[ha]||0)>0)){fa.push(ha);return fa.join(' ');}}return (void 0);};r(x.prototype,{_endPoint:'/ajax/typeahead/record_metrics.php',_banzaiRoute:'search'});e.exports=x;},null);
__d("TypeaheadSearchRecorderBasic",["SearchTypeaheadRecorder","copyProperties","emptyFunction"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this._typeahead=k;}j.prototype.enable=function(){"use strict";new g(this._typeahead);};h(j.prototype,{disable:i});e.exports=j;},null);
__d("legacy:SearchRecorderBasicTypeaheadBehavior",["TypeaheadSearchRecorderBasic"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.searchRecorderBasic=function(h){h.enableBehavior(g);};},3);
__d("legacy:SearchTypeaheadRenderer",["SearchTypeaheadRenderer"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.search=b('SearchTypeaheadRenderer');},3);
void(0);
__d("XSearchFacebarSurveyController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/search\/facebar_survey\/",{id:{type:"String",required:true},query:{type:"String"},session_id:{type:"String",required:true}});},null);
__d("AbandonedSessionSurvey",["AsyncRequest","SubscriptionsHandler","XSearchFacebarSurveyController","getOrCreateDOMID"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l){"use strict";this.core=l.getCore();this.data=l.getData();this.view=l.getView();this.subscriptionsHandler=new h();}k.prototype.enable=function(){"use strict";this.subscriptionsHandler.addSubscriptions(this.core.subscribe('focus',function(){this.searchBoxFocused=true;this.resultSelected=false;}.bind(this)),this.data.subscribe('beforeQuery',function(l,m){this.query=m.value||'';}.bind(this)),this.view.subscribe('select',function(){this.resultSelected=true;}.bind(this)),this.core.subscribe('blur',function(){if(this.searchBoxFocused&&!this.resultSelected){this.resultSelected=false;this.searchBoxFocused=false;this.openSurvey();}}.bind(this)));};k.prototype.disable=function(){"use strict";this.subscriptionsHandler.release();this.request&&this.request.abort();};k.prototype.openSurvey=function(){"use strict";if(this.openedSurvey)return;this.openedSurvey=true;var l=i.getURIBuilder().setString('id',j(this.core.element)).setString('query',this.query||'').setString('session_id',this.data.queryData.sid);this.request=(new g()).setMethod('post').setURI(l.getURI());this.request.send();};e.exports=k;},null);
__d("TypeaheadSearchFilter",["Arbiter","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._typeahead=j;}i.prototype.enable=function(){"use strict";var j=this._typeahead,k=j.getView().seeMoreEndpoint;this._subscriptions=[g.subscribe('search/typeahead/updateFilter',function(l,m){if(m.filter_type=='web')j.getView().queryData.form='FBKBFR';j.getView().queryData.type=m.filter_type;}),g.subscribe('search/typeahead/updateSeeMoreEndpoint',function(l,m){j.getView().seeMoreEndpoint=m;}),g.subscribe('page_transition',function(l,m){if(j.getView().queryData.form)delete j.getView().queryData.form;delete j.getView().queryData.type;j.getView().seeMoreEndpoint=k;},g.SUBSCRIBE_NEW)];};i.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(j){j.unsubscribe();});this._subscriptions=null;};h(i.prototype,{_subscription:null});e.exports=i;},null);
__d("legacy:SearchFilterTypeaheadBehavior",["TypeaheadSearchFilter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.initFilters=function(h){h.enableBehavior(g);};},3);
__d("TypeaheadExcludeBootstrapFromQueryCache",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this._data=h.getData();}g.prototype.enable=function(){"use strict";this._buildingQueryCache=false;this._buildQueryCache=this._data.subscribe('buildQueryCache',function(){this._buildingQueryCache=true;}.bind(this));this._mergeUids=this._data.subscribe('mergeUids',function(h,i){if(this._buildingQueryCache)i.local_uids.splice(0,i.local_uids.length);}.bind(this));this._fetchComplete=this._data.subscribe('fetchComplete',function(){this._buildingQueryCache=false;}.bind(this));};g.prototype.disable=function(){"use strict";this._data.unsubscribe(this._buildQueryCache);this._data.unsubscribe(this._mergeUids);this._data.unsubscribe(this._fetchComplete);};e.exports=g;},null);
__d("TypeaheadRecentSearchUpdater",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this.view=i.getView();}h.prototype.enable=function(){"use strict";this.updaterSubscription=this.view.subscribe('select',function(){g.inform('search/refreshRecentSearchesNullstate',{},g.BEHAVIOR_STATE);});};h.prototype.disable=function(){"use strict";this.view.unsubscribe(this.updaterSubscription);};e.exports=h;},null);