/*!CK:301293470!*//*1434123807,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["xVELj"]); }

__d("ComposedBlockType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNSTYLED:0,PARAGRAPH:1,UNORDERED_LIST_ITEM:2,ORDERED_LIST_ITEM:3,BLOCKQUOTE:4,HEADER_ONE:5,HEADER_TWO:6,CODE:7,MEDIA:8,PULLQUOTE:9};},null);
__d("ComposedEntityMutability",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2};},null);
__d("ComposedEntityType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4,TOKEN:5,HASHTAG:6,IMPLICIT_LINK:7};},null);
__d("ComposedInlineStyle",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4,CODE:8,STRIKETHROUGH:16,SUBSCRIPT:32,SUPERSCRIPT:64};},null);
__d("ComposedLinkEntityProperties",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={URL:"url",SHIMMED_URL:"shimmedURL"};},null);
__d("ReactComposerAttachmentType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={STATUS:"STATUS",MEDIA:"MEDIA",ALBUM:"ALBUM",MLE:"MLE",NOTES:"NOTES",QANDA:"QANDA",PAGES_EXTRA:"PAGES_EXTRA"};},null);
__d("ReactComposerTaggerType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CAMERA:"CAMERA",PEOPLE:"PEOPLE",OG:"OG",LOCATION:"LOCATION",ACTIVITY:"ACTIVITY",BACKDATE:"BACKDATE"};},null);
__d("SelectionState",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.Record,j={anchorKey:'',anchorOffset:0,focusKey:'',focusOffset:0,isBackward:false,hasFocus:false},k=i(j);for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(){if(k!==null)k.apply(this,arguments);}n.prototype.serialize=function(){return ('Anchor: '+this.getAnchorKey()+':'+this.getAnchorOffset()+', '+'Focus: '+this.getFocusKey()+':'+this.getFocusOffset()+', '+'Is Backward: '+this.getIsBackward()+', '+'Has Focus: '+this.getHasFocus());};n.prototype.getAnchorKey=function(){return this.anchorKey;};n.prototype.getAnchorOffset=function(){return this.anchorOffset;};n.prototype.getFocusKey=function(){return this.focusKey;};n.prototype.getFocusOffset=function(){return this.focusOffset;};n.prototype.getIsBackward=function(){return this.isBackward;};n.prototype.getHasFocus=function(){return this.hasFocus;};n.prototype.hasEdgeWithin=function(o,p,q){var r=this.getAnchorKey(),s=this.getFocusKey();if(r===s&&r===o){var t=this.getStartOffset(),u=this.getEndOffset();return p<=u&&t<=q;}if(o!==r&&o!==s)return false;var v=o===r?this.getAnchorOffset():this.getFocusOffset();return p<=v&&q>=v;};n.prototype.isCollapsed=function(){return (this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset());};n.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey();};n.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset();};n.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey();};n.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset();};e.exports=n;},null);
__d("MentionResultsPropTypes",["React","SearchableEntry","SelectionState"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l={viewID:k.string.isRequired,selection:k.instanceOf(i).isRequired,contextComponent:k.object.isRequired,mentionableEntries:k.array.isRequired,highlightedMentionable:k.instanceOf(h),onMentionSelect:k.func.isRequired,onMentionHighlight:k.func.isRequired,onMentionRenderHighlight:k.func.isRequired};e.exports=l;},null);
__d("MentionsLayer.react",["Bootloader","Locale","MentionResultsPropTypes","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j,m=l.PropTypes,n=false,o=h.isRTL(),p,q,r,s,t=5,u=j.createClass({displayName:"MentionsLayer",propTypes:Object.assign({},i,{typeaheadView:m.func.isRequired,typeaheadViewProps:m.object}),getInitialState:function(){return {bootloaded:n};},componentWillMount:function(){if(!this.state.bootloaded)v(function(){this.isMounted()&&this.setState({bootloaded:true});}.bind(this));},_onMentionSelect:function(w,x){x.preventDefault();this.props.onMentionSelect(w,x);},shouldComponentUpdate:function(w,x){return (this.state.bootloaded!==x.bootloaded||!k(this.props.mentionableEntries,w.mentionableEntries)||this.props.highlightedMentionable!==w.highlightedMentionable||this.props.characterOffset!==w.characterOffset);},render:function(){if(!this.state.bootloaded)return null;var w=this.props.mentionableEntries,x=this.props.selection,y=(x.isCollapsed()&&x.getHasFocus()&&w&&w.length),z=null,aa=this.props.typeaheadViewProps,ba=false,ca=false;if(aa&&aa.positionAtContext){ba=true;ca=true;}else if(y)z=s(this.props.characterOffset,o);var da={};if(this.props.autoflip){da.ContextualLayerAutoFlip=q;da.ContextualLayerUpdateOnScroll=r;}var ea=this.props.typeaheadView;return (j.createElement(p,{shown:y,context:this.props.contextComponent,contextBounds:z,containerWidthMatchContext:ca,offsetY:t,position:"below",behaviors:da},j.createElement(ea,{id:this.props.viewID,viewProps:this.props.typeaheadViewProps,highlightedEntry:this.props.highlightedMentionable,entries:w||[],onSelect:this._onMentionSelect,onHighlight:this.props.onMentionHighlight,onRenderHighlight:this.props.onMentionRenderHighlight})));}});function v(w){g.loadModules(["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","getMentionableRect"],function(x,y,z,aa){p=x;q=y;r=z;s=aa;n=true;w();});}e.exports=u;},null);
__d("fillArray",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){var j=new Array(h);for(var k=0;k<h;k++)j[k]=i;return j;}e.exports=g;},null);
__d("DocumentCompositeDecorator",["immutable","fillArray"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.List,k='.';function l(o){this.$DocumentCompositeDecorator0=o.slice();}l.prototype.getDecorations=function(o){var p=h(o.getText().length,null);this.$DocumentCompositeDecorator0.forEach(function(q,r){var s=0,t=q.getStrategy();t(o,function(u,v){if(m(p,u,v)){n(p,u,v,r+k+s);s++;}});});return j(p);};l.prototype.getComponentForKey=function(o){var p=parseInt(o.split(k)[0],10);return this.$DocumentCompositeDecorator0[p].getComponent();};l.prototype.getPropsForKey=function(o){var p=parseInt(o.split(k)[0],10);return this.$DocumentCompositeDecorator0[p].getProps();};function m(o,p,q){for(var r=p;r<q;r++)if(o[r]!=null)return false;return true;}function n(o,p,q,r){for(var s=p;s<q;s++)o[s]=r;}e.exports=l;},null);
__d("DocumentDecorator",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j){"use strict";this.$DocumentDecorator0=h;this.$DocumentDecorator1=i;this.$DocumentDecorator2=j||{};}g.prototype.getStrategy=function(){"use strict";return this.$DocumentDecorator0;};g.prototype.getComponent=function(){"use strict";return this.$DocumentDecorator1;};g.prototype.getProps=function(){"use strict";return this.$DocumentDecorator2;};e.exports=g;},null);
__d("DocumentEntityInstance",["ComposedEntityMutability","ComposedEntityType","arrayContains","getObjectValues","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j(h),m=j(g);function n(o,p,q){"use strict";k(i(l,o));k(i(m,p));this.$DocumentEntityInstance0=o;this.$DocumentEntityInstance1=p;this.$DocumentEntityInstance2=q||{};}n.prototype.getType=function(){"use strict";return this.$DocumentEntityInstance0;};n.prototype.getMutability=function(){"use strict";return this.$DocumentEntityInstance1;};n.prototype.getData=function(){"use strict";return this.$DocumentEntityInstance2;};n.prototype.replaceData=function(o){"use strict";this.$DocumentEntityInstance2=o;};e.exports=n;},null);
__d("DocumentEntity",["DocumentEntityInstance","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={},j=0,k={create:function(l,m,n){return k.add(new g(l,m,n));},add:function(l){i[++j]=l;return j.toString();},get:function(l){var m=i[l];h(!!m);return m;}};e.exports=k;},null);
__d("EmoticonSpan.react",["DocumentEntity","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={smile:"_5uj7",frown:"_5uj8",tongue:"_5uj9",grin:"_5uja",gasp:"_5ujb",wink:"_5ujc",glasses:"_5ujd",sunglasses:"_5ujh",grumpy:"_5uji",unsure:"_5ujj",cry:"_5ujw",devil:"_5ujx",angel:"_5ujy",kiss:"_5ujz",heart:"_5uk7",kiki:"_5ukd",squint:"_5ukg",confused:"_5ukj",confused_rev:"_5ukl",upset:"_5ukp",pacman:"_5ukq",robot:"_5ukr",colonthree:"_5uks",penguin:"_5ukt",putnam:"_5uku",shark:"_5ukv",like:"_5ukw",poop:"_5ukx"},l=h.createClass({displayName:"EmoticonSpan",render:function(){var m=g.get(this.props.entityKey),n=m.getData().type,o=j("_1ty6",k[n]);return (h.createElement("span",{className:o,title:n,"data-offset-key":this.props.offsetKey},h.createElement("span",{className:"_5ukz"},this.props.children)));}});e.exports=l;},null);
__d("HashtagSpan.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.createClass({displayName:"HashtagSpan",render:function(){return (g.createElement("span",{"data-offset-key":this.props.offsetKey,className:"_5u8n",spellCheck:false},this.props.children));}});e.exports=i;},null);
__d("MentionSpan.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.createClass({displayName:"MentionSpan",render:function(){return (g.createElement("span",{"data-offset-key":this.props.offsetKey,className:"_5u8u",spellCheck:false},this.props.children));}});e.exports=i;},null);
__d("WeakMentionSpan.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.createClass({displayName:"WeakMentionSpan",render:function(){return (g.createElement("span",{"data-offset-key":this.props.offsetKey,className:"_whq",spellCheck:false},this.props.children));}});e.exports=i;},null);
__d("getEntityMatcher",["DocumentEntity"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.get;function i(j,k){var l=k||h;return function(m,n){m.findEntityRanges(function(o){var p=o.getEntity();return typeof p==='string'&&j(l(p));},n);};}e.exports=i;},null);
__d("getHashtagMatches",["getHashtagRegex"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g();function i(j,k){var l=j.getText(),m,n,o,p;while((m=h.exec(l))!==null){n=m.index+m[1].length;o=m[2];p=m[3];k(n,n+o.length+p.length);}}e.exports=i;},null);
__d("getMentionsInputDecorator",["ComposedEntityType","DocumentCompositeDecorator","DocumentDecorator","EmoticonSpan.react","HashtagSpan.react","MentionSpan.react","WeakMentionSpan.react","getEntityMatcher","getHashtagMatches"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=g.EMOTICON,q=g.MENTION,r;function s(){if(!r)r=new h([new i(n(function(t){var u=t.getData();return t.getType()===q&&u&&u.isWeak;}),m),new i(n(function(t){return t.getType()===q;}),l),new i(n(function(t){return t.getType()===p;}),j),new i(o,k)]);return r;}e.exports=s;},null);
__d("findRangesImmutable",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g,i=h.List;i;function j(k,l,m,n){if(!k.size)return;var o=0;k.reduce(function(p,q,r){if(!l(p,q)){if(m(p))n(o,r);o=r;}return q;});m(k.last())&&n(o,k.count());}e.exports=j;},null);
__d("BlockTree",["immutable","emptyFunction","findRangesImmutable"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.List,l=j.Repeat,m=j.Record,n=h.thatReturnsTrue,o='-',p={start:null,end:null},q=m(p),r={start:null,end:null,decoratorKey:null,leaves:null},s=m(r),t={generate:function(w,x){var y=w.getLength();if(!y)return k.of(new s({start:0,end:0,decoratorKey:null,leaves:k.of(new q({start:0,end:0}))}));var z=[],aa=x?x.getDecorations(w):k(l(null,y)),ba=w.getCharacterList();i(aa,v,n,function(ca,da){z.push(new s({start:ca,end:da,decoratorKey:aa.get(ca),leaves:u(ba.slice(ca,da).toList(),ca)}));});return k(z);},getFingerprint:function(w){return w.map(function(x){var y=x.get('decoratorKey'),z=y!==null?y+'.'+(x.get('end')-x.get('start')):'';return ''+z+'.'+x.get('leaves').size;}).join(o);}};function u(w,x){var y=[],z=w.map(function(aa){return aa.getStyle();});i(z,v,n,function(aa,ba){y.push(new q({start:aa+x,end:ba+x}));});return k(y);}function v(w,x){return w===x;}e.exports=t;},null);
__d("UnicodeBidiService",["UnicodeBidi","UnicodeBidiDirection","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k){if(!k)k=h.getGlobalDir();i(h.isStrong(k));this.defaultDir=k;this.reset();}j.prototype.reset=function(){this.lastDir=this.defaultDir;};j.prototype.getDirection=function(k){this.lastDir=g.getDirection(k,this.lastDir);return this.lastDir;};e.exports=j;},null);
__d("EditorBidiService",["immutable","UnicodeBidiService","nullthrows"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.OrderedMap,l,m={getDirectionMap:function(n,o){if(!l){l=new h();}else l.reset();var p=n.getBlockMap(),q=p.valueSeq().map(function(s){return i(l).getDirection(s.getText());}),r=k(p.keySeq().zip(q));return g.is(o,r)?o:r;}};e.exports=m;},null);
__d("EditorChangeType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({UNDO:true,REDO:true,CHANGE_SELECTION:true,INSERT_CHARACTERS:true,BACKSPACE_CHARACTER:true,DELETE_CHARACTER:true,REMOVE_RANGE:true,SPLIT_BLOCK:true,INSERT_FRAGMENT:true,CHANGE_INLINE_STYLE:true,CHANGE_BLOCK_TYPE:true,APPLY_ENTITY:true,RESET_BLOCK:true,ADJUST_DEPTH:true});e.exports=h;},null);
__d("EditorState",["BlockTree","ComposedInlineStyle","EditorBidiService","EditorChangeType","immutable","SelectionState"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k,n=m.List,o=m.OrderedMap,p=m.Record,q=m.Stack;n;o;p;var r={allowUndo:true,currentContent:null,decorator:null,directionMap:null,forceSelection:false,inCompositionMode:false,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:q(),selection:null,treeMap:null,undoStack:q()},s=k.Record(r);t.create=function(ca){ca.treeMap=v(ca.currentContent,ca.decorator);ca.directionMap=i.getDirectionMap(ca.currentContent);return new t(new s(ca));};t.set=function(ca,da){var ea=ca.getImmutable().withMutations(function(fa){var ga=fa.get('decorator'),ha=ga;if(da.decorator===null){ha=null;}else if(da.decorator)ha=da.decorator;var ia=da.currentContent||ca.getCurrentContent();if(ha!==ga){var ja=fa.get('treeMap'),ka;if(ha&&ga){ka=x(ia.getBlockMap(),ja,ha,ga);}else ka=v(ia,ha);fa.merge({decorator:ha,treeMap:ka,nativelyRenderedContent:null});return;}var la=ca.getCurrentContent();if(ia!==la)fa.set('treeMap',w(ca,ia.getBlockMap(),ha));fa.merge(da);});return new t(ea);};t.prototype.toJS=function(){return this.getImmutable().toJS();};t.prototype.getAllowUndo=function(){return this.getImmutable().get('allowUndo');};t.prototype.getCurrentContent=function(){return this.getImmutable().get('currentContent');};t.prototype.getUndoStack=function(){return this.getImmutable().get('undoStack');};t.prototype.getRedoStack=function(){return this.getImmutable().get('redoStack');};t.prototype.getSelection=function(){return this.getImmutable().get('selection');};t.prototype.getDecorator=function(){return this.getImmutable().get('decorator');};t.prototype.isInCompositionMode=function(){return this.getImmutable().get('inCompositionMode');};t.prototype.mustForceSelection=function(){return this.getImmutable().get('forceSelection');};t.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get('nativelyRenderedContent');};t.prototype.getLastChangeType=function(){return this.getImmutable().get('lastChangeType');};t.prototype.getInlineStyleOverride=function(){return this.getImmutable().get('inlineStyleOverride');};t.prototype.getCurrentInlineStyle=function(){var ca=this.getInlineStyleOverride();if(ca!=null)return ca;var da=this.getCurrentContent(),ea=this.getSelection();if(ea.isCollapsed())return z(da,ea);return aa(da,ea);};t.prototype.getBlockTree=function(ca){return this.getImmutable().getIn(['treeMap',ca]);};t.prototype.isAtDocumentStart=function(){var ca=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(ca,0,0);};t.prototype.isAtDocumentEnd=function(){var ca=this.getCurrentContent(),da=ca.getBlockMap(),ea=da.last(),fa=ea.getLength();return this.getSelection().hasEdgeWithin(ea.getKey(),fa,fa);};t.prototype.getDirectionMap=function(){return this.getImmutable().get('directionMap');};t.acceptSelection=function(ca,da){return u(ca,da,false);};t.forceSelection=function(ca,da){if(!da.getHasFocus())da=da.set('hasFocus',true);return u(ca,da,true);};t.moveSelectionToEnd=function(ca){var da=ca.getCurrentContent(),ea=da.getLastBlock(),fa=ea.getKey(),ga=ea.getLength();return t.acceptSelection(ca,new l({anchorKey:fa,anchorOffset:ga,focusKey:fa,focusOffset:ga,isBackward:false}));};t.moveFocusToEnd=function(ca){var da=t.moveSelectionToEnd(ca);return t.forceSelection(da,da.getSelection());};t.push=function(ca,da,ea){if(ca.getCurrentContent()===da)return ca;var fa=ea!==j.INSERT_CHARACTERS,ga=i.getDirectionMap(da,ca.getDirectionMap());if(!ca.getAllowUndo())return t.set(ca,{currentContent:da,directionMap:ga,lastChangeType:ea,selection:da.getSelectionAfter(),forceSelection:fa,inlineStyleOverride:null});var ha=ca.getSelection(),ia=ca.getCurrentContent(),ja=ca.getUndoStack(),ka=da;if(ha!==ia.getSelectionAfter()||y(ca,ea)){ja=ja.push(ia);ka=ka.set('selectionBefore',ha);}else if(ea===j.INSERT_CHARACTERS||ea===j.BACKSPACE_CHARACTER||ea===j.DELETE_CHARACTER)ka=ka.set('selectionBefore',ia.getSelectionBefore());return t.set(ca,{currentContent:ka,directionMap:ga,undoStack:ja,redoStack:k.Stack(),lastChangeType:ea,selection:da.getSelectionAfter(),forceSelection:fa,inlineStyleOverride:null});};t.undo=function(ca){if(!ca.getAllowUndo())return ca;var da=ca.getUndoStack(),ea=da.peek();if(!ea)return ca;var fa=ca.getCurrentContent(),ga=i.getDirectionMap(ea,ca.getDirectionMap());return t.set(ca,{currentContent:ea,directionMap:ga,undoStack:da.shift(),redoStack:ca.getRedoStack().push(fa),forceSelection:true,inlineStyleOverride:null,lastChangeType:j.UNDO,nativelyRenderedContent:null,selection:fa.getSelectionBefore()});};t.redo=function(ca){if(!ca.getAllowUndo())return ca;var da=ca.getRedoStack(),ea=da.peek();if(!ea)return ca;var fa=ca.getCurrentContent(),ga=i.getDirectionMap(ea,ca.getDirectionMap());return t.set(ca,{currentContent:ea,directionMap:ga,undoStack:ca.getUndoStack().push(fa),redoStack:da.shift(),forceSelection:true,inlineStyleOverride:null,lastChangeType:j.REDO,nativelyRenderedContent:null,selection:ea.getSelectionAfter()});};function t(ca){this.$EditorState0=ca;}t.prototype.getImmutable=function(){return this.$EditorState0;};function u(ca,da,ea){return t.set(ca,{selection:da,forceSelection:ea,nativelyRenderedContent:null,inlineStyleOverride:null});}function v(ca,da){return ca.getBlockMap().map(function(ea){return g.generate(ea,da);});}function w(ca,da,ea){var fa=ca.getCurrentContent().getBlockMap(),ga=ca.getImmutable().get('treeMap');return ga.merge(da.toSeq().filter(function(ha,ia){return ha!==fa.get(ia);}).map(function(ha){return g.generate(ha,ea);}));}function x(ca,da,ea,fa){return da.merge(ca.toSeq().filter(function(ga){return (ea.getDecorations(ga)!==fa.getDecorations(ga));}).map(function(ga){return g.generate(ga,ea);}));}function y(ca,da){var ea=ca.getLastChangeType();return (da!==ea||(da!==j.INSERT_CHARACTERS&&da!==j.BACKSPACE_CHARACTER&&da!==j.DELETE_CHARACTER));}function z(ca,da){var ea=da.getStartKey(),fa=da.getStartOffset(),ga=ca.getBlockForKey(ea);if(fa>0)return ga.getInlineStyleAt(fa-1);if(ga.getLength())return ga.getInlineStyleAt(0);return ba(ca,ea);}function aa(ca,da){var ea=da.getStartKey(),fa=da.getStartOffset(),ga=ca.getBlockForKey(ea);if(fa<ga.getLength())return ga.getInlineStyleAt(fa);if(fa>0)return ga.getInlineStyleAt(fa-1);return ba(ca,ea);}function ba(ca,da){var ea=ca.getBlockBefore(da),fa;while(ea){fa=ea.getLength();if(fa)return ea.getInlineStyleAt(fa-1);ea=ca.getBlockBefore(ea.getKey());}return h.NONE;}e.exports=t;},null);
__d("AbstractTextEditorPlaceholder.react",["EditorState","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h,k=j.PropTypes,l=h.createClass({displayName:"AbstractTextEditorPlaceholder",propTypes:{editorState:k.instanceOf(g).isRequired,text:k.string.isRequired},shouldComponentUpdate:function(m,n){if(this.props.text!==m.text)return true;var o=this.props.editorState,p=m.editorState,q=o.getSelection(),r=p.getSelection();return (q.getHasFocus()!==r.getHasFocus());},render:function(){var m=this.props.editorState.getSelection().getHasFocus(),n=(("_5ywb")+(m?' '+"_5ywc":''));return (h.createElement("div",{className:n},h.createElement("div",{className:"_3br6"},this.props.text)));}});e.exports=l;},null);
__d("DocumentCommands",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({UNDO:true,REDO:true,DELETE:true,DELETE_WORD:true,BACKSPACE:true,BACKSPACE_WORD:true,BACKSPACE_TO_END_OF_BLOCK:true,BOLD:true,ITALIC:true,UNDERLINE:true,CODE:true,INSERT_BLOCK_DELIMITER:true,TRANSPOSE_CHARACTERS:true,MOVE_SELECTION_TO_START_OF_BLOCK:true,MOVE_SELECTION_TO_END_OF_BLOCK:true,SECONDARY_CUT:true,SECONDARY_PASTE:true});e.exports=h;},null);
__d("getDefaultKeyBinding",["DocumentCommands","Keys","UserAgent"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i.isPlatform('Mac OS X'),k=i.isPlatform('Windows'),l=i.isBrowser('Firefox'),m=j&&l&&l<29;function n(u){return u.ctrlKey&&!u.altKey;}function o(u){return j?(u.metaKey&&!u.altKey):n(u);}function p(u){return (j&&u.altKey)||n(u);}function q(u){if(o(u))return u.shiftKey?g.REDO:g.UNDO;}function r(u){if(k&&u.shiftKey)return null;return p(u)?g.DELETE_WORD:g.DELETE;}function s(u){if(o(u)&&j)return g.BACKSPACE_TO_END_OF_BLOCK;return p(u)?g.BACKSPACE_WORD:g.BACKSPACE;}function t(u){switch(u.keyCode){case 66:return o(u)?g.BOLD:null;case 68:return n(u)?g.DELETE:null;case 72:return n(u)?g.BACKSPACE:null;case 73:return o(u)?g.ITALIC:null;case 74:return o(u)?g.CODE:null;case 75:if(!k&&n(u))return g.SECONDARY_CUT;return null;case 79:return n(u)?g.INSERT_BLOCK_DELIMITER:null;case 84:return j&&n(u)?g.TRANSPOSE_CHARACTERS:null;case 85:if(j&&n(u))return g.BACKSPACE_TO_END_OF_BLOCK;return o(u)?g.UNDERLINE:null;case 87:return j&&n(u)?g.BACKSPACE_WORD:null;case 89:if(n(u))return k?g.REDO:g.SECONDARY_PASTE;return null;case 90:return q(u)||null;case h.DELETE:return r(u);case h.BACKSPACE:return s(u);case h.LEFT:return (m&&o(u)?g.MOVE_SELECTION_TO_START_OF_BLOCK:null);case h.RIGHT:return (m&&o(u)?g.MOVE_SELECTION_TO_END_OF_BLOCK:null);default:return null;}}e.exports=t;},null);
__d("AbstractTextEditorProps",["EditorState","React","emptyFunction","getDefaultKeyBinding"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=h,l=k.PropTypes,m=i.thatReturns(''),n=i.thatReturns(null),o={propTypes:{editorState:l.instanceOf(g).isRequired,placeholder:l.string,textAlignment:l.oneOf(['left','center','right']),blockRendererFn:l.func,blockStyleFn:l.func,inlineStyleFn:l.func,keyBindingFn:l.func,readOnly:l.bool,spellCheck:l.bool,stripPastedStyles:l.bool,handleReturn:l.func,handleKeyCommand:l.func,handleBeforeInput:l.func,handlePastedFiles:l.func,onEscape:l.func,onTab:l.func,onUpArrow:l.func,onDownArrow:l.func,onPasteRawText:l.func,onBlur:l.func,onFocus:l.func},getDefaultProps:function(){return {blockRendererFn:n,blockStyleFn:m,inlineStyleFn:m,keyBindingFn:j,readOnly:false,spellCheck:false,stripPastedStyles:false};}};e.exports=o;},null);
__d("CharacterMetadata",["ComposedInlineStyle","immutable"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.NONE,k=h,l=k.Record,m=k.is,n={style:j,entity:null},o=l(n);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(){if(o!==null)o.apply(this,arguments);}r.prototype.getStyle=function(){return this.get('style');};r.prototype.getEntity=function(){return this.get('entity');};r.prototype.hasStyle=function(t){return !!(this.getStyle()&t);};r.applyStyle=function(t,u){return t.set('style',t.getStyle()|u);};r.removeStyle=function(t,u){var v=t.set('style',t.getStyle()&(~u));return m(v,s)?s:v;};r.applyEntity=function(t,u){var v=t.getEntity()===u?t:t.set('entity',u);return m(v,s)?s:v;};var s=new r();r.EMPTY=s;e.exports=r;},null);
__d("ContentStateInlineStyle",["CharacterMetadata","immutable"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={add:function(k,l,m){return j(k,l,m,true);},remove:function(k,l,m){return j(k,l,m,false);}};function j(k,l,m,n){var o=k.getBlockMap(),p=l.getStartKey(),q=l.getStartOffset(),r=l.getEndKey(),s=l.getEndOffset(),t=o.skipUntil(function(u,v){return v===p;}).takeUntil(function(u,v){return v===r;}).concat(h.Map([[r,o.get(r)]])).map(function(u,v){var w,x;if(p===r){w=q;x=s;}else{w=v===p?q:0;x=v===r?s:u.getLength();}var y=u.getCharacterList(),z;while(w<x){z=y.get(w);y=y.set(w,n?g.applyStyle(z,m):g.removeStyle(z,m));w++;}return u.set('characterList',y);});return k.merge({blockMap:o.merge(t),selectionBefore:l,selectionAfter:l});}e.exports=i;},null);
__d("DocumentRemovalDirection",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={BACKWARD:0,FORWARD:1};e.exports=g;},null);
__d("applyEntityToContentBlock",["CharacterMetadata"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i,j,k,l){var m=i.getCharacterList();while(j<k){m=m.set(j,g.applyEntity(m.get(j),l));j++;}return i.set('characterList',m);}e.exports=h;},null);
__d("applyEntityToContentState",["immutable","applyEntityToContentBlock"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j,k,l){var m=j.getBlockMap(),n=k.getStartKey(),o=k.getStartOffset(),p=k.getEndKey(),q=k.getEndOffset(),r=m.skipUntil(function(s,t){return t===n;}).takeUntil(function(s,t){return t===p;}).merge(g.OrderedMap([[p,m.get(p)]])).map(function(s,t){var u,v;if(n===p){u=o;v=q;}else{u=t===n?o:0;v=t===p?0:s.getLength();}return h(s,u,v,l);});return j.merge({blockMap:m.merge(r),selectionBefore:k,selectionAfter:k});}e.exports=i;},null);
__d("DocumentEntitySegments",["DocumentRemovalDirection"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g,i=h.FORWARD,j={getRemovalRange:function(k,l,m,n,o){var p=m.split(' ');p=p.map(function(z,aa){if(o===i){if(aa>0)return ' '+z;}else if(aa<p.length-1)return z+' ';return z;});var q=n,r,s,t=null,u=null;for(var v=0;v<p.length;v++){s=p[v];r=q+s.length;if(k<r&&q<l){if(t!==null){u=r;}else{t=q;u=r;}}else if(t!==null)break;q=r;}var w=n+m.length,x=t===n,y=u===w;if((!x&&y)||(x&&!y))if(o===i){if(u!==w)u++;}else if(t!==n)t--;return {start:t,end:u};}};e.exports=j;},null);
__d("checkRangeOverlap",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j,k,l){g(i<=j&&k<=l);return (i<l&&j>k);}e.exports=h;},null);
__d("getRangesForDocumentEntity",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){var k=[];i.findEntityRanges(function(l){return l.getEntity()===j;},function(l,m){k.push({start:l,end:m});});g(!!k.length);return k;}e.exports=h;},null);
__d("getCharacterRemovalRange",["ComposedEntityMutability","DocumentEntity","DocumentEntitySegments","checkRangeOverlap","getRangesForDocumentEntity","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g,n=m.MUTABLE,o=m.IMMUTABLE;function p(q,r,s){var t=r.getStartOffset(),u=r.getEndOffset(),v=q.getEntityAt(t);if(!v)return r;var w=h.get(v),x=w.getMutability();if(x===n)return r;var y=k(q,v).filter(function(ba){return j(t,u,ba.start,ba.end);});l(y.length==1);var z=y[0];if(x===o)return r.merge({anchorOffset:z.start,focusOffset:z.end,isBackward:false});var aa=i.getRemovalRange(t,u,q.getText().slice(z.start,z.end),z.start,s);return r.merge({anchorOffset:aa.start,focusOffset:aa.end,isBackward:false});}e.exports=p;},null);
__d("generateBlockKey",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={},h=Math.pow(2,24);function i(){var j;while(j===(void 0)||g.hasOwnProperty(j)||!isNaN(+j))j=Math.floor(Math.random()*h).toString(32);g[j]=true;return j;}e.exports=i;},null);
__d("removeEntitiesAtEdges",["CharacterMetadata","ComposedEntityMutability","DocumentEntity","immutable","findRangesImmutable","invariant","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.List,p=h,q=p.MUTABLE;o;function r(u,v){var w=u.getBlockMap(),x={},y=v.getStartKey(),z=v.getStartOffset(),aa=w.get(y),ba=t(aa,z);if(ba!==aa)x[y]=ba;var ca=v.getEndKey(),da=v.getEndOffset(),ea=w.get(ca);if(y===ca)ea=ba;var fa=t(ea,da);if(fa!==ea)x[ca]=fa;if(m(x))return u.set('selectionAfter',v);return u.merge({blockMap:w.merge(x),selectionAfter:v});}function s(u,v,w){var x;k(u,function(y,z){return y.getEntity()===z.getEntity();},function(y){return y.getEntity()===v;},function(y,z){if(y<=w&&z>=w)x={start:y,end:z};});l(typeof x==='object');return x;}function t(u,v){var w=u.getCharacterList(),x=v>0?w.get(v-1):undefined,y=v<w.count()?w.get(v):undefined,z=x?x.getEntity():undefined,aa=y?y.getEntity():undefined;if(aa&&aa===z){var ba=i.get(aa);if(ba.getMutability()!==q){var ca=s(w,aa,v),da=ca.start,ea=ca.end,fa;while(da<ea){fa=w.get(da);w=w.set(da,g.applyEntity(fa,null));da++;}return u.set('characterList',w);}}return u;}e.exports=r;},null);
__d("getContentStateFragment",["immutable","generateBlockKey","removeEntitiesAtEdges"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.OrderedMap;k;function l(m,n){var o=n.getStartKey(),p=n.getStartOffset(),q=n.getEndKey(),r=n.getEndOffset(),s=i(m,n),t=s.getBlockMap(),u=t.keySeq(),v=u.indexOf(o),w=u.indexOf(q)+1;return t.slice(v,w).map(function(x,y){var z=h(),aa=x.getText(),ba=x.getCharacterList();if(o===q)return x.merge({key:z,text:aa.slice(p,r),characterList:ba.slice(p,r)});if(y===o)return x.merge({key:z,text:aa.slice(p),characterList:ba.slice(p)});if(y===q)return x.merge({key:z,text:aa.slice(0,r),characterList:ba.slice(0,r)});return x.set('key',z);});}e.exports=l;},null);
__d("createOrderedMapFromBlockArray",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g,i=h.OrderedMap;function j(k){return i(k.map(function(l){return [l.getKey(),l];}));}e.exports=j;},null);
__d("insertIntoList",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.List;i;function j(k,l,m){if(m===k.count()){l.forEach(function(n){k=k.push(n);});}else if(m===0){l.reverse().forEach(function(n){k=k.unshift(n);});}else k=k.slice(0,m).concat(l,k.slice(m));return k;}e.exports=j;},null);
__d("insertFragmentIntoContentState",["immutable","createOrderedMapFromBlockArray","generateBlockKey","insertIntoList","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=g,m=l.OrderedMap;m;function n(o,p,q){k(p.isCollapsed());var r=p.getStartKey(),s=p.getStartOffset(),t=o.getBlockMap(),u=q.size,v,w;if(u===1){var x=t.get(r),y=q.first(),z=x.getText(),aa=x.getCharacterList(),ba=x.merge({text:(z.slice(0,s)+y.getText()+z.slice(s)),characterList:j(aa,y.getCharacterList(),s)});t=t.set(r,ba);v=r;w=s+y.getText().length;return o.merge({blockMap:t.set(r,ba),selectionBefore:p,selectionAfter:p.merge({anchorKey:v,anchorOffset:w,focusKey:v,focusOffset:w,isBackward:false})});}var ca=[];o.getBlockMap().forEach(function(da,ea){if(ea!==r){ca.push(da);return;}var fa=da.getText(),ga=da.getCharacterList(),ha=fa.length,ia=fa.slice(0,s),ja=ga.slice(0,s),ka=q.first(),la=da.merge({text:ia+ka.getText(),characterList:ja.concat(ka.getCharacterList())});ca.push(la);q.slice(1,u-1).forEach(function(qa){ca.push(qa.set('key',i()));});var ma=fa.slice(s,ha),na=ga.slice(s,ha),oa=q.last();v=i();var pa=oa.merge({key:v,text:oa.getText()+ma,characterList:oa.getCharacterList().concat(na)});ca.push(pa);});w=q.last().getLength();return o.merge({blockMap:h(ca),selectionBefore:p,selectionAfter:p.merge({anchorKey:v,anchorOffset:w,focusKey:v,focusOffset:w,isBackward:false})});}e.exports=n;},null);
__d("insertTextIntoContentState",["immutable","insertIntoList","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.Repeat;function l(m,n,o,p){i(n.isCollapsed());var q=o.length;if(!q)return m;var r=m.getBlockMap(),s=n.getStartKey(),t=n.getStartOffset(),u=r.get(s),v=u.getText(),w=u.merge({text:(v.slice(0,t)+o+v.slice(t,u.getLength())),characterList:h(u.getCharacterList(),k(p,q),t)}),x=t+q;return m.merge({blockMap:r.set(s,w),selectionAfter:n.merge({anchorOffset:x,focusOffset:x})});}e.exports=l;},null);
__d("removeRangeFromContentState",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.List;i;function j(l,m){if(m.isCollapsed())return l;var n=l.getBlockMap(),o=m.getStartKey(),p=m.getStartOffset(),q=m.getEndKey(),r=m.getEndOffset(),s=n.get(o),t=n.get(q),u;if(s===t){u=k(s.getCharacterList(),p,r);}else u=s.getCharacterList().slice(0,p).concat(t.getCharacterList().slice(r));var v=s.merge({text:(s.getText().slice(0,p)+t.getText().slice(r)),characterList:u}),w=n.toSeq().skipUntil(function(x,y){return y===o;}).takeUntil(function(x,y){return y===q;}).concat(g.Map([[q,null]])).map(function(x,y){return y===o?v:null;});n=n.merge(w).filter(function(x){return !!x;});return l.merge({blockMap:n,selectionBefore:m,selectionAfter:m.merge({anchorKey:o,anchorOffset:p,focusKey:o,focusOffset:p,isBackward:false})});}function k(l,m,n){if(m===0){while(m<n){l=l.shift();m++;}}else if(n===l.count()){while(n>m){l=l.pop();n--;}}else l=l.slice(0,m).concat(l.slice(n));return l;}e.exports=j;},null);
__d("setBlockTypeForContentState",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i,j,k){var l=j.getStartKey(),m=j.getEndKey(),n=i.getBlockMap(),o=n.toSeq().skipUntil(function(p,q){return q===l;}).takeUntil(function(p,q){return q===m;}).concat(g.Map([[m,n.get(m)]])).map(function(p){return p.set('type',k);});return i.merge({blockMap:n.merge(o),selectionBefore:j,selectionAfter:j});}e.exports=h;},null);
__d("splitBlockInContentState",["generateBlockKey","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j,k){h(k.isCollapsed());var l=k.getAnchorKey(),m=k.getAnchorOffset(),n=j.getBlockMap(),o=n.get(l),p=o.getText(),q=o.getCharacterList(),r=o.merge({text:p.slice(0,m),characterList:q.slice(0,m)}),s=g(),t=r.merge({key:s,text:p.slice(m),characterList:q.slice(m)}),u=n.toSeq().takeUntil(function(x){return x===o;}),v=n.toSeq().skipUntil(function(x){return x===o;}).rest(),w=u.concat([[r.getKey(),r],[t.getKey(),t]],v).toOrderedMap();return j.merge({blockMap:w,selectionBefore:k,selectionAfter:k.merge({anchorKey:s,anchorOffset:0,focusKey:s,focusOffset:0,isBackward:false})});}e.exports=i;},null);
__d("DocumentModifier",["CharacterMetadata","ComposedInlineStyle","ContentStateInlineStyle","DocumentRemovalDirection","immutable","applyEntityToContentState","getCharacterRemovalRange","getContentStateFragment","insertFragmentIntoContentState","insertTextIntoContentState","invariant","removeEntitiesAtEdges","removeRangeFromContentState","setBlockTypeForContentState","splitBlockInContentState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=k,w=v.OrderedMap,x=h,y=x.NONE;w;var z={replaceText:function(aa,ba,ca,da,ea){if(da===undefined)da=y;if(ea===undefined)ea=null;var fa=r(aa,ba),ga=s(fa,ba),ha;if(da===y&&ea===null){ha=g.EMPTY;}else ha=new g({style:da,entity:ea});return p(ga,ga.getSelectionAfter(),ca,ha);},insertText:function(aa,ba,ca,da,ea){q(ba.isCollapsed());if(da===undefined)da=y;if(ea===undefined)ea=null;var fa;if(da===y&&ea===null){fa=g.EMPTY;}else fa=new g({style:da,entity:ea});var ga=r(aa,ba);return p(ga,ga.getSelectionAfter(),ca,fa);},moveText:function(aa,ba,ca){var da=n(aa,ba),ea=z.removeRange(aa,ba,j.BACKWARD);return z.replaceWithFragment(ea,ca,da);},replaceWithFragment:function(aa,ba,ca){var da=r(aa,ba),ea=s(da,ba);return o(ea,ea.getSelectionAfter(),ca);},removeRange:function(aa,ba,ca){if(ba.getAnchorKey()===ba.getFocusKey()){var da=ba.getAnchorKey(),ea=ba.getStartOffset(),fa=ba.getEndOffset(),ga=aa.getBlockForKey(da),ha=ga.getEntityAt(ea),ia=ga.getEntityAt(fa-1);if(ha&&ha===ia){var ja=m(ga,ba,ca);return s(aa,ja);}}var ka=r(aa,ba);return s(ka,ba);},splitBlock:function(aa,ba){var ca=r(aa,ba),da=s(ca,ba);return u(da,da.getSelectionAfter());},applyInlineStyle:function(aa,ba,ca){return i.add(aa,ba,ca);},removeInlineStyle:function(aa,ba,ca){return i.remove(aa,ba,ca);},setBlockType:function(aa,ba,ca){return t(aa,ba,ca);},applyEntity:function(aa,ba,ca){var da=r(aa,ba);return l(da,ba,ca);}};e.exports=z;},null);
__d("isSelectionAtLeafStart",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){var i=h.getSelection(),j=i.getAnchorKey(),k=h.getBlockTree(j),l=i.getStartOffset(),m=false;k.some(function(n){if(l===n.get('start')){m=true;return true;}if(l<n.get('end'))return n.get('leaves').some(function(o){var p=o.get('start');if(l===p){m=true;return true;}if(l<p)return false;});});return m;}e.exports=g;},null);
__d("TextEditorCompositionHandler",["ComposedInlineStyle","DocumentModifier","EditorChangeType","EditorState","Keys","isSelectionAtLeafStart"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g.NONE,n=20,o={onBeforeInput:function(p){this._textInputData=(this._textInputData||'')+p.data;},onCompositionStart:function(){this._stillComposing=true;},onCompositionEnd:function(p){this._resolved=false;this._stillComposing=false;setTimeout(function(){if(!this._resolved)o.resolveComposition.call(this);}.bind(this),n);},onKeyDown:function(p){if(p.which===k.RIGHT||p.which===k.LEFT)p.preventDefault();},onKeyPress:function(p){if(p.which===k.RETURN)p.preventDefault();},resolveComposition:function(){if(this._stillComposing)return;this._resolved=true;var p=this._textInputData;this._textInputData='';var q=j.set(this.props.editorState,{inCompositionMode:false}),r=!p||l(q);if(r)this.restoreEditorDOM();this.exitCurrentMode();this.removeRenderGuard();if(p){var s=h.replaceText(q.getCurrentContent(),q.getSelection(),p,m,null);this.update(j.push(q,s,i.INSERT_CHARACTERS));return;}if(r)this.update(j.set(q,{nativelyRenderedContent:null,forceSelection:true}));}};e.exports=o;},null);
__d("DocumentOffsetKey",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='-',h={encode:function(i,j,k){return i+g+j+g+k;},decode:function(i){var j=i.split(g),k=j[0],l=j[1],m=j[2];return {blockKey:k,decoratorKey:parseInt(l,10),leafKey:parseInt(m,10)};}};e.exports=h;},null);
__d("ElementForBlockType",["ComposedBlockType"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getElement:function(i){switch(i){case g.HEADER_ONE:return 'h2';case g.HEADER_TWO:return 'h3';case g.UNORDERED_LIST_ITEM:case g.ORDERED_LIST_ITEM:return 'li';case g.BLOCKQUOTE:return 'blockquote';case g.MEDIA:return 'figure';default:return 'div';}},getWrapperElement:function(i){switch(i){case g.UNORDERED_LIST_ITEM:case g.ORDERED_LIST_ITEM:return 'ul';case g.CODE:return 'pre';default:return null;}}};e.exports=h;},null);
__d("ContentBlock",["ComposedBlockType","ComposedInlineStyle","immutable","findRangesImmutable"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.UNSTYLED,m=h,n=m.NONE,o=i,p=o.List,q=o.Record,r={key:'',type:l,text:'',characterList:p(),depth:0},s=q(r);for(var t in s)if(s.hasOwnProperty(t))v[t]=s[t];var u=s===null?null:s.prototype;v.prototype=Object.create(u);v.prototype.constructor=v;v.__superConstructor__=s;function v(){if(s!==null)s.apply(this,arguments);}v.prototype.getKey=function(){return this.get('key');};v.prototype.getType=function(){return this.get('type');};v.prototype.getText=function(){return this.get('text');};v.prototype.getCharacterList=function(){return this.get('characterList');};v.prototype.getLength=function(){return this.getText().length;};v.prototype.getDepth=function(){return this.get('depth');};v.prototype.getInlineStyleAt=function(y){var z=this.getCharacterList().get(y);return z?z.getStyle():n;};v.prototype.getEntityAt=function(y){var z=this.getCharacterList().get(y);return z?z.getEntity():null;};v.prototype.findStyleRanges=function(y,z){j(this.getCharacterList(),w,y,z);};v.prototype.findEntityRanges=function(y,z){j(this.getCharacterList(),x,y,z);};function w(y,z){return y.getStyle()===z.getStyle();}function x(y,z){return y.getEntity()===z.getEntity();}e.exports=v;},null);
__d("DocumentCharacters",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={BLOCK_DELIMITER:'\u000D',SOFT_NEWLINE:'\u000A',PHOTO:'\ud83d\udcf7',VIDEO:'\ud83d\udcf9'};e.exports=g;},null);
__d("TextEditorTextNode.react",["React","UserAgent","getTextContentAccessor"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h.isBrowser('IE <= 11'),k=i();function l(p){return j?p[k]==='\n':p.tagName==='BR';}var m=j?g.createElement("span",{key:"A"},'\n'):g.createElement("br",{key:"A"}),n=j?g.createElement("span",{key:"B"},'\n'):g.createElement("br",{key:"B"}),o=g.createClass({displayName:"TextEditorTextNode",shouldComponentUpdate:function(p){var q=g.findDOMNode(this),r=p.children==='';if(r)return !l(q);return q[k]!==p.children;},componentWillUpdate:function(){this.forceFlag=!this.forceFlag;},render:function(){if(this.props.children==='')return this.forceFlag?m:n;return g.createElement("span",{key:this.forceFlag?'A':'B'},this.props.children);}});e.exports=o;},null);
__d("DocumentStringKey",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={stringify:function(h){return '_'+h;},unstringify:function(h){return h.slice(1);}};e.exports=g;},null);
__d("encodeEntityRanges",["DocumentStringKey","UnicodeUtils"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h,j=i.strlen;function k(l,m){var n=[];l.findEntityRanges(function(o){return !!o.getEntity();},function(o,p){var q=l.getText(),r=l.getEntityAt(o);n.push({offset:j(q.slice(0,o)),length:j(q.slice(o,p)),key:Number(m[g.stringify(r)])});});return n;}e.exports=k;},null);
__d("encodeInlineStyleRanges",["ComposedInlineStyle","immutable","UnicodeUtils","findRangesImmutable","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.List,n=function(s,t){return s===t;},o=function(s){return !!s;},p=[];m;function q(s,t,u){var v=[],w=t.map(function(x){return x&u;});j(w,n,o,function(x,y){var z=s.getText();v.push({offset:i.strlen(z.slice(0,x)),length:i.strlen(z.slice(x,y)),style:u});});return v;}function r(s){var t=s.getCharacterList().map(function(v){return v.getStyle();}),u=k(g).filter(function(v){return !!v;});return Array.prototype.concat.apply(p,u.map(function(v){return q(s,t,v);}));}e.exports=r;},null);
__d("encodeBlocks",["ComposedBlockType","DocumentEntity","DocumentStringKey","encodeEntityRanges","encodeInlineStyleRanges","isEmpty","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g,o=n.ORDERED_LIST_ITEM,p=n.UNORDERED_LIST_ITEM;function q(s){var t=s.getBlockMap(),u=0,v={},w=[];t.forEach(function(z,aa){z.findEntityRanges(function(ba){return ba.getEntity()!==null;},function(ba,ca){var da=i.stringify(z.getEntityAt(ba));if(!v.hasOwnProperty(da))v[da]=''+(u++);});w.push({key:aa,text:z.getText(),type:z.getType(),depth:r(z)?z.getDepth():0,inlineStyleRanges:k(z),entityRanges:j(z,v)});});var x=Object.keys(v),y={};x.forEach(function(z,aa){var ba=h.get(i.unstringify(z)),ca=null,da=null,ea=ba.getData();if(ea){ca=ea.id||null;da=m(ea,function(fa){return ''+fa;});delete da.id;}y[aa]={id:ca,type:ba.getType(),data:l(da)?undefined:da};});return {entityMap:y,blocks:w};}function r(s){var t=s.getType();return t===o||t===p;}e.exports=q;},null);
__d("TextEditorBanzai",["BanzaiScuba","containsNode","encodeBlocks","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=3,l={logSetSelectionError:function(r,s){var t=o();t.addNormal('error_type','setSelection');var u=s,v=u[0],w=u[1],x=u[2],y=u[3],z=u[4];t.addNormal('selection_state',v.serialize());var aa=m(w);t.addNormal('node_html',aa);t.addNormal('selection_params','Key: '+x+', Start: '+y+', End: '+z);t.addNormal('error_text',r.message);t.post();},logGetSelectionError:function(r,s){var t=o();t.addNormal('error_type','getSelection');var u=s,v=u[0],w=u[1],x=v.getCurrentContent(),y=i(x),z=y.blocks;z=z.map(function(da){var ea=da,fa=ea.text,ga=(function(ha,ia){var ja={},ka=Object.prototype.hasOwnProperty;if(ha==null)throw new TypeError();for(var la in ha)if(ka.call(ha,la)&&!ka.call(ia,la))ja[la]=ha[la];return ja;})(ea,{text:1});return Object.assign({},ga,{length:fa.length});});var aa=v.getSelection();t.addNormal('content_state',JSON.stringify(z));t.addNormal('selection_state',aa.serialize());t.addNormal('error_text',r.message);var ba=m(w);t.addNormal('node_html',ba);var ca=p(w);t.addNormal('dom_selection',ca);t.post();}};function m(r){if(!r)return '[empty]';var s=n(r);if(s.nodeType===k)return s.textContent;j(s instanceof Element);return s.innerHTML;}function n(r){if(r.nodeType===k){var s=r.textContent.length;return document.createTextNode('[text '+s+']');}var t=r.cloneNode(),u=r.childNodes;for(var v=0;v<u.length;v++)t.appendChild(n(u[v]));return t;}function o(){return new g('text_editor_error_log',null,{addBrowserFields:true});}function p(r){if(!a.getSelection)return '[not available]';var s=a.getSelection(),t=s.anchorNode,u=s.anchorOffset,v=s.focusNode,w=s.focusOffset;t=q(t,r);v=q(v,r);return JSON.stringify({anchorNode:t,anchorOffset:u,focusNode:v,focusOffset:w});}function q(r,s){if(!r)return '[none]';if(!h(s,r))return '[outside root]';return m(r);}e.exports=l;},null);
__d("setDocumentSelection",["ErrorUtils","TextEditorBanzai","containsNode"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(n,o,p,q,r){var s=[n,o,p,q,r];return g.applyWithGuard(k,null,s,function(t){return h.logSetSelectionError(t,s);},'TextEditor:setSelection');}function k(n,o,p,q,r){if(!i(document.documentElement,o))return;var s=a.getSelection(),t=n.getAnchorKey(),u=n.getAnchorOffset(),v=n.getFocusKey(),w=n.getFocusOffset(),x=n.getIsBackward();if(!s.extend&&x){var y=t,z=u;t=v;u=w;v=y;w=z;x=false;}var aa=(t===p&&q<=u&&r>=u),ba=(v===p&&q<=w&&r>=w);if(aa&&ba){s.removeAllRanges();m(s,o,u-q);l(s,o,w-q);return;}if(!x){if(aa){s.removeAllRanges();m(s,o,u-q);}if(ba)l(s,o,w-q);}else{if(ba){s.removeAllRanges();m(s,o,w-q);}if(aa){var ca=s.focusNode,da=s.focusOffset;s.removeAllRanges();m(s,o,u-q);l(s,ca,da);}}}function l(n,o,p){if(n.extend){n.extend(o,p);}else{var q=n.getRangeAt(0);q.setEnd(o,p);n.addRange(q.cloneRange());}}function m(n,o,p){var q=document.createRange();q.setStart(o,p);n.addRange(q);}e.exports=j;},null);
__d("TextEditorLeaf.react",["DocumentCharacters","React","SelectionState","TextEditorTextNode.react","setDocumentSelection"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=g.SOFT_NEWLINE,o=3,p=h.createClass({displayName:"TextEditorLeaf",propTypes:{selection:m.instanceOf(i),start:m.number.isRequired,blockKey:m.string.isRequired,text:m.string.isRequired,style:m.number,inlineStyleFn:m.func.isRequired,isLast:m.bool.isRequired},_setSelection:function(){var q=this.props.selection;if(q==null||!q.getHasFocus())return;var r=this.props.start,s=r+this.props.text.length,t=this.props.blockKey;if(!q.hasEdgeWithin(t,r,s))return;var u=h.findDOMNode(this),v=u.firstChild,w;if(v.nodeType===o){w=v;}else if(v.tagName==='BR'){w=u;}else w=v.firstChild;k(q,w,t,r,s);},shouldComponentUpdate:function(q){return (h.findDOMNode(this.refs.leaf).textContent!==q.text||q.forceSelection);},componentDidUpdate:function(){this._setSelection();},componentDidMount:function(){this._setSelection();},render:function(){var q=this.props.text;if(q.endsWith(n)&&this.props.isLast)q+=n;var r;if(this.props.style)r=this.props.inlineStyleFn(this.props.style);return (h.createElement("span",{"data-offset-key":this.props.offsetKey,className:r,ref:"leaf"},h.createElement(j,null,q)));}});e.exports=p;},null);
__d("TextEditorBlock.react",["ContentBlock","DocumentOffsetKey","ElementForBlockType","React","Scroll","SelectionState","Style","TextEditorLeaf.react","UnicodeBidiDirection","cx","getElementPosition","getScrollPosition","getViewportDimensions","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=j,v=u.PropTypes,w=o.LTR,x=o.RTL,y=10,z=j.createClass({displayName:"TextEditorBlock",propTypes:{block:v.instanceOf(g).isRequired,tree:v.object.isRequired,selection:v.instanceOf(l).isRequired,decorator:v.object,forceSelection:v.bool.isRequired,direction:v.string.isRequired,blockProps:v.object,startIndent:v.bool,blockStyleFn:v.func.isRequired,inlineStyleFn:v.func.isRequired},shouldComponentUpdate:function(ba){return (this.props.block!==ba.block||this.props.tree!==ba.tree||this.props.direction!==ba.direction||(aa(ba.selection,ba.block.getKey())&&ba.forceSelection));},componentDidMount:function(){var ba=this.props.selection,ca=ba.getEndKey();if(!ba.getHasFocus()||ca!==this.props.block.getKey())return;var da=j.findDOMNode(this),ea=m.getScrollParent(da),fa=r(ea),ga;if(ea===window){var ha=q(da),ia=ha.y+ha.height,ja=s().height;ga=ia-ja;if(ga>0)window.scrollTo(fa.x,fa.y+ga+y);}else{var ka=da.offsetHeight+da.offsetTop,la=ea.offsetHeight+fa.y;ga=ka-la;if(ga>0)k.setTop(ea,k.getTop(ea)+ga+y);}},_renderChildren:function(){var ba=this.props.block,ca=ba.getKey(),da=ba.getText(),ea=this.props.tree.size-1,fa=aa(this.props.selection,ca);return this.props.tree.map(function(ga,ha){var ia=ga.get('leaves'),ja=ia.size-1,ka=ia.map(function(pa,qa){var ra=h.encode(ca,ha,qa),sa=pa.get('start'),ta=pa.get('end');return (j.createElement(n,{key:ra,offsetKey:ra,blockKey:ca,start:sa,selection:fa?this.props.selection:null,forceSelection:this.props.forceSelection,text:da.slice(sa,ta),style:ba.getInlineStyleAt(sa),inlineStyleFn:this.props.inlineStyleFn,isLast:ha===ea&&qa===ja}));}.bind(this)).toArray(),la=ga.get('decoratorKey');if(la==null)return ka;var ma=this.props.decorator.getComponentForKey(la);if(!ma)return ka;var na=this.props.decorator.getPropsForKey(la),oa=h.encode(ca,ha,0);return (j.createElement(ma,j.__spread({},na,{key:oa,entityKey:ba.getEntityAt(ga.get('start')),offsetKey:oa}),ka));}.bind(this)).toArray();},render:function(){var ba=this.props.block,ca=ba.getKey(),da=ba.getDepth(),ea=i.getElement(ba.getType()),fa=t(this.props.blockStyleFn(ba.getType()),(("_209g")+(this.props.direction===w?' '+"_2vxa":'')+(this.props.direction===x?' '+"_2vxb":'')));if(ea==='li'){var ga=this.props.startIndent;fa=t(fa,((ga&&da===0?"_2yj9":'')+(ga&&da===1?' '+"_2yja":'')+(ga&&da===2?' '+"_2yjb":'')+(ga&&da===3?' '+"_2yje":'')+(ga&&da===4?' '+"_2yjf":'')+(da===0?' '+"_2yjg":'')+(da===1?' '+"_2yjh":'')+(da===2?' '+"_2yji":'')+(da===3?' '+"_2yjj":'')+(da===4?' '+"_2yjn":'')));}var ha=Object.assign({'data-block':true,'data-offset-key':h.encode(ca,0,0),className:fa},this.props.blockProps);return (j.createElement(ea,j.__spread({},ha),this._renderChildren()));}});function aa(ba,ca){return (ba.getAnchorKey()===ca||ba.getFocusKey()===ca);}e.exports=z;},null);
__d("DocumentRemovableWord",["TokenizeUtil"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g.getPunctuation();h=h.replace("\'","").slice(1,-1);var i='\\s'+h,j='^('+'['+i+']*'+'[^'+i+']+'+'|['+i+']+'+')',k=new RegExp(j),l='('+'[^'+i+']+'+'['+i+']*'+'|['+i+']+'+')$',m=new RegExp(l);function n(p,q){var r=q?m.exec(p):k.exec(p);return r?r[0]:null;}var o={getBackward:function(p){return n(p,true);},getForward:function(p){return n(p,false);}};e.exports=o;},null);
__d("TextEditorModes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={EDIT:0,COMPOSITE:1,DRAG:2,RENDER:3,CUT:4};e.exports=g;},null);
__d("TextEditorPasteHandler",["CharacterMetadata","ComposedBlockType","ComposedEntityMutability","ComposedLinkEntityProperties","ComposedEntityType","ComposedInlineStyle","ContentBlock","DocumentCharacters","DocumentEntity","immutable","URI","arrayContains","fillArray","generateBlockKey","getSafeBodyFromHTML"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=h,w=v.HEADER_ONE,x=v.HEADER_TWO,y=v.ORDERED_LIST_ITEM,z=v.UNORDERED_LIST_ITEM,aa=v.BLOCKQUOTE,ba=v.UNSTYLED,ca=l,da=ca.BOLD,ea=ca.ITALIC,fa=ca.UNDERLINE,ga=ca.CODE,ha=ca.STRIKETHROUGH,ia=ca.NONE,ja=g,ka=ja.EMPTY,la=i,ma=la.MUTABLE,na=j,oa=na.URL,pa=k,qa=pa.LINK,ra=n,sa=ra.BLOCK_DELIMITER,ta=ra.SOFT_NEWLINE,ua=p,va=ua.List,wa=ua.Repeat,xa='&nbsp;',ya=' ',za=new RegExp(sa,'g'),ab=new RegExp(ta,'g'),bb=new RegExp(xa,'g'),cb=['p','h1','h2','h3','li','blockquote','pre'],db={b:da,code:ga,del:ha,em:ea,i:ea,s:ha,strike:ha,strong:da,u:fa};function eb(){return {text:'',inlines:[],entities:[],blocks:[]};}function fb(qb){var rb=new Array(1);if(qb)rb[0]=qb;return {text:ya,inlines:[ia],entities:rb,blocks:[]};}function gb(){return {text:ta,inlines:[ia],entities:new Array(1),blocks:[]};}function hb(qb){return {text:sa,inlines:[ia],entities:new Array(1),blocks:[qb]};}function ib(qb,rb){switch(qb){case 'h1':return w;case 'h2':return x;case 'li':if(rb==='ol')return y;return z;case 'blockquote':return aa;case 'pre':return h.CODE;default:return ba;}}function jb(qb,rb,sb){var tb=db[qb];if(tb){sb|=tb;}else if(rb.style){sb|=rb.style.fontWeight==='bold'?da:0;sb|=rb.style.fontStyle==='italic'?ea:0;sb|=rb.style.textDecoration==='underline'?fa:0;sb|=(rb.style.textDecoration==='line-through'?ha:0);}return sb;}function kb(qb,rb){if(qb.text.slice(-1)===sa&&rb.text.slice(0,1)===sa){qb.text=qb.text.slice(0,-1);qb.inlines.pop();qb.entities.pop();qb.blocks.pop();}if(qb.text.slice(-1)===sa&&(rb.text===ya||rb.text===ta))return qb;return {text:qb.text+rb.text,inlines:qb.inlines.concat(rb.inlines),entities:qb.entities.concat(rb.entities),blocks:qb.blocks.concat(rb.blocks)};}function lb(qb){return cb.some(function(rb){return qb.indexOf('<'+rb)!==-1;});}function mb(qb){var rb=new q(qb),sb=rb.getProtocol();return (sb==='http'||sb==='https');}function nb(qb,rb,sb,tb,ub,vb){var wb=qb.nodeName.toLowerCase(),xb=false;if(wb==="#text"){var yb=qb.textContent;if(yb.trim()===''&&tb!=='pre')return fb(vb);if(tb!=='pre')yb=yb.replace(ab,ya);return {text:yb,inlines:s(yb.length,rb),entities:s(yb.length,vb),blocks:[]};}if(wb==="br")return gb();var zb=eb(),ac;rb=jb(wb,qb,rb);if(wb==="ul"||wb==="ol")sb=wb;if(!tb&&r(ub,wb)){zb=hb(ib(wb,sb));tb=wb;xb=true;}qb=qb.firstChild;wb=qb&&qb.nodeName.toLowerCase();var bc,cc,dc;while(qb){if(wb==='a'&&qb.href&&mb(qb.href)){cc=new q(qb.href).toString();dc={};dc[oa]=cc;bc=o.create(qa,ma,dc);}else bc=undefined;ac=nb(qb,rb,sb,tb,ub,bc||vb);zb=kb(zb,ac);qb=qb.nextSibling;wb=qb&&qb.nodeName.toLowerCase();}if(xb)zb=kb(zb,hb(ba));return zb;}function ob(qb){qb=qb.trim().replace(za,'').replace(bb,ya);var rb=u(qb);if(!rb)return null;var sb=lb(qb)?cb:['div'],tb=nb(rb,ia,'ul',null,sb);if(tb.text.indexOf(sa)===0)tb={text:tb.text.slice(1),inlines:tb.inlines.slice(1),entities:tb.entities.slice(1),blocks:tb.blocks};if(tb.text.slice(-1)===sa){tb.text=tb.text.slice(0,-1);tb.inlines=tb.inlines.slice(0,-1);tb.entities=tb.entities.slice(0,-1);tb.blocks.pop();}if(tb.blocks.length===0)tb.blocks.push(ba);if(tb.text.split(sa).length===tb.blocks.length+1)tb.blocks.unshift(ba);return tb;}var pb={processHTML:function(qb){var rb=ob(qb);if(!rb)return null;var sb=0;return rb.text.split(sa).map(function(tb,ub){var vb=sb+tb.length,wb=rb.inlines.slice(sb,vb),xb=rb.entities.slice(sb,vb),yb=va(wb.map(function(zb,ac){var bc={style:zb};if(xb[ac])bc.entity=xb[ac];return new g(bc);}));sb=vb+1;return new m({key:t(),type:rb.blocks[ub],text:tb,characterList:yb});});},processText:function(qb){return qb.map(function(rb){return new m({key:t(),type:ba,text:rb,characterList:va(wa(ka,rb.length))});});}};e.exports=pb;},null);
__d("getSelectionOffsetKeyForNode",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){return h instanceof Element?h.getAttribute('data-offset-key'):null;}e.exports=g;},null);
__d("findAncestorOffsetKey",["getSelectionOffsetKeyForNode"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i){while(i&&i!==document.documentElement){var j=g(i);if(j!=null)return j;i=i.parentNode;}return null;}e.exports=h;},null);
__d("getUpdatedSelectionState",["DocumentOffsetKey"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j,k,l,m){var n=i.getSelection(),o=g.decode(j),p=o.blockKey,q=i.getBlockTree(p).getIn([o.decoratorKey,'leaves',o.leafKey]),r=g.decode(l),s=r.blockKey,t=i.getBlockTree(s).getIn([r.decoratorKey,'leaves',r.leafKey]),u=q.get('start'),v=t.get('start'),w=q?u+k:null,x=t?v+m:null,y=(n.getAnchorKey()===p&&n.getAnchorOffset()===w&&n.getFocusKey()===s&&n.getFocusOffset()===x);if(y)return n;var z=false;if(p===s){var aa=q.get('end'),ba=t.get('end');if(v===u&&ba===aa){z=m<k;}else z=v<u;}else{var ca=i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(da){return da===p||da===s;}).first();z=ca===s;}return n.merge({anchorKey:p,anchorOffset:w,focusKey:s,focusOffset:x,isBackward:z});}e.exports=h;},null);
__d("getDocumentSelection",["DocumentCharacters","ErrorUtils","TextEditorBanzai","findAncestorOffsetKey","getSelectionOffsetKeyForNode","getUpdatedSelectionState","invariant","nullthrows"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=g,p=o.SOFT_NEWLINE;function q(w,x){var y=[w,x];return h.applyWithGuard(r,null,y,function(z){return i.logGetSelectionError(z,y);},'TextEditor:getSelection');}function r(w,x){var y=a.getSelection();if(y.rangeCount===0)return {selectionState:w.getSelection().set('hasFocus',false),needsRecovery:false};var z=y.anchorNode,aa=y.focusNode,ba=y.anchorOffset,ca=y.focusOffset,da=z.nodeType===Node.TEXT_NODE,ea=aa.nodeType===Node.TEXT_NODE;if(da&&ea)return {selectionState:l(w,n(j(z)),ba,n(j(aa)),ca),needsRecovery:false};var fa=null,ga=null;if(da){fa={key:n(j(z)),offset:ba};ga=u(x,aa,ca);}else if(ea){ga={key:n(j(aa)),offset:ca};fa=u(x,z,ba);}else{fa=u(x,z,ba);ga=u(x,aa,ca);}return {selectionState:l(w,fa.key,fa.offset,ga.key,ga.offset),needsRecovery:true};}function s(w){while(w.firstChild&&k(w.firstChild))w=w.firstChild;return w;}function t(w){while(w.lastChild&&k(w.lastChild))w=w.lastChild;return w;}function u(w,x,y){var z=j(x);m(z!=null||w===x||w.firstChild===x);if(w===x){x=x.firstChild;m(x instanceof Element&&x.getAttribute('data-contents')==='true');if(y>0)y=x.childNodes.length;}if(y===0)return {key:z||k(s(x)),offset:0};var aa=x.childNodes[y-1],ba,ca;if(!k(aa)){ba=z;ca=v(aa);}else{var da=t(aa);ba=k(da);ca=v(da);}return {key:ba,offset:ca};}function v(w){var x=w.textContent;return x===p?0:x.length;}e.exports=q;},null);
__d("getEntityKeyForSelection",["ComposedEntityMutability","DocumentEntity"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.MUTABLE;function k(m,n){var o;if(n.isCollapsed()){var p=n.getAnchorKey(),q=n.getAnchorOffset();if(q>0){o=m.getBlockForKey(p).getEntityAt(q-1);return l(o);}return null;}var r=n.getStartKey(),s=n.getStartOffset(),t=m.getBlockForKey(r);o=s===t.getLength()?null:t.getEntityAt(s);return l(o);}function l(m){if(m){var n=h.get(m);return n.getMutability()===j?m:null;}return null;}e.exports=k;},null);
__d("getTextContentFromFiles",["DocumentCharacters"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.BLOCK_DELIMITER,i=/\.textClipping$/,j={'text/plain':true,'text/html':true,'text/rtf':true};function k(m,n){var o=0,p=[];m.forEach(function(q){l(q,function(r){o++;r&&p.push(r);if(o==m.length)n(p.join(h));});});}function l(m,n){if(!a.FileReader||(m.type&&!(m.type in j))){n('');return;}if(m.type===''&&i.test(m.name)){n(m.name.replace(i,''));return;}var o=new FileReader();o.onload=function(){n(o.result);};o.onerror=function(){n('');};o.readAsText(m);}e.exports=k;},null);
__d("TextEditorEditHandler",["BlockTree","DataTransfer","DocumentCharacters","DocumentCommands","DocumentModifier","DocumentOffsetKey","DocumentRemovableWord","DocumentRemovalDirection","EditorChangeType","EditorState","Keys","React","TextEditorModes","TextEditorPasteHandler","UnicodeUtils","UserAgent","areEqual","createOrderedMapFromBlockArray","findAncestorOffsetKey","getActiveElement","getContentStateFragment","getDocumentSelection","getEntityKeyForSelection","getTextContentFromFiles","isSelectionAtLeafStart"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();'use strict';var fa=i.SOFT_NEWLINE,ga=v.isEngine('WebKit'),ha=null,ia={onFocus:function(jb){var kb=this.props.editorState,lb=kb.getSelection();if(lb.getHasFocus())return;var mb=lb.set('hasFocus',true);this.props.onFocus&&this.props.onFocus(jb);this.update(p.acceptSelection(kb,mb));},onBlur:function(jb){if(ga&&z()===document.body)a.getSelection().removeAllRanges();var kb=this.props.editorState,lb=kb.getSelection();if(!lb.getHasFocus())return;var mb=lb.set('hasFocus',false);this.props.onBlur&&this.props.onBlur(jb);this.update(p.acceptSelection(kb,mb));},onBeforeInput:function(jb){var kb=jb.data;if(!kb)return;if(this.props.handleBeforeInput&&this.props.handleBeforeInput(kb)){jb.preventDefault();return;}var lb=this.props.editorState,mb=lb.getSelection();if(!mb.isCollapsed()){jb.preventDefault();this.update(ma(lb,kb,lb.getCurrentInlineStyle(),ca(lb.getCurrentContent(),lb.getSelection())));return;}var nb=!ea(lb),ob=ma(lb,kb,lb.getCurrentInlineStyle(),ca(lb.getCurrentContent(),lb.getSelection()));if(!nb){jb.preventDefault();this.update(ob);return;}var pb=mb.getAnchorKey(),qb=lb.getBlockTree(pb),rb=g.getFingerprint(qb),sb=g.getFingerprint(ob.getBlockTree(pb));if(ib(kb)||rb!==sb||(ob.getDirectionMap().get(pb)!==lb.getDirectionMap().get(pb))){jb.preventDefault();}else ob=p.set(ob,{nativelyRenderedContent:ob.getCurrentContent()});this.update(ob);},onSelect:function(jb){if(this._blockSelectEvents)return;var kb=this.props.editorState,lb=ba(kb,r.findDOMNode(this.refs.editorContainer).firstChild),mb=lb.selectionState;if(mb!==kb.getSelection()){if(!!lb.needsRecovery){kb=p.forceSelection(kb,mb);}else kb=p.acceptSelection(kb,mb);this.update(kb);}},onKeyDown:function(jb){var kb=jb.which,lb=this.props.editorState;switch(kb){case q.RETURN:jb.preventDefault();if(!this.props.handleReturn||!this.props.handleReturn(jb))this.update(xa(lb));return;case q.ESC:jb.preventDefault();this.props.onEscape&&this.props.onEscape(jb);return;case q.TAB:this.props.onTab&&this.props.onTab(jb);return;case q.UP:this.props.onUpArrow&&this.props.onUpArrow(jb);return;case q.DOWN:this.props.onDownArrow&&this.props.onDownArrow(jb);return;}var mb=this.props.keyBindingFn(jb);if(!mb)return;jb.preventDefault();if(this.props.handleKeyCommand&&this.props.handleKeyCommand(mb))return;if(mb===j.UNDO){ka(lb,this.update);return;}var nb=ja(mb,lb);if(nb!==lb)this.update(nb);},onCharacterData:function(jb){var kb=y(jb),lb=this.props.editorState,mb=lb.getSelection(),nb=lb.getCurrentContent(),ob=l.decode(kb),pb=ob.blockKey,qb=lb.getBlockTree(pb),rb=qb.getIn([ob.decoratorKey,'leaves',ob.leafKey]),sb=nb.getBlockForKey(pb);if(sb.getText().slice(rb.start,rb.end)===jb.textContent)return;var tb=lb.getSelection().merge({anchorOffset:rb.start,focusOffset:rb.end,isBackward:false}),ub=k.replaceText(nb,tb,jb.textContent,sb.getInlineStyleAt(rb.start),null),vb=ba(this.props.editorState,r.findDOMNode(this.refs.editorContainer).firstChild),wb=ub.merge({selectionBefore:mb,selectionAfter:vb.selectionState});this.update(p.push(lb,wb,o.INSERT_CHARACTERS));},onDragStart:function(jb){this._internalDrag=true;this.setMode(s.DRAG);},onDragOver:function(jb){this._internalDrag=false;this.setMode(s.DRAG);jb.preventDefault();},onCompositionStart:function(jb){this.setRenderGuard();this.captureEditorDOM();this.setMode(s.COMPOSITE);this.update(p.set(this.props.editorState,{inCompositionMode:true}));},onCut:function(jb){var kb=this.props.editorState,lb=kb.getSelection();if(lb.isCollapsed()){jb.preventDefault();return;}this.setRenderGuard();this.captureEditorDOM();eb(kb,function(mb){this._clipboard=mb;this.setMode(s.CUT);setTimeout(function(){this.restoreEditorDOM();this.removeRenderGuard();this.exitCurrentMode();this.update(db(kb));}.bind(this),0);}.bind(this));},onCopy:function(){eb(this.props.editorState,function(jb){this._clipboard=jb;}.bind(this));},onPaste:function(jb){jb.preventDefault();var kb=new h(jb.clipboardData);if(!kb.isRichText()){var lb=kb.getFiles(),mb=kb.getText();if(lb.length>0){if(this.props.handlePastedFiles&&this.props.handlePastedFiles(lb))return;da(lb,function(xb){xb=xb||mb;if(!xb)return;var yb=xb.split(fa),zb=t.processText(yb),ac=this.props.editorState,bc=x(zb),cc=k.replaceWithFragment(ac.getCurrentContent(),ac.getSelection(),bc);this.update(p.push(ac,cc,o.INSERT_FRAGMENT));}.bind(this));return;}}var nb,ob=kb.getText();this.props.onPasteRawText&&this.props.onPasteRawText(ob);if(ob)nb=ob.split(fa);if(!this.props.stripPastedStyles){if(this._clipboard){var pb=nb.filter(bb),qb=this._clipboard.toSeq().map(function(xb){return xb.getText();}).filter(bb).toArray(),rb=w(pb,qb);if(rb){this.update(cb(this.props.editorState,this._clipboard));return;}}var sb=kb.getHTML();if(sb){var tb=t.processHTML(sb);if(tb){var ub=x(tb);this.update(cb(this.props.editorState,ub));return;}}this._clipboard=null;}if(nb){var vb=t.processText(nb),wb=x(vb);this.update(cb(this.props.editorState,wb));}}};function ja(jb,kb){switch(jb){case j.UNDO:return ka(kb);case j.REDO:return la(kb);case j.DELETE:return oa(kb);case j.DELETE_WORD:return pa(kb);case j.BACKSPACE:return sa(kb);case j.BACKSPACE_WORD:return va(kb);case j.BACKSPACE_TO_END_OF_BLOCK:return wa(kb);case j.INSERT_BLOCK_DELIMITER:return xa(kb);case j.TRANSPOSE_CHARACTERS:return ya(kb);case j.MOVE_SELECTION_TO_START_OF_BLOCK:return za(kb);case j.MOVE_SELECTION_TO_END_OF_BLOCK:return ab(kb);case j.SECONDARY_CUT:return qa(kb);case j.SECONDARY_PASTE:return ra(kb);default:return kb;}}function ka(jb,kb){var lb=p.undo(jb);if(!jb.getNativelyRenderedContent()){kb(lb);return;}kb(p.set(jb,{nativelyRenderedContent:null}));setTimeout(function(){kb(lb);});}function la(jb){return p.redo(jb);}function ma(jb,kb,lb,mb){var nb=k.replaceText(jb.getCurrentContent(),jb.getSelection(),kb,lb,mb||null);return p.push(jb,nb,o.INSERT_CHARACTERS);}function na(jb,kb,lb){var mb=jb.getSelection(),nb=jb.getCurrentContent(),ob=mb;if(mb.isCollapsed()){if(lb===n.FORWARD){if(jb.isAtDocumentEnd())return nb;}else if(jb.isAtDocumentStart())return nb;ob=kb(jb);if(ob===mb)return nb;}return k.removeRange(nb,ob,lb);}function oa(jb){var kb=na(jb,function(mb){var nb=mb.getSelection(),ob=mb.getCurrentContent(),pb=nb.getAnchorKey(),qb=nb.getAnchorOffset(),rb=ob.getBlockForKey(pb).getText()[qb];return ua(mb,rb?u.getUTF16Length(rb,0):1);},n.FORWARD);if(kb===jb.getCurrentContent())return jb;kb=kb.set('selectionBefore',jb.getSelection());var lb=jb.getSelection().isCollapsed()?o.DELETE_CHARACTER:o.REMOVE_RANGE;return p.push(jb,kb,lb);}function pa(jb){var kb=na(jb,function(lb){var mb=lb.getSelection(),nb=mb.getStartOffset(),ob=mb.getStartKey(),pb=lb.getCurrentContent(),qb=pb.getBlockForKey(ob).getText().slice(nb),rb=m.getForward(qb)||'';return ua(lb,rb.length||1);},n.FORWARD);if(kb===jb.getCurrentContent())return jb;return p.push(jb,kb,o.REMOVE_RANGE);}function qa(jb){var kb=jb.getCurrentContent(),lb=jb.getSelection(),mb;if(lb.isCollapsed()){var nb=lb.getAnchorKey(),ob=kb.getBlockForKey(nb).getLength();if(ob===lb.getAnchorOffset())return jb;mb=lb.set('focusOffset',ob);}else mb=lb;ha=aa(kb,mb);var pb=k.removeRange(kb,mb,n.FORWARD);if(pb===kb)return jb;return p.push(jb,pb,o.REMOVE_RANGE);}function ra(jb){return (ha?cb(jb,ha):jb);}function sa(jb){var kb=na(jb,function(mb){var nb=mb.getSelection(),ob=mb.getCurrentContent(),pb=nb.getAnchorKey(),qb=nb.getAnchorOffset(),rb=ob.getBlockForKey(pb).getText()[qb-1];return ta(mb,rb?u.getUTF16Length(rb,0):1);},n.BACKWARD);if(kb===jb.getCurrentContent())return jb;kb=kb.set('selectionBefore',jb.getSelection());var lb=jb.getSelection().isCollapsed()?o.BACKSPACE_CHARACTER:o.REMOVE_RANGE;return p.push(jb,kb,lb);}function ta(jb,kb){var lb=jb.getSelection(),mb=jb.getCurrentContent(),nb=lb.getStartKey(),ob=lb.getStartOffset(),pb=nb,qb;if(kb>ob){var rb=mb.getKeyBefore(nb);pb=rb;var sb=mb.getBlockForKey(rb);qb=sb.getText().length;}else qb=ob-kb;return lb.merge({focusKey:pb,focusOffset:qb,isBackward:true});}function ua(jb,kb){var lb=jb.getSelection(),mb=lb.getStartKey(),nb=lb.getStartOffset(),ob=jb.getCurrentContent(),pb=mb,qb,rb=ob.getBlockForKey(mb);if(kb>(rb.getText().length-nb)){pb=ob.getKeyAfter(mb);qb=0;}else qb=nb+kb;return lb.merge({focusKey:pb,focusOffset:qb});}function va(jb){var kb=na(jb,function(lb){var mb=lb.getSelection(),nb=mb.getStartOffset();if(nb===0)return ta(lb,1);var ob=mb.getStartKey(),pb=lb.getCurrentContent(),qb=pb.getBlockForKey(ob).getText().slice(0,nb),rb=m.getBackward(qb)||'';return ta(lb,rb.length||1);},n.BACKWARD);if(kb===jb.getCurrentContent())return jb;return p.push(jb,kb,o.REMOVE_RANGE);}function wa(jb){var kb=na(jb,function(lb){var mb=lb.getSelection();if(mb.getStartOffset()===0)return ta(lb,1);return mb.merge({focusOffset:0,isBackward:true});},n.BACKWARD);if(kb===jb.getCurrentContent())return jb;return p.push(jb,kb,o.REMOVE_RANGE);}function xa(jb){var kb=k.splitBlock(jb.getCurrentContent(),jb.getSelection());return p.push(jb,kb,o.SPLIT_BLOCK);}function ya(jb){var kb=jb.getSelection();if(!kb.isCollapsed())return jb;var lb=kb.getAnchorOffset();if(lb===0)return jb;var mb=kb.getAnchorKey(),nb=jb.getCurrentContent(),ob=nb.getBlockForKey(mb),pb=ob.getLength();if(pb<=1)return jb;var qb,rb;if(lb===pb){qb=kb.set('anchorOffset',lb-1);rb=kb;}else{qb=kb.set('focusOffset',lb+1);rb=qb.set('anchorOffset',lb+1);}var sb=aa(nb,qb),tb=k.removeRange(nb,qb,n.BACKWARD),ub=tb.getSelectionAfter(),vb=ub.getAnchorOffset()-1,wb=ub.merge({anchorOffset:vb,focusOffset:vb}),xb=k.replaceWithFragment(tb,wb,sb),yb=p.push(jb,xb,o.INSERT_FRAGMENT);return p.acceptSelection(yb,rb);}function za(jb){var kb=jb.getSelection(),lb=kb.getStartKey();return p.set(jb,{selection:kb.merge({anchorKey:lb,anchorOffset:0,focusKey:lb,focusOffset:0,isBackward:false}),forceSelection:true});}function ab(jb){var kb=jb.getSelection(),lb=kb.getEndKey(),mb=jb.getCurrentContent(),nb=mb.getBlockForKey(lb).getLength();return p.set(jb,{selection:kb.merge({anchorKey:lb,anchorOffset:nb,focusKey:lb,focusOffset:nb,isBackward:false}),forceSelection:true});}function bb(jb){return jb.length>0;}function cb(jb,kb){var lb=k.replaceWithFragment(jb.getCurrentContent(),jb.getSelection(),kb);return p.push(jb,lb,o.INSERT_FRAGMENT);}function db(jb){var kb=k.removeRange(jb.getCurrentContent(),jb.getSelection(),n.FORWARD);return p.push(jb,kb,o.REMOVE_RANGE);}function eb(jb,kb){var lb=jb.getSelection();if(!lb.isCollapsed())kb(aa(jb.getCurrentContent(),lb));}var fb='\'',gb='\/',hb=v.isBrowser('Firefox');function ib(jb){return (hb&&(jb==fb||jb==gb));}e.exports=ia;},null);
__d("TextEditorDragHandler",["DataTransfer","DocumentModifier","EditorState","EditorChangeType","ex","findAncestorOffsetKey","getTextContentFromFiles","getUpdatedSelectionState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';function o(event,s){var t,u;if(document.caretRangeFromPoint){var v=document.caretRangeFromPoint(event.x,event.y);t=v.startContainer;u=v.startOffset;}else if(event.rangeParent){t=event.rangeParent;u=event.rangeOffset;}else return null;var w=l(t);if(w===null){var x='';if(t.dataset&&t.dataset.reactid)x=' Node ID: '+t.dataset.reactid;throw new Error(k('Invalid range for drop event.'+x+' Offset: '+u));}return n(s,w,u,w,u);}var p={onDragEnd:function(){this.exitCurrentMode();},onDrop:function(s){var t=new g(s.nativeEvent.dataTransfer),u=this.props.editorState,v=o(s.nativeEvent,u);s.preventDefault();this.exitCurrentMode();if(v===null)return;var w=t.getFiles();if(w.length>0){if(this.props.handleDroppedFiles&&this.props.handleDroppedFiles(v,w))return;m(w,function(x){x&&this.update(r(u,v,x));}.bind(this));return;}if(this._internalDrag){this.update(q(u,v));return;}this.update(r(u,v,t.getText()));}};function q(s,t){var u=h.moveText(s.getCurrentContent(),s.getSelection(),t);return i.push(s,u,j.INSERT_FRAGMENT);}function r(s,t,u){var v=h.insertText(s.getCurrentContent(),t,u,s.getCurrentInlineStyle());return i.push(s,v,j.INSERT_FRAGMENT);}e.exports=p;},null);
__d("AbstractTextEditor.react",["AbstractTextEditorPlaceholder.react","AbstractTextEditorProps","DOMVector","EditorState","React","TextEditorCompositionHandler","TextEditorContents.react","TextEditorEditHandler","TextEditorDragHandler","TextEditorModes","UserAgent","cx","requestAnimationFrame","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=a.MutationObserver||a.WebKitMutationObserver,v=(q.isBrowser('Safari')||q.isBrowser('Mobile Safari')),w=!!u;function x(aa){return function(ba){if(!this.props.readOnly){var ca=this._handler&&this._handler[aa];ca&&ca.call(this,ba);}};}function y(aa){switch(aa){case p.EDIT:return n;case p.COMPOSITE:return l;case p.DRAG:return o;case p.CUT:case p.RENDER:return null;}}var z=k.createClass({displayName:"AbstractTextEditor",getDefaultProps:h.getDefaultProps,_onBlur:x('onBlur'),_onFocus:x('onFocus'),_onSelect:x('onSelect'),_onKeyDown:x('onKeyDown'),_onKeyUp:x('onKeyUp'),_onKeyPress:x('onKeyPress'),_onMouseDown:x('onMouseDown'),_onMouseUp:x('onMouseUp'),_onCharacterData:x('onCharacterData'),_onCompositionStart:x('onCompositionStart'),_onCompositionEnd:x('onCompositionEnd'),_onDragStart:x('onDragStart'),_onDragOver:x('onDragOver'),_onDragEnd:x('onDragEnd'),_onDrop:x('onDrop'),_onCut:x('onCut'),_onCopy:x('onCopy'),_onPaste:x('onPaste'),_onBeforeInput:x('onBeforeInput'),_attachMutationObserver:function(){if(!u)return;var aa=[],ba=function(){if(aa.length>1){var ca=aa[0],da=ca.target;t(function(){if(this.isMounted()&&da.parentNode)this._onCharacterData(da);}.bind(this));}aa.length=0;}.bind(this);this._mutationObserver=new u(function(ca){var da;if(this._guardAgainstRender)return;if(v){if(aa.length===0)s(ba);(da=aa).push.apply(da,ca);}else{aa=ca;ba();}}.bind(this));this._mutationObserver.observe(k.findDOMNode(this.refs.editorContainer),{characterDataOldValue:true,characterData:true,subtree:true});},_renderPlaceholder:function(){var aa=this.props.editorState.getCurrentContent(),ba=(this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!aa.hasText());if(ba)return (k.createElement(g,{text:this.props.placeholder,editorState:this.props.editorState,textAlignment:this.props.textAlignment}));},render:function(){var aa=this.props.textAlignment,ba=(("_5yw9")+(aa==='left'?' '+"_48yc":'')+(aa==='right'?' '+"_48yd":'')+(aa==='center'?' '+"_48ye":'')),ca=this.props.editorState.getCurrentContent().hasText();return (k.createElement("div",{className:ba},this._renderPlaceholder(),k.createElement("div",{className:"_5ywa",ref:"editorContainer"},k.createElement("div",{ref:"editor",title:ca?null:this.props.placeholder,role:this.props.role||"textbox","aria-activedescendant":this.props.ariaActiveDescendantID,"aria-autocomplete":this.props.ariaAutoComplete,"aria-expanded":this.props.ariaExpanded,"aria-owns":this.props.ariaOwneeID,"aria-haspopup":this.props.ariaHasPopup,className:"_54-z",onBlur:this._onBlur,onFocus:this._onFocus,onSelect:this._onSelect,onMouseUp:this._onMouseUp,onKeyDown:this._onKeyDown,onKeyUp:this._onKeyUp,onKeyPress:this._onKeyPress,onCut:this._onCut,onCopy:this._onCopy,onPaste:this._onPaste,onDragStart:this._onDragStart,onDragOver:this._onDragOver,onDragEnd:this._onDragEnd,onDrop:this._onDrop,onCompositionStart:this._onCompositionStart,onCompositionEnd:this._onCompositionEnd,onBeforeInput:this._onBeforeInput,spellCheck:w&&this.props.spellCheck,tabIndex:this.props.tabIndex,contentEditable:!this.props.readOnly},k.createElement(m,{blockRendererFn:this.props.blockRendererFn,blockStyleFn:this.props.blockStyleFn,editorState:this.props.editorState,inlineStyleFn:this.props.inlineStyleFn})))));},focus:function(){var aa=this.props.editorState,ba=aa.getSelection().getHasFocus(),ca=i.getScrollPosition();k.findDOMNode(this.refs.editor).focus();window.scrollTo(ca.x,ca.y);if(ba)return;this.update(j.forceSelection(aa,aa.getSelection()));},blur:function(){k.findDOMNode(this.refs.editor).blur();},componentDidMount:function(){this._renderedVersion=null;this._clipboard=null;this._clonedEditor=null;this._guardAgainstRender=false;this._handler=n;this._attachMutationObserver();},componentWillUpdate:function(aa){this._blockSelectEvents=true;},componentDidUpdate:function(){this._blockSelectEvents=false;},componentWillUnmount:function(){if(this._mutationObserver){this._mutationObserver.disconnect();this._mutationObserver=null;}},setMode:function(aa){this._handler=y(aa);},exitCurrentMode:function(){this.setMode(p.EDIT);},captureEditorDOM:function(){this._clonedEditor=k.findDOMNode(this.refs.editor).cloneNode(true);},restoreEditorDOM:function(){var aa=k.findDOMNode(this.refs.editorContainer);aa.innerHTML='';aa.appendChild(this._clonedEditor);this.focus();this._clonedEditor=null;},setRenderGuard:function(){this._guardAgainstRender=true;},removeRenderGuard:function(){this._guardAgainstRender=false;},update:function(aa){this.props.onChange(aa);}});e.exports=z;},null);
__d("AbstractMentionsTextEditor.react",["AbstractTextEditor.react","AbstractTextEditorProps","DocumentModifier","EditorChangeType","EditorState","React","TypeaheadNavigation","getOrCreateDOMID","setImmediate","uniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=l,r=q.PropTypes,s=5,t=l.createClass({displayName:"AbstractMentionsTextEditor",propTypes:Object.assign({},h.propTypes,{mentionsSource:r.object,mentionCreationFn:r.func.isRequired,mentionResultsComponent:r.func.isRequired,mentionResultsProps:r.object,excludedEntries:r.object,handleContentReturn:r.func,onAddMention:r.func,onShowMentions:r.func,maxResults:r.number}),getDefaultProps:function(){var v=g.getDefaultProps();return Object.assign({},v,{maxResults:s});},componentWillMount:function(){this._viewID=p();},getInitialState:function(){return {highlightedMentionable:null,ariaActiveDescendantID:null,mentionableEntries:null,characterOffset:0};},_onShowMentions:function(v,w){var x=v&&v.length;if(!x){this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return;}var y=v.slice(0,this.props.maxResults),z=this.props.typeaheadViewProps;if(z&&z.mentionSortFn)y.sort(z.mentionSortFn);this.setState({highlightedMentionable:v[0],mentionableEntries:y,characterOffset:w});if(this.props.onShowMentions)this.props.onShowMentions(y,w);},_onBlur:function(v){this.setState(this.getInitialState());this.props.onBlur&&this.props.onBlur(v);},_onFocus:function(v){this.props.mentionsSource&&this.props.mentionsSource.bootstrap();this.props.onFocus&&this.props.onFocus(v);},_handleReturn:function(v){if(this.state.highlightedMentionable){this._onMentionSelect(this.state.highlightedMentionable,v);return true;}else if(this.props.handleContentReturn&&this.props.handleContentReturn(v))return true;return false;},_onTab:function(v){if(this.state.highlightedMentionable){v.preventDefault();this._onMentionSelect(this.state.highlightedMentionable,v);}else if(this.props.onTab)this.props.onTab(v);},_onEscape:function(v){if(this.props.onEscape)this.props.onEscape(v);if(this.state.mentionableEntries){v.stopPropagation();this.setState(this.getInitialState());}},_onUpArrow:function(v){if(this.state.mentionableEntries){v.preventDefault();m.moveUp(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onUpArrow&&this.props.onUpArrow(v);},_onDownArrow:function(v){if(this.state.mentionableEntries){v.preventDefault();m.moveDown(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onDownArrow&&this.props.onDownArrow(v);},_onMentionHighlight:function(v){this.setState({highlightedMentionable:v});},_onMentionRenderHighlight:function(v){var w=n(v);this.setState({ariaActiveDescendantID:w});},_onMentionSelect:function(v,w){var x=this.props.editorState,y=x.getSelection(),z=x.getCurrentContent(),aa=y.getAnchorKey(),ba=y.getAnchorOffset(),ca=z.getBlockMap().get(aa),da=ba-u(ca.getText().substr(0,ba),v.getTitle(),this.state.characterOffset),ea=i.replaceText(z,y.set('anchorOffset',da),v.getTitle(),x.getCurrentInlineStyle(),this.props.mentionCreationFn(v)),fa=k.push(x,ea,j.INSERT_FRAGMENT);this.props.onChange(fa);this.setState(this.getInitialState());if(this.props.onAddMention){var ga=this.state.mentionableEntries.indexOf(v);this.props.onAddMention(v,ga,w);}},shouldComponentUpdate:function(v,w){return (this.props.editorState!==v.editorState||this.props.placeholder!==v.placeholder||this.props.readOnly!==v.readOnly||this.state.mentionableEntries!==w.mentionableEntries||this.state.highlightedMentionable!==w.highlightedMentionable||this.state.ariaActiveDescendantID!==w.ariaActiveDescendantID);},componentDidUpdate:function(v){var w=this.props.editorState;if(w===v.editorState)return;var x=w.getSelection();if(x.getHasFocus()&&x.isCollapsed()){var y=w.getCurrentContent();if(this.props.mentionsSource)o(function(){this.props.mentionsSource.search(y,x,this._onShowMentions);}.bind(this));}},blur:function(){this.refs.abstractTextEditor.blur();},focus:function(){this.refs.abstractTextEditor.focus();},_renderMentionables:function(){var v=this.state.mentionableEntries;if(!v||!v.length)return null;var w=this.props.mentionResultsComponent;return (l.createElement(w,l.__spread({},this.props.mentionResultsProps,{viewID:this._viewID,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:v||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this._onMentionSelect,onMentionHighlight:this._onMentionHighlight,onMentionRenderHighlight:this._onMentionRenderHighlight})));},render:function(){var v=this.state.mentionableEntries,w=!!(v&&v.length),x=this.props.readOnly?null:'-2';return (l.createElement("div",{ref:"container",className:this.props.className,tabIndex:x},l.createElement(g,l.__spread({},this.props,{ref:"abstractTextEditor",role:"combobox",ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:"list",ariaOwneeID:this._viewID,ariaExpanded:w,ariaHasPopup:w,onBlur:this._onBlur,onFocus:this._onFocus,onTab:this._onTab,onEscape:this._onEscape,onDownArrow:this._onDownArrow,onUpArrow:this._onUpArrow,handleReturn:this._handleReturn})),this._renderMentionables()));}});function u(v,w,x){for(var y=x;y<=w.length;y++)if(v.substr(-y)==w.substr(0,y))x=y;return x;}e.exports=t;},null);
__d("createMentionEntity",["ComposedEntityMutability","ComposedEntityType","DocumentEntity"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){var l=k.getType().toLowerCase()==='user'?g.SEGMENTED:g.IMMUTABLE,m=k.getAuxiliaryData();return i.create(h.MENTION,l,{id:k.getUniqueID(),isWeak:m&&m.renderType==='non_member',type:k.getType()});}e.exports=j;},null);
__d("MentionsInput.react",["AbstractMentionsTextEditor.react","EditorState","MentionsLayer.react","React","createMentionEntity","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j,o=n.PropTypes,p=j.createClass({displayName:"MentionsInput",propTypes:{editorState:o.instanceOf(h).isRequired,mentionsSource:o.object,typeaheadView:o.func.isRequired,typeaheadViewPropTypes:o.object,spellCheck:o.bool,placeholder:o.string,className:o.string,autoflip:o.bool,handleContentReturn:o.func,handleDroppedFiles:o.func,handlePastedFiles:o.func,onAddMention:o.func,onShowMentions:o.func,onChange:o.func,onInputFocus:o.func,onInputBlur:o.func},blur:function(){this.refs.textEditor.blur();},focus:function(){if(this.refs.textEditor){this._doFocus();}else setTimeout(this._doFocus,0);},render:function(){var q=m(this.props.className,"_5yk1");return (j.createElement("div",{className:q,onClick:this.focus,onFocus:this.focus},j.createElement(g,j.__spread({},this.props,{mentionResultsComponent:i,mentionResultsProps:{typeaheadView:this.props.typeaheadView,typeaheadViewProps:this.props.typeaheadViewProps,autoflip:this.props.autoflip},mentionCreationFn:k,ref:"textEditor",className:"_5yk2",stripPastedStyles:true}))));},_doFocus:function(){if(this.isMounted())this.refs.textEditor.focus();}});e.exports=p;},null);
__d("ComposerTargetData",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j){"use strict";this.targetID=h;this.targetSupportsMultiplePhotos=i;this.viewerIsTarget=j;}e.exports=g;},null);
__d("Network",["mixInEventEmitter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=true,i=a.navigator.connection,j={0:'unknown',1:'ethernet',2:'wifi',3:'2g',4:'3g'};function k(){return h;}function l(q){if(q==h)return;h=q;p.emit(q?'online':'offline');}function m(){return i?i.bandwidth:(h?Infinity:0);}function n(){return i?i.metered:false;}function o(){var q=i?String(i.type):'0';return j[q]||q;}var p={getBandwidth:m,getType:o,isMetered:n,isOnline:k,setOnline:l};g(p,{online:true,offline:true});if(a.addEventListener){a.addEventListener('online',l.bind(null,true));a.addEventListener('offline',l.bind(null,false));}else if(a.attachEvent){a.attachEvent('online',l.bind(null,true));a.attachEvent('offline',l.bind(null,false));}e.exports=p;},null);
__d("FileHasher",["WebWorker","fileSliceName","emptyFunction","FileHashWorkerResource"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();j.isSupported=function(){"use strict";return g.isSupported();};function j(){"use strict";var k=b('FileHashWorkerResource');g.prepareResource(k);this.$FileHasher0=new g(k).setMessageHandler(function(l){this.$FileHasher1(l);}.bind(this)).execute();}j.prototype.hash=function(k,l){"use strict";this.$FileHasher1=l;this.$FileHasher0.postMessage({file:k,fileSliceName:h});return this;};j.prototype.destroy=function(){"use strict";this.$FileHasher1=i;this.$FileHasher0.terminate();};e.exports=j;},null);
__d("ContentState",["DocumentCharacters","immutable"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h,j=i.OrderedMap,k=i.Record;j;var l=g,m=l.SOFT_NEWLINE,n={blockMap:null,selectionBefore:null,selectionAfter:null},o=k(n);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(){if(o!==null)o.apply(this,arguments);}r.prototype.getBlockMap=function(){return this.blockMap;};r.prototype.getSelectionBefore=function(){return this.selectionBefore;};r.prototype.getSelectionAfter=function(){return this.selectionAfter;};r.prototype.getBlockForKey=function(s){var t=this.getBlockMap().get(s);return t;};r.prototype.getKeyBefore=function(s){return this.getBlockMap().reverse().keySeq().skipUntil(function(t){return t===s;}).skip(1).first();};r.prototype.getKeyAfter=function(s){return this.getBlockMap().keySeq().skipUntil(function(t){return t===s;}).skip(1).first();};r.prototype.getBlockAfter=function(s){return this.getBlockMap().skipUntil(function(t,u){return u===s;}).skip(1).first();};r.prototype.getBlockBefore=function(s){return this.getBlockMap().reverse().skipUntil(function(t,u){return u===s;}).skip(1).first();};r.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray();};r.prototype.getLastBlock=function(){return this.getBlockMap().last();};r.prototype.getPlainText=function(s){return this.getBlockMap().map(function(t){return t?t.getText():'';}).join(s||m);};r.prototype.hasText=function(){var s=this.getBlockMap();return (s.size>1||s.first().getLength()>0);};e.exports=r;},null);
__d("createEmptySelectionState",["SelectionState"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i){return new g({anchorKey:i,anchorOffset:0,focusKey:i,focusOffset:0,isBackward:false,hasFocus:false});}e.exports=h;},null);
__d("createContentStateFromBlocks",["ContentState","createEmptySelectionState","createOrderedMapFromBlockArray"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k){var l=i(k),m=h(l.first().getKey());return new g({blockMap:l,selectionBefore:m,selectionAfter:m});}e.exports=j;},null);
__d("createInitialEditorState",["EditorState","immutable","createEmptySelectionState"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.Stack;function l(m,n){var o=m.getBlockMap().first().getKey();return g.create({currentContent:m,undoStack:k(),redoStack:k(),decorator:n||null,selection:i(o)});}e.exports=l;},null);
__d("createPlainBlocksFromText",["CharacterMetadata","ComposedBlockType","ContentBlock","immutable","generateBlockKey"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j,m=l.List,n=l.Repeat,o=g,p=o.EMPTY,q=h,r=q.UNSTYLED;function s(t){return t.map(function(u){var v=u.length;return new i({key:k(),text:u,type:r,characterList:m(n(p,v))});});}e.exports=s;},null);
__d("createEmptyEditorState",["createContentStateFromBlocks","createInitialEditorState","createPlainBlocksFromText"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k){var l=i(['']),m=g(l);return h(m,k);}e.exports=j;},null);
__d("DocumentMentionsRegex",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g='\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\\/!%\'"~=<>_:;',h='\\b[A-Z][^\\s'+g+']',i={PUNCTUATION:g,NAME:h};e.exports=i;},null);
__d("AtSignMentionsStrategy",["DocumentMentionsRegex"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.PUNCTUATION,i=['@','\\uff20'].join(''),j='[^'+i+h+'\\s]',k='(?:'+'\\.[ |$]|'+' |'+'['+h+']|'+')',l=new RegExp('(?:^|\\s)('+'['+i+']'+'((?:'+j+k+'){0,20})'+')$'),m={findMentionableString:function(n){var o=l.exec(n);if(o!==null){var p=o[2];if(p.length)return {matchingString:p,leadOffset:o[1].length};}return null;}};e.exports=m;},null);
__d("CapitalizedNameMentionsStrategy",["DocumentMentionsRegex"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=1,i=new RegExp('(^|[^#])((?:'+g.NAME+'{'+h+',})$)'),j={findMentionableString:function(k){var l=i.exec(k);if(l!==null)return {matchingString:l[2],leadOffset:l[2].length};return null;}};e.exports=j;},null);
__d("DocumentCompositeMentionsSource",["emptyFunction","invariant","nullthrows"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(l,m){var n=l.getCharacterList().toSeq().slice(0,m).reverse().takeWhile(function(o){return o.getEntity()===null;}).count();return l.getText().slice(m-n,m);}function k(l){h(l.length>0);this.$DocumentCompositeMentionsSource0=l;this.$DocumentCompositeMentionsSource1=false;this.$DocumentCompositeMentionsSource2=null;}k.prototype.bootstrap=function(l){if(this.$DocumentCompositeMentionsSource1)return;this.$DocumentCompositeMentionsSource1=true;l=l||g;var m=this.$DocumentCompositeMentionsSource0.length;function n(){m--;if(!m)l();}this.$DocumentCompositeMentionsSource0.forEach(function(o){o.bootstrap(n);});};k.prototype.search=function(l,m,n){var o=m.getAnchorKey(),p=l.getBlockForKey(o);this.$DocumentCompositeMentionsSource3(j(p,m.getAnchorOffset()),n);};k.prototype.$DocumentCompositeMentionsSource3=function(l,m){var n=this.$DocumentCompositeMentionsSource0.length,o,p;for(var q=0;q<n;q++){o=this.$DocumentCompositeMentionsSource0[q];p=o.findMatch(l);if(p===null){continue;}else{var r=i(p).matchingString;this.$DocumentCompositeMentionsSource2=r;o.search(r,function(s,t){if(this.$DocumentCompositeMentionsSource2===t)m(s,p.leadOffset);}.bind(this));return;}}this.$DocumentCompositeMentionsSource2=null;m(null,null);};e.exports=k;},null);
__d("DocumentMentionsSource",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i,j){g(typeof i.findMentionableString==='function');this.$DocumentMentionsSource0=i;this.$DocumentMentionsSource1=j;this.$DocumentMentionsSource2=false;}h.prototype.findMatch=function(i){return this.$DocumentMentionsSource0.findMentionableString(i);};h.prototype.bootstrap=function(i){if(!this.$DocumentMentionsSource2){this.$DocumentMentionsSource2=true;this.$DocumentMentionsSource1.bootstrap(i);}};h.prototype.search=function(i,j){this.$DocumentMentionsSource1.search(i,j);};e.exports=h;},null);
__d("getMentionsTextForContentState",["ComposedEntityType","DocumentCharacters","DocumentEntity","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.EMOTICON,m=k.MENTION,n=h,o=n.SOFT_NEWLINE,p=j.thatReturnsTrue,q=/[\\\]:]/g;function r(t){var u=t.getBlockMap().map(function(v){var w=v.getText(),x=[];v.findEntityRanges(p,function(y,z){x.push(s(w.slice(y,z),v.getEntityAt(y)));});return x.join('');});return u.join(o);}function s(t,u){if(u){var v=i.get(u);if(v.getType()===m){t=t.replace(q,function(w){return '\\'+w;});return '@['+v.getData().id+':'+t+']';}else if(v.getType()===l)return v.getData().originalEmoticon;}return t.replace('@[','@ [');}e.exports=r;},null);
__d("FilteredSearchSource",["AbstractSearchSource"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l){"use strict";g.call(this);this.$FilteredSearchSource0=k;this.$FilteredSearchSource1=l;}j.prototype.bootstrapImpl=function(k){"use strict";this.$FilteredSearchSource1.bootstrap(k);};j.prototype.searchImpl=function(k,l,m){"use strict";var n=function(o,p){o=this.$FilteredSearchSource2(o,p);l(o,p);}.bind(this);this.$FilteredSearchSource1.search(k,n,m);};j.prototype.$FilteredSearchSource2=function(k,l){"use strict";var m=this.$FilteredSearchSource0;return k.filter(function(n){return m(n,l);});};e.exports=j;},null);
__d("filterCapitalizedNames",["TokenizeUtil"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(l,m){return i(l)&&(m.length>=5||j(l,m));}function i(l){var m=l.getAuxiliaryData()||k;return !m.disableAutosuggest&&!!(l.getType()==='user'||m.connectedPage);}function j(l,m){return g.isExactMatch(m,l.getTitle());}var k={};e.exports=h;},null);
__d("PhotoEditorFilters",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(k){"use strict";this.$BaseFilter0=k;}g.prototype.filter=function(){"use strict";};g.prototype.run=function(k){"use strict";var l=this.$BaseFilter0.getImageData();this.filter.call(this,l,k);return l;};for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.filter=function(k){"use strict";for(var l=0;l<k.getWidth();l++)for(var m=0;m<k.getHeight();m++){var n=k.getPixel(l,m),o=Math.floor((n.r+n.g+n.b)/3);n.r=n.g=n.b=o;k.setPixel(l,m,n);}};e.exports={BaseFilter:g,BlackAndWhiteFilter:j};},null);
__d("PhotoEditorCanvas",["BlobFactory","DOM","PhotoResizeModeConst","Vector","sprintf"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(n){"use strict";this._editor=n;this._canvas=h.create('canvas');this._ctx=this._canvas.getContext('2d');this._drawHandler=null;}l.prototype.setImageContent=function(n){"use strict";this._canvas.width=n.width;this._canvas.height=n.height;this._ctx.drawImage(n,0,0);return this;};l.prototype.drawGraphic=function(){"use strict";this._ctx.drawImage.apply(this._ctx,arguments);return this;};l.prototype.isBlobSupported=function(){"use strict";return !!this._canvas.toBlob;};l.prototype.getElement=function(){"use strict";return this._canvas;};l.prototype.getDimensions=function(){"use strict";return new j(this._canvas.width,this._canvas.height,'document');};l.prototype.getWidth=function(){"use strict";return this._canvas.width;};l.prototype.getHeight=function(){"use strict";return this._canvas.height;};l.prototype.getContext=function(){"use strict";return this._ctx;};l.prototype.setWidth=function(n){"use strict";this._canvas.width=n;return this;};l.prototype.setHeight=function(n){"use strict";this._canvas.height=n;return this;};l.prototype.toBlob=function(n){"use strict";if(this.isBlobSupported()){this._canvas.toBlob(n);return;}this.getBlobFromDataURL(n);};l.prototype.getBlobFromDataURL=function(n){"use strict";var o=this.toDataURL('image/png'),p=o.match(/^data:(.*?);base64,/),q=p[1],r=o.substr(p[0].length),s=a.atob(r),t=new ArrayBuffer(s.length),u=new Uint8Array(t);for(var v=0;v<s.length;v++)u[v]=s.charCodeAt(v);var w=g.getBlob([t],{type:q});n(w);};l.prototype.toBlobURL=function(n){"use strict";this.toBlob(function(o){n(a.URL.createObjectURL(o));});};l.prototype.toURL=function(n){"use strict";if(this.isBlobSupported()){this.toBlobURL(n);return;}n(this.toDataURL());};l.prototype.toDataURL=function(n){"use strict";return this._canvas.toDataURL(n);};l.prototype.resizedCopy=function(n,o){"use strict";var p=n.x/this.getWidth(),q=n.y/this.getHeight();if(o==i.CONTAIN){if(p>q){return this.scaledCopy(q);}else return this.scaledCopy(p);}else if(o==i.COVER){if(p<q){return this.scaledCopy(q);}else return this.scaledCopy(p);}else throw new Error('mode must be one of PhotoResizeModeConst');};l.prototype.scaledCopy=function(n){"use strict";var o=this._canvas.width*n,p=this._canvas.height*n;return new l().setWidth(o).setHeight(p).drawGraphic(this._canvas,0,0,o,p);};l.prototype.copy=function(){"use strict";return this.scaledCopy(1);};l.prototype.getPixelColor=function(n,o){"use strict";var p=this.getImageData(n,o,1,1).getPixel(0,0);return k('rgba(%s,%s,%s,%s)',p.r,p.g,p.b,p.a);};l.prototype.getImageData=function(n,o,p,q){"use strict";return new m(this._ctx.getImageData(n||0,o||0,p||this.getWidth(),q||this.getHeight()));};l.prototype.putImageData=function(n,o,p){"use strict";this._ctx.putImageData(n.getData(),o||0,p||0);return this;};l.prototype.toDataURI=function(){"use strict";return this._canvas.toDataURL('image/png');};l.prototype.toBase64=function(){"use strict";var n='data:image/png;base64,',o=this.toDataURI();return o.slice(n.length);};l.prototype.applyFilter=function(n,o){"use strict";this.putImageData(new n(this).run(o));};l.prototype.enableDrawing=function(n,o){"use strict";if(!this._editor)return;this.disableDrawing();this._drawHandler=new n(this._editor,o).start();return this._drawHandler;};l.prototype.setDrawingFillStyle=function(n){"use strict";if(!this._drawHandler)return;this._drawHandler.setFillStyle(n);};l.prototype.setFillStyle=function(n){"use strict";this._ctx.fillStyle=n;};l.prototype.disableDrawing=function(){"use strict";if(!this._drawHandler)return;this._drawHandler.stop();this._drawHandler=null;};l.prototype.clear=function(){"use strict";this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height);return this;};l.prototype.crop=function(n,o,p,q){"use strict";var r=new l().setWidth(p).setHeight(q);r.drawGraphic(this._canvas,Math.max(0,n),Math.max(0,o),p,q,0,0,p,q);this.setImageContent(r.getElement());return this;};l.prototype.fillText=function(n,o,p,q,r,s){"use strict";this._ctx.font=o;if(s){this._canvas.width=this._ctx.measureText(n).width;this._ctx.font=o;}this._ctx.textBaseline='top';this._ctx.fillStyle=p;this._ctx.fillText(n,q,r);return this;};l.prototype.fillCircle=function(n,o,p,q){"use strict";this._ctx.fillStyle=q||'black';this._ctx.beginPath();this._ctx.arc(n,o,p,0,Math.PI*2);this._ctx.closePath();this._ctx.fill();};l.prototype.fillRect=function(n,o,p,q,r){"use strict";this._ctx.fillStyle=r||'black';this._ctx.fillRect(n||0,o||0,p||this._canvas.width,q||this._canvas.height);return this;};function m(n){"use strict";this.image_data=n;this.width=n.width;this.height=n.height;this.array=n.data;}m.prototype.getData=function(){"use strict";return this.image_data;};m.prototype.getWidth=function(){"use strict";return this.width;};m.prototype.getHeight=function(){"use strict";return this.height;};m.prototype.getPixel=function(n,o){"use strict";var p=this.getIndex(n,o);return {r:this.array[p],g:this.array[p+1],b:this.array[p+2],a:this.array[p+3]};};m.prototype.setPixel=function(n,o,p){"use strict";var q=this.getIndex(n,o);this.array[q]=p.r;this.array[q+1]=p.g;this.array[q+2]=p.b;this.array[q+3]=p.a;};m.prototype.getIndex=function(n,o){"use strict";return 4*(n+o*this.width);};m.prototype.forEach=function(n){"use strict";for(var o=0;o<this.getWidth();o++)for(var p=0;p<this.getHeight();p++)this.setPixel(n(this.getPixel(o,p),o,p));};e.exports=l;},null);
__d("PhotoEditorDrawingCursor",["PhotoEditorCanvas","CSS","Vector","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l,m){"use strict";this.$PhotoEditorDrawingCursor0=l;this.$PhotoEditorDrawingCursor1=m;this.$PhotoEditorDrawingCursor2=new g();this.$PhotoEditorDrawingCursor3=new i(0,0);h.addClass(this.$PhotoEditorDrawingCursor2.getElement(),"_5ewz");}k.prototype.getElement=function(){"use strict";return this.$PhotoEditorDrawingCursor2.getElement();};k.prototype.update=function(){"use strict";var l=this.$PhotoEditorDrawingCursor0.getCurrentBrushSize();this.$PhotoEditorDrawingCursor2.clear();this.$PhotoEditorDrawingCursor2.setWidth(l).setHeight(l);this.$PhotoEditorDrawingCursor1.drawStroke(this.$PhotoEditorDrawingCursor2,l/2,l/2);this.$PhotoEditorDrawingCursor3=new i(l,l);return this;};k.prototype.getDimensions=function(){"use strict";return this.$PhotoEditorDrawingCursor3;};e.exports=k;},null);
__d("PhotoEditorInterpolation",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this.$Linear0=null;this.$Linear1=null;this.$Linear2=h;}g.prototype.setPoints=function(h,i){"use strict";this.$Linear0=h;this.$Linear1=i;this.$Linear3=(this.$Linear1.y-this.$Linear0.y)/(this.$Linear1.x-this.$Linear0.x);this.$Linear4=this.$Linear0.y-this.$Linear3*this.$Linear0.x;if((this.isHorizontal()&&this.$Linear0.x>this.$Linear1.x)||(!this.isHorizontal()&&this.$Linear0.y>this.$Linear1.y)){var j=this.$Linear0;this.$Linear0=this.$Linear1;this.$Linear1=j;}return this;};g.prototype.invert=function(h){"use strict";var i=h.x;h.x=h.y;h.y=i;};g.prototype.isHorizontal=function(){"use strict";return this.$Linear3<=1&&this.$Linear3>-1;};g.prototype.draw=function(){"use strict";if(this.isHorizontal()){this.$Linear5();}else this.$Linear6();};g.prototype.$Linear6=function(){"use strict";var h,i;if(!isFinite(this.$Linear3)){for(i=this.$Linear0.y;i<=this.$Linear1.y;i++)this.$Linear2.draw(this.$Linear0.x,i);}else for(i=this.$Linear0.y;i<=this.$Linear1.y;i++){h=Math.floor((i-this.$Linear4)/this.$Linear3);this.$Linear2.draw(h,i);}};g.prototype.$Linear5=function(){"use strict";var h,i;for(h=this.$Linear0.x;h<=this.$Linear1.x;h++){i=Math.floor(this.$Linear3*h+this.$Linear4);this.$Linear2.draw(h,i);}};e.exports={Linear:g};},null);
__d("PhotoEditorDrawingHandlers",["PhotoEditorDrawingCursor","Event","PhotoEditorInterpolation","SubscriptionsHandler","Vector"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(q,r,s){"use strict";this._editor=q;this._canvas=q.getWorkingCanvas();this.setFillStyle(r);this.setBrushSize(s);this.image_data=this._canvas.getImageData();this.isMouseDown=false;this.subscriptionsHandler=new j();this._lastPosition=null;this._func=null;}l.prototype.onMouseDown=function(q){"use strict";this.isMouseDown=true;q.preventDefault();this._func=new i.Linear(this);};l.prototype.onMouseUp=function(){"use strict";this._lastPosition=null;this.isMouseDown=false;};l.prototype.onMouseMove=function(q){"use strict";if(!this.isMouseDown)return;var r=k.getEventPosition(q).sub(k.getElementPosition(this._editor.getCanvasWrapper())).div(this._editor.getResizeFactor());if(this._lastPosition)this._func.setPoints(this._lastPosition,r).draw();this._lastPosition=r;};l.prototype.onMouseLeave=function(){"use strict";this._lastPosition=null;};l.prototype.setBrushSize=function(q){"use strict";this._brushSize=q;this.getDrawingCursor().update();};l.prototype.setFillStyle=function(q){"use strict";if(q instanceof Image){this._fillStyle=this._canvas.getContext().createPattern(q,'no-repeat');}else if(Array.isArray(q)){this._fillStyle=this._canvas.getContext().createLinearGradient(0,0,this._canvas.getwidth(),this._canvas.getHeight());for(var r=0;r<q.length;r++)this._fillStyle.addColorStop(q[r].index,q[r].color);}else this._fillStyle=q;this.getDrawingCursor().update();};l.prototype.drawStroke=function(q,r,s){"use strict";};l.prototype.draw=function(q,r){"use strict";this.drawStroke(this._canvas,q,r);};l.prototype.getDrawingCursor=function(){"use strict";if(!this._cursor)this._cursor=new g(this._editor,this);return this._cursor;};l.prototype.getCursorElement=function(){"use strict";return this.getDrawingCursor().getElement();};l.prototype.start=function(){"use strict";var q=this.getDrawingCursor();q.update();this.subscriptionsHandler.engage();this.subscriptionsHandler.addSubscriptions(h.listen(this._canvas.getElement(),'mouseleave',this.onMouseLeave.bind(this)),h.listen(this._canvas.getElement(),'mousemove',this.onMouseMove.bind(this)),h.listen(this._canvas.getElement(),'mousedown',this.onMouseDown.bind(this)),h.listen(this._canvas.getElement(),'mouseup',this.onMouseUp.bind(this)),h.listen(q.getElement(),'mousemove',this.onMouseMove.bind(this)),h.listen(q.getElement(),'mousedown',this.onMouseDown.bind(this)),h.listen(q.getElement(),'mouseup',this.onMouseUp.bind(this)));return this;};l.prototype.getCurrentBrushRect=function(q,r){"use strict";var s=this._editor.getCurrentBrushSize();q-=Math.floor(s/2);r-=Math.floor(s/2);return {x:q,y:r,width:s,height:s};};l.prototype.stop=function(){"use strict";this.subscriptionsHandler.release();return this;};for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(){"use strict";if(l!==null)l.apply(this,arguments);}o.prototype.drawStroke=function(q,r,s){"use strict";var t=this.getCurrentBrushRect(r,s);q.fillRect(t.x,t.y,t.width,t.height,this._fillStyle);};for(m in l)if(l.hasOwnProperty(m))p[m]=l[m];p.prototype=Object.create(n);p.prototype.constructor=p;p.__superConstructor__=l;function p(){"use strict";if(l!==null)l.apply(this,arguments);}p.prototype.drawStroke=function(q,r,s){"use strict";var t=this._editor.getCurrentBrushSize();q.fillCircle(r,s,t/2,this._fillStyle);};e.exports={SquareBrush:o,CircularBrush:p};},null);
__d("PhotoEditorFont",["sprintf","PhotoEditorConfig"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=b('PhotoEditorConfig').Constants;function i(j,k,l){"use strict";this.$PhotoEditorFont0=j||h.DEFAULT_FONT_FAMILY;this.$PhotoEditorFont1=k||h.DEFAULT_FONT_SIZE;this.$PhotoEditorFont2=l||h.DEFAULT_FONT_METRIC;}i.prototype.setFamily=function(j){"use strict";this.$PhotoEditorFont0=j;};i.prototype.getFamily=function(){"use strict";return this.$PhotoEditorFont0;};i.prototype.setSize=function(j){"use strict";this.$PhotoEditorFont1=j;};i.prototype.getSize=function(){"use strict";return this.$PhotoEditorFont1;};i.prototype.setMetric=function(j){"use strict";this.$PhotoEditorFont2=j;};i.prototype.getMetric=function(){"use strict";return this.$PhotoEditorFont2;};i.prototype.toString=function(){"use strict";return g('%s%s %s',this.$PhotoEditorFont1,this.$PhotoEditorFont2,this.$PhotoEditorFont0);};i.prototype.copy=function(){"use strict";return new i(this.$PhotoEditorFont0,this.$PhotoEditorFont1,this.$PhotoEditorFont2);};i.getDefault=function(){return new i();};e.exports=i;},null);
__d("PhotoEditorDialogs",["Dialog","PhotoEditorFont","Form","DOM","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(q,r,s){if(!s){s=r;r={};}var t=j.create('div'),u=k.createElement("form",{action:"#"},l._("Font size"),k.createElement("br",null),k.createElement("input",{name:"size",defaultValue:r.size})," px ",k.createElement("br",null),l._("Font family"),k.createElement("br",null),k.createElement("select",{name:"family"},k.createElement("option",{value:"arial"},"Arial"),k.createElement("option",{value:"verdana"},"Verdana"),k.createElement("option",{value:"tahoma"},"Tahoma")),k.createElement("br",null),l._("Text"),k.createElement("br",null),k.createElement("input",{name:"text",defaultValue:r.text}));u=k.render(u,t);u=t.firstChild;new g().setTitle(l._("Configure text")).setBody(t).setButtons(g.OK_AND_CANCEL).setHandler(function(){s(i.serialize(u));}).setCausalElement(q).show();}function n(q){m(q.getRoot(),function(r){q.addTextGraphic(r.text,new h(r.family,r.size,'px'));});}function o(q){var r=q.getFont().getSize(),s={text:q.getText(),size:r[1],family:r[2]};m(q.getElement(),s,function(t){q.updateText(t.text,new h(t.family,t.size,'px'));});}function p(q,r,s){new g().setBody(l._("Are you sure you want to do that?")).setTitle(r).setButtons(g.OK_AND_CANCEL).setHandler(s).setCausalElement(q.getRoot()).show();}e.exports={addText:n,editText:o,confirmation:p};},null);
__d("PhotoEditorButtonHandler",["PhotoEditorFilters","PhotoEditorDrawingHandlers","cx","CSS","PhotoEditorDialogs","Arbiter","AsyncDialog","AsyncRequest","PhotoEditorShareDialog","copyProperties","PhotoEditorConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=b('PhotoEditorConfig').Constants,r=b('PhotoEditorConfig').Actions;function s(v){"use strict";this.$ButtonHandler0=v;this.$ButtonHandler1=new l();}s.prototype.subscribe=function(v,w){"use strict";if(!Array.isArray(v))v=[v];v=v.map(function(x){return x.toString();});return this.$ButtonHandler1.subscribe(v,this.$ButtonHandler2.bind(null,w));};s.prototype.$ButtonHandler2=function(v,w,x){"use strict";v.apply(this,x);};s.prototype.handleAction=function(v,w){"use strict";return this.$ButtonHandler1.inform(v.toString(),[this.$ButtonHandler0,w]);};s.prototype.subscribeToStandardActions=function(){"use strict";this.subscribeToStandardActionsExcept();};s.prototype.subscribeToStandardActionsExcept=function(v){"use strict";var w=u;w=p({},w);if(v)for(var x=0;x<v.length;x++)delete w[v[x]];for(var y in w)this.subscribe(y,w[y]);};function t(v){return function(w,x){k.confirmation(w,x.getAttribute('aria-label'),v.bind(this,w));};}var u={};u[r.BW_FILTER]=function(v){v.getWorkingCanvas().applyFilter(g.BlackAndWhiteFilter);};u[r.REVERT]=function(v){v.revert();};u[r.PAINT_BRUSH]=function(v){v.enableDrawing(h.CircularBrush,v.getCurrentFillStyle());v.updateBrushConfigVisibility({color:true,size:true});j.addClass(v.getWorkingCanvas().getElement(),"_55g1");};u[r.PENCIL]=function(v){v.enableDrawing(h.SquareBrush,v.getCurrentFillStyle());v.updateBrushConfigVisiblity({color:true,size:true});j.addClass(v.getWorkingCanvas().getElement(),"_55g1");};u[r.REVERT_BRUSH]=function(v){v.enableDrawing(h.CircularBrush,v.getOriginalImage());v.updateBrushConfigVisiblity({color:false,size:true});j.addClass(v.getWorkingCanvas().getElement(),"_55g1");};u[r.SAVE_AS_PROFILE]=t(function(v){v.saveAsProfPic();});u[r.SAVE_IN_ALBUM]=function(v){m.send(new n().setURI(q.BROWSE_ALBUMS_SAVE).setData({save_on_click:1}));};u[r.ADD_TEXT]=function(v){k.addText(v);};u[r.IMPORT_IMAGE]=function(v){m.send(new n().setURI(q.BROWSE_ALBUMS_IMPORT));};u[r.SHARE]=function(v){new m.send(new n().setURI(q.SHARE_DIALOG_PATH),function(w){new o(v,w);});};u[r.ROTATE_CW]=function(v){v.rotate(true);};u[r.ROTATE_CCW]=function(v){v.rotate(false);};e.exports=s;},null);
__d("PhotoEditorPopover",["ArbiterMixin","ContextualDialog","Event","JSXDOM","LayerHideOnBlur","cx","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=m(g);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r){"use strict";this.$PhotoEditorPopover0=r;this.flyoutRoot=j.div(null);i.listen(this.$PhotoEditorPopover0,'click',this.$PhotoEditorPopover1.bind(this));}q.prototype.renderFlyoutContent=function(){"use strict";};q.prototype.onShow=function(){"use strict";};q.prototype.$PhotoEditorPopover1=function(){"use strict";var r=this.$PhotoEditorPopover2();if(r.isShown()){r.hide();}else r.show();};q.prototype.hide=function(){"use strict";this.$PhotoEditorPopover2().hide();};q.prototype.$PhotoEditorPopover2=function(){"use strict";if(!this.$PhotoEditorPopover3){this.renderFlyoutContent();var r={position:'left',addedBehaviors:[k],context:this.$PhotoEditorPopover0,classNames:["_5g8e"]};this.$PhotoEditorPopover3=new h(r,this.flyoutRoot);}return this.$PhotoEditorPopover3;};e.exports=q;},null);
__d("ColorSelectorPopover",["PhotoEditorCanvas","CSS","Event","JSXDOM","PhotoEditorPopover","Style","Vector","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=new m(250,250);for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(s,t){"use strict";k.call(this,s,t);this.$ColorSelectorPopover0=t;}r.prototype.renderFlyoutContent=function(){"use strict";this.$ColorSelectorPopover1=new g().setWidth(o.x).setHeight(o.y);var s=this.$ColorSelectorPopover1.getContext(),t=s.createLinearGradient(0,0,o.x,0);t.addColorStop(.03,'red');t.addColorStop(.21,'yellow');t.addColorStop(.35,'green');t.addColorStop(.52,'lightblue');t.addColorStop(.67,'blue');t.addColorStop(.84,'deeppink');t.addColorStop(.97,'white');this.$ColorSelectorPopover1.fillRect(0,0,o.x,o.y,t);var u=.5;t=s.createLinearGradient(0,0,0,o.y*u);t.addColorStop(.1,'rgba(255, 255, 255, 1)');t.addColorStop(1,'rgba(255, 255, 255, 0)');this.$ColorSelectorPopover1.fillRect(0,0,o.x,o.y,t);t=s.createLinearGradient(0,o.y*u,0,o.y);t.addColorStop(0,'rgba(0, 0, 0, 0)');t.addColorStop(.9,'rgba(0, 0, 0, 1)');this.$ColorSelectorPopover1.fillRect(0,o.y*u,o.x,o.y,t);var v=this.$ColorSelectorPopover1.getElement();h.addClass(v,"_5g6_");i.listen(v,'click',this.$ColorSelectorPopover2.bind(this));i.listen(v,'mouseout',this.$ColorSelectorPopover3.bind(this));i.listen(v,'mousemove',this.$ColorSelectorPopover4.bind(this));this.flyoutRoot.appendChild(v);this.$ColorSelectorPopover5=this.flyoutRoot.appendChild(j.div({className:"_5g70"}));l.set(this.$ColorSelectorPopover5,'background',this.$ColorSelectorPopover0);};r.prototype.$ColorSelectorPopover2=function(s){"use strict";this.setColor(this.$ColorSelectorPopover6(s));this.hide();this.inform('selection',this.$ColorSelectorPopover0);};r.prototype.$ColorSelectorPopover3=function(){"use strict";l.set(this.$ColorSelectorPopover5,'background',this.$ColorSelectorPopover0);};r.prototype.$ColorSelectorPopover4=function(s){"use strict";l.set(this.$ColorSelectorPopover5,'background',this.$ColorSelectorPopover6(s));};r.prototype.$ColorSelectorPopover6=function(s){"use strict";var t=m.getEventPosition(s,'document').sub(m.getElementPosition(this.$ColorSelectorPopover1.getElement()));return this.$ColorSelectorPopover1.getPixelColor(t.x,t.y);};r.prototype.setColor=function(s){"use strict";this.$ColorSelectorPopover0=s;if(this.$ColorSelectorPopover5)l.set(this.$ColorSelectorPopover5,'background',s);};e.exports=r;},null);
__d("SizeSelectorPopover",["Event","JSXDOM","Keys","Parent","PhotoEditorPopover","clamp","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n="_5g8m",o="_5g8n";for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(s,t,u,v){"use strict";k.call(this,s);this.$SizeSelectorPopover0=t;this.$SizeSelectorPopover1=u;this.$SizeSelectorPopover2=v;}r.prototype.renderFlyoutContent=function(){"use strict";this.$SizeSelectorPopover3=h.input({className:"_5g8o",value:this.$SizeSelectorPopover0});this.flyoutRoot.appendChild(h.div(null,h.a({className:o}),this.$SizeSelectorPopover3,h.a({className:n})));g.listen(this.$SizeSelectorPopover3,'keyup',this.$SizeSelectorPopover4.bind(this));g.listen(this.flyoutRoot,'click',this.$SizeSelectorPopover5.bind(this));g.listen(this.$SizeSelectorPopover3,'blur',this.$SizeSelectorPopover6.bind(this));};r.prototype.$SizeSelectorPopover6=function(){"use strict";this.$SizeSelectorPopover3.value=this.$SizeSelectorPopover7(this.$SizeSelectorPopover0);};r.prototype.$SizeSelectorPopover4=function(s){"use strict";if(s.keyCode==i.UP||s.keyCode==i.RIGHT){this.$SizeSelectorPopover8(1);return;}else if(s.keyCode==i.DOWN||s.keyCode==i.LEFT){this.$SizeSelectorPopover8(-1);return;}var t=parseInt(this.$SizeSelectorPopover3.value,10);if(a.isNaN(t))return;this.$SizeSelectorPopover9(this.$SizeSelectorPopover7(t));};r.prototype.$SizeSelectorPopover7=function(s){"use strict";return l(this.$SizeSelectorPopover1,s,this.$SizeSelectorPopover2);};r.prototype.$SizeSelectorPopover8=function(s){"use strict";var t=this.$SizeSelectorPopover7(this.$SizeSelectorPopover0+s);this.$SizeSelectorPopover9(t);this.$SizeSelectorPopover3.value=t;};r.prototype.$SizeSelectorPopover5=function(s){"use strict";var t=s.getTarget();if(j.byClass(t,n)){this.$SizeSelectorPopover8(1);}else if(j.byClass(t,o))this.$SizeSelectorPopover8(-1);};r.prototype.$SizeSelectorPopover9=function(s){"use strict";if(s!=this.$SizeSelectorPopover0){this.$SizeSelectorPopover0=s;this.inform('selection',this.$SizeSelectorPopover0);}};r.prototype.setSize=function(s){"use strict";this.$SizeSelectorPopover0=s;if(this.$SizeSelectorPopover3)this.$SizeSelectorPopover3.value=s;};e.exports=r;},null);
__d("PhotoEditorPaletteBase",["ArbiterMixin","CSS","DOM","Event","SubscriptionsHandler","cx","csx","mixin","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p="_5c-o",q=n(g);for(var r in q)if(q.hasOwnProperty(r))t[r]=q[r];var s=q===null?null:q.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=q;function t(u,v){"use strict";this.palette=v;this.photoEditor=u;this.$PhotoEditorPaletteBase0=false;this.$PhotoEditorPaletteBase1=null;this.subscriptionsHandler=new k('PhotoEditorPalette');this.initDOM();h.hide(this.palette);}t.prototype.initDOM=function(){"use strict";this.closeButton=i.scry(this.palette,"._5c-p").pop();this.confirmButton=i.scry(this.palette,"._5c-q").pop();};t.prototype.getRoot=function(){"use strict";return this.palette;};t.prototype.enable=function(u){"use strict";if(this.$PhotoEditorPaletteBase0)return;this.subscriptionsHandler.engage();if(this.closeButton)this.subscriptionsHandler.addSubscriptions(j.listen(this.closeButton,'click',o(this.disable,this)));if(this.$PhotoEditorPaletteBase1)h.addClass(this.$PhotoEditorPaletteBase1,p);this.onEnable(u);this.$PhotoEditorPaletteBase0=true;h.show(this.palette);this.inform('enabled',u);};t.prototype.onEnable=function(u){"use strict";};t.prototype.disable=function(u){"use strict";if(!this.$PhotoEditorPaletteBase0)return;this.subscriptionsHandler.release();this.onDisable(u);this.$PhotoEditorPaletteBase0=false;h.hide(this.palette);this.inform('disabled',u);};t.prototype.onDisable=function(u){"use strict";};t.prototype.isEnabled=function(){"use strict";return this.$PhotoEditorPaletteBase0;};t.prototype.setButtonActive=function(u){"use strict";if(this.$PhotoEditorPaletteBase1)h.removeClass(this.$PhotoEditorPaletteBase1,p);h.addClass(u,p);this.$PhotoEditorPaletteBase1=u;};e.exports=t;},null);
__d("PhotoEditorDrawingPalette",["ColorSelectorPopover","DOM","PhotoEditorDrawingHandlers","Event","SizeSelectorPopover","JSXDOM","PhotoEditorPaletteBase","Style","csx","cx","PhotoEditorConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=b('PhotoEditorConfig').Constants;for(var r in m)if(m.hasOwnProperty(r))t[r]=m[r];var s=m===null?null:m.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=m;function t(u,v){"use strict";m.call(this,u,v);this.$PhotoEditorDrawingPalette0=q.DEFAULT_FILL_STYLE;this.$PhotoEditorDrawingPalette1=i.CircularBrush;}t.prototype.initDOM=function(){"use strict";s.initDOM.call(this);this.$PhotoEditorDrawingPalette2();this.$PhotoEditorDrawingPalette3();};t.prototype.$PhotoEditorDrawingPalette2=function(){"use strict";this.$PhotoEditorDrawingPalette4=h.find(this.palette,"._5g74");this.$PhotoEditorDrawingPalette5=this.$PhotoEditorDrawingPalette4.appendChild(l.span({className:"_5g8h"},q.DEFAULT_BRUSH_SIZE));var u=new k(this.$PhotoEditorDrawingPalette4,q.DEFAULT_BRUSH_SIZE,q.MIN_BRUSH_SIZE,q.MAX_BRUSH_SIZE);u.subscribe('selection',this.$PhotoEditorDrawingPalette6.bind(this));};t.prototype.$PhotoEditorDrawingPalette3=function(){"use strict";this.$PhotoEditorDrawingPalette7=h.find(this.palette,"._5g76");this.$PhotoEditorDrawingPalette8=l.span({className:"_5g71"});n.set(this.$PhotoEditorDrawingPalette8,'background',q.DEFAULT_FILL_STYLE);this.$PhotoEditorDrawingPalette7.appendChild(this.$PhotoEditorDrawingPalette8);this.$PhotoEditorDrawingPalette9=new g(this.$PhotoEditorDrawingPalette7,q.DEFAULT_FILL_STYLE);this.$PhotoEditorDrawingPalette9.subscribe('selection',this.$PhotoEditorDrawingPalettea.bind(this));};t.prototype.onEnable=function(){"use strict";this.subscriptionsHandler.addSubscriptions(j.listen(this.confirmButton,'click',this.disable.bind(this)));this.photoEditor.enableDrawing(this.$PhotoEditorDrawingPalette1,this.photoEditor.getCurrentFillStyle(),this.photoEditor.getCurrentBrushSize());};t.prototype.$PhotoEditorDrawingPalettea=function(u,v){"use strict";this.$PhotoEditorDrawingPalettec(v);};t.prototype.$PhotoEditorDrawingPalettec=function(u){"use strict";this.$PhotoEditorDrawingPalette0=u;n.set(this.$PhotoEditorDrawingPalette8,'background',u);this.photoEditor.setCurrentFillStyle(u);this.inform('setcolor');};t.prototype.$PhotoEditorDrawingPalette6=function(u,v){"use strict";this.$PhotoEditorDrawingPaletted(v);};t.prototype.$PhotoEditorDrawingPaletted=function(u){"use strict";h.setContent(this.$PhotoEditorDrawingPalette5,u);this.photoEditor.setCurrentBrushSize(u);this.inform('setsize');};t.prototype.getCurrentDrawingHandler=function(){"use strict";return this.$PhotoEditorDrawingPalette1;};t.prototype.onDisable=function(){"use strict";this.photoEditor.disableDrawing();};e.exports=t;},null);
__d("PhotoEditorDOM",["DOM","Parent","sprintf"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j='data-photoeditoraction',k='['+j+'="%s"]',l={getElementForAction:function(m,n){return g.find(m,i(k,n));},getActionFromElement:function(m){m=h.byAttribute(m,j);if(m)return parseInt(m.getAttribute(j),10);}};e.exports=l;},null);
__d("PhotoEditorGraphic",["ArbiterMixin","PhotoEditorCanvas","CSS","DOM","Draggable","Event","PhotoEditorFont","Rect","SimpleDrag","Style","SubscriptionsHandler","UserAgent_DEPRECATED","Vector","clamp","cx","emptyFunction","mixin","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=0,z=[],aa=.6,ba=.25,ca=30,da=50,ea=4,fa=.8,ga=150,ha=315,ia=function(za){return {'-webkit-transform':za,'-moz-transform':za,'-ms-transform':za,transform:za};},ja=function(za,ab){var bb=za.x*ab.x+za.y*ab.y,cb=bb/(za.magnitude()*ab.magnitude());cb=t(-1,cb,1);var db=Math.acos(cb)*(180/Math.PI),eb=za.x*ab.y-ab.x*za.y;if(eb<0)db*=-1;return db;};function ka(){"use strict";this.root=j.create('div');i.addClass(this.root,"_5g8y");i.addClass(this.root,"_5a2z");var za=j.create('div');i.addClass(za,"_2fb7");i.addClass(za,"_5a2-");this.root.appendChild(za);this.$FreeFormEditButton0=v;this.$FreeFormEditButton1=v;this.$FreeFormEditButton2=v;var ab=new o(this.root);ab.subscribe('start',function(bb,event){if(event.button!==0)return false;this.$FreeFormEditButton4=true;i.addClass(this.root,"_2fb8");this.$FreeFormEditButton0(event);}.bind(this));ab.subscribe('update',x(this.$FreeFormEditButton5,ca,this));ab.subscribe('end',function(bb,event){this.$FreeFormEditButton4=false;i.removeClass(this.root,"_2fb8");p.apply(this.root,ia('translate(50%, -50%)'));this.$FreeFormEditButton1(event);}.bind(this));}ka.prototype.$FreeFormEditButton5=function(za,event){"use strict";if(!this.$FreeFormEditButton4)return;this.$FreeFormEditButton2(event);};ka.prototype.setDragStartHandler=function(za){"use strict";this.$FreeFormEditButton0=za;return this;};ka.prototype.setDragMoveHandler=function(za){"use strict";this.$FreeFormEditButton2=za;return this;};ka.prototype.setDragEndHandler=function(za){"use strict";this.$FreeFormEditButton1=za;return this;};ka.prototype.getElement=function(){"use strict";return this.root;};function la(){"use strict";this.$DOMDrawer0=new s();this.$DOMDrawer1=new XMLSerializer();this.$DOMDrawer2=(void 0);}la.prototype.setDimensions=function(za){"use strict";this.$DOMDrawer0=za;return this;};la.prototype.render=function(za){"use strict";var ab='<svg xmlns="http://www.w3.org/2000/svg"'+'width="'+this.$DOMDrawer0.x+'" '+'height="'+this.$DOMDrawer0.y+'">'+'<foreignObject width="100%" height="100%">'+'<div xmlns="http://www.w3.org/1999/xhtml">'+this.$DOMDrawer1.serializeToString(za)+'</div>'+'</foreignObject>'+'</svg>',bb=new Image();bb.width=this.$DOMDrawer0.x;bb.height=this.$DOMDrawer0.y;bb.src=this.$DOMDrawer3(ab);return bb;};la.prototype.$DOMDrawer3=function(za){"use strict";return "data:image/svg+xml;base64,"+a.btoa(za);};var ma=w(g);for(var na in ma)if(ma.hasOwnProperty(na))pa[na]=ma[na];var oa=ma===null?null:ma.prototype;pa.prototype=Object.create(oa);pa.prototype.constructor=pa;pa.__superConstructor__=ma;function pa(za,ab,bb){"use strict";this.id=y++;this.photoEditor=za;z.push(this);this.root=j.create('div');this.maxWidth=ab;this.maxHeight=bb;i.addClass(this.root,"_55gm");var cb=j.create('div');i.addClass(cb,"_5g8y");i.addClass(cb,"_bbn");var db=j.create('div');i.addClass(db,"_2fb7");i.addClass(db,"_bbo");cb.appendChild(db);this.root.appendChild(cb);this.$Graphic0=j.create('div');i.addClass(this.$Graphic0,"_5lzw");this.$Graphic0.appendChild(this.root);this.$Graphic1=new s(0,0,'document');this.subscriptionsHandler=new q();this.subscriptionsHandler.addSubscriptions(l.listen(cb,'click',this.remove.bind(this)),l.listen(cb,'mousedown',function(event){i.addClass(cb,"_2fb8");event.stopPropagation();}),l.listen(cb,'mouseleave',function(event){i.removeClass(cb,"_2fb8");}));}pa.prototype.serialize=function(){"use strict";var za=this.getPos(),ab=this.getDimensions(),bb=this.photoEditor.getCanvasDimensions();return {type:this.constructor,left:za.x/bb.x,top:za.y/bb.y,width:ab.x/bb.x,height:ab.y/bb.y,rotation:this.getRotation()};};pa.prototype.initFromSerializedState=function(za){"use strict";var ab=this.photoEditor.getCanvasDimensions();this.setDimensions(new s(za.width*ab.x,za.height*ab.y));this.setPos(new s(za.left*ab.x,za.top*ab.y));this.setRotation(za.rotation);};pa.prototype.onActive=function(){"use strict";this.$Graphic2=this.$Graphic2||(new k(this.$Graphic0)).setUseAbsolute(true).setUseScroller(false).addHandle(this.root).setDropHandler(this.updatePos.bind(this));i.addClass(this.root,"_36w9");this.updateDraggableBoundingBox();};pa.prototype.onInactive=function(){"use strict";this.$Graphic2&&this.$Graphic2.destroy();this.$Graphic2=null;i.removeClass(this.root,"_36w9");};pa.prototype.updateDraggableBoundingBox=function(){"use strict";if(this.$Graphic2){var za=this.getDimensions(),ab=this.photoEditor.getGraphicsLayer(),bb=s.getElementPosition(ab),cb=s.getElementDimensions(ab),db=new n(bb.y-za.y,bb.x+cb.x+za.x,bb.y+cb.y+za.y,bb.x-za.x);this.$Graphic2.setBoundingBox(db);}};pa.prototype.onBeforeSuddenTransformation=function(){"use strict";};pa.prototype.onAfterSuddenTransformation=function(){"use strict";};pa.prototype.getElement=function(){"use strict";return this.$Graphic0;};pa.prototype.getInitialDimensions=function(){"use strict";return new s(this.maxWidth,this.maxHeight,'document').mul(ba);};pa.prototype.getPos=function(){"use strict";return this.$Graphic1;};pa.prototype.getCenterPos=function(){"use strict";return this.getPos().add(this.getDimensions().div(2));};pa.prototype.getCenterCoordinates=function(){"use strict";return s.getElementPosition(this.$Graphic0).add(this.getDimensions().div(2));};pa.prototype.setPos=function(za){"use strict";this.$Graphic1=za;p.apply(this.$Graphic0,{left:this.$Graphic1.x+'px',top:this.$Graphic1.y+'px'});};pa.prototype.updatePos=function(){"use strict";this.setPos((new s(p.get(this.$Graphic0,'left'),p.get(this.$Graphic0,'top'))));};pa.prototype.setDimensions=function(za){"use strict";p.apply(this.root,{width:za.x+'px',height:za.y+'px'});this.updateDraggableBoundingBox();};pa.prototype.remove=function(event){"use strict";this.subscriptionsHandler.release();j.remove(this.root);this.photoEditor.removeGraphic(this);};pa.prototype.getDrawableObj=function(){"use strict";};pa.prototype.getDimensions=function(){"use strict";return s.getElementDimensions(this.$Graphic0);};pa.prototype.getDimensionsForDrawable=function(){"use strict";return s.getElementDimensions(this.root);};pa.prototype.getRotation=function(){"use strict";return 0;};pa.prototype.setRotation=function(za){"use strict";};pa.prototype.onDragStart=function(za){"use strict";if(r.firefox()){this.$Graphic3=za.layerX;this.$Graphic4=za.layerY;}else{this.$Graphic3=za.offsetX;this.$Graphic4=za.offsetY;}za.dataTransfer.setData('graphic_id',this.id);};pa.prototype.onDrop=function(za,ab){"use strict";if(this.id!==parseInt(za.dataTransfer.getData('graphic_id'),10))return;if(!ab)ab=new s(0,0,'document');this.$Graphic1=new s(ab.x+za.layerX-this.$Graphic3,ab.y+za.layerY-this.$Graphic4,'document');this.setPos(this.$Graphic1);za.kill();};for(var qa in pa)if(pa.hasOwnProperty(qa))sa[qa]=pa[qa];var ra=pa===null?null:pa.prototype;sa.prototype=Object.create(ra);sa.prototype.constructor=sa;sa.__superConstructor__=pa;function sa(za,ab,bb,cb){"use strict";pa.call(this,za,bb,cb);this.$ImageGraphic0=j.create('div');i.addClass(this.$ImageGraphic0,"_36wa");this.root.appendChild(this.$ImageGraphic0);this.$ImageGraphic1=bb/cb;this.$ImageGraphic2=0;this.$ImageGraphic3=0;this.$ImageGraphic4=false;this.$ImageGraphic5=new Image();this.$ImageGraphic5.crossOrigin='anonymous';p.apply(this.$ImageGraphic5,{maxWidth:bb+'px',maxHeight:cb+'px'});i.addClass(this.root,"_55jn");i.addClass(this.root,'loading');this.$ImageGraphic6=j.create('div');i.addClass(this.$ImageGraphic6,"_5a2y");var db=new ka();this.$ImageGraphic6.appendChild(db.getElement());this.root.appendChild(this.$ImageGraphic6);this.subscriptionsHandler.addSubscriptions(l.listen(this.$ImageGraphic5,'load',this.$ImageGraphic7.bind(this)),l.listen(this.root,'dragenter',l.prevent),l.listen(this.root,'dragover',l.prevent),l.listen(this.$ImageGraphic0,'mousedown',this.$ImageGraphic8.bind(this)),l.listen(db.getElement(),'mousedown',function(event){event.stopPropagation();}));db.setDragStartHandler(function(){this.$ImageGraphic9=this.getCenterCoordinates();this.$ImageGraphica();}.bind(this)).setDragMoveHandler(this.$ImageGraphicb.bind(this)).setDragEndHandler(function(){this.$ImageGraphic2=this.$ImageGraphic3;this.$ImageGraphicc();this.$ImageGraphicd();}.bind(this));this.$ImageGraphice=db;this.$ImageGraphic5.src=ab;this.imageURL=ab;this.setDimensions(this.getInitialDimensions());}sa.prototype.serialize=function(){"use strict";return Object.assign({},ra.serialize.call(this),{imageURL:this.imageURL});};sa.prototype.getDrawableObj=function(){"use strict";return this.$ImageGraphic5;};sa.prototype.onDragStart=function(za){"use strict";ra.onDragStart.call(this,za);za.dataTransfer.setData('text/plain',this.$ImageGraphic5.src);};sa.prototype.$ImageGraphicb=function(event){"use strict";var za=s.getEventPosition(event),ab=this.$ImageGraphic9,bb=ab.distanceTo(za),cb=this.photoEditor.getCanvasDimensions(),db=Math.max(cb.x,cb.y),eb=t(da,bb*2,db),fb=new s(eb,eb),gb=fb.sub(this.getDimensions());if(gb.magnitude()>ea){var hb=this.getPos().sub(gb.div(2));this.setDimensions(fb);this.setPos(hb);}var ib=za.sub(ab),jb=new s(-1*Math.cos(Math.PI*3/4),-1*Math.sin(Math.PI*3/4)),kb=ja(jb,ib);this.$ImageGraphicf(kb);};sa.prototype.$ImageGraphicf=function(za){"use strict";this.$ImageGraphic3=this.$ImageGraphic2+za;p.apply(this.$ImageGraphic0,ia('rotate('+this.$ImageGraphic3+'deg)'));this.$ImageGraphicg(ha+za);p.apply(this.$ImageGraphice.getElement(),ia('translate(50%, -50%) rotate('+za+'deg)'));};sa.prototype.$ImageGraphicd=function(){"use strict";this.$ImageGraphicg(ha);};sa.prototype.$ImageGraphicc=function(){"use strict";p.set(this.$ImageGraphic6,'transition','transform 0.3s cubic-bezier(.08,.98,.15,1.09)');};sa.prototype.$ImageGraphica=function(){"use strict";p.set(this.$ImageGraphic6,'transition','');};sa.prototype.$ImageGraphicg=function(za){"use strict";p.apply(this.$ImageGraphic6,ia('rotate('+za+'deg) '+'translateX('+this.getDimensions().x/2+'px) '+'rotate('+-1*za+'deg)'));};sa.prototype.$ImageGraphic8=function(event){"use strict";this.photoEditor.setActiveGraphic(this);};sa.prototype.$ImageGraphic7=function(){"use strict";i.removeClass(this.root,'loading');i.addClass(this.root,'loaded');this.$ImageGraphic1=this.$ImageGraphic5.width/this.$ImageGraphic5.height;var za=new h();za.setImageContent(this.$ImageGraphic5);p.set(this.$ImageGraphic0,'backgroundImage','url('+za.toDataURL()+')');this.setDimensions(this.getDimensions());this.updatePos();this.photoEditor.setActiveGraphic(this);};sa.prototype.setPos=function(za){"use strict";ra.setPos.call(this,za);var ab=this.$ImageGraphich();p.apply(this.$ImageGraphic0,{left:ab.x+'px',top:ab.y+'px'});};sa.prototype.setDimensions=function(za){"use strict";p.apply(this.root,{height:za.x+'px',width:za.x+'px'});var ab=(new s(za.x,za.x)).div(1,this.$ImageGraphic1).mul(aa);p.apply(this.$ImageGraphic0,{height:Math.round(ab.y)+'px',width:Math.round(ab.x)+'px'});this.$ImageGraphicd();this.updateDraggableBoundingBox();};sa.prototype.$ImageGraphich=function(){"use strict";var za=this.getDimensions(),ab=this.getDimensionsForDrawable();return za.sub(ab).div(2);};sa.prototype.getInitialDimensions=function(){"use strict";var za=Math.min(this.maxWidth,this.maxHeight);return new s(za,za,'document').mul(ba);};sa.prototype.getDimensionsForDrawable=function(){"use strict";return s.getElementDimensions(this.$ImageGraphic0);};sa.prototype.getRotation=function(){"use strict";return this.$ImageGraphic2;};sa.prototype.setRotation=function(za){"use strict";this.$ImageGraphic2=za;p.apply(this.$ImageGraphic0,ia('rotate('+this.$ImageGraphic2+'deg)'));};sa.prototype.onBeforeSuddenTransformation=function(){"use strict";this.$ImageGraphica();};sa.prototype.onAfterSuddenTransformation=function(){"use strict";this.$ImageGraphicc();};for(var ta in sa)if(sa.hasOwnProperty(ta))va[ta]=sa[ta];var ua=sa===null?null:sa.prototype;va.prototype=Object.create(ua);va.prototype.constructor=va;va.__superConstructor__=sa;function va(za,ab,bb,cb,db){"use strict";sa.call(this,za,bb,cb,db);this.$StickerGraphic0=ab;}va.prototype.serialize=function(){"use strict";return Object.assign({},ua.serialize.call(this),{sticker_id:this.$StickerGraphic0});};for(qa in pa)if(pa.hasOwnProperty(qa))wa[qa]=pa[qa];wa.prototype=Object.create(ra);wa.prototype.constructor=wa;wa.__superConstructor__=pa;function wa(za,ab,bb,cb,db,eb,fb){"use strict";pa.call(this,za,eb,fb);this.$TextGraphic0=new Image();this.$TextGraphic1=cb;this.$TextGraphic2=bb||m.getDefault();this.$TextGraphic3=ab;this.$TextGraphic4=ab;this.$TextGraphic5=false;this.$TextGraphic6=0;this.$TextGraphic7=1;this.$TextGraphic8=1;this.$TextGraphic9=0;this.$TextGraphica=(new la()).setDimensions(wa.ImageSettings.DIMENSIONS);this.$TextGraphicb=wa.TextAlign.CENTER;this.$TextGraphicc=j.create('textarea');p.apply(this.$TextGraphicc,{position:'absolute',width:wa.ImageSettings.WIDTH+'px',padding:'0px',margin:'0px',border:'none',overflow:'hidden',resize:'none',background:'transparent'});var gb=j.create('div',{className:"_3bul"});p.set(gb,'width',wa.ImageSettings.WIDTH+'px');gb.appendChild(this.$TextGraphicc);this.root.appendChild(gb);this.$TextGraphicd=j.create('textarea',{className:"_5g78"});this.$TextGraphice=j.create('div',{className:"_5l-2"});var hb=new ka();this.root.appendChild(hb.getElement());this.root.appendChild(this.$TextGraphicd);this.root.appendChild(this.$TextGraphice);i.addClass(this.root,'loaded');i.addClass(this.root,"_5g79");this.subscriptionsHandler.addSubscriptions(l.listen(this.$TextGraphice,'click',function(){this.$TextGraphicd.focus();}.bind(this)),l.listen(this.$TextGraphicd,'blur',function(){i.removeClass(this.root,"_5g7a");if(!this.$TextGraphic5||!this.$TextGraphic3.length){this.updateText(this.$TextGraphic4);this.$TextGraphic5=false;}}.bind(this)),l.listen(this.$TextGraphicd,'focus',function(){za.setActiveGraphic(this);i.addClass(this.root,"_5g7a");if(!this.$TextGraphic5)this.updateText('');}.bind(this)),l.listen(this.$TextGraphicd,'keyup',x(this.$TextGraphicf,50,this)),l.listen(hb.getElement(),'mousedown',function(event){event.stopPropagation();}));hb.setDragStartHandler(function(){this.$TextGraphicg=this.getCenterCoordinates();}.bind(this)).setDragMoveHandler(this.$TextGraphich.bind(this));var ib=Math.min(eb,fb)*fa,jb=ib/wa.ImageSettings.WIDTH;this.$TextGraphic8=jb;p.apply(this.root,{width:ib+'px',height:jb*wa.ImageSettings.HEIGHT+'px'});this.updateText(ab,bb);}wa.prototype.$TextGraphich=function(event){"use strict";var za=s.getEventPosition(event),ab=this.getDimensions(),bb=ab.magnitude(),cb=ab.div(bb),db=this.$TextGraphicg,eb=db.distanceTo(za),fb=this.photoEditor.getCanvasDimensions(),gb=Math.max(fb.x,fb.y),hb=t(da,eb*2,gb),ib=cb.mul(hb),jb=ib.sub(ab);if(jb.magnitude()>ea){var kb=this.getPos().sub(jb.div(2));this.setDimensions(ib);this.setPos(kb);}var lb=db.sub(za),mb=ja(ab.mul(-1,1),lb);this.setRotation(mb);this.updateDraggableBoundingBox();};wa.prototype.$TextGraphicf=function(){"use strict";var za=this.$TextGraphicd.value;if(za.length>ga)this.$TextGraphicd.value=za.substr(0,ga);this.updateText(this.$TextGraphicd.value);this.$TextGraphic5=true;};wa.prototype.onActive=function(){"use strict";ra.onActive.call(this);this.$TextGraphicd.focus();this.inform('focus');};wa.prototype.onInactive=function(){"use strict";ra.onInactive.call(this);this.$TextGraphicd.blur();this.inform('blur');};wa.prototype.getRotation=function(){"use strict";return this.$TextGraphic6;};wa.prototype.setRotation=function(za){"use strict";this.$TextGraphic6=za;p.apply(this.root,ia('rotate('+this.$TextGraphic6+'deg)'));};wa.prototype.setDimensions=function(za){"use strict";this.$TextGraphic8=za.x/wa.ImageSettings.WIDTH;p.apply(this.root,{width:za.x+'px',height:this.$TextGraphic8*wa.ImageSettings.HEIGHT+'px'});this.$TextGraphici();};wa.prototype.setAlignment=function(za){"use strict";this.$TextGraphicb=za;p.set(this.$TextGraphicd,'text-align',za);this.updateText();};wa.prototype.getDrawableObj=function(){"use strict";return this.$TextGraphic0;};wa.prototype.getFont=function(){"use strict";return this.$TextGraphic2;};wa.prototype.getText=function(){"use strict";return this.$TextGraphic3;};wa.prototype.getFillStyle=function(){"use strict";return this.$TextGraphic1;};wa.prototype.updateText=function(za,ab,bb){"use strict";if(bb)this.$TextGraphic1=bb;if(ab)this.$TextGraphic2=ab;if(typeof za==='string'){za=za.substr(0,ga);if(this.$TextGraphic3!=za){this.$TextGraphicd.value=this.$TextGraphic3=za;this.$TextGraphicc.innerText=za;}}p.apply(this.$TextGraphicd,{textAlign:this.$TextGraphicb,color:this.$TextGraphic1,fontFamily:this.$TextGraphic2.getFamily()});p.apply(this.$TextGraphicc,{textAlign:this.$TextGraphicb,font:this.$TextGraphic2.toString(),color:this.$TextGraphic1});this.$TextGraphicj();this.$TextGraphic0=this.$TextGraphica.render(this.$TextGraphicc);};wa.prototype.$TextGraphicj=function(){"use strict";var za=wa.ImageSettings.MAX_FONT;this.$TextGraphic2.setSize(za);p.apply(this.$TextGraphicc,{font:this.$TextGraphic2.toString(),height:'0px'});while(this.$TextGraphicc.scrollHeight>wa.ImageSettings.HEIGHT){this.$TextGraphic2.setSize(--za);p.set(this.$TextGraphicc,'font',this.$TextGraphic2.toString());}this.$TextGraphic9=(wa.ImageSettings.HEIGHT-this.$TextGraphicc.scrollHeight)/2;p.apply(this.$TextGraphicc,{marginTop:this.$TextGraphic9+'px',marginBottom:this.$TextGraphic9+'px',height:this.$TextGraphicc.scrollHeight+'px'});this.$TextGraphici();};wa.prototype.$TextGraphici=function(){"use strict";var za=this.$TextGraphic8,ab=this.$TextGraphicc.clientHeight;p.apply(this.$TextGraphicd,{width:wa.ImageSettings.WIDTH*za+'px',height:ab*za+'px',marginTop:this.$TextGraphic9*za+'px',marginBottom:this.$TextGraphic9*za+'px',fontSize:this.$TextGraphic2.getSize()*za+'px'});};wa.prototype.getTextHasChanged=function(){"use strict";return this.$TextGraphic5;};wa.prototype.setText=function(za){"use strict";this.updateText(za);};wa.prototype.setFont=function(za){"use strict";this.$TextGraphic2=za;this.updateText();};wa.prototype.setFontFamily=function(za){"use strict";this.$TextGraphic2.setFamily(za);this.updateText();};wa.prototype.setFontSize=function(za){"use strict";this.$TextGraphic2.setSize(za);this.updateText();};wa.prototype.setFillStyle=function(za){"use strict";this.$TextGraphic1=za;this.updateText();};wa.prototype.serialize=function(){"use strict";return Object.assign({},ra.serialize.call(this),{text:this.$TextGraphic3,font:this.$TextGraphic2,fill:this.$TextGraphic1,textHasChanged:this.$TextGraphic5,fontScale:this.$TextGraphic7});};wa.prototype.initFromSerializedState=function(za){"use strict";ra.initFromSerializedState.call(this,za);this.updateText(za.text,za.font.copy(),za.fill);this.$TextGraphic5=za.textHasChanged;this.$TextGraphic7=za.fontScale;};wa.TextAlign={CENTER:'center',LEFT:'left',RIGHT:'right'};wa.ImageSettings={WIDTH:200,HEIGHT:120,MAX_FONT:40,DIMENSIONS:new s(200,120)};for(ta in sa)if(sa.hasOwnProperty(ta))xa[ta]=sa[ta];xa.prototype=Object.create(ua);xa.prototype.constructor=xa;xa.__superConstructor__=sa;function xa(){"use strict";if(sa!==null)sa.apply(this,arguments);}xa.prototype.remove=function(){"use strict";ua.remove.call(this);a.URL.revokeObjectURL(this.imageURL);};function ya(za,ab){if(z[za])z[za].onDrop(ab);}e.exports={Image:sa,Sticker:va,Text:wa,Blob:xa,onDrop:ya};},null);
__d("PhotoEditor",["ArbiterMixin","AsyncDialog","AsyncRequest","PhotoEditorButtonHandler","PhotoEditorCanvas","CSS","DOM","DragDropTarget","Event","PhotoEditorFont","PhotoEditorGraphic","PhotoEditorDOM","Style","SubscriptionsHandler","URI","Vector","cx","mixin","removeFromArray","PhotoEditorConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=b('PhotoEditorConfig').Constants,aa=null,ba=90,ca=Math.PI/2,da=x(g);for(var ea in da)if(da.hasOwnProperty(ea))ga[ea]=da[ea];var fa=da===null?null:da.prototype;ga.prototype=Object.create(fa);ga.prototype.constructor=ga;ga.__superConstructor__=da;function ga(ha){"use strict";this.root=ha;this.workingCanvas=new k(this);this.layers=[];this.activeGraphic=null;this.rotations=0;this.buttonHandler=new j(this);this.originalImage=null;this.canvasWrapperEl=null;this.drawingSubscriptionsHandler=new t();this.stickerProxyPath=z.STICKER_PROXY_PATH;this.setCurrentFillStyle('white');this.setCurrentBrushSize(5);this.initDOM();this.reset();aa=this;l.addClass(this.canvasWrapperEl,"_5981");l.addClass(this.workingCanvas.getElement(),this.getCanvasClass());}ga.prototype.serialize=function(){"use strict";var ha=this.layers.map(function(ia){return ia.serialize();});return {graphics:ha,numRotations:this.getNumRotations()};};ga.prototype.getCanvasClass=function(){"use strict";return "_5982";};ga.prototype.initDOM=function(){"use strict";};ga.prototype.updateBrushConfigVisibility=function(ha){"use strict";};ga.prototype.getRoot=function(){"use strict";return this.root;};ga.prototype.getCanvasWrapper=function(){"use strict";return this.canvasWrapperEl;};ga.prototype.getGraphicsLayer=function(){"use strict";return this.canvasWrapperEl;};ga.prototype.setActiveGraphic=function(ha){"use strict";if(this.activeGraphic===ha)return;this.activeGraphic&&this.activeGraphic.onInactive();this.activeGraphic=ha;this.activeGraphic&&this.activeGraphic.onActive();};ga.prototype.setImage=function(ha){"use strict";this.workingCanvas.setImageContent(ha);s.apply(this.canvasWrapperEl,{width:ha.width+'px',height:ha.height+'px'});m.appendContent(this.canvasWrapperEl,this.workingCanvas.getElement());if(this._drawingHandler)this.canvasWrapperEl.appendChild(this._drawingHandler.getCursorElement());this.originalImage=ha;};ga.prototype.registerEventDelegate=function(ha){"use strict";return o.listen(ha,'click',this.handleDelegateClick.bind(this),o.Priority.URGENT);};ga.prototype.handleDelegateClick=function(ha){"use strict";var ia=ha.getTarget(),ja=r.getActionFromElement(ia);if(!ja)return;var ka=this.buttonHandler.handleAction(ja,ia);if(!ka)ha.prevent();};ga.prototype.getButtonHandler=function(ha,ia){"use strict";return this.buttonHandler;};ga.prototype.loadPhoto=function(ha){"use strict";var ia=new Image();ia.crossOrigin='anonymous';if(this.imageLoadRef)this.imageLoadRef.remove();this.imageLoadRef=o.listen(ia,'load',this.onImageLoaded.bind(this,ia));ia.src=ha;};ga.prototype.onImageLoaded=function(ha){"use strict";this.setImage(ha);this.inform('resize',ha);};ga.prototype.getImageDimensions=function(){"use strict";if(this.isInverted){return new v(this.workingCanvas.getHeight(),this.workingCanvas.getWidth());}else return new v(this.workingCanvas.getWidth(),this.workingCanvas.getHeight());};ga.prototype.getCanvasDimensions=function(){"use strict";if(this.isInverted){return new v(this.canvasWrapperEl.offsetHeight,this.canvasWrapperEl.offsetWidth);}else return new v(this.canvasWrapperEl.offsetWidth,this.canvasWrapperEl.offsetHeight);};ga.prototype.reset=function(){"use strict";l.removeClass(this.canvasWrapperEl,this.getRotateClass());this.workingCanvas.clear();this.rotations=0;this.isInverted=false;};ga.prototype.rotate=function(ha){"use strict";l.removeClass(this.canvasWrapperEl,this.getRotateClass());this.rotations+=ha?1:3;this.rotations%=4;if(this.rotations)l.addClass(this.canvasWrapperEl,this.getRotateClass());this.rotateGraphics(ha);this.isInverted=!this.isInverted;};ga.prototype.rotateGraphics=function(ha){"use strict";var ia=ha?Math.PI/2:Math.PI/-2;this.layers.forEach(function(ja){var ka=this.getCanvasDimensions().div(2),la=ja.getCenterPos().sub(ka),ma=new v(la.x*Math.cos(ia)-la.y*Math.sin(ia),la.x*Math.sin(ia)+la.y*Math.cos(ia));ma=ma.sub(ja.getDimensions().div(2));var na=new v(ka.y,ka.x);ja.setPos(na.add(ma));ja.setRotation(ja.getRotation()+ia*180/Math.PI);}.bind(this));};ga.prototype.getIsInverted=function(){"use strict";return this.isInverted;};ga.prototype.getNumRotations=function(){"use strict";return this.rotations;};ga.prototype.getRotationAngle=function(){"use strict";return this.rotations*ca;};ga.prototype.getRotateClass=function(){"use strict";return 'rot'+(this.rotations*ba);};ga.prototype.removeGraphic=function(ha){"use strict";if(this.activeGraphic===ha)this.setActiveGraphic(null);y(this.layers,ha);};ga.prototype._getRandomPosForGraphic=function(ha){"use strict";return v.getElementDimensions(this.getGraphicsLayer()).sub(ha.getInitialDimensions()).mul(Math.random(),Math.random());};ga.prototype.addGraphic=function(ha,ia){"use strict";this.layers.push(ha);if(!ia)ia=this._getRandomPosForGraphic(ha);this.getGraphicsLayer().appendChild(ha.getElement());ha.setPos(ia);this._enableGraphicsDragDrop();return ha;};ga.prototype.addBlobGraphic=function(ha,ia){"use strict";var ja=this.getCanvasDimensions();return this.addGraphic(new q.Blob(this,ha,ja.x,ja.y),ia);};ga.prototype.addImageGraphic=function(ha,ia){"use strict";var ja=this.getCanvasDimensions();return this.addGraphic(new q.Image(this,ha,ja.x,ja.y),ia);};ga.prototype.addStickerGraphic=function(ha,ia,ja){"use strict";var ka=this.getCanvasDimensions();return this.addGraphic(new q.Sticker(this,ha,ia,ka.x,ka.y),ja);};ga.prototype.addTextGraphic=function(ha,ia,ja){"use strict";var ka=this.getCanvasDimensions();return this.addGraphic(new q.Text(this,ha,ia,this.getCurrentFillStyle(),this.canvasWrapperEl,ka.x,ka.y),ja);};ga.prototype.crop=function(ha,ia,ja,ka){"use strict";this.workingCanvas.crop(ha,ia,ja,ka);this.inform('resize');};ga.prototype.getWorkingCanvas=function(){"use strict";return this.workingCanvas;};ga.prototype.getOriginalImage=function(){"use strict";return this.originalImage;};ga.prototype.setCurrentFillStyle=function(ha){"use strict";this.fillStyle=ha;if(this._drawingHandler)this._drawingHandler.setFillStyle(ha);};ga.prototype.getCurrentFillStyle=function(){"use strict";return this.fillStyle;};ga.prototype.setCurrentBrushSize=function(ha){"use strict";this.brushSize=ha;if(this._drawingHandler)this._drawingHandler.setBrushSize(ha);};ga.prototype.getCurrentBrushSize=function(){"use strict";return this.brushSize;};ga.prototype.getPreviewCanvas=function(ha){"use strict";return this.getFlattenedCanvas().scaledCopy(ha);};ga.prototype.getResizeFactor=function(){"use strict";return this.canvasWrapperEl.offsetWidth/this.workingCanvas.getWidth();};ga.prototype.revert=function(){"use strict";this.workingCanvas.setImageContent(this.originalImage);for(var ha=0;ha<this.layers.length;ha++)this.layers[ha].remove();this.layers=[];};ga.prototype.toDataURL=function(){"use strict";return this.getFlattenedCanvas().toDataURL();};ga.prototype.toBase64=function(){"use strict";return this.getFlattenedCanvas().toBase64();};ga.prototype.toBlob=function(ha){"use strict";this.getFlattenedCanvas().toBlob(ha);};ga.prototype.toBlobURI=function(ha){"use strict";this.getFlattenedCanvas().toBlobURI(ha);};ga.prototype.toURL=function(ha){"use strict";this.getFlattenedCanvas().toURL(ha);};ga.prototype.getFlattenedCanvas=function(){"use strict";var ha=this.workingCanvas.getWidth(),ia=this.workingCanvas.getHeight(),ja=new k(),ka=ja.getContext(),la,ma;if(this.rotations){if(this.rotations%2){la=ia/2;ma=ha/2;ja.setWidth(ia).setHeight(ha);}else{la=ha/2;ma=ia/2;ja.setWidth(ha).setHeight(ia);}ka.translate(la,ma);ka.rotate(this.rotations*ca);if(this.rotations%2){ka.translate(-ma,-la);}else ka.translate(-la,-ma);ja.drawGraphic(this.workingCanvas.getElement(),0,0);if(this.rotations%2){ka.translate(ma,la);}else ka.translate(la,ma);ka.rotate(-1*this.rotations*ca);ka.translate(-la,-ma);}else ja.setImageContent(this.workingCanvas.getElement());var na,oa,pa,qa,ra;for(var sa=0;sa<this.layers.length;sa++){na=this.layers[sa];pa=na.getCenterPos().div(this.getResizeFactor());qa=na.getDimensionsForDrawable().div(this.getResizeFactor());oa=na.getDrawableObj();ra=na.getRotation();ka.save();ka.translate(pa.x,pa.y);ka.rotate(ra*Math.PI/180);ja.drawGraphic(oa,qa.x/-2,qa.y/-2,qa.x,qa.y);ka.restore();}return ja;};ga.prototype.save=function(ha){"use strict";ha.stage=this.getFlattenedCanvas().toBase64();var ia=new i().setURI(new u(z.SAVE_PATH).getPath()).setData(ha).setMethod('POST').setRelativeTo(this.root);h.send(ia);};ga.prototype.saveInAlbum=function(ha){"use strict";this.save({album_id:ha});};ga.prototype.saveAsProfPic=function(){"use strict";this.save({profile_pic:1});};ga.prototype.enableDrawing=function(ha,ia,ja){"use strict";this.drawingSubscriptionsHandler.engage();this.drawingSubscriptionsHandler.addSubscriptions(o.listen(this.canvasWrapperEl,'mousemove',this._onMouseMove.bind(this)),o.listen(this.canvasWrapperEl,'mouseleave',this._onMouseLeave.bind(this)));this._drawingHandler=this.workingCanvas.enableDrawing(ha,ia);l.hide(this._drawingHandler.getCursorElement());l.addClass(this.canvasWrapperEl,"_5ewy");this.canvasWrapperEl.appendChild(this._drawingHandler.getCursorElement());};ga.prototype.disableDrawing=function(){"use strict";this.drawingSubscriptionsHandler.release();this.workingCanvas.disableDrawing();l.removeClass(this.canvasWrapperEl,"_5ewy");m.remove(this._drawingHandler.getCursorElement());this._drawingHandler=null;};ga.prototype._onMouseLeave=function(){"use strict";l.hide(this._drawingHandler.getCursorElement());};ga.prototype._onMouseMove=function(ha){"use strict";v.getEventPosition(ha).sub(v.getElementPosition(this.canvasWrapperEl)).sub(this._drawingHandler.getDrawingCursor().getDimensions().div(2)).setElementPosition(this._drawingHandler.getCursorElement());l.show(this._drawingHandler.getCursorElement());};ga.prototype._enableGraphicsDragDrop=function(){"use strict";if(this._isGraphicDragDropEnabled)return;o.listen(this.canvasWrapperEl,'dragenter',o.prevent);o.listen(this.canvasWrapperEl,'dragover',o.prevent);o.listen(this.canvasWrapperEl,'drop',this._onDrop.bind(this));};ga.prototype._onDrop=function(ha){"use strict";var ia=ha.dataTransfer.getData('graphic_id');if(ia)q.onDrop(ia,ha);};ga.prototype.enableTextAndImageFileDragDrop=function(){"use strict";if(!this._dragDropTarget)this._dragDropTarget=new n(this.canvasWrapperEl).setOnDropCallback(function(ha,ia){var ja=ha.files||[],ka=ha.plainText,la=ia.dataTransfer.getData('graphic_id');if(la)return;var ma=v.getEventPosition(ia).sub(v.getElementPosition(this.canvasWrapperEl));if(ja.length==1){this.addBlobGraphic(a.URL.createObjectURL(ja[0]),ma);}else if(ja.length){for(var na=0;na<ja.length;na++)this.addBlobGraphic(a.URL.createObjectURL(ja[na]));}else if(ka)this.addTextGraphic(ka,new p('Arial',30,'px'),ma);}.bind(this)).setFileFilter(function(ha){var ia=[];for(var ja=0;ja<ha.length;ja++)if(ha[ja].type.match('image/*'))ia.push(ha[ja]);return ia;});this._dragDropTarget.enable();};ga.prototype.disableTextAndImageFileDragDrop=function(){"use strict";if(this._dragDropTarget)this._dragDropTarget.disable();};ga.addImageGraphic=function(ha){ga.getInstance().addImageGraphic(ha);};ga.addGraphicFromBrowser=function(ha){var ia=ha.getElementsByTagName('IMG')[0].getAttribute('src');return ga.getInstance().addImageGraphic(ia);};ga.saveInAlbum=function(ha){ga.getInstance().saveInAlbum(ha.getAttribute('data-albumid'));};ga.getInstance=function(){return aa;};e.exports=ga;},null);
__d("PhotoEditorSessionLogging",["AsyncRequest","PhotoEditorConfig"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=b('PhotoEditorConfig').Constants;function i(j,k){"use strict";this.$PhotoEditorSessionLogging0={context:j,is_editing:k,events:{},photo_saved:false};this.$PhotoEditorSessionLogging1=0;this.$PhotoEditorSessionLogging2=false;}i.prototype.start=function(){"use strict";this.$PhotoEditorSessionLogging1=Date.now();return this;};i.prototype.end=function(j){"use strict";if(this.$PhotoEditorSessionLogging2)return;this.$PhotoEditorSessionLogging2=true;this.$PhotoEditorSessionLogging0.duration=Date.now()-this.$PhotoEditorSessionLogging1;new g().setURI(h.LOGGING_PATH).setAllowCrossPageTransition(true).setOption('suppressErrorHandlerWarning',true).setOption('asynchronous',j).setData(this.$PhotoEditorSessionLogging0).send();return this;};i.prototype.logPhotoSaved=function(){"use strict";this.$PhotoEditorSessionLogging0.photo_saved=true;};i.prototype.logEvent=function(j){"use strict";if(!(j in this.$PhotoEditorSessionLogging0.events)){this.$PhotoEditorSessionLogging0.events[j]=1;}else this.$PhotoEditorSessionLogging0.events[j]++;return this;};e.exports=i;},null);
__d("FontSelectorPopover",["CSS","Event","JSXDOM","Parent","PhotoEditorPopover","cx","PhotoEditorConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=b('PhotoEditorConfig').Constants,n='data-fontfamily';for(var o in k)if(k.hasOwnProperty(o))q[o]=k[o];var p=k===null?null:k.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=k;function q(r,s){"use strict";k.call(this,r);this.$FontSelectorPopover0=s;this.$FontSelectorPopover1={};this.$FontSelectorPopover2=null;h.listen(this.flyoutRoot,'click',this.$FontSelectorPopover3.bind(this));}q.prototype.renderFlyoutContent=function(){"use strict";this.flyoutRoot.appendChild(i.ul({className:"_5g8f"},this.$FontSelectorPopover4()));this.setActive(this.$FontSelectorPopover2);};q.prototype.$FontSelectorPopover4=function(){"use strict";var r=m.FONTS,s=[],t,u;for(var v in r){t=r[v];u=i.li({"data-fontfamily":t,style:{fontFamily:t}},v);s.push(u);this.$FontSelectorPopover1[t]=u;}return s;};q.prototype.$FontSelectorPopover3=function(r){"use strict";var s=j.byAttribute(r.getTarget(),n);if(!s)return;var t=s.getAttribute(n);this.inform('selection',t);this.setActive(t);this.hide();};q.prototype.setActive=function(r){"use strict";var s="_5g8g";for(var t in this.$FontSelectorPopover1)if(t==r){g.addClass(this.$FontSelectorPopover1[r],s);}else g.removeClass(this.$FontSelectorPopover1[t],s);this.$FontSelectorPopover2=r;};e.exports=q;},null);
__d("PhotoEditorTextPalette",["ColorSelectorPopover","DOM","Event","PhotoEditorFont","FontSelectorPopover","PhotoEditorGraphic","JSXDOM","PhotoEditorPaletteBase","Style","csx","cx","fbt","PhotoEditorConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=b('PhotoEditorConfig').Constants;for(var t in n)if(n.hasOwnProperty(t))v[t]=n[t];var u=n===null?null:n.prototype;v.prototype=Object.create(u);v.prototype.constructor=v;v.__superConstructor__=n;function v(w,x){"use strict";n.call(this,w,x);this.$PhotoEditorTextPalette0=s.DEFAULT_FILL_STYLE;}v.prototype.initDOM=function(){"use strict";u.initDOM.call(this);this.$PhotoEditorTextPalette1();this.$PhotoEditorTextPalette2();};v.prototype.$PhotoEditorTextPalette1=function(){"use strict";this.$PhotoEditorTextPalette3=h.find(this.palette,"._5g76");this.$PhotoEditorTextPalette4=m.div({className:"_5g71"});o.set(this.$PhotoEditorTextPalette4,'background',s.DEFAULT_FILL_STYLE);this.$PhotoEditorTextPalette3.appendChild(this.$PhotoEditorTextPalette4);this.$PhotoEditorTextPalette5=new g(this.$PhotoEditorTextPalette3,s.DEFAULT_FILL_STYLE);this.$PhotoEditorTextPalette5.subscribe('selection',this.$PhotoEditorTextPalette6.bind(this));};v.prototype.$PhotoEditorTextPalette2=function(){"use strict";this.$PhotoEditorTextPalette7=h.find(this.palette,"._5g75");o.set(this.$PhotoEditorTextPalette7,'font-family',j.getDefault().getFamily());this.$PhotoEditorTextPalette8=this.$PhotoEditorTextPalette7.appendChild(m.div({className:"_5g8i"},"T"));this.$PhotoEditorTextPalette9=new k(this.$PhotoEditorTextPalette7,s.DEFAULT_FONT_FAMILY);this.$PhotoEditorTextPalette9.subscribe('selection',this.$PhotoEditorTextPalettea.bind(this));this.$PhotoEditorTextPalette9.setActive(j.getDefault().getFamily());};v.prototype.onEnable=function(w){"use strict";if(this.confirmButton)this.subscriptionsHandler.addSubscriptions(i.listen(this.confirmButton,'click',this.disable.bind(this,true)));if(w){this.enableForExistingText(w);}else this.enableForNewText(w);};v.prototype.$PhotoEditorTextPalette6=function(w,x){"use strict";this.$PhotoEditorTextPalettec(x);};v.prototype.$PhotoEditorTextPalettec=function(w){"use strict";this.$PhotoEditorTextPalette0=w;o.set(this.$PhotoEditorTextPalette4,'background',w);this.currentTextGraphic.setFillStyle(w);this.inform('setcolor');};v.prototype.$PhotoEditorTextPalettea=function(w,x){"use strict";this.$PhotoEditorTextPaletted(x);};v.prototype.$PhotoEditorTextPaletted=function(w){"use strict";this.currentTextGraphic.setFontFamily(w);o.set(this.$PhotoEditorTextPalette7,'font-family',w);this.inform('setfontfamily');};v.prototype.$PhotoEditorTextPalettee=function(w){"use strict";o.set(this.$PhotoEditorTextPalette7,'font-family',w.getFamily());};v.prototype.enableForExistingText=function(w){"use strict";this.currentTextGraphic=w;this.$PhotoEditorTextPalettef=this.$PhotoEditorTextPaletteg.bind(this,w.getText(),w.getFont().copy(),w.getFillStyle());var x=this.currentTextGraphic.getFont();this.$PhotoEditorTextPalettec(this.currentTextGraphic.getFillStyle());this.$PhotoEditorTextPalette5.setColor(this.currentTextGraphic.getFillStyle());this.$PhotoEditorTextPalettee(x);this.$PhotoEditorTextPalette9.setActive(x.getFamily());};v.prototype.enableForNewText=function(){"use strict";var w=r._("[CLICK TO EDIT]"),x=j.getDefault(),y=this.photoEditor.getCanvasDimensions();this.currentTextGraphic=this.photoEditor.addGraphic(new l.Text(this.photoEditor,w,j.getDefault(),s.DEFAULT_FILL_STYLE,this.photoEditor.getCanvasWrapper(),y.x,y.y));this.$PhotoEditorTextPalettef=this.$PhotoEditorTextPaletteh.bind(this);this.$PhotoEditorTextPalettec(s.DEFAULT_FILL_STYLE);this.$PhotoEditorTextPalette5.setColor(s.DEFAULT_FILL_STYLE);this.$PhotoEditorTextPalettee(x);this.$PhotoEditorTextPalette9.setActive(x.getFamily());};v.prototype.$PhotoEditorTextPaletteg=function(w,x,y){"use strict";this.currentTextGraphic.updateText(w,x,y);};v.prototype.$PhotoEditorTextPaletteh=function(){"use strict";this.currentTextGraphic.remove();};v.prototype.onDisable=function(w){"use strict";if(!w)this.$PhotoEditorTextPalettef();this.$PhotoEditorTextPalette5.hide();this.$PhotoEditorTextPalette9.hide();};e.exports=v;},null);
__d("DialogPhotoEditor",["AsyncRequest","PhotoEditorCanvas","CSS","DOM","PhotoEditorDrawingPalette","Event","PhotoEditorFilterPalette","PhotoEditorFilters","PhotoEditorGraphic","PhotoEditor","PhotoEditorDOM","React","Run","PhotoEditorSessionLogging","StickersFlyout.react","SubscriptionsHandler","PhotoEditorTextPalette","Vector","XHPTemplate","clamp","curry","cx","csx","PhotoEditorConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();var da=b('PhotoEditorConfig').Actions,ea=b('PhotoEditorConfig').Constants,fa=b('PhotoEditorConfig').Contexts,ga=b('PhotoEditorConfig').Events,ha=30,ia=new x(620,430),ja=new x(500,500),ka={CLOSE:1,UNLOAD:2,LEAVE:3};for(var la in p)if(p.hasOwnProperty(la))na[la]=p[la];var ma=p===null?null:p.prototype;na.prototype=Object.create(ma);na.prototype.constructor=na;na.__superConstructor__=p;function na(oa,pa,qa){"use strict";p.call(this,oa.getRoot(),pa);this.spotlight=oa;this.isNewPhoto=!pa;if(this.isNewPhoto){this._initForBlankCanvas();}else this.loadPhoto(pa);this._subscriptionsHandler=new v();this._subscriptionsHandler.addSubscriptions(this.registerEventDelegate(this.root));this.buttonHandler.subscribeToStandardActionsExcept([da.ADD_TEXT]);this.setCurrentBrushSize(ea.DEFAULT_BRUSH_SIZE);this._lastPalette=null;this.isEnabled=false;this.enable();qa.text&&this._initTextPalette();}na.prototype._initTextPalette=function(){"use strict";var oa=j.find(this.root,"._5g6-"),pa=new w(this,oa);this._subscriptionsHandler.addSubscriptions(pa.subscribe('setcolor',this._logEvent.bind(this,ga.CHOOSE_TEXT_COLOR)),pa.subscribe('setfontfamily',this._logEvent.bind(this,ga.CHOOSE_FONT_FAMILY)),pa.subscribe('setsize',this._logEvent.bind(this,ga.CHOOSE_FONT_SIZE)));this._textPalette=pa;};na.prototype.addGraphic=function(oa,pa){"use strict";ma.addGraphic.call(this,oa,pa);this.logAddGraphic(oa);if(oa instanceof o.Text){oa.subscribe('blur',function(){this._textPalette.disable(true);}.bind(this));oa.subscribe('focus',function(){this._textPalette.enable(oa);}.bind(this));}return oa;};na.prototype.logAddGraphic=function(oa){"use strict";if(oa instanceof o.Blob){this._logEvent(ga.ADD_BLOB);}else if(oa instanceof o.Sticker){this._logEvent(ga.ADD_STICKER);}else if(oa instanceof o.Image){this._logEvent(ga.ADD_IMAGE);}else if(oa instanceof o.Text)this._logEvent(ga.ADD_TEXT);};na.prototype.removeGraphic=function(oa){"use strict";ma.removeGraphic.call(this,oa);this.logRemoveGraphic(oa);};na.prototype.logRemoveGraphic=function(oa){"use strict";if(oa instanceof o.Blob){this._logEvent(ga.REMOVE_BLOB);}else if(oa instanceof o.Sticker){this._logEvent(ga.REMOVE_STICKER);}else if(oa instanceof o.Image){this._logEvent(ga.REMOVE_IMAGE);}else if(oa instanceof o.Text)this._logEvent(ga.REMOVE_TEXT);};na.prototype.initDOM=function(){"use strict";this.canvasWrapperEl=j.find(this.root,"._5cou");this.stage=j.find(this.root,"._5cow");this._mainPalette=j.find(this.root,"._5c-r");this._closeButton=j.find(this._mainPalette,"._5c-p");this._saveButton=j.find(this.root,"._5cov");this._addSticker=j.find(this.root,"._5c_i");this._drawButton=j.find(this.root,"._5g8k");this._addText=q.getElementForAction(this._mainPalette,da.ADD_TEXT);this._filterButton=q.getElementForAction(this._mainPalette,da.FILTER_DROPDOWN);};na.prototype.enable=function(){"use strict";if(this.isEnabled)return;var oa=y.getNode(this._addSticker,'stickers');if(oa)this._stickersFlyout=r.render(r.createElement(u,{onPackSelect:function(pa){if(this._stickersFlyout&&this._stickersFlyout.isMounted())this._stickersFlyout.setProps({packID:pa});}.bind(this),onStickerSelect:this._onStickerSelected.bind(this)}),oa);this._subscriptionsHandler.engage();this._subscriptionsHandler.addSubscriptions(l.listen(this._closeButton,'click',this.disable.bind(this,ka.CLOSE)),l.listen(this._filterButton,'click',this._showFilterPalette.bind(this)),l.listen(this._drawButton,'click',this._showDrawingPalette.bind(this)),l.listen(this._addText,'click',this._showTextPalette.bind(this)),l.listen(this._saveButton,'click',this.onClickSave.bind(this)),l.listen(window,'resize',this.resize.bind(this)),this.spotlight.subscribe('hide',function(){this.disable(ka.CLOSE);}.bind(this)));this.enableTextAndImageFileDragDrop();this.sessionLogging=new t(this.getLoggingContext(),!this.isNewPhoto).start();s.onLeave(this.disable.bind(this,ka.LEAVE));s.onUnload(this.disable.bind(this,ka.UNLOAD));this.isEnabled=true;};na.prototype.getLoggingContext=function(){"use strict";return fa.DIALOG;};na.prototype.loadPhoto=function(oa){"use strict";ma.loadPhoto.call(this,oa);ia.setElementDimensions(this.stage);};na.prototype._initForBlankCanvas=function(){"use strict";i.addClass(this.canvasWrapperEl,"_5c_9");ja.setElementDimensions(this.canvasWrapperEl);this.workingCanvas=new h(this).setWidth(ja.x).setHeight(ja.y);this.unfilteredImage=this.workingCanvas.copy().getElement();this.originalImage=this.workingCanvas.copy().getElement();j.setContent(this.canvasWrapperEl,this.workingCanvas.getElement());this.resize();};na.prototype.rotate=function(oa){"use strict";ma.rotate.call(this,oa);this.resize();};na.prototype.setImage=function(oa){"use strict";ma.setImage.call(this,oa);this.unfilteredImage=oa;this.resize();};na.prototype.getUnfilteredImage=function(){"use strict";return this.unfilteredImage;};na.prototype.onClickSave=function(){"use strict";};na.prototype.disable=function(oa){"use strict";if(!this.isEnabled)return;if(!oa)oa=ka.CLOSE;this.isEnabled=false;this.spotlight.hide();this._subscriptionsHandler.release();if(this._lastPalette)this._lastPalette.disable();this.disableTextAndImageFileDragDrop();this.canvasWrapperEl.appendChild(r.createElement("div",{className:"_5g8j"}));this.sessionLogging.end(oa===ka.CLOSE);};na.prototype._logEvent=function(oa){"use strict";this.sessionLogging.logEvent(oa);};na.prototype._onStickerSelected=function(oa){"use strict";new g(ea.ADD_STICKER_PATH).setData({id:oa}).setHandler(function(pa){this.addStickerGraphic(oa,pa.payload.sticker_src);}.bind(this)).send();};na.prototype._showFilterPalette=function(){"use strict";if(!this._filterPalette){var oa=new m(this,j.find(this.root,"._5c-t"));this._subscriptionsHandler.addSubscriptions(oa.subscribe('enabled',i.hide.bind(null,this._mainPalette)),oa.subscribe('disabled',function(pa,qa){i.show(this._mainPalette);this.workingCanvas.setImageContent(this.unfilteredImage);if(qa){this.workingCanvas.applyFilter(qa.filter,qa.args);this._logApplyFilter(qa.filter);}else this._logEvent(ga.REVERT_FILTER);}.bind(this)));this._filterPalette=oa;}this._filterPalette.enable();this._lastPalette=this._filterPalette;this._logEvent(ga.OPEN_FILTER_MENU);};na.prototype._logApplyFilter=function(oa){"use strict";if(oa===n.BlackAndWhiteFilter)this._logEvent(ga.APPLY_BW_FILTER);};na.prototype._showDrawingPalette=function(){"use strict";if(!this._drawingPalette){var oa=new k(this,j.find(this.root,"._5g8l"));this._subscriptionsHandler.addSubscriptions(oa.subscribe('enabled',i.hide.bind(null,this._mainPalette)),oa.subscribe('disabled',aa(i.show,this._mainPalette)),oa.subscribe('setcolor',this._logEvent.bind(this,ga.CHOOSE_BRUSH_COLOR)),oa.subscribe('setsize',this._logEvent.bind(this,ga.CHOOSE_BRUSH_SIZE)));this._drawingPalette=oa;}this._drawingPalette.enable();this._lastPalette=this._drawingPalette;this._logEvent(ga.OPEN_DRAWING_MENU);};na.prototype._showTextPalette=function(){"use strict";this._textPalette.enable();this._lastPalette=this._textPalette;this._logEvent(ga.OPEN_TEXT_MENU);};na.prototype.getControlPanelHeight=function(){"use strict";return 0;};na.prototype.resize=function(){"use strict";var oa=this.getResizeFactor(),pa=this.getImageDimensions(),qa=this.getControlPanelHeight(),ra=x.getViewportDimensions().sub(ha*2,ha*2+qa),sa=new x(z(ia.x,pa.x,ra.x),z(ia.y,pa.y,ra.y),'document');if(pa.x>=sa.x||pa.y>=sa.y){var ta=pa.x/pa.y,ua=sa.x/sa.y;if(ua<ta){pa=new x(sa.x,Math.round(sa.x/ta));}else if(ua>ta){pa=new x(Math.round(sa.y*ta),sa.y);}else pa=sa;sa=new x(Math.max(ia.x,pa.x),Math.max(ia.y,pa.y),'document');}pa.setElementDimensions(this.getGraphicsLayer());sa.sub(pa).div(2).setElementPosition(this.getGraphicsLayer());if(this.isInverted)pa=new x(pa.y,pa.x);pa.setElementDimensions(this.canvasWrapperEl);sa.sub(pa).div(2).setElementPosition(this.canvasWrapperEl);sa.add(0,qa).setElementDimensions(this.stage);this._resizeGraphics(oa);};na.prototype._resizeGraphics=function(oa){"use strict";var pa=this.getResizeFactor()/oa;this.layers.forEach(function(qa){qa.onBeforeSuddenTransformation();qa.setPos(qa.getPos().mul(pa));qa.setDimensions(qa.getDimensions().mul(pa));qa.updatePos();qa.onAfterSuddenTransformation();});};e.exports=na;e.exports.DISABLE_TYPES=ka;},null);
__d("StickerButton.react",["React","StickerInterfaces","UFIStickerButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"StickerButton",propTypes:{onStickerFlyoutShow:m.func,onStickerSelected:m.func.isRequired},render:function(){return (g.createElement(i,{showTooltip:false,stickerInterface:h.COMPOSER,onStickerFlyoutShow:this.props.onStickerFlyoutShow,onStickerSelected:this.props.onStickerSelected},g.createElement("div",{className:"_3pjh"},k._("Dodaj naklejk\u0119"))));}});e.exports=n;},null);
__d("StickerPhotoEditorControls.react",["Link.react","React","StickerButton.react","XUIOverlayButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=h,n=m.PropTypes,o=h.createClass({displayName:"StickerPhotoEditorControls",propTypes:{onDoneClicked:n.func.isRequired,onRotateClicked:n.func.isRequired,onStickerFlyoutShow:n.func,onStickerSelected:n.func.isRequired,onTextClicked:n.func.isRequired,useNewControlPanel:n.bool,isFeatureEnabled:n.object.isRequired},_renderDoneButton:function(){if(this.props.useNewControlPanel)return (h.createElement(j,{className:"_1mp5",label:l._("Gotowe"),onClick:this.props.onDoneClicked}));return null;},_renderAddTextButton:function(){if(this.props.isFeatureEnabled.text)return (h.createElement(g,{className:"_2cgk",onClick:this.props.onTextClicked},h.createElement("div",{className:"_4uq0"}),h.createElement("div",{className:"_3pjh"},l._("Dodaj tekst"))));return null;},render:function(){return (h.createElement("div",{className:(("_2nna")+(this.props.useNewControlPanel?' '+"_1mp6":''))},h.createElement(g,{className:"_2cgk",onClick:this.props.onRotateClicked},h.createElement("div",{className:"_2cgl"}),h.createElement("div",{className:"_3pjh"},l._("Obr\u00f3t"))),h.createElement("div",{className:"_2cgk"},h.createElement(i,{onStickerFlyoutShow:this.props.onStickerFlyoutShow,onStickerSelected:this.props.onStickerSelected})),this._renderAddTextButton(),this._renderDoneButton()));}});e.exports=o;},null);
__d("StickerPhotoEditor",["Arbiter","AsyncRequest","CSS","DialogPhotoEditor","DOM","Event","PhotoEditorSessionLogging","React","StickerPhotoEditorControls.react","SubscriptionsHandler","Vector","areEqual","cx","csx","fbt","PhotoEditorConfig","PhotoEditorGraphic"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=b('PhotoEditorConfig').Constants,w=b('PhotoEditorConfig').Contexts,x=b('PhotoEditorConfig').Events,y=b('PhotoEditorGraphic').Text,z={};for(var aa in j)if(j.hasOwnProperty(aa))ca[aa]=j[aa];var ba=j===null?null:j.prototype;ca.prototype=Object.create(ba);ca.prototype.constructor=ca;ca.__superConstructor__=j;function ca(da){"use strict";this.$StickerPhotoEditor0=da.isFeatureEnabled;j.call(this,da.spotlight,da.photoURI,da.isFeatureEnabled);this.photoFBID=da.photoFBID;this.gridID=da.gridID;g.inform('AttachmentsPhotoEditor/logPhotoEditorLaunched'+this.gridID);}ca.prototype.initDOM=function(){"use strict";this.canvasWrapperEl=k.find(this.root,"._5x68");this.$StickerPhotoEditor1=k.find(this.root,"._45q6");this.stage=k.find(this.root,"._40iu");this.$StickerPhotoEditor2=k.find(this.root,"._5cgk");var da=k.scry(this.root,"._1wsu");this.$StickerPhotoEditor3=(!!da.length)?da[0]:(void 0);var ea=k.scry(this.root,"._388e");this.$StickerPhotoEditor4=(!!ea.length)?ea[0]:(void 0);this.$StickerPhotoEditor5=k.find(this.root,"._5x69");var fa=n.createElement(o,{onDoneClicked:this.$StickerPhotoEditor6.bind(this),onRotateClicked:this.rotate.bind(this,false),onStickerFlyoutShow:this.$StickerPhotoEditor7.bind(this),onStickerSelected:this.$StickerPhotoEditor8.bind(this),onTextClicked:this.$StickerPhotoEditor9.bind(this),useNewControlPanel:!da.length,isFeatureEnabled:this.$StickerPhotoEditor0});n.render(fa,this.$StickerPhotoEditor5);};ca.prototype.onImageLoaded=function(da){"use strict";i.removeClass(this.$StickerPhotoEditor2,"_ovf");ba.onImageLoaded.call(this,da);var ea=z[this.photoFBID];if(ea){for(var fa=0;fa<ea.numRotations;fa++)this.rotate(true);ea.graphics.forEach(function(ga){var ha=null;if(ga.type==y){ha=this.addTextGraphic();}else ha=this.addStickerGraphic(ga.sticker_id,ga.imageURL);ha.initFromSerializedState(ga);}.bind(this));}this.$StickerPhotoEditora=ea||this.serialize();};ca.prototype.getGraphicsLayer=function(){"use strict";return this.$StickerPhotoEditor1;};ca.prototype.getControlPanelHeight=function(){"use strict";if(!!this.$StickerPhotoEditor3)return 0;return q.getElementDimensions(this.$StickerPhotoEditor5).y;};ca.prototype.enable=function(){"use strict";if(this.isEnabled)return;this.spotlight.show();this.$StickerPhotoEditorb=new p();this.$StickerPhotoEditorb.addSubscriptions(l.listen(window,'resize',this.resize.bind(this)),l.listen(this.$StickerPhotoEditor1,'mousedown',this.$StickerPhotoEditorc.bind(this)),this.spotlight.subscribe('hide',this.disable.bind(this)));if(!!this.$StickerPhotoEditor3)this.$StickerPhotoEditorb.addSubscriptions(l.listen(this.$StickerPhotoEditor3,'click',this.$StickerPhotoEditor6.bind(this)));if(!!this.$StickerPhotoEditor4)this.$StickerPhotoEditorb.addSubscriptions(l.listen(this.$StickerPhotoEditor4,'click',this.$StickerPhotoEditord.bind(this)));this.isEnabled=true;this.sessionLogging=new m(w.COMPOSER,true).start();};ca.prototype.$StickerPhotoEditorc=function(event){"use strict";if(!i.hasClass(event.target,"_45q6"))return;this.setActiveGraphic(null);};ca.prototype.rotate=function(da){"use strict";ba.rotate.call(this,da);this.$StickerPhotoEditore(x.ROTATE_IMAGE);};ca.prototype.disable=function(){"use strict";if(!this.isEnabled)return;this.isEnabled=false;this.sessionLogging.end(true);this.$StickerPhotoEditorb.release();};ca.prototype.$StickerPhotoEditorf=function(){"use strict";this.disable();this.spotlight.destroy();};ca.prototype.logAddGraphic=function(da){"use strict";this.$StickerPhotoEditore(x.ADD_STICKER);};ca.prototype.logRemoveGraphic=function(da){"use strict";this.$StickerPhotoEditore(x.REMOVE_STICKER);};ca.prototype.$StickerPhotoEditore=function(da){"use strict";this.sessionLogging.logEvent(da);};ca.prototype.$StickerPhotoEditorg=function(){"use strict";var da=this.serialize();return !r(this.$StickerPhotoEditora,da);};ca.prototype.$StickerPhotoEditorh=function(){"use strict";var da=z[this.photoFBID]||this.serialize(),ea={},fa=[];da.graphics.forEach(function(ga){if(ga.type==='StickerGraphic'){var ha=ga.sticker_id;if(!(ha in ea)){ea[ha]=1;}else ea[ha]++;}else if(ga.type==='TextGraphic')fa.push(ga.text);});return {stickers:ea,textOverlays:fa,hasCrop:false,hasFilter:false};};ca.prototype.$StickerPhotoEditor8=function(da){"use strict";new h(v.ADD_STICKER_PATH).setData({id:da}).setHandler(function(ea){this.addStickerGraphic(da,ea.payload.sticker_src);}.bind(this)).send();};ca.prototype.$StickerPhotoEditor7=function(){"use strict";this.$StickerPhotoEditore(x.OPEN_STICKER_DIALOG);};ca.prototype.$StickerPhotoEditor9=function(){"use strict";var da=u._("[KLIKNIJ, ABY EDYTOWA\u0106]");this.setActiveGraphic(this.addTextGraphic(da));};ca.prototype.$StickerPhotoEditor6=function(){"use strict";if(this.$StickerPhotoEditorg()){z[this.photoFBID]=this.serialize();this.sessionLogging.logPhotoSaved();this.toBlob(function(da){var ea=this.$StickerPhotoEditorh();ea.blob=da;ea.fbid=this.photoFBID;g.inform('AttachmentsPhotoEditor/newImage'+this.gridID,ea);g.inform('AttachmentsPhotoEditor/imageEdited'+this.photoFBID);this.$StickerPhotoEditorf();}.bind(this));}else this.$StickerPhotoEditorf();};ca.prototype.$StickerPhotoEditord=function(){"use strict";this.spotlight.hide();};ca.getTotalNumOfStickersOnPhoto=function(da){if(z[da])return z[da].graphics.length;return 0;};e.exports=ca;},null);
__d("FaceRecognitionController",["ArbiterMixin","BanzaiODS","Poller","copyProperties","mixin","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=k(g);for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q){"use strict";this._config=j({uri:'/photos/tagging/recognition/',interval:2000,maxRequests:4,targetIsPage:false,targetID:null},q);this._cleanup();this._poller=new i({dontStart:true,maxRequests:this._config.maxRequests,interval:this._config.interval,setupRequest:function(r){r.setURI(this._config.uri).setData({recognition_project:'composer_facerec',photos:this._pendingPhotos,waterfallID:this._config.waterfallID,target:this._config.targetID,is_page:this._config.targetIsPage,include_unrecognized_faceboxes:!!this._config.include_unrecognized_faceboxes,include_face_crop_src:!!this._config.include_face_crop_src,include_recognized_user_profile_picture:!!this._config.include_recognized_user_profile_picture,include_low_confidence_recognitions:!!this._config.include_low_confidence_recognitions}).setHandler(this._handleResponse.bind(this));}.bind(this)});this._poller.subscribe('done',function(){var r=this._pendingPhotos;this._cleanup();this.inform('done',{unresolved:r});}.bind(this));}p.prototype.setWaterfallID=function(q){"use strict";this._config.waterfallID=q;};p.prototype.start=function(q){"use strict";Array.prototype.push.apply(this._pendingPhotos,q);this._poller.reset();this._resetSafeguardTimeout();};p.prototype.stop=function(){"use strict";this._poller.stop();this._cleanup();};p.prototype._cleanup=function(){"use strict";window.clearTimeout(this._safeguardTimeout);this._safeguardTimeout=null;this._pendingPhotos=[];};p.prototype._resetSafeguardTimeout=function(){"use strict";window.clearTimeout(this._safeguardTimeout);this._safeguardTimeout=window.setTimeout(function(){h.bumpEntityKey('composer_facerec','safeguard');var q=this._pendingPhotos;this._poller.stop();this._cleanup();this.inform('done',{unresolved:q});}.bind(this),(this._config.maxRequests+2)*this._config.interval);};p.prototype._handleResponse=function(q){"use strict";var r=q.getPayload();r.forEach(function(s){var t=0;l(this._pendingPhotos,s.fbid);s.faceboxes.forEach(function(u){t+=u.recognitions.length;u.recognitions.forEach(function(v){this.inform('recognition',{photo:s.fbid,facebox:{fbid:u.fbid,x:u.x,y:u.y},recognition:v});}.bind(this));}.bind(this));this.inform('photo',{photo:s.fbid,faceboxes:s.faceboxes,recognitions:t});}.bind(this));if(!this._pendingPhotos.length){this._poller.stop();this._cleanup();this.inform('done',{unresolved:this._pendingPhotos});}};e.exports=p;},null);
__d("TimelineCapsuleUtilities",["CSS"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={setFirstUnit:function(i){var j=true;for(var k=0;k<i.childNodes.length;++k){var l=i.childNodes[k];if(l.id.indexOf('tl_unit_')===0)if(j){j=false;g.addClass(l,'firstUnit');}else{g.removeClass(l,'firstUnit');break;}}}};e.exports=h;},null);
__d("TimelineComposer",["Arbiter","Bootloader","ComposerXMarauderLogger","ComposerXStore","CSS","DOM","Event","Parent","Run","TimelineCapsuleUtilities","$","getObjectValues","goURI","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u,v;function w(){i.logCompleted(u.id);}function x(z){if(z.hidePost){w();return;}if(z.redirect){var aa=j.getAllForComposer(u.id);r(aa).forEach(function(ca){if(ca.reset)ca.reset(ca);});s(z.redirect);w();return;}if(!z.streamStory){window.location.reload();return;}if(z.backdatedTime){h.loadModules(["TimelineStoryPublisher"],function(ca){ca.publish(z);});w();return;}var ba=y.renderCapsuleBasedStory(u,z.streamStory);g.inform('TimelineComposer/on_after_publish',ba,g.BEHAVIOR_PERSISTENT);w();}var y={init:function(z){u=q(z);v=g.subscribe('composer/publish',function(event,aa){if(aa.composer_id===u.id)x(aa);});o.onLeave(y.destroy);},destroy:function(){v&&v.unsubscribe();},renderCapsuleBasedStory:function(z,aa){var ba=n.byClass(z,'fbTimelineCapsule');if(!ba)return;var ca=n.byClass(z,'fbTimelineUnit'),da=ca.nextSibling;if(da&&da.getAttribute('data-spine'))ca=ca.nextSibling;l.insertAfter(ca,aa);var ea=aa;if(k.hasClass(aa,'fbTimelineUnit'))ea=l.find(aa,'div.timelineUnitContainer');h.loadModules(["Animation"],function(fa){new fa(ea).from('backgroundColor','#fff8dd').to('backgroundColor','#fff').duration(2000).ease(fa.ease.both).go();});p.setFirstUnit(ba);return aa;},initNUX:function(z,aa){t(m.listen(z,'click',function(){var ba=l.scry(aa,'textarea')[0];ba&&ba.focus();}));}};e.exports=a.TimelineComposer||y;},null);
__d("ReactComposerActionTypes",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({SET_AUDIENCE:null,POST_ERROR:null,POST_STARTED:null,POST_INTENDED:null,POST_SUCCEEDED:null,COMPOSER_INITIALIZED:null,COMPOSER_RESET:null});},null);
__d("ReactComposerDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=new g();},null);
__d("ReactComposerEvents",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={CHANGE:'change',ARBITER_SELECT_ATTACHMENT:'ARBITER_SELECT_ATTACHMENT'};e.exports=g;},null);
__d("ReactComposerStoreBase",["ReactComposerActionTypes","ReactComposerDispatcher","ReactComposerEvents","EventEmitter","Map"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in j)if(j.hasOwnProperty(l))n[l]=j[l];var m=j===null?null:j.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=j;function n(o,p){"use strict";j.call(this);this.$ReactComposerStoreBase0=o;this.$ReactComposerStoreBase1=new k();this.$ReactComposerStoreBase2=h.register(function(q){switch(q.type){case g.COMPOSER_INITIALIZED:this.__init(q);break;case g.COMPOSER_RESET:this.__cleanup(q);break;}p(q);}.bind(this));}n.prototype.getComposerData=function(o){"use strict";var p=this.$ReactComposerStoreBase1.get(o);if(!p){p=this.$ReactComposerStoreBase0();this.$ReactComposerStoreBase1.set(o,p);}return p;};n.prototype.clearComposerData=function(o){"use strict";this.$ReactComposerStoreBase1.set(o,this.$ReactComposerStoreBase0());};n.prototype.addChangeListener=function(o){"use strict";return this.addListener(i.CHANGE,o);};n.prototype.emitChange=function(o){"use strict";this.emit(i.CHANGE,{composerID:o});};n.prototype.getDispatchToken=function(){"use strict";return this.$ReactComposerStoreBase2;};n.prototype.validateAction=function(o,p){"use strict";p=[].concat(p);var q=p.map(function(r){if(o[r]===(void 0))throw 'Action missing field: '+r;return o[r];});if(p.length===1)return q[0];return q;};n.prototype.__init=function(o){"use strict";};n.prototype.__cleanup=function(o){"use strict";this.clearComposerData(o.composerID);this.emitChange(o.composerID);};e.exports=n;},null);
__d("ReactComposerInit",["ReactComposerIDGenerator","Map","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={instances:new h(),init:function(k,l,m){var n=g.getID();l.contextConfig.composerID=n;i.render(i.createElement(k,i.__spread({},l)),m);j.instances.set(n,{ComposerModule:k,props:l,container:m});},resetComposer:function(k){var l=j.instances.get(k);if(!l)throw 'Trying to reset unknown composer with id: '+k;i.unmountComponentAtNode(l.container);j.init(l.ComposerModule,l.props,l.container);}};e.exports=j;},null);
__d("ReactComposerActionStore",["ReactComposerActionTypes","ReactComposerStoreBase","ReactComposerInit","AsyncResponse","Set","errorCode"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(p,q){"use strict";this.$ReactComposerActionStore0=new k();p=p?p:function(){return null;};h.call(this,p,(function(r){if(!this.__shouldIgnoreAction(r))switch(r.type){case g.POST_STARTED:this.$ReactComposerActionStore1(r);break;case g.POST_INTENDED:this.$ReactComposerActionStore2(r);break;case g.POST_SUCCEEDED:this.$ReactComposerActionStore3(r);break;case g.POST_ERROR:this.$ReactComposerActionStore4(r);break;default:}q&&q(r);}.bind(this)));}o.prototype.registerComposerID=function(p){"use strict";this.$ReactComposerActionStore0.add(p);};o.prototype.$ReactComposerActionStore1=function(p){"use strict";this.__onPostStarted&&this.__onPostStarted(p);};o.prototype.$ReactComposerActionStore2=function(p){"use strict";if(!this.__canPost||this.__canPost(p))this.$ReactComposerActionStore1(p);};o.prototype.$ReactComposerActionStore3=function(p){"use strict";this.__onPostSucceeded&&this.__onPostSucceeded(p);};o.prototype.$ReactComposerActionStore4=function(p){"use strict";var q=p.response.getError&&p.response.getError()==1455004;if(this.__onPostError){this.__onPostError(p);}else if(!q)j.defaultErrorHandler(p.response);};o.prototype.__shouldIgnoreAction=function(p){"use strict";var q=this.validateAction(p,'composerID');return !this.$ReactComposerActionStore0.has(q);};o.prototype.__cleanup=function(p){"use strict";setTimeout(i.resetComposer.bind(null,p.composerID),0);};e.exports=o;},null);
__d("ReactComposerStore",["ReactComposerActionStore","ReactComposerActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(){"use strict";g.call(this,(function(){return {audience:null,serverErrorResponse:null,posting:false,postSucceeded:false};}),(function(l){switch(l.type){case h.SET_AUDIENCE:this.$ReactComposerStore0(l);break;}}.bind(this)));}k.prototype.getAudience=function(l){"use strict";return this.getComposerData(l).audience;};k.prototype.getLegacyAudience=function(l){"use strict";return this.getComposerData(l).legacyAudience;};k.prototype.getServerErrorResponse=function(l){"use strict";return this.getComposerData(l).serverErrorResponse;};k.prototype.isPosting=function(l){"use strict";return this.getComposerData(l).posting;};k.prototype.hasPostSucceeded=function(l){"use strict";return this.getComposerData(l).postSucceeded;};k.prototype.$ReactComposerStore0=function(l){"use strict";var m=this.getComposerData(l.composerID);m.audience=l.audience;m.legacyAudience=l.legacyAudience;this.emitChange(l.composerID);};k.prototype.__shouldIgnoreAction=function(l){"use strict";return false;};k.prototype.__onPostStarted=function(l){"use strict";var m=this.getComposerData(l.composerID);m.posting=true;this.emitChange(l.composerID);};k.prototype.__onPostSucceeded=function(l){"use strict";var m=this.getComposerData(l.composerID);m.serverErrorResponse=null;m.posting=false;m.postSucceeded=true;this.emitChange(l.composerID);};k.prototype.__onPostError=function(l){"use strict";var m=this.getComposerData(l.composerID);m.serverErrorResponse=l.response;m.posting=false;this.emitChange(l.composerID);};e.exports=new k();},null);
__d("ReactComposerActions",["ReactComposerActionTypes","ReactComposerDispatcher","ReactComposerStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerStore');var i={initialized:function(j,k){h.dispatch({composerID:j,type:g.COMPOSER_INITIALIZED,loggingConfig:k});},setAudience:function(j,k,l){h.dispatch({composerID:j,type:g.SET_AUDIENCE,audience:k,legacyAudience:l});},postError:function(j,k){h.dispatch({composerID:j,type:g.POST_ERROR,response:k});},postIntended:function(j,k){h.dispatch({composerID:j,type:g.POST_INTENDED,actorID:k.actorID,config:k.config});},postStarted:function(j,k){h.dispatch({composerID:j,type:g.POST_STARTED,actorID:k.actorID,config:k.config,targetID:k.targetID});},postSucceeded:function(j){h.dispatch({composerID:j,type:g.POST_SUCCEEDED});},reset:function(j){h.dispatch({composerID:j,type:g.COMPOSER_RESET});}};e.exports=i;},null);
__d("ReactComposerAttachmentActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({REGISTER_ATTACHMENT:null,SELECT_ATTACHMENT:null,SET_INITIALIZED:null,SET_BOOTLOADED:null,SET_BOOTSTRAPPED:null});},null);
__d("ReactComposerAttachmentStore",["ReactComposerAttachmentActionType","ReactComposerStoreBase","immutable"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i.Record({id:null,initialized:false,bootloaded:false,bootstrapped:false,module:null,postButtonModule:null});for(var k in h)if(h.hasOwnProperty(k))m[k]=h[k];var l=h===null?null:h.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=h;function m(){"use strict";h.call(this,(function(){return {attachments:i.List(),selectedAttachment:null,isSelectedAttachmentActive:false};}),(function(n){switch(n.type){case g.REGISTER_ATTACHMENT:this.$ReactComposerAttachmentStore0(n);break;case g.SELECT_ATTACHMENT:this.$ReactComposerAttachmentStore1(n);break;case g.SET_BOOTLOADED:this.$ReactComposerAttachmentStore2(n);break;case g.SET_BOOTSTRAPPED:this.$ReactComposerAttachmentStore3(n);break;case g.SET_INITIALIZED:this.$ReactComposerAttachmentStore4(n);break;}}.bind(this)));}m.prototype.getAttachments=function(n){"use strict";return this.getComposerData(n).attachments;};m.prototype.getAttachment=function(n,o){"use strict";var p=this.getComposerData(n);return p.attachments.find(function(q){return q.id===o;});};m.prototype.hasAttachment=function(n,o){"use strict";return this.getComposerData(n).attachments.some(function(p){return p.id===o;});};m.prototype.getIsAttachmentSelected=function(n,o){"use strict";var p=this.getComposerData(n).selectedAttachment;return !!p&&p.id===o;};m.prototype.isSelectedAttachmentActive=function(n){"use strict";return this.getComposerData(n).isSelectedAttachmentActive;};m.prototype.isBootstrapped=function(n,o){"use strict";var p=this.getComposerData(n),q=this.$ReactComposerAttachmentStore5(p,o);return p.attachments.get(q).bootstrapped;};m.prototype.$ReactComposerAttachmentStore0=function(n){"use strict";var o=this.getComposerData(n.composerID),p=new j({id:n.id,bootloaded:n.bootloaded,bootstrapped:n.bootstrapped,module:n.module,postButtonModule:n.postButtonModule});o.attachments=o.attachments.push(p);if(n.selected)o.selectedAttachment=p;this.emitChange(n.composerID);};m.prototype.$ReactComposerAttachmentStore1=function(n){"use strict";var o=this.getComposerData(n.composerID),p=this.$ReactComposerAttachmentStore5(o,n.id);o.selectedAttachment=o.attachments.get(p);o.isSelectedAttachmentActive=true;this.emitChange(n.composerID);};m.prototype.$ReactComposerAttachmentStore2=function(n){"use strict";var o=this.getComposerData(n.composerID),p=this.$ReactComposerAttachmentStore5(o,n.id);o.attachments=o.attachments.update(p,function(q){return q.withMutations(function(r){return r.set('bootloaded',true).set('module',n.attachmentModule).set('postButtonModule',n.postButtonModule);});});this.emitChange(n.composerID);};m.prototype.$ReactComposerAttachmentStore3=function(n){"use strict";var o=this.getComposerData(n.composerID),p=this.$ReactComposerAttachmentStore5(o,n.id);o.attachments=o.attachments.update(p,function(q){return q.set('bootstrapped',true);});this.emitChange(n.composerID);};m.prototype.$ReactComposerAttachmentStore4=function(n){"use strict";var o=this.getComposerData(n.composerID),p=this.$ReactComposerAttachmentStore5(o,n.id);o.attachments=o.attachments.update(p,function(q){return q.set('initialized',true);});this.emitChange(n.composerID);};m.prototype.$ReactComposerAttachmentStore5=function(n,o){"use strict";var p=n.attachments.findIndex(function(q){return q.id===o;});if(p===-1)throw "Undefined attachment id: "+o;return p;};e.exports=new m();},null);
__d("ReactComposerContextMixin",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g,i=h.PropTypes,j={contextTypes:{actorID:i.string.isRequired,composerID:i.string.isRequired,gks:i.object.isRequired,targetID:i.string.isRequired}};e.exports=j;},null);
__d("ReactComposerPhotoActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({PHOTO_RECOGNITION_STARTED:null,PHOTO_RECOGNITION_FINISHED:null,PHOTO_RECOGNITION_ALL_FINISHED:null,PHOTO_ADD_FACEBOX:null,PHOTO_TAG_FACEBOX:null,PHOTO_UNTAG_FACEBOX:null,PHOTO_REMOVE:null,PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS:null,PHOTO_EDIT_STARTED:null,PHOTO_EDIT_FINISHED:null});},null);
__d("ReactComposerPhotoUploadActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({PHOTO_UPLOAD_INPUT_CLICKED:null,PHOTO_UPLOAD_ENQUEUED:null,PHOTO_UPLOAD_RESIZE_STARTED:null,PHOTO_UPLOAD_RESIZE_PROGRESS:null,PHOTO_UPLOAD_RESIZE_DONE:null,PHOTO_UPLOAD_RESIZE_FAILED:null,PHOTO_UPLOAD_RESIZER_UNAVAILABLE:null,PHOTO_UPLOAD_UPLOADING:null,PHOTO_UPLOAD_PROGRESS:null,PHOTO_UPLOAD_DONE:null,PHOTO_UPLOAD_FAILED:null,PHOTO_UPLOAD_REMOVE:null,PHOTO_UPLOAD_MOVED:null,PHOTO_UPLOAD_RETRY:null,PHOTOS_SELECT:null});},null);
__d("ReactComposerPhotoStore",["ReactComposerPhotoActionType","ReactComposerPhotoUploadActionType","ReactComposerStoreBase","immutable"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j.Record({id:null,uploadID:null,thumbSrc:null,isRecognizingFaceboxes:false,faceboxes:j.Map()}),l=j.Record({id:null,photoID:null,x:null,y:null,top:null,left:null,width:null,height:null,croppedURI:null,taggedSubjectID:null,taggedValue:null});for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(){"use strict";i.call(this,(function(){return {photos:j.Map(),recognizing:false};}),(function(p){switch(p.type){case h.PHOTO_UPLOAD_DONE:this.$ReactComposerPhotoStore0(p);break;case g.PHOTO_RECOGNITION_STARTED:this.$ReactComposerPhotoStore1(p);break;case g.PHOTO_RECOGNITION_FINISHED:this.$ReactComposerPhotoStore2(p);break;case g.PHOTO_RECOGNITION_ALL_FINISHED:this.$ReactComposerPhotoStore3(p);break;case g.PHOTO_ADD_FACEBOX:this.$ReactComposerPhotoStore4(p);break;case g.PHOTO_TAG_FACEBOX:this.$ReactComposerPhotoStore5(p);break;case g.PHOTO_UNTAG_FACEBOX:this.$ReactComposerPhotoStore6(p);break;case g.PHOTO_REMOVE:this.$ReactComposerPhotoStore7(p);break;case g.PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS:this.$ReactComposerPhotoStore8(p);break;default:}}.bind(this)));}o.prototype.getPhotos=function(p){"use strict";return this.getComposerData(p).photos;};o.prototype.isLimitExceeded=function(p,q){"use strict";return this.getPhotos(p).size>q;};o.prototype.getPhoto=function(p,q){"use strict";return this.getComposerData(p).photos.get(q);};o.prototype.isRecognizing=function(p){"use strict";return this.getComposerData(p).recognizing;};o.prototype.getIsSubjectPhotoTagged=function(p,q){"use strict";var r=this.getComposerData(p).photos;return r.some(function(s){return s.faceboxes.some(function(t){return t.taggedSubjectID===q;});});};o.prototype.getAllTaggedFaceboxes=function(p){"use strict";var q=this.getPhotos(p),r=[];q.forEach(function(s){r=r.concat(s.faceboxes.toArray());});return r.filter(function(s){return !!s.get('taggedSubjectID');});};o.prototype.$ReactComposerPhotoStore0=function(p){"use strict";var q=this.validateAction(p,['composerID','uploadID','photoID','thumbSrc']),r=q[0],s=q[1],t=q[2],u=q[3],v=this.getComposerData(r);v.photos=v.photos.set(t,new k({id:t,uploadID:s,thumbSrc:u}));this.emitChange(r);};o.prototype.$ReactComposerPhotoStore1=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID']),r=q[0],s=q[1],t=this.getComposerData(r);t.photos=t.photos.update(s,function(u){return u.set('isRecognizingFaceboxes',true);});t.recognizing=true;this.emitChange(r);};o.prototype.$ReactComposerPhotoStore2=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID']),r=q[0],s=q[1],t=this.getComposerData(r);t.photos=t.photos.update(s,function(u){return u.set('isRecognizingFaceboxes',false);});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore3=function(p){"use strict";var q=this.validateAction(p,['composerID','photos']),r=q[0],s=q[1],t=this.getComposerData(r);t.recognizing=false;t.photos=t.photos.map(function(u){return s.indexOf(u.id)!==-1?u.set('isRecognizingFaceboxes',false):u;});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore4=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID','facebox']),r=q[0],s=q[1],t=q[2],u=this.getComposerData(r),v=t.bestRecognition,w=null,x=null;if(v){w=v.subjectID;x=v.value;}u.photos=u.photos.update(s,function(y){return y.update('faceboxes',function(z){return z.set(t.id,new l({id:t.id,photoID:s,x:t.x,y:t.y,top:t.top,left:t.left,width:t.width,height:t.height,croppedURI:t.croppedURI,taggedSubjectID:w,taggedValue:x}));});});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore5=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID','faceboxID','subjectID','value']),r=q[0],s=q[1],t=q[2],u=q[3],v=q[4],w=this.getComposerData(r);w.photos=w.photos.update(s,function(x){return x.update('faceboxes',function(y){return y.update(t,function(z){return z.withMutations(function(aa){return aa.set('taggedSubjectID',u).set('taggedValue',v);});});});});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore6=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID','faceboxID']),r=q[0],s=q[1],t=q[2],u=this.getComposerData(r);u.photos=u.photos.update(s,function(v){return v.update('faceboxes',function(w){return w.update(t,function(x){return x.withMutations(function(y){return y.remove('taggedSubjectID').remove('taggedValue');});});});});this.emitChange(r);};o.prototype.$ReactComposerPhotoStore7=function(p){"use strict";var q=this.validateAction(p,['composerID','photoID']),r=q[0],s=q[1],t=this.getComposerData(r);t.photos=t.photos["delete"](s);};o.prototype.$ReactComposerPhotoStore8=function(p){"use strict";var q=this.validateAction(p,['composerID','subjectID']),r=q[0],s=q[1],t=this.getComposerData(r);t.photos=t.photos.map(function(u){return u.update('faceboxes',function(v){return v.map(function(w){if(w.taggedSubjectID!==s)return w;return w.withMutations(function(x){return x.remove('taggedSubjectID').remove('taggedValue');});});});});this.emitChange(r);};e.exports=new o();},null);
__d("ReactComposerPhotoUploadState",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PHOTO_UPLOAD_ENQUEUED:'PHOTO_UPLOAD_ENQUEUED',PHOTO_UPLOAD_RESIZE_STARTED:'PHOTO_UPLOAD_RESIZE_STARTED',PHOTO_UPLOAD_RESIZE_DONE:'PHOTO_UPLOAD_RESIZE_DONE',PHOTO_UPLOAD_RESIZE_FAILED:'PHOTO_UPLOAD_RESIZE_FAILED',PHOTO_UPLOAD_UPLOADING:'PHOTO_UPLOAD_UPLOADING',PHOTO_UPLOAD_DONE:'PHOTO_UPLOAD_DONE',PHOTO_UPLOAD_FAILED:'PHOTO_UPLOAD_FAILED'};},null);
__d("ReactComposerStatusActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({SET_EDITOR_STATE:null,SET_MENTIONS:null,SET_MENTIONS_SOURCE:null});},null);
__d("ReactComposerStatusStore",["ReactComposerStatusActionType","ReactComposerStoreBase","createEmptyEditorState","getMentionsInputDecorator","getMentionsTextForContentState"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in h)if(h.hasOwnProperty(l))n[l]=h[l];var m=h===null?null:h.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=h;function n(){"use strict";h.call(this,(function(){return {editorState:i(j()),mentionsSource:null,mentions:null};}),(function(o){switch(o.type){case g.SET_MENTIONS_SOURCE:this.$ReactComposerStatusStore0(o);break;case g.SET_EDITOR_STATE:this.$ReactComposerStatusStore1(o);break;case g.SET_MENTIONS:this.$ReactComposerStatusStore2(o);break;}}.bind(this)));}n.prototype.getMentionsSource=function(o){"use strict";return this.getComposerData(o).mentionsSource;};n.prototype.getEditorState=function(o){"use strict";return this.getComposerData(o).editorState;};n.prototype.getMentions=function(o){"use strict";return this.getComposerData(o).mentions;};n.prototype.getMessage=function(o){"use strict";var p=this.getEditorState(o);if(!p)return '';var q=p.getCurrentContent();return k(q);};n.prototype.getMessageText=function(o){"use strict";var p=this.getEditorState(o);if(!p)return '';var q=p.getCurrentContent();return q?q.getPlainText():'';};n.prototype.hasText=function(o){"use strict";var p=this.getEditorState(o);if(!p)return false;var q=p.getCurrentContent();return q?q.hasText():false;};n.prototype.$ReactComposerStatusStore0=function(o){"use strict";var p=this.getComposerData(o.composerID);p.mentionsSource=o.mentionsSource;this.emitChange(o.composerID);};n.prototype.$ReactComposerStatusStore1=function(o){"use strict";var p=this.getComposerData(o.composerID);p.editorState=o.editorState;this.emitChange(o.composerID);};n.prototype.$ReactComposerStatusStore2=function(o){"use strict";var p=this.getComposerData(o.composerID);p.mentions=o.mentions;this.emitChange(o.composerID);};e.exports=new n();},null);
__d("ReactComposerTaggerActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({SET_SELECTED_TAGGER:null,SET_TAGGERS_SOURCE:null,SET_TAGGER_SOURCE:null,SET_TAGGER_DATA:null});},null);
__d("ReactComposerTaggerStore",["ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerDispatcher","ReactComposerPhotoActionType","ReactComposerPhotoStore","ReactComposerPhotoUploadActionType","ReactComposerStoreBase","ReactComposerTaggerActionType","ReactComposerTaggerType","immutable","SearchableEntry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();for(var r in m)if(m.hasOwnProperty(r))t[r]=m[r];var s=m===null?null:m.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=m;function t(){"use strict";m.call(this,(function(){var u={};u[o.PEOPLE]=[];u[o.LOCATION]={};u[o.BACKDATE]={};u[o.ACTIVITY]={};return {$ReactComposerTaggerStore0:p.Set(),autoFocusOnSelectedTagger:true,taggersSourceInitialized:false,selectedTagger:null,taggersData:u,taggersSource:{}};}),(function(u){switch(u.type){case n.SET_SELECTED_TAGGER:this.$ReactComposerTaggerStore1(u);break;case n.SET_TAGGERS_SOURCE:this.$ReactComposerTaggerStore2(u);break;case n.SET_TAGGER_SOURCE:this.$ReactComposerTaggerStore3(u);break;case n.SET_TAGGER_DATA:this.$ReactComposerTaggerStore4(u);break;case j.PHOTO_ADD_FACEBOX:this.$ReactComposerTaggerStore5(u);break;case j.PHOTO_TAG_FACEBOX:this.$ReactComposerTaggerStore6(u);break;case j.PHOTO_UNTAG_FACEBOX:i.waitFor([k.getDispatchToken()]);this.$ReactComposerTaggerStore7(u);break;case j.PHOTO_REMOVE:i.waitFor([k.getDispatchToken()]);this.$ReactComposerTaggerStore8(u);break;case l.PHOTO_UPLOAD_DONE:this.$ReactComposerTaggerStore9(u);break;}}.bind(this)));}t.prototype.hasData=function(u,v){"use strict";var w=this.getTaggerData(u,v);if(w==null)return false;switch(v){case o.PEOPLE:return w.length>0;case o.LOCATION:return !!w.place;case o.BACKDATE:return !!w.year;case o.ACTIVITY:return !!w.action&&!!w.object;default:throw new Error(v+" is an unhandled tagger type in "+"ReactComposerTaggerStore.hasData");}};t.prototype.areAllTaggersEmpty=function(u){"use strict";var v=this.getTaggersData(u);for(var w in v)if(this.hasData(u,w))return false;return true;};t.prototype.getSelectedTagger=function(u){"use strict";return this.getComposerData(u).selectedTagger;};t.prototype.getAutoFocusOnSelectedTagger=function(u){"use strict";return this.getComposerData(u).autoFocusOnSelectedTagger;};t.prototype.getTaggerSource=function(u,v){"use strict";return this.getComposerData(u).taggersSource[v];};t.prototype.getTaggerData=function(u,v){"use strict";return this.getComposerData(u).taggersData[v];};t.prototype.getTaggersData=function(u){"use strict";return this.getComposerData(u).taggersData;};t.prototype.areTaggersSourceInitialized=function(u){"use strict";return this.getComposerData(u).taggersSourceInitialized;};t.prototype.$ReactComposerTaggerStore1=function(u){"use strict";var v=this.getComposerData(u.composerID);if(v.selectedTagger===u.taggerID){v.selectedTagger=null;}else v.selectedTagger=u.taggerID;v.autoFocusOnSelectedTagger=u.autoFocus;this.emitChange(u.composerID);};t.prototype.$ReactComposerTaggerStore3=function(u){"use strict";var v=this.getComposerData(u.composerID);v.taggersSource[u.taggerID]=u.taggerSource;this.emitChange(u.composerID);};t.prototype.$ReactComposerTaggerStore2=function(u){"use strict";var v=this.getComposerData(u.composerID);v.taggersSource=u.taggersSource;v.taggersSourceInitialized=true;this.emitChange(u.composerID);};t.prototype.$ReactComposerTaggerStore4=function(u){"use strict";var v=this.getComposerData(u.composerID),w=Array.isArray(u.taggerData)?u.taggerData.slice():Object.assign({},u.taggerData);v.taggersData[u.taggerID]=w;this.emitChange(u.composerID);};t.prototype.$ReactComposerTaggerStore9=function(u){"use strict";var v=this.getComposerData(u.composerID),w=g.getIsAttachmentSelected(u.composerID,h.MEDIA);if(v.selectedTagger===null&&w){v.selectedTagger=o.PEOPLE;v.autoFocusOnSelectedTagger=false;}this.emitChange(u.composerID);};t.prototype.$ReactComposerTaggerStore5=function(u){"use strict";var v=this.validateAction(u,['composerID','facebox']),w=v[0],x=v[1],y=x.bestRecognition;if(y)this.$ReactComposerTaggerStorea(w,y.subjectID,y.value);};t.prototype.$ReactComposerTaggerStore6=function(u){"use strict";var v=this.validateAction(u,['composerID','subjectID','value']),w=v[0],x=v[1],y=v[2];this.$ReactComposerTaggerStorea(w,x,y);};t.prototype.$ReactComposerTaggerStore7=function(u){"use strict";var v=this.validateAction(u,['composerID','subjectID']),w=v[0],x=v[1];if(!k.getIsSubjectPhotoTagged(w,x))this.$ReactComposerTaggerStoreb(w,x);};t.prototype.$ReactComposerTaggerStore8=function(u){"use strict";var v=this.validateAction(u,'composerID');this.getComposerData(v).$ReactComposerTaggerStore0.forEach(function(w){if(!k.getIsSubjectPhotoTagged(v,w))this.$ReactComposerTaggerStoreb(v,w);}.bind(this));};t.prototype.$ReactComposerTaggerStorea=function(u,v,w){"use strict";var x=new q({uniqueID:v,title:w}),y=this.getComposerData(u),z=y.taggersData[o.PEOPLE],aa=z.some(function(ba){return ba.getUniqueID()===x.getUniqueID();});y.$ReactComposerTaggerStore0=y.$ReactComposerTaggerStore0.add(v);if(!aa)z.push(x);this.emitChange(u);};t.prototype.$ReactComposerTaggerStoreb=function(u,v){"use strict";var w=this.getComposerData(u);w.taggersData[o.PEOPLE]=w.taggersData[o.PEOPLE].filter(function(x){return x.getUniqueID()!==v;});w.$ReactComposerTaggerStore0=w.$ReactComposerTaggerStore0["delete"](v);this.emitChange(u);};e.exports=new t();},null);
__d("ReactComposerVideoUploadActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({VIDEO_SET_UPLOADER:null,VIDEO_UPLOAD_ADD:null,VIDEO_UPLOAD_REMOVE:null});},null);
__d("ReactComposerVideoUploadStore",["ReactComposerStoreBase","ReactComposerVideoUploadActionType","immutable"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i.Record({input:null});for(var k in g)if(g.hasOwnProperty(k))m[k]=g[k];var l=g===null?null:g.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=g;function m(){"use strict";g.call(this,(function(){return {uploader:null,video:null};}),(function(n){switch(n.type){case h.VIDEO_SET_UPLOADER:this.$ReactComposerVideoUploadStore0(n);break;case h.VIDEO_UPLOAD_ADD:this.$ReactComposerVideoUploadStore1(n);break;case h.VIDEO_UPLOAD_REMOVE:this.$ReactComposerVideoUploadStore2(n);break;default:}}.bind(this)));}m.prototype.getUploader=function(n){"use strict";return this.getComposerData(n).uploader;};m.prototype.getVideo=function(n){"use strict";return this.getComposerData(n).video;};m.prototype.$ReactComposerVideoUploadStore0=function(n){"use strict";var o=this.validateAction(n,['composerID','uploader']),p=o[0],q=o[1],r=this.getComposerData(p);r.uploader=q;this.emitChange(p);};m.prototype.$ReactComposerVideoUploadStore1=function(n){"use strict";var o=this.validateAction(n,['composerID','input']),p=o[0],q=o[1],r=this.getComposerData(p);r.video=new j({input:q});this.emitChange(p);};m.prototype.$ReactComposerVideoUploadStore2=function(n){"use strict";var o=this.validateAction(n,'composerID'),p=this.getComposerData(o);p.video=null;p.input&&p.input.clear();this.emitChange(o);};e.exports=new m();},null);
__d("ReactComposerLoggingStore",["ReactComposerActionTypes","ReactComposerAttachmentActionType","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerPhotoActionType","ReactComposerPhotoStore","ReactComposerPhotoUploadActionType","ReactComposerPhotoUploadStore","ReactComposerStoreBase","ReactComposerTaggerActionType","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerVideoUploadActionType","ComposerWaterfallEvent","ComposerXMarauderLogger","ComposerXSessionIDs","PhotosUploadWaterfallXMixin","PUWApplications","PUWMethods","PUWSteps","classWithMixins","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();var ca=aa(o,ba(w));for(var da in ca)if(ca.hasOwnProperty(da))fa[da]=ca[da];var ea=ca===null?null:ca.prototype;fa.prototype=Object.create(ea);fa.prototype.constructor=fa;fa.__superConstructor__=ca;function fa(){"use strict";ca.call(this,(function(){return {sessionID:null};}),(function(ga){switch(ga.type){case h.SELECT_ATTACHMENT:this.$ReactComposerLoggingStore0(ga);break;case m.PHOTO_UPLOAD_INPUT_CLICKED:this.$ReactComposerLoggingStore1(ga);break;case m.PHOTO_UPLOAD_ENQUEUED:this.$ReactComposerLoggingStore2(ga);break;case m.PHOTO_UPLOAD_RESIZE_STARTED:this.$ReactComposerLoggingStore3(ga);break;case m.PHOTO_UPLOAD_RESIZE_DONE:this.$ReactComposerLoggingStore4(ga);break;case m.PHOTO_UPLOAD_RESIZE_FAILED:this.$ReactComposerLoggingStore5(ga);break;case m.PHOTO_UPLOAD_RESIZER_UNAVAILABLE:this.$ReactComposerLoggingStore6(ga);break;case m.PHOTO_UPLOAD_UPLOADING:this.$ReactComposerLoggingStore7(ga);break;case m.PHOTO_UPLOAD_DONE:this.$ReactComposerLoggingStore8(ga);break;case m.PHOTO_UPLOAD_FAILED:this.$ReactComposerLoggingStore9(ga);break;case m.PHOTO_UPLOAD_REMOVE:this.$ReactComposerLoggingStorea(ga);break;case k.PHOTO_REMOVE:this.$ReactComposerLoggingStoreb(ga);break;case s.VIDEO_UPLOAD_ADD:this.$ReactComposerLoggingStorec(ga);break;case s.VIDEO_UPLOAD_REMOVE:this.$ReactComposerLoggingStored(ga);break;case p.SET_SELECTED_TAGGER:this.$ReactComposerLoggingStoree(ga);break;case g.POST_STARTED:this.$ReactComposerLoggingStoref(ga);break;case g.POST_SUCCEEDED:this.$ReactComposerLoggingStoreg(ga);break;case g.POST_ERROR:this.$ReactComposerLoggingStoreh(ga);break;case m.PHOTOS_SELECT:this.$ReactComposerLoggingStorei(ga);break;case k.PHOTO_EDIT_STARTED:this.$ReactComposerLoggingStorej(ga);break;case k.PHOTO_EDIT_FINISHED:this.$ReactComposerLoggingStorek(ga);break;case m.PHOTO_UPLOAD_RETRY:this.$ReactComposerLoggingStorel(ga);break;default:}}.bind(this)));}fa.prototype.getSessionID=function(ga){"use strict";return this.getComposerData(ga).sessionID;};fa.prototype.getRef=function(ga){"use strict";return this.getComposerData(ga).ref;};fa.prototype.getComposerVersion=function(ga){"use strict";return this.getComposerData(ga).composerVersion;};fa.prototype.getTargetType=function(ga){"use strict";return this.getComposerData(ga).targetType;};fa.prototype.__init=function(ga){"use strict";var ha=this.validateAction(ga,'composerID'),ia=this.validateAction(ga,'loggingConfig'),ja=this.getComposerData(ha);ja.ref=ia.ref;ja.composerVersion=ia.composerVersion;ja.targetType=ia.targetType;v.resetSessionID(ha);ja.sessionID=v.getSessionID(ha);};fa.prototype.$ReactComposerLoggingStore0=function(ga){"use strict";if(ga.id!==j.STATUS||!ga.extraData.fromFocus)return;this.$ReactComposerLoggingStorem(ga.composerID,t.COMPOSER_ENTRY,{logOncePerSession:true});};fa.prototype.$ReactComposerLoggingStore1=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStorem(ha,t.MEDIA_INTENT);this.$ReactComposerLoggingStoren(ha,z.CLIENT_FLOW_BEGIN,null,{logOncePerSession:true});this.$ReactComposerLoggingStoren(ha,z.CLIENT_SELECT_BEGIN);};fa.prototype.$ReactComposerLoggingStore2=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStorem(ha,t.PHOTO_ADD);};fa.prototype.$ReactComposerLoggingStore3=function(ga){"use strict";var ha=this.validateAction(ga,['composerID','loggingData']),ia=ha[0],ja=ha[1];this.$ReactComposerLoggingStoren(ia,z.CLIENT_PROCESS_BEGIN,ja);};fa.prototype.$ReactComposerLoggingStore4=function(ga){"use strict";var ha=this.validateAction(ga,['composerID','loggingData']),ia=ha[0],ja=ha[1];this.$ReactComposerLoggingStoren(ia,z.CLIENT_PROCESS_SUCCESS,ja);};fa.prototype.$ReactComposerLoggingStore5=function(ga){"use strict";var ha=this.validateAction(ga,['composerID','loggingData']),ia=ha[0],ja=ha[1];this.$ReactComposerLoggingStoren(ia,z.CLIENT_PROCESS_FAIL,ja);};fa.prototype.$ReactComposerLoggingStore6=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStoren(ha,z.CLIENT_PROCESS_UNAVAILABLE);};fa.prototype.$ReactComposerLoggingStore7=function(ga){"use strict";var ha=this.validateAction(ga,['composerID','fileUpload']),ia=ha[0],ja=ha[1];this.$ReactComposerLoggingStoren(ia,z.CLIENT_TRANSFER_BEGIN,{bytes:ja.getFile().size});};fa.prototype.$ReactComposerLoggingStore8=function(ga){"use strict";var ha=this.validateAction(ga,['composerID','fileUpload','timeToUpload']),ia=ha[0],ja=ha[1],ka=ha[2];this.$ReactComposerLoggingStorem(ia,t.PHOTO_ADD_SUCCESS);this.$ReactComposerLoggingStoren(ia,z.CLIENT_TRANSFER_SUCCESS,{bytes:ja.getFile().size,auto_retry_count:ja.getRetryCount(),dt:ka,custom_tags:{manual_retry:!!ja.getFile().manuallyRetried}});};fa.prototype.$ReactComposerLoggingStore9=function(ga){"use strict";var ha=this.validateAction(ga,['composerID','fileUpload','error','timeToUpload']),ia=ha[0],ja=ha[1],ka=ha[2],la=ha[3];this.$ReactComposerLoggingStorem(ia,t.PHOTO_ADD_FAILURE);this.$ReactComposerLoggingStoren(ia,z.CLIENT_TRANSFER_FAIL,{bytes:ja.getFile().size,error_code:ka.code,error_info:ka.description,auto_retry_count:ja.getRetryCount(),dt:la,custom_tags:{manual_retry:!!ja.getFile().manuallyRetried}});};fa.prototype.$ReactComposerLoggingStorea=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStorem(ha,t.PHOTO_REMOVE);this.$ReactComposerLoggingStoren(ha,z.CLIENT_TRANSFER_CANCEL);};fa.prototype.$ReactComposerLoggingStoreb=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStorem(ha,t.PHOTO_REMOVE);};fa.prototype.$ReactComposerLoggingStorec=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStorem(ha,t.VIDEO_ADD);};fa.prototype.$ReactComposerLoggingStored=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStorem(ha,t.VIDEO_REMOVE);};fa.prototype.$ReactComposerLoggingStoree=function(ga){"use strict";var ha=this.validateAction(ga,'composerID'),ia=this.validateAction(ga,'taggerID'),event=null;switch(ia){case r.PEOPLE:event=t.FRIEND_TAG_INTENT;break;case r.LOCATION:event=t.LOCATION_INTENT;break;case r.ACTIVITY:event=t.MINUTIAE_INTENT;break;default:break;}if(event===null)return;this.$ReactComposerLoggingStorem(ha,event);};fa.prototype.$ReactComposerLoggingStoref=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStorem(ha,t.COMPOSER_POST);if(this.$ReactComposerLoggingStoreo(ha))this.$ReactComposerLoggingStoren(ha,z.CLIENT_PUBLISH_BEGIN,this.$ReactComposerLoggingStorep(ha));};fa.prototype.$ReactComposerLoggingStoreg=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');if(this.$ReactComposerLoggingStoreo(ha)){var ia=this.$ReactComposerLoggingStorep(ha);this.$ReactComposerLoggingStoren(ha,z.CLIENT_PUBLISH_SUCCESS,ia);this.$ReactComposerLoggingStoren(ha,z.CLIENT_FLOW_SUCCESS);}};fa.prototype.$ReactComposerLoggingStoreh=function(ga){"use strict";var ha=this.validateAction(ga,['composerID','response']),ia=ha[0],ja=ha[1];if(this.$ReactComposerLoggingStoreo(ia)){var ka=Object.assign(this.$ReactComposerLoggingStorep(ia),{error_code:ja.getError&&ja.getError(),error_info:ja.getErrorDescription&&ja.getErrorDescription()});this.$ReactComposerLoggingStoren(ia,z.CLIENT_PUBLISH_FAIL,ka);}};fa.prototype.$ReactComposerLoggingStorei=function(ga){"use strict";var ha=this.validateAction(ga,['composerID','numPhotos','method']),ia=ha[0],ja=ha[1],ka=ha[2],la={method:ka,volume:ja};this.$ReactComposerLoggingStoren(ia,z.CLIENT_FLOW_BEGIN,null,{logOncePerSession:true});if(ka!==y.FILE_SELECTOR)this.$ReactComposerLoggingStoren(ia,z.CLIENT_SELECT_BEGIN);this.$ReactComposerLoggingStoren(ia,z.CLIENT_SELECT_SUCCESS,la);};fa.prototype.$ReactComposerLoggingStorej=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStoren(ha,z.CLIENT_PHOTO_EDIT_BEGIN);};fa.prototype.$ReactComposerLoggingStorek=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStoren(ha,z.CLIENT_PHOTO_EDIT_SUCCESS);};fa.prototype.$ReactComposerLoggingStorel=function(ga){"use strict";var ha=this.validateAction(ga,'composerID');this.$ReactComposerLoggingStoren(ha,z.CLIENT_TRANSFER_MANUAL_RETRY);};fa.prototype.$ReactComposerLoggingStoreo=function(ga){"use strict";var ha=i.getIsAttachmentSelected(ga,j.MEDIA),ia=n.getUploads(ga);return ha&&!!ia.size;};fa.prototype.$ReactComposerLoggingStorep=function(ga){"use strict";var ha=q.getTaggerData(ga,r.PEOPLE)||[],ia=n.getTotalNumberOfStickersOnPhotos(ga);return {volume:l.getPhotos(ga).size,with_tag_count:ha.length,sticker_count:ia};};fa.prototype.$ReactComposerLoggingStorem=function(ga,event,ha){"use strict";u.logEvent(event,ga,ha);};fa.prototype.$ReactComposerLoggingStoren=function(ga,ha,ia,ja,ka){"use strict";this.logPUWStep(ha,this.getSessionID(ga),x.WEB_REACT_COMPOSER,this.getRef(ga),ia,ja,ka);};e.exports=new fa();},null);
__d("ReactComposer.react",["ReactComposerActions","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerContextMixin","ReactComposerPhotoStore","ReactComposerPhotoUploadStore","ReactComposerStatusStore","ReactComposerStore","ReactComposerTaggerStore","ReactComposerVideoUploadStore","ComposerXMarauderLogger","ReactComponentWithPureRenderMixin","React","Run","URI","XUICard.react","cx","fbt","joinClasses","ReactComposerLoggingStore"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=s,aa=z.PropTypes;b('ReactComposerLoggingStore');var ba=s.createClass({displayName:"ReactComposer",mixins:[r,j],propTypes:{hideBorders:aa.bool,loggingConfig:aa.shape({targetType:aa.string,ref:aa.string,composerVersion:aa.string.isRequired}).isRequired},getDefaultProps:function(){return {hideBorders:false};},componentDidMount:function(){t.onBeforeUnload(this._handleUnsavedChanges);g.initialized(this.context.composerID,this.props.loggingConfig);var ca=s.findDOMNode(this);q.registerComposer(ca,this.props.loggingConfig.targetType,this.props.loggingConfig.ref,this.props.loggingConfig.composerVersion,this.context.targetID);},render:function(){var ca=(("_36bx")+(this.props.hideBorders?' '+"_143o":''));return (s.createElement(v,{className:y(this.props.className,ca),id:this.context.composerID},this.props.children));},_handleUnsavedChanges:function(){var ca=this.context.composerID;if(u.getNextURI().getQueryData().hasOwnProperty('theater')||n.hasPostSucceeded(ca)||n.isPosting(ca))return;var da=h.getIsAttachmentSelected(ca,i.MEDIA),ea=m.hasText(ca),fa=da&&(l.isUploading(ca)||k.isRecognizing(ca)||k.getPhotos(ca).size>0),ga=da&&p.getVideo(ca),ha=!o.areAllTaggersEmpty(ca);if((ea||fa||ga||ha)&&!(a.Dialog&&a.Dialog.getCurrent()))return x._("Tw\u00f3j post nie jest jeszcze uko\u0144czony. Czy chcesz wyj\u015b\u0107, nie ko\u0144cz\u0105c?");}});e.exports=ba;},null);
__d("ReactComposerBody.react",["ReactComponentWithPureRenderMixin","React","XUICardSection.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h.createClass({displayName:"ReactComposerBody",mixins:[g],render:function(){var m=k("_4zoz",this.props.className);return (h.createElement(i,{className:m},this.props.children));}});e.exports=l;},null);
__d("ReactComposerPropsAndStoreBasedStateMixin",["ReactComposerContextMixin","StoreBasedStateMixinHelper","invariant","setImmediate"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=function(){for(var l=[],m=0,n=arguments.length;m<n;m++)l.push(arguments[m]);return {mixins:[g],getInitialState:function(){var o;if(this.constructor.getAttachmentInitialState){o=this.constructor.getAttachmentInitialState(this.context.composerID,this.props,this.context);}else o={};if(this.constructor.beforeCalculateInitialState)this.constructor.beforeCalculateInitialState(this.context.composerID,this.props,this.context);return Object.assign({},o,this.constructor.calculateState(this.context.composerID,this.props,this.context));},componentWillMount:function(){i(this.constructor.calculateState);i(this.context.composerID);this._recalculateStateID=null;var o=function(p){if(this.isMounted()&&p.composerID===this.context.composerID)this.setState(this.constructor.calculateState(this.context.composerID,this.props,this.context));this._recalculateStateID=null;}.bind(this);this._mixin=new h(l);this._mixin.subscribeCallback(function(p){if(this._recalculateStateID===null)this._recalculateStateID=j(o,p);}.bind(this));},componentWillReceiveProps:function(o){var p;if(this.constructor.getAttachmentWillReceivePropsState)p=this.constructor.getAttachmentWillReceivePropsState(this.context.composerID,o,this.props,this.context);this.setState(Object.assign({},p||{},this.constructor.calculateState(this.context.composerID,o,this.context)));},componentWillUnmount:function(){this._mixin.release();this._mixin=null;}};};e.exports=k;},null);
__d("ReactComposerBodyContainer.react",["ReactComposerAttachmentStore","ReactComposerBody.react","ReactComposerPropsAndStoreBasedStateMixin","ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k,n=m.PropTypes,o=k.createClass({displayName:"ReactComposerBodyContainer",mixins:[j,i(g)],propTypes:{expanded:n.bool},getDefaultProps:function(){return {expanded:false};},statics:{calculateState:function(p,q,r){var s=g.isSelectedAttachmentActive(p);return {active:s};}},render:function(){var p=((this.state.active?"_5xv3":'')+(this.props.expanded?' '+"_4cw":''));return (k.createElement(h,{className:p},this.props.children));}});e.exports=o;},null);
__d("ReactComposerFooter.react",["ReactComponentWithPureRenderMixin","React","XUICardSection.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"ReactComposerFooter",mixins:[g],propTypes:{background:m.string},getDefaultProps:function(){return {background:'white'};},render:function(){var o=k("_2dck",this.props.className);return (h.createElement(i,{background:this.props.background,className:o},this.props.children));}});e.exports=n;},null);
__d("ReactComposerFooterActions.react",["ReactComponentWithPureRenderMixin","React","XUICardSection.react","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=h.createClass({displayName:"ReactComposerFooterActions",mixins:[g],render:function(){return (h.createElement(i,{className:"_2ph-"},this.props.children));}});e.exports=k;},null);
__d("ReactComposerScrapedAttachmentActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({ATTACHMENT_SCRAPE_ENABLED:null,ATTACHMENT_PERMISSIVE_MATCH_SETTED:null,ATTACHMENT_SCRAPE_INTENDED:null,ATTACHMENT_SCRAPED:null});},null);
__d("XReactComposerScrapedAttachmentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/react_composer\/scraper\/",{composer_id:{type:"String",required:true},target_id:{type:"String",required:true},scrape_url:{type:"String",required:true},is_finch:{type:"Bool",defaultValue:false}});},null);
__d("ReactComposerScrapedAttachmentStore",["ReactComposerAttachmentActionType","ReactComposerAttachmentType","ReactComposerScrapedAttachmentActionType","ReactComposerStoreBase","XReactComposerScrapedAttachmentController","AsyncRequest","DOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();for(var n in j)if(j.hasOwnProperty(n))p[n]=j[n];var o=j===null?null:j.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=j;function p(){"use strict";j.call(this,(function(){return {markup:null,attachmentConfig:{},enabled:false,isScraping:false,permissiveMatch:null};}),(function(q){switch(q.type){case i.ATTACHMENT_SCRAPE_ENABLED:this.$ReactComposerScrapedAttachmentStore0(q);break;case i.ATTACHMENT_PERMISSIVE_MATCH_SETTED:this.$ReactComposerScrapedAttachmentStore1(q);break;case i.ATTACHMENT_SCRAPE_INTENDED:this.$ReactComposerScrapedAttachmentStore2(q);break;case i.ATTACHMENT_SCRAPED:this.$ReactComposerScrapedAttachmentStore3(q);break;case g.SELECT_ATTACHMENT:this.$ReactComposerScrapedAttachmentStore4(q);break;}}.bind(this)));}p.prototype.isEnabled=function(q){"use strict";return this.getComposerData(q).isEnabled;};p.prototype.hasAttachment=function(q){"use strict";return !!this.getMarkup(q);};p.prototype.isScraping=function(q){"use strict";return this.getComposerData(q).isScraping;};p.prototype.getMarkup=function(q){"use strict";return this.getComposerData(q).markup;};p.prototype.getAttachmentConfig=function(q){"use strict";var r=this.getComposerData(q);if(!r.markup)return null;var s=m.scry(r.markup,'input[name="attachment[params][images][0]"]').pop(),t=m.scry(r.markup,'input[name="attachment[params][title]"]').pop(),u=m.scry(r.markup,'input[name="attachment[params][summary]"]').pop();if(s!=null)r.attachmentConfig.params.images[0]=s.value;if(t!=null)r.attachmentConfig.params.title=t.value;if(u!=null)r.attachmentConfig.params.summary=u.value;return r.attachmentConfig;};p.prototype.getPermissiveMatch=function(q){"use strict";return this.getComposerData(q).permissiveMatch;};p.prototype.$ReactComposerScrapedAttachmentStore0=function(q){"use strict";var r=this.validateAction(q,['composerID','enabled']),s=r[0],t=r[1],u=this.getComposerData(s);u.isEnabled=t;};p.prototype.$ReactComposerScrapedAttachmentStore1=function(q){"use strict";var r=this.validateAction(q,['composerID','permissiveMatch']),s=r[0],t=r[1],u=this.getComposerData(s);u.permissiveMatch=t;this.emitChange(q.composerID);};p.prototype.$ReactComposerScrapedAttachmentStore2=function(q){"use strict";var r=this.validateAction(q,['composerID','targetID','value']),s=r[0],t=r[1],u=r[2];if(!this.isEnabled(s))return;var v=this.getComposerData(q.composerID);v.isScraping=true;var w=k.getURIBuilder().setString('composer_id',s).setString('target_id',t).setString('scrape_url',u).getURI();new l(w).send();this.emitChange(q.composerID);};p.prototype.$ReactComposerScrapedAttachmentStore3=function(q){"use strict";if(!this.isEnabled(q.composerID))return;var r=this.getComposerData(q.composerID);r.markup=q.markup;r.attachmentConfig=q.attachmentConfig;r.isScraping=false;this.emitChange(q.composerID);};p.prototype.$ReactComposerScrapedAttachmentStore4=function(q){"use strict";if(q.id===h.STATUS)return;var r=this.getComposerData(q.composerID);r.markup=null;r.attachmentConfig={};r.isScraping=false;this.emitChange(q.composerID);};e.exports=new p();},null);
__d("ReactComposerHeader.react",["ReactComposerPropsAndStoreBasedStateMixin","ReactComposerScrapedAttachmentStore","ReactComposerStore","CurrentUser","Image.react","ReactComponentWithPureRenderMixin","React","TooltipLink.react","XUICardSection.react","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=m,t=s.PropTypes,u=m.createClass({displayName:"ReactComposerHeader",mixins:[l,g(i,h)],propTypes:{background:t.string,noHorizontalMargin:t.bool,showDelimiter:t.bool},getDefaultProps:function(){return {background:'white',noHorizontalMargin:false,showDelimiter:true};},statics:{calculateState:function(v,w){return {posting:i.isPosting(v),isScraping:h.isScraping(v)};}},render:function(){var v=this.state.posting||this.state.isScraping,w=j.isEmployee()?m.createElement(n,{className:"_48-0 uiHelpLink",href:"/groups/555631037818849/",tooltip:"Provide feedback on the React Composer (fb-only).",target:"_blank"}):null,x;if(this.props.showDelimiter){x=m.createElement("ul",{className:"_-h"},m.Children.map(this.props.children,function(y,z){return m.createElement("li",{className:"_1tm3",key:z},y);}));}else x=this.props.children;return (m.createElement(o,{background:this.props.background,className:r(this.props.className,(("_4d6h")+(this.props.noHorizontalMargin?' '+"_4p1p":'')))},w,x,m.createElement(k,{className:(("_4d6i")+(v?' '+"_du_":'')),src:q('/images/loaders/indicator_blue_small.gif')})));}});e.exports=u;},null);
__d("ReactComposerAttachmentActions",["ReactComposerAttachmentActionType","ReactComposerDispatcher","ReactComposerAttachmentStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerAttachmentStore');function i(){"use strict";}i.prototype.registerAttachment=function(j,k){"use strict";var l=Object.assign({composerID:j,type:g.REGISTER_ATTACHMENT},k);h.dispatch(l);};i.prototype.selectAttachment=function(j,k,l){"use strict";var m={composerID:j,type:g.SELECT_ATTACHMENT,id:k,extraData:l||{}};h.dispatch(m);};i.prototype.setInitialized=function(j,k){"use strict";var l={composerID:j,type:g.SET_INITIALIZED,id:k};h.dispatch(l);};i.prototype.setBootloaded=function(j,k,l,m){"use strict";var n={composerID:j,type:g.SET_BOOTLOADED,id:k,attachmentModule:l,postButtonModule:m};h.dispatch(n);};i.prototype.setBootstrapped=function(j,k){"use strict";var l={composerID:j,type:g.SET_BOOTSTRAPPED,id:k};h.dispatch(l);};e.exports=new i();},null);
__d("ReactComposerAttachmentLoader",["ReactComposerAttachmentActions","ReactComposerAttachmentStore","AsyncRequest"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={load:function(k,l,m,n){var o=h.getAttachment(k,l);if(!o||o.initialized)return;g.setInitialized(k,l);m(function(p,q){return g.setBootloaded(k,l,p,q);});new i(n).setHandler(function(){setTimeout(function(){return g.setBootstrapped(k,l);},0);}).send();}};e.exports=j;},null);
__d("ReactComposerAttachmentPlaceholder.react",["ReactComponentWithPureRenderMixin","React","XUISpinner.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h.createClass({displayName:"ReactComposerAttachmentPlaceholder",mixins:[g],render:function(){var m=k(this.props.className,"_2nt-");return (h.createElement("div",{className:m},h.createElement(i,{className:"_2nt_",size:"large"})));}});e.exports=l;},null);
__d("ReactComposerAttachmentSelector.react",["Image.react","Link.react","ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"ReactComposerAttachmentSelector",mixins:[i],propTypes:{selected:m.bool,label:m.string.isRequired,icon:m.object.isRequired,onSelected:m.func.isRequired},getDefaultProps:function(){return {selected:false};},render:function(){var o=(("_5qtm")+(this.props.selected?' '+"_5qtn":''));return (j.createElement(h,j.__spread({onClick:this.props.onSelected,className:o,role:"tab","aria-selected":this.props.selected},this.props),j.createElement("span",{className:"_4-fs"},j.createElement(g,{src:this.props.icon,className:"_5qto"}),j.createElement("span",{className:"_5qtp"},this.props.label),j.createElement("span",{className:"_5qtq"}))));}});e.exports=n;},null);
__d("ReactComposerAttachmentSelectorContainer.react",["ReactComposerAttachmentActions","ReactComposerAttachmentSelector.react","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerEvents","ReactComposerPropsAndStoreBasedStateMixin","Arbiter","ReactComponentWithPureRenderMixin","React","emptyFunction","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=o,s=r.PropTypes,t=o.createClass({displayName:"ComposerAttachmentSelectorContainer",mixins:[n,l(i)],propTypes:{attachmentID:s.oneOf(q(j)).isRequired,onSelected:s.func},getDefaultProps:function(){return {onSelected:p};},statics:{calculateState:function(u,v){return {selected:i.getIsAttachmentSelected(u,v.attachmentID)};}},_onSelected:function(){g.selectAttachment(this.context.composerID,this.props.attachmentID);setTimeout(function(){return m.inform(k.ARBITER_SELECT_ATTACHMENT,{composerID:this.context.composerID});}.bind(this),0);},render:function(){var u=this.props.onSelected!==p?this.props.onSelected:this._onSelected;return (o.createElement(h,o.__spread({},this.props,{selected:this.state.selected,onSelected:u})));}});e.exports=t;},null);
__d("ReactComposerAudienceSelector.react",["DOM","PrivacySelector","ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j,m=l.PropTypes,n=j.createClass({displayName:"ReactComposerAudienceSelector",mixins:[i],propTypes:{audienceXHP:m.instanceOf(HTMLElement).isRequired,onChange:m.func.isRequired,viewerIsTarget:m.bool.isRequired},componentDidMount:function(){if(this.props.viewerIsTarget)setTimeout(function(){var o=h.get(this.props.audienceXHP);o.subscribe('changed',this._onChange);}.bind(this),0);if(this.refs&&this.refs.audienceSelector){g.setContent(j.findDOMNode(this.refs.audienceSelector),this.props.audienceXHP);}else this._layerHack();},render:function(){return (j.createElement("div",{ref:"audienceSelector",className:"_5dd8"}));},_onChange:function(o,p){if(this.isMounted())this.props.onChange(p);},_layerHack:function(){setTimeout(function(){if(this.refs&&this.refs.audienceSelector){g.setContent(j.findDOMNode(this.refs.audienceSelector),this.props.audienceXHP);}else this._layerHack();}.bind(this),100);}});e.exports=n;},null);
__d("ReactComposerAudienceSelectorContainer.react",["ReactComposerActions","ReactComposerAudienceSelector.react","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStatusStore","ReactComposerTaggerStore","ReactComposerTaggerType","Arbiter","DOM","DataStore","PrivacySelector","PrivacySelectorBase","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=s,u=t.PropTypes,v=s.createClass({displayName:"ReactComposerAudienceSelectorContainer",mixins:[r,i(j,k)],propTypes:{audienceXHP:u.instanceOf(HTMLElement).isRequired,viewerIsTarget:u.bool},statics:{beforeCalculateInitialState:function(w,x){var y;if(x.audienceXHP&&x.viewerIsTarget){var z=p.getAdamaSelectorInstance(x.audienceXHP);if(z)y=z.getPostParam();var aa;if(!z)aa=n.scry(x.audienceXHP,'select option[selected="1"]').pop();if(!z&&!aa){setTimeout(function(){var ba=p.getAdamaSelectorInstance(x.audienceXHP);if(ba)g.setAudience(w,ba.getPostParam(),null);},0);}else g.setAudience(w,y,aa?aa.value:null);}},calculateState:function(w,x){var y=j.getMentions(w),z=k.getTaggerData(w,l.PEOPLE)||[],aa=z.map(function(da){return {info:{type:da.getType(),uid:da.getUniqueID(),text:da.getTitle()}};}),ba=o.get(x.audienceXHP.firstChild,'selector'),ca={eventTag:null,withTags:aa,mention:y};if(ba instanceof q){ba.informTagsChanged(ca);}else m.inform('Composer/changedtags',ca);return {};}},render:function(){return (s.createElement(h,s.__spread({},this.props,{onChange:this._onAudienceChanged})));},_onAudienceChanged:function(w){g.setAudience(this.context.composerID,w.post_param,w.privacy_base);}});e.exports=v;},null);
__d("ReactComposerDragDropPrompt.react",["ReactComponentWithPureRenderMixin","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=h.createClass({displayName:"ReactComposerDragDropPrompt",mixins:[g],render:function(){return (h.createElement("div",{className:"_1y-n"},h.createElement("div",{className:"_1y-o"},h.createElement("span",{className:"_1y-p"},j._("Upu\u015b\u0107 link\/zdj\u0119cia w tym miejscu")),h.createElement("span",{className:"_1y-q"},j._("Upu\u015b\u0107 link")),h.createElement("span",{className:"_1y-r"},j._("Upu\u015b\u0107 zdj\u0119cie")),h.createElement("span",{className:"_1y-s"},j._("Upu\u015b\u0107 zdj\u0119cia")))));}});e.exports=k;},null);
__d("ReactComposerDragDropPromptLazy.react",["ReactComposerDragDropPrompt.react","ComposerXDragDrop","DragDropTarget","ReactComponentWithPureRenderMixin","React","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=k,n=m.PropTypes,o=k.createClass({displayName:"ReactComposerDragDropPromptLazy",_dragDropTarget:(undefined),mixins:[j],propTypes:{root:n.object.isRequired,onFilesDrop:n.func,onURLDrop:n.func},getDefaultProps:function(){return {onFilesDrop:l,onURLDrop:l};},componentDidMount:function(){var p=k.findDOMNode(this.props.root);this._dragDropTarget=new i(p).setOnFilesDropCallback(this.props.onFilesDrop).setOnURLDropCallback(this.props.onURLDrop).setFileFilter(h.filterImages).enable();},componentWillUnmount:function(){this._dragDropTarget&&this._dragDropTarget.disable();},render:function(){return k.createElement(g,null);}});e.exports=o;},null);
__d("ReactComposerMediaAttachmentSelector.react",["ReactComponentWithPureRenderMixin","React","ReactComposerAttachmentSelectorContainer.react","ReactComposerAttachmentType","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"ReactComposerMediaAttachmentSelector",mixins:[g],propTypes:{label:n.string},getDefaultProps:function(){return {label:k._("Zdj\u0119cie \/ film")};},render:function(){return (h.createElement(i,{attachmentID:j.MEDIA,label:this.props.label,icon:l('/images/litestand/composer/icons/photo.png')}));}});e.exports=o;},null);
__d("ReactComposerAttachmentBodyMixin",["ReactComposerAttachmentActions","ReactComposerAttachmentStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComponentWithPureRenderMixin","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(){for(var m=[],n=0,o=arguments.length;n<o;n++)m.push(arguments[n]);m=m.concat(h);return {mixins:[j,i(h)],statics:{beforeCalculateInitialState:function(p,q){g.registerAttachment(p,{id:this.attachmentID,selected:q.selected});},calculateState:function(p,q){return Object.assign({selected:h.getIsAttachmentSelected(p,this.attachmentID)},this.calculateAttachmentState?this.calculateAttachmentState(p,q):{});}},componentWillMount:function(){k(this.constructor.attachmentID);k(this.constructor.attachmentID);},render:function(){if(!this.state.selected)return null;return this.renderX();}};}e.exports=l;},null);
__d("ReactComposerLoadableAttachmentBodyMixin",["ReactComposerAttachmentBodyMixin","ReactComposerAttachmentLoader","ReactComposerAttachmentPlaceholder.react","ReactComposerAttachmentStore","React","cx","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={mixins:[g(j)],statics:{calculateAttachmentState:function(o,p){var q=j.isSelectedAttachmentActive(o),r=j.getAttachment(o,this.attachmentID),s=j.getIsAttachmentSelected(o,this.attachmentID);return {selected:s,active:s&&q,initialized:r&&r.initialized,attachmentModule:r!=null?r.module:null,bootstrapped:r!=null&&r.bootstrapped,postButtonModule:r&&r.postButtonModule};}},componentWillMount:function(){m(this.constructor.attachmentID);if(this.props.selected&&this._shouldInitialize())this._initialize();},componentDidUpdate:function(o,p){if(this.state.selected&&this._shouldInitialize())this._initialize();},renderX:function(){if(!this.state.attachmentModule||!this.state.bootstrapped){var o=this.getPlaceholderModule?this.getPlaceholderModule():i;return (k.createElement(o,k.__spread({className:"_3rlw"},this.props)));}var p=this.state.attachmentModule;return (k.createElement(p,k.__spread({},this.props,{postButtonModule:this.state.postButtonModule})));},_shouldInitialize:function(){var o=!this.shouldInitialize||this.shouldInitialize();return (!this.state.initialized&&(this.state.active||o));},_initialize:function(){h.load(this.context.composerID,this.constructor.attachmentID,this.bootload,this.getBootstrapURI());}};e.exports=n;},null);
__d("ReactComposerPhotoLegacyLimitExceededDialog",["Dialog","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={show:function(j){var k=h._("Za du\u017co zdj\u0119\u0107"),l=h._("Przepraszamy, do wiadomo\u015bci mo\u017cna doda\u0107 maksymalnie {maxselect} zdj\u0119cia\/zdj\u0119\u0107. Mo\u017cesz te\u017c doda\u0107 zdj\u0119cia do kolejnych wiadomo\u015bci.",[h.param("maxselect",j)]);new g().setTitle(k).setBody(l).setButtons(g.OK).setModal(true).show();}};e.exports=i;},null);
__d("ReactComposerPhotoUploadActions",["ReactComposerPhotoUploadActionType","ReactComposerDispatcher","ReactComposerPhotoUploadStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerPhotoUploadStore');var i={enqueue:function(j,k,l,m){h.dispatch({composerID:j,uploadID:k,type:g.PHOTO_UPLOAD_ENQUEUED,filename:l,index:m});},startResizing:function(j,k,l){h.dispatch({composerID:j,loggingData:l,uploadID:k,type:g.PHOTO_UPLOAD_RESIZE_STARTED});},progressResizing:function(j,k,l){h.dispatch({composerID:j,uploadID:k,type:g.PHOTO_UPLOAD_RESIZE_PROGRESS,progress:l});},doneResizing:function(j,k,l){h.dispatch({composerID:j,loggingData:l,uploadID:k,type:g.PHOTO_UPLOAD_RESIZE_DONE});},failResizing:function(j,k,l){h.dispatch({composerID:j,loggingData:l,uploadID:k,type:g.PHOTO_UPLOAD_RESIZE_FAILED});},startUploading:function(j,k,l){h.dispatch({composerID:j,uploadID:k,type:g.PHOTO_UPLOAD_UPLOADING,fileUpload:l});},progressUploading:function(j,k,l){h.dispatch({composerID:j,uploadID:k,type:g.PHOTO_UPLOAD_PROGRESS,progress:l});},doneUploading:function(j,k,l,m,n,o,p){h.dispatch({composerID:j,uploadID:k,fileUpload:l,timeToUpload:m,type:g.PHOTO_UPLOAD_DONE,photoID:n,thumbSrc:o,originalPhotoID:p});},failUploading:function(j,k,l,m,n){h.dispatch({composerID:j,uploadID:k,type:g.PHOTO_UPLOAD_FAILED,error:n,fileUpload:l,timeToUpload:m});},removePhotoUpload:function(j,k){h.dispatch({composerID:j,type:g.PHOTO_UPLOAD_REMOVE,uploadID:k});},photoMoved:function(j,k,l){h.dispatch({composerID:j,type:g.PHOTO_UPLOAD_MOVED,from:k,to:l});},inputClicked:function(j){h.dispatch({composerID:j,type:g.PHOTO_UPLOAD_INPUT_CLICKED});},resizerUnavailable:function(j){h.dispatch({composerID:j,type:g.PHOTO_UPLOAD_RESIZER_UNAVAILABLE});},photosSelect:function(j,k,l){h.dispatch({composerID:j,method:l,numPhotos:k,type:g.PHOTOS_SELECT});},retryPhotoUpload:function(j){h.dispatch({composerID:j,type:g.PHOTO_UPLOAD_RETRY});}};e.exports=i;},null);
__d("ReactComposerPhotoActions",["ReactComposerPhotoActionType","ReactComposerDispatcher","ReactComposerPhotoStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerPhotoStore');var i={startRecognizing:function(j,k){h.dispatch({composerID:j,photoID:k,type:g.PHOTO_RECOGNITION_STARTED});},finishRecognizingPhoto:function(j,k){h.dispatch({composerID:j,type:g.PHOTO_RECOGNITION_FINISHED,photoID:k});},finishRecognizing:function(j,k){h.dispatch({composerID:j,type:g.PHOTO_RECOGNITION_ALL_FINISHED,photos:k});},addFacebox:function(j,k,l){h.dispatch({composerID:j,type:g.PHOTO_ADD_FACEBOX,photoID:k,facebox:l});},tagFacebox:function(j,k,l,m,n){h.dispatch({composerID:j,type:g.PHOTO_TAG_FACEBOX,photoID:k,faceboxID:l,subjectID:m,value:n});},untagFacebox:function(j,k,l,m){h.dispatch({composerID:j,type:g.PHOTO_UNTAG_FACEBOX,photoID:k,faceboxID:l,subjectID:m});},removePhoto:function(j,k,l){h.dispatch({composerID:j,type:g.PHOTO_REMOVE,photoID:k,uploadID:l});},untagSubjectFromAllPhotos:function(j,k){h.dispatch({composerID:j,type:g.PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS,subjectID:k});},startPhotoEdit:function(j){h.dispatch({composerID:j,type:g.PHOTO_EDIT_STARTED});},finishPhotoEdit:function(j){h.dispatch({composerID:j,type:g.PHOTO_EDIT_FINISHED});}};e.exports=i;},null);
__d("ReactComposerPhotoUploader",["ReactComposerLoggingStore","ReactComposerMediaConfig","ReactComposerPhotoActions","ReactComposerPhotoUploadActions","ReactComposerPhotoUploadStore","ActorURI","AsyncUploadRequest","FaceRecognitionController","JpegResizer","Map","XComposerPhotoUploader","performanceNow"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';s.isUploadLimitExceeded=function(t,u){var v=s.getMaxSelectableFilesCount(t),w=!u.files||!m.isSupported()?1:u.files.length;return w>v;};s.getMaxSelectableFilesCount=function(t){return !!t?h.photo.limit:1;};function s(t,u,v){this.$ReactComposerPhotoUploader0=t;var w=h.photo,x=null;if(o.isSupported()){x=o.getSingleton(u>1?o.DEFAULT_POOL_SIZE:1);x.setHighQuality(w.highQuality);}else j.resizerUnavailable(this.$ReactComposerPhotoUploader0);var y=l.create(w.uploadEndpoint,v);this.$ReactComposerPhotoUploader1=new q({uploadEndpoint:y,uploadData:Object.assign({qn:g.getSessionID(t)},w.uploadData),retryLimit:w.retryLimit,concurrentLimit:w.concurrentLimit,resizer:x,onUploadEnqueued:this.$ReactComposerPhotoUploader2.bind(this),onResizeStart:this.$ReactComposerPhotoUploader3.bind(this),onResizeSuccess:this.$ReactComposerPhotoUploader4.bind(this),onResizeFailure:this.$ReactComposerPhotoUploader5.bind(this),onResizeProgress:this.$ReactComposerPhotoUploader6.bind(this),onUploadStart:this.$ReactComposerPhotoUploader7.bind(this),onUploadProgress:this.$ReactComposerPhotoUploader8.bind(this),onUploadSuccess:this.$ReactComposerPhotoUploader9.bind(this),onUploadFailure:this.$ReactComposerPhotoUploadera.bind(this)});this.$ReactComposerPhotoUploaderb=new n({include_unrecognized_faceboxes:true,include_low_confidence_recognitions:true,include_face_crop_src:true});this.$ReactComposerPhotoUploaderb.subscribe('photo',this.$ReactComposerPhotoUploaderc.bind(this)),this.$ReactComposerPhotoUploaderb.subscribe('done',this.$ReactComposerPhotoUploaderd.bind(this));this.$ReactComposerPhotoUploadere=new p();}s.prototype.upload=function(t){this.$ReactComposerPhotoUploader1.upload(t);};s.prototype.retry=function(t){var u=this.$ReactComposerPhotoUploader1.getAsyncUploadRequest([t]);u.send();};s.prototype.getAsyncUploadRequest=function(t,u){return this.$ReactComposerPhotoUploader1.getAsyncUploadRequest(t,u);};s.prototype.enqueueAsyncUploadRequest=function(t,u,v){u.forEach(function(w){var x=v.indexMap?v.indexMap.get(w.uploadID):k.getUploads(t).size;j.enqueue(t,w.uploadID,w.filename,x);});this.getAsyncUploadRequest(u,v).send();};s.prototype.$ReactComposerPhotoUploader2=function(t){j.enqueue(this.$ReactComposerPhotoUploader0,t.uploadID,t.fileName,k.getUploads(this.$ReactComposerPhotoUploader0).size);};s.prototype.$ReactComposerPhotoUploader3=function(t){j.startResizing(this.$ReactComposerPhotoUploader0,t.uploadID,{bytes:t.size});};s.prototype.$ReactComposerPhotoUploader6=function(t,event){setTimeout(function(){return j.progressResizing(this.$ReactComposerPhotoUploader0,t,100*event.written/event.total);}.bind(this),0);};s.prototype.$ReactComposerPhotoUploader4=function(t,u,v,w){j.doneResizing(this.$ReactComposerPhotoUploader0,t.uploadID,{dt:w,media_data_size:t.size,bytes:u.size,custom_tags:{skipped_resizing:v}});};s.prototype.$ReactComposerPhotoUploader5=function(t,u,v,w){j.failResizing(this.$ReactComposerPhotoUploader0,t.uploadID,{dt:w,bytes:t.size,error_code:v.code,error_info:v.message});};s.prototype.$ReactComposerPhotoUploader7=function(t,u){j.startUploading(this.$ReactComposerPhotoUploader0,t,u.upload);this.$ReactComposerPhotoUploadere.set(t,r());};s.prototype.$ReactComposerPhotoUploader8=function(t,u){setTimeout(function(){return j.progressUploading(this.$ReactComposerPhotoUploader0,t,100*u.event.loaded/u.event.total);}.bind(this),0);};s.prototype.$ReactComposerPhotoUploader9=function(t,u){if(k.getHasUploadBeenRemoved(this.$ReactComposerPhotoUploader0,t))return;var v=u.response.payload;j.doneUploading(this.$ReactComposerPhotoUploader0,t,u.upload,r()-this.$ReactComposerPhotoUploadere.get(t),v.photoID,v.thumbSrc,v.originalPhotoID);i.startRecognizing(this.$ReactComposerPhotoUploader0,v.photoID);this.$ReactComposerPhotoUploaderb.start([v.photoID]);};s.prototype.$ReactComposerPhotoUploadera=function(t,u,v){if(k.getHasUploadBeenRemoved(this.$ReactComposerPhotoUploader0,t))return;var w=u.response,x={code:w.getError(),description:w.getErrorDescription(),summary:w.getErrorSummary(),transient:w.isTransient()||w.getError()==1004||w.getError()==1006};j.failUploading(this.$ReactComposerPhotoUploader0,t,u.upload,r()-this.$ReactComposerPhotoUploadere.get(t),x);};s.prototype.$ReactComposerPhotoUploaderc=function(t,u){u.faceboxes.forEach(function(v){var w;if(v.recognitions.length>0){var x=v.recognitions[0].user;w={subjectID:x.fbid,value:x.name};}i.addFacebox(this.$ReactComposerPhotoUploader0,u.photo,{id:v.fbid,x:v.x,y:v.y,top:v.top,left:v.left,width:v.width,height:v.height,croppedURI:v.src,bestRecognition:w,allRecognitions:v.allRecognitions});}.bind(this));i.finishRecognizingPhoto(this.$ReactComposerPhotoUploader0,u.photo);};s.prototype.$ReactComposerPhotoUploaderd=function(t,u){i.finishRecognizing(this.$ReactComposerPhotoUploader0,u.unresolved);};e.exports=s;},null);
__d("ReactComposerVideoLegacyLimitExceededDialog",["ErrorDialog","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={show:function(){g.show(h._("Zbyt wiele plik\u00f3w"),h._("Wybierz tylko jeden plik filmu naraz."));}};e.exports=i;},null);
__d("ReactComposerVideoUploadActions",["ReactComposerDispatcher","ReactComposerVideoUploadActionType","ReactComposerVideoUploadStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerVideoUploadStore');var i={setUploader:function(j,k){g.dispatch({composerID:j,type:h.VIDEO_SET_UPLOADER,uploader:k});},add:function(j,k){g.dispatch({composerID:j,type:h.VIDEO_UPLOAD_ADD,input:k});},remove:function(j){g.dispatch({composerID:j,type:h.VIDEO_UPLOAD_REMOVE});}};e.exports=i;},null);
__d("XReactComposerMediaAttachmentBootstrapController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/react_composer\/media\/bootstrap\/",{composer_id:{type:"String",required:true},oid:{type:"String"},privacy_row:{type:"String"},set_token:{type:"String"},taggers_initialized:{type:"Bool",defaultValue:false},target_id:{type:"String",required:true}});},null);
__d("ReactComposerMediaUtils",["ReactComposerPhotoLegacyLimitExceededDialog","ReactComposerPhotoUploadActions","ReactComposerPhotoUploader","ReactComposerTaggerStore","ReactComposerVideoLegacyLimitExceededDialog","ReactComposerVideoUploadActions","XReactComposerMediaAttachmentBootstrapController","VideoUploadFeatureDetector","VideoUploadConfig","ActorURI","Bootloader","PUWMethods"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s={bootload:function(t){q.loadModules(["ReactComposerMediaAttachmentContainer.react","ReactComposerMediaAttachmentPostButtonContainer.react"],t);},getBootstrapURI:function(t,u,v){var w=j.areTaggersSourceInitialized(t),x=m.getURIBuilder().setString('composer_id',t).setBool('taggers_initialized',w).setString('target_id',u).getURI();return p.create(x,v);},clearInput:function(t){if(!s.hasVideos(t.getInput()))t.clear();},hasVideos:function(t){var u=[];if(n.supportsFileAPI()){for(var v=0;v<t.files.length;v++)u.push(t.files.item(v).name);}else u=[t.value.split('/').pop().split('\\').pop()];var w=0;u.forEach(function(x){var y=x.indexOf('.')!==-1?x.split('.').pop().toLowerCase():'';if(!!o.videoExtensions[y])w++;});return w>0;},uploadPhotosOrVideo:function(t,u,v,w){if(this.hasVideos(u)){if(u.files&&u.files.length>1){k.show();}else l.add(t,u);}else{var x=i.isUploadLimitExceeded(w,u);if(x){g.show(i.getMaxSelectableFilesCount(w));return;}h.photosSelect(t,u.files&&u.files.length||1,r.FILE_SELECTOR);v&&v.upload(u);}}};e.exports=s;},null);
__d("ReactComposerMediaLazyAttachment.react",["ReactComposerAttachmentType","ReactComposerLoadableAttachmentBodyMixin","ReactComposerMediaUtils","React"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j,l=k.PropTypes,m=j.createClass({displayName:"ReactComposerMediaLazyAttachment",mixins:[h],propTypes:{bootload:l.func},statics:{attachmentID:g.MEDIA},bootload:function(n){if(this.props.bootload){this.props.bootload(n);}else i.bootload(n);},getBootstrapURI:function(){return i.getBootstrapURI(this.context.composerID,this.context.targetID,this.context.actorID);}});e.exports=m;},null);
__d("ReactComposerMLEAttachmentSelector.react",["ReactComponentWithPureRenderMixin","React","ReactComposerAttachmentSelectorContainer.react","ReactComposerAttachmentType","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"ReactComposerMLEAttachmentSelector",mixins:[g],propTypes:{label:n.string},getDefaultProps:function(){return {label:k._("Wydarzenie z \u017cycia")};},render:function(){return (h.createElement(i,{attachmentID:j.MLE,label:this.props.label,icon:l('/images/litestand/composer/icons/mle.png')}));}});e.exports=o;},null);
__d("XReactComposerMLEAttachmentBootstrapController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/react_composer\/mle\/bootstrap\/",{composer_id:{type:"String",required:true}});},null);
__d("ReactComposerMLELazyAttachment.react",["ReactComposerAttachmentType","ReactComposerLoadableAttachmentBodyMixin","Bootloader","React","XReactComposerMLEAttachmentBootstrapController","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=j.createClass({displayName:"ReactComposerMLELazyAttachment",mixins:[h],statics:{attachmentID:g.MLE},bootload:function(n){i.loadModules(["ReactComposerMLEAttachmentContainer.react"],n);},getBootstrapURI:function(){return k.getURIBuilder().setString('composer_id',this.context.composerID).getURI();}});e.exports=m;},null);
__d("ReactComposerStatusActions",["ReactComposerStatusActionType","ReactComposerDispatcher","ReactComposerStatusStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerStatusStore');function i(){"use strict";}i.prototype.setMentionsSource=function(j,k){"use strict";var l={composerID:j,type:g.SET_MENTIONS_SOURCE,mentionsSource:k};h.dispatch(l);};i.prototype.setEditorState=function(j,k){"use strict";var l={composerID:j,type:g.SET_EDITOR_STATE,editorState:k,status:status};h.dispatch(l);};i.prototype.setMentions=function(j,k){"use strict";var l={composerID:j,type:g.SET_MENTIONS,mentions:k};h.dispatch(l);};e.exports=new i();},null);
__d("ReactComposerStatusAttachmentMentionsInput.react",["ReactComposerContextMixin","ReactComposerEvents","Arbiter","Keys","MentionsInput.react","ReactComponentWithPureRenderMixin","React","SubscriptionsHandler","UserAgent_DEPRECATED","XUITypeaheadView.react","cx","createEmptyEditorState","getMentionsInputDecorator","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=m,v=u.PropTypes,w=m.createClass({displayName:"ReactComposerStatusAttachmentMentionsInput",_subscriptions:(undefined),mixins:[l,g],propTypes:{mentionsSource:v.object,onChange:v.func,onFocus:v.func,onPasteFiles:v.func,onPostIntent:v.func},getInitialState:function(){return {editorState:this.props.editorState};},componentWillUnmount:function(){this.props.onBlur&&this.props.onBlur(this.state.editorState);this._subscriptions&&this._subscriptions.release();},componentWillMount:function(){var x=new n();x.addSubscriptions(i.subscribe(h.ARBITER_SELECT_ATTACHMENT,function(y,z){if(z.composerID===this.context.composerID)this.focus();}.bind(this)));this._subscriptions=x;},componentWillReceiveProps:function(x){if(x.editorState===null)this.setState({editorState:r(s())});},render:function(){var x=Object.assign({},{typeaheadView:p,selectOnTab:false,spellCheck:true},this.props,{className:t("_1mwp",this.props.className),editorState:this.state.editorState,handleContentReturn:this._handleContentReturn,handlePastedFiles:this._handlePastedFiles,onBlur:this._onBlur,onChange:this._onChange,maxResults:10});return (m.createElement(k,m.__spread({ref:"mentionsInput"},x)));},focus:function(){this.refs.mentionsInput.focus();},_handlePastedFiles:function(x){var y=/^image\//;x=x.filter(function(z){return y.test(z.type);});if(x.length>0){this.props.onPasteFiles&&this.props.onPasteFiles(x);return true;}return false;},_handleContentReturn:function(event){var x=o.osx()?event.metaKey:event.controlKey;if(event.keyCode===j.RETURN&&x){this.refs.mentionsInput.blur();setTimeout(this.props.onPostIntent,0);return true;}return false;},_onChange:function(x){this.setState({editorState:x});this.props.onChange&&this.props.onChange(x);},_onBlur:function(){this.props.onBlur&&this.props.onBlur(this.state.editorState);}});e.exports=w;},null);
__d("ReactComposerStatusAttachmentMentionsInputContainer.react",["ReactComposerActions","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerContextMixin","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStatusActions","ReactComposerStatusAttachmentMentionsInput.react","ReactComposerStatusStore","ReactComposerStore","EditorState","ReactComponentWithPureRenderMixin","React","XUIError.react","createEmptyEditorState","cx","errorCode","getMentionsInputDecorator"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x=r,y=x.PropTypes,z=r.createClass({displayName:"ComposerStatusAttachmentMentionsInputContainer",mixins:[q,j,k(h,n,o)],propTypes:{config:y.object,editorState:y.instanceOf(p),mentionsSource:y.object,onChange:y.func,onPasteFiles:y.func,onPasteRawText:y.func},statics:{beforeCalculateInitialState:function(aa,ba){if(ba.mentionsSource)l.setMentionsSource(aa,ba.mentionsSource);if(ba.editorState)l.setEditorState(aa,ba.editorState);},calculateState:function(aa,ba){return {editorState:n.getEditorState(aa),mentionsSource:n.getMentionsSource(aa),serverErrorResponse:o.getServerErrorResponse(aa),focused:h.isSelectedAttachmentActive(aa)};}},componentWillReceiveProps:function(aa){if(this.props.mentionsSource!==aa.mentionsSource)l.setMentionsSource(this.context.composerID,aa.mentionsSource);if(aa.editorState===null)l.setEditorState(this.context.composerID,t(w()));},componentDidUpdate:function(aa,ba){if(!ba.serverErrorResponse&&this._isEmptyStatusError(this.state.serverErrorResponse))this.focus();},render:function(){var aa=this.props.config&&this.props.config.attachmentsConfig[i.STATUS],ba=this.state.serverErrorResponse,ca=r.createElement(m,r.__spread({},this.props,{className:((this.state.focused?"_1mwq":'')+(this.props.config&&this.props.config.showExpandedComposer?' '+"_4c_p":'')+(aa&&aa.showProfilePic?' '+"_5bu_":'')),ref:"mentionsInput",editorState:this.state.editorState,mentionsSource:this.state.mentionsSource,onBlur:this._onBlur,onPostIntent:this._onPostIntent}));if(this._isEmptyStatusError(ba))ca=r.createElement(s,{xuiError:ba.getErrorDescription(),xuiErrorPosition:"below",xuiErrorAlignh:"left"},ca);return ca;},focus:function(){this.refs.mentionsInput.focus();},_onBlur:function(aa){l.setEditorState(this.context.composerID,aa);},_onPostIntent:function(){g.postIntended(this.context.composerID,{actorID:this.context.actorID,config:this.props.config});},_isEmptyStatusError:function(aa){return aa&&aa.getError()==1455004;}});e.exports=z;},null);
__d("ReactComposerStatusAttachmentSelector.react",["ReactComponentWithPureRenderMixin","React","ReactComposerAttachmentSelectorContainer.react","ReactComposerAttachmentType","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"ReactComposerStatusAttachmentSelector",mixins:[g],propTypes:{label:n.string},getDefaultProps:function(){return {label:k._("Status")};},render:function(){return (h.createElement(i,{attachmentID:j.STATUS,label:this.props.label,icon:l('/images/litestand/composer/icons/post.png')}));}});e.exports=o;},null);
__d("ReactComposerPostButton.react",["ReactComponentWithPureRenderMixin","React","XUIButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"ReactComposerPostButton",mixins:[g],propTypes:{disabled:m.bool,onClick:m.func,label:m.string},statics:{getButtonSize:function(){return 'medium';}},getDefaultProps:function(){return {disabled:false,label:k._("Opublikuj")};},render:function(){return (h.createElement(i,{className:"_1mf7",disabled:this.props.disabled,label:this.props.label,onClick:this.props.onClick,use:"confirm"}));}});e.exports=n;},null);
__d("ReactComposerPostButtonContainer.react",["ReactComposerActions","ReactComposerContextMixin","ReactComposerPostButton.react","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=m,o=n.PropTypes,p=m.createClass({displayName:"ReactComposerPostButtonContainer",mixins:[l,h,j(k)],propTypes:{onPostClick:o.func,config:o.object.isRequired,forceDisabled:o.bool},getDefaultProps:function(){return {forceDisabled:false};},statics:{calculateState:function(q,r,s){return {disabled:k.isPosting(q)};},getButtonSize:function(){return 'medium';}},render:function(){return (m.createElement(i,m.__spread({},this.props,{disabled:this.props.forceDisabled||this.state.disabled,className:this.props.className,onClick:this._onClick})));},_onClick:function(){g.postStarted(this.context.composerID,{actorID:this.context.actorID,config:this.props.config,targetID:this.context.targetID});}});e.exports=p;},null);
__d("ReactComposerStatusPlaceholderFooter.react",["ReactComposerAudienceSelectorContainer.react","ReactComposerFooter.react","ReactComposerFooterActions.react","ReactComposerPostButtonContainer.react","ReactComponentWithPureRenderMixin","React","LeftRight.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l,o=n.PropTypes,p=l.createClass({displayName:"ReactComposerStatusPlaceholderFooter",mixins:[k],propTypes:{config:o.object.isRequired},render:function(){var q=this.props.config.audienceXHP?l.createElement(g,{viewerIsTarget:this.props.config.targetData.viewerIsTarget,audienceXHP:this.props.config.audienceXHP}):null,r=this.props.config.showExpandedComposer?'white':'light-wash';return (l.createElement(h,{background:r},l.createElement(m,null,l.createElement("noscript",null),l.createElement("div",null,l.createElement(i,null,q,l.createElement(j,{config:this.props.config}))))));}});e.exports=p;},null);
__d("ReactComposerProfilePhoto.react",["Image.react","Link.react","React","ReactComponentWithPureRenderMixin","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i,m=l.PropTypes,n=40,o=i.createClass({displayName:"ReactComposerProfilePhoto",mixins:[j],propTypes:{src:m.string.isRequired,profileURI:m.string},render:function(){var p="_3hvt",q=i.createElement(g,{className:"_bth",src:this.props.src,height:n,width:n});return this.props.profileURI?i.createElement(h,{className:p,href:this.props.profileURI},q):i.createElement("div",{className:p},q);}});e.exports=o;},null);
__d("ReactComposerTaggerSummaryPlaceholder.react",["ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.createClass({displayName:"ReactComposerTaggerSummaryPlaceholder",mixins:[g],render:function(){return (h.createElement("div",{className:"_3o1x"}));}});e.exports=j;},null);
__d("XReactComposerStatusAttachmentBootstrapController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/react_composer\/status\/bootstrap\/",{composer_id:{type:"String",required:true},taggers_initialized:{type:"Bool",defaultValue:false}});},null);
__d("ReactComposerStatusLazyAttachment.react",["ReactComposerAttachmentActions","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerDragDropPromptLazy.react","ReactComposerStatusPlaceholderFooter.react","ReactComposerLoadableAttachmentBodyMixin","ReactComposerProfilePhoto.react","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStatusAttachmentMentionsInputContainer.react","ReactComposerTaggerStore","ReactComposerTaggerSummaryPlaceholder.react","XReactComposerStatusAttachmentBootstrapController","Bootloader","Layout.react","ReactComponentWithPureRenderMixin","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=t.Column,z=t.FillColumn,aa=v,ba=aa.PropTypes,ca=v.createClass({displayName:"ReactComposerStatusLazyAttachment",mixins:[l],propTypes:{bootload:ba.func,expanded:ba.bool,placeholder:ba.string},getDefaultProps:function(){return {placeholder:x._("O czym teraz my\u015blisz?")};},statics:{attachmentID:i.STATUS},getInitialState:function(){return {shouldInitialize:false,expanded:false};},getPlaceholderModule:function(){if(this._placeholder)return this._placeholder;var da=this;this._placeholder=v.createClass({displayName:"_placeholder",mixins:[u,n(h)],statics:{calculateState:function(ea,fa){return {isActive:h.isSelectedAttachmentActive(ea)};}},render:function(){var ea;if(this.state.isActive||this.props.expanded)ea=v.createElement(k,{background:this.props.expanded?'white':'light-wash',config:this.props.config});var fa=this.props.config.attachmentsConfig[i.STATUS],ga;if(fa.showProfilePic)ga=v.createElement(y,{className:"_c4p"},v.createElement(m,{src:fa.profilePicSrc,profileURI:fa.profileURI}));return (v.createElement("div",{onClick:da._init,onFocus:da._init,onMouseOver:da._init},v.createElement(j,{root:this,config:this.props.config,onFilesDrop:da._onFilesDrop,onURLDrop:da._onURLDrop}),v.createElement(t,null,ga,v.createElement(z,null,v.createElement(o,{config:da.props.config,mentionsSource:da.props.config.mentionsSource,onFocus:da._onFocus,placeholder:this.props.placeholder}))),v.createElement(q,null),ea));}});return this._placeholder;},shouldInitialize:function(){return this.state.shouldInitialize;},bootload:function(da){if(this.props.bootload){this.props.bootload(da);}else s.loadModules(["ReactComposerStatusAttachmentContainer.react"],da);},getBootstrapURI:function(){var da=this.context.composerID,ea=p.areTaggersSourceInitialized(da);return r.getURIBuilder().setString('composer_id',da).setBool('taggers_initialized',ea).getURI();},_init:function(){this.setState({shouldInitialize:true});},_onFocus:function(){g.selectAttachment(this.context.composerID,i.STATUS,{fromFocus:true});},_onFilesDrop:function(da){this._init();s.loadModules(["ReactComposerStatusUtils","ReactComposerPhotoUploader"],function(ea,fa){var ga=this.context.composerID;ea.uploadDroppedFiles(ga,da,new fa(ga,undefined,this.context.actorID));}.bind(this));},_onURLDrop:function(da){this._init();s.loadModules(["ReactComposerStatusUtils","ReactComposerAttachmentActions","ReactComposerAttachmentType"],function(ea,fa,ga){ea.scrapeLink(this.context.composerID,this.context.targetID,da);fa.selectAttachment(this.context.composerID,ga.STATUS);}.bind(this));}});e.exports=ca;},null);
__d("ReactComposerContextProviderMixin",["React","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes,k={childContextTypes:{actorID:j.string.isRequired,composerID:j.string.isRequired,gks:j.object.isRequired,targetID:j.string.isRequired},getChildContext:function(){return {actorID:this.props.contextConfig.actorID,composerID:this.props.contextConfig.composerID,gks:this.props.contextConfig.gks||{},targetID:this.props.contextConfig.targetID};},componentWillMount:function(){h(this.props.contextConfig.actorID);h(this.props.contextConfig.composerID);h(this.props.contextConfig.targetID);}};e.exports=k;},null);
__d("ReactComposerAsyncRequest",["ReactComposerActions","AsyncRequest"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(l,m){"use strict";h.call(this,m);this.$ReactComposerAsyncRequest0=l;j.setHandler.call(this,this.$ReactComposerAsyncRequest1.bind(this));j.setErrorHandler.call(this,this.$ReactComposerAsyncRequest2.bind(this));}k.prototype.setHandler=function(l){"use strict";this.$ReactComposerAsyncRequest3=l;return this;};k.prototype.setErrorHandler=function(l){"use strict";this.$ReactComposerAsyncRequest4=l;return this;};k.prototype.$ReactComposerAsyncRequest1=function(l){"use strict";setTimeout(function(){g.postSucceeded(this.$ReactComposerAsyncRequest0);g.reset(this.$ReactComposerAsyncRequest0);this.$ReactComposerAsyncRequest3&&this.$ReactComposerAsyncRequest3(l);}.bind(this));};k.prototype.$ReactComposerAsyncRequest2=function(l){"use strict";setTimeout(function(){g.postError(this.$ReactComposerAsyncRequest0,l);this.$ReactComposerAsyncRequest4&&this.$ReactComposerAsyncRequest4(l);}.bind(this));};e.exports=k;},null);
__d("ReactComposerPostUtils",["ReactComposerAsyncRequest","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerLoggingStore","ReactComposerPhotoStore","ReactComposerPhotoUploadStore","ReactComposerScrapedAttachmentStore","ReactComposerStatusStore","ReactComposerStore","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerVideoUploadStore","ActorURI","Arbiter","HTML","PUWApplications","URI","isNumberLike"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y={publish:function(z,aa){aa=aa||{};aa.composer_id=z;if(aa.streamNode){aa.streamStory=aa.streamNode;}else if(aa.streamMarkup)aa.streamStory=u(aa.streamMarkup).getRootNode();if(aa.contentID)aa.matchData={content_id:aa.contentID};t.inform('composer/publish',aa);},isPostButtonDisabled:function(z,aa){var ba=k.isLimitExceeded(z,aa),ca=l.isUploading(z),da=k.isRecognizing(z),ea=!!r.getVideo(z)&&o.isPosting(z);return ba||ca||da||ea;},post:function(z){var aa=z.actorID,ba=z.composerID,ca=r.getUploader(ba),da=h.getIsAttachmentSelected(ba,i.MEDIA),ea=this._getPostData(z),fa=r.getVideo(ba);if(da&&!!fa){ca&&ca.upload(fa.input,ea);return;}var ga,ha=k.getPhotos(ba),ia=l.getUploads(ba),ja=ia.filter(function(ka){return ha.some(function(la){return la.id===ka.photoID;});}).map(function(ka){return ka.photoID;});if(da&&ha.size>0){ga=new w('/media/upload/photos/composer/');Object.assign(ea,{composer_unpublished_photo:ja.toArray(),xy_tags:this._getXYTagData(ba),qn:j.getSessionID(ba),waterfallxapp:v.WEB_REACT_COMPOSER});}else ga=new w('/ajax/updatestatus.php');ga=s.create(ga,aa);new g(z.composerID,ga).setData(ea).setHandler(z.onPostSuccess).setErrorHandler(z.onPostFailure).send();},_getPostData:function(z){var aa=z.composerID,ba=z.targetID,ca=p.getTaggerData(aa,q.PEOPLE)||[],da=[],ea=[];ca.forEach(function(ra){da.push(ra.getTitle());ea.push(ra.getUniqueID());});var fa=p.getTaggerData(aa,q.ACTIVITY),ga=[],ha=[],ia=[],ja;if(fa&&fa.action&&fa.object){ga.push(fa.action.getUniqueID());ja=fa.actionIconID;if(x(fa.object.getUniqueID())){ha.push(fa.object.getUniqueID());ia.push('');}else ia.push(fa.object.getTitle());}var ka=p.getTaggerData(aa,q.LOCATION),la=ka?ka.place:null,ma=p.getTaggerData(aa,q.BACKDATE)||{},na={year:this._sanitizeDateField(ma.year),month:this._sanitizeDateField(ma.month),day:this._sanitizeDateField(ma.day),hour:this._sanitizeDateField(ma.hour),minute:this._sanitizeDateField(ma.minute)},oa=(ka&&ka.implicitLocation)?ka.implicitLocation.citypageid:null,pa,qa=o.getLegacyAudience(aa);if(qa)pa=[{value:qa}];return Object.assign({attachment:m.getAttachmentConfig(aa),composer_session_id:j.getSessionID(aa),composertags_city:oa,composertags_place:(la&&la.getUniqueID())||oa,composertags_place_name:la&&la.getTitle(),is_explicit_place:!!la,composertags_with:ea,action_type_id:ga,icon_id:ja,object_str:ia,object_id:ha,backdated_date:na,ref:j.getRef(aa),target_type:j.getTargetType(aa),text_composertags_with:da,xhpc_composerid:aa,xhpc_message:n.getMessage(aa),xhpc_message_text:n.getMessageText(aa),xhpc_targetid:ba,privacyx:o.getAudience(aa),audience:pa,is_react:true,tagger_session_id:ka&&ka.sessionID},z.contextInfo);},_sanitizeDateField:function(z){return !z||z===-1||z===0?null:z;},_getXYTagData:function(z){var aa=k.getAllTaggedFaceboxes(z);return aa.map(function(ba){return {fbid:ba.get('photoID'),x:ba.get('x'),y:ba.get('y'),name:ba.get('taggedValue'),subject:ba.get('taggedSubjectID'),from_facebox:true,source:'composerx_flyout'};});}};e.exports=y;},null);
__d("ReactComposerTimelineStore",["ReactComposerActionStore","ReactComposerMediaConfig","ReactComposerVideoUploadStore","ReactComposerPostUtils","TimelineComposer"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in g)if(g.hasOwnProperty(l))n[l]=g[l];var m=g===null?null:g.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=g;function n(){"use strict";g.call(this);}n.prototype.__onPostStarted=function(o){"use strict";j.post({actorID:o.actorID,composerID:o.composerID,contextInfo:o.config.contextInfo,targetID:o.targetID,videoUploader:i.getUploader(o.composerID)});};n.prototype.__canPost=function(o){"use strict";return !j.isPostButtonDisabled(o.composerID,h.photo.limit);};n.prototype.__cleanup=function(o){"use strict";k.destroy();};e.exports=new n();},null);
__d("ReactTimelineComposer.react",["ReactComposer.react","ReactComposerAttachmentType","ReactComposerBodyContainer.react","ReactComposerContextProviderMixin","ReactComposerHeader.react","ReactComposerMediaAttachmentSelector.react","ReactComposerMediaLazyAttachment.react","ReactComposerMLEAttachmentSelector.react","ReactComposerMLELazyAttachment.react","ReactComposerStatusAttachmentSelector.react","ReactComposerStatusLazyAttachment.react","ReactComposerTimelineStore","React","TimelineComposer","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=s,x=w.PropTypes,y=s.createClass({displayName:"ReactTimelineComposer",mixins:[j],propTypes:{contextConfig:x.object.isRequired,config:x.object.isRequired},componentDidMount:function(){r.registerComposerID(this.props.contextConfig.composerID);t.init(this.props.contextConfig.composerID);},render:function(){var z=this.props.config.attachmentsConfig[h.MLE].enabled;if(z)var aa=s.createElement(n,null),ba=s.createElement(o,{config:this.props.config});return (s.createElement(g,{className:"_s7h",hideBorders:true,loggingConfig:this.props.config.loggingConfig},s.createElement(k,{background:"light-wash",noHorizontalMargin:true,showDelimiter:false},s.createElement(p,{label:this.props.config.targetData.viewerIsTarget?v._("Status"):v._("Post")}),s.createElement(l,null),aa),s.createElement(i,null,s.createElement(q,{config:this.props.config,selected:true}),s.createElement(m,{config:this.props.config}),ba)));}});e.exports=y;},null);
__d("VideoUploadLogger",["Banzai","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){this._source=j.source;this._waterfallID=j.waterfall_id;this._targetID=j.target_id;this._delay=j.delay;this._times=[];this._isChunkedUpload=j.is_chunked_upload;}h(i,{BANZAI_GK:'videos',BANZAI_ROUTE:'video_waterfall',SOURCE_SIMPLE:'simple',SOURCE_COMPOSER:'composer',EVENT_STARTED_GENERATE_THUMBNAILS:'upload.client.started_generate_thumbnails',EVENT_FINISHED_GENERATE_THUMBNAILS:'upload.client.finished_generate_thumbnails',EVENT_SELECTED_CUSTOM_THUMBNAIL:'upload.client.selected_custom_thumbnail',EVENT_REPLACE_VIDEO:'upload.client.replace_video',EVENT_STARTED_FLOW:'upload.client.started_flow',EVENT_FINISHED_FLOW:'upload.client.finished_flow',EVENT_FAILED_FLOW:'upload.client.failed_flow',EVENT_CANCELED_FLOW:'upload.client.canceled_flow',EVENT_RESIGNED_FLOW:'upload.client.resigned_flow',EVENT_REQUESTED_UPLOADING:'upload.client.requested_uploading',EVENT_INVALIDATED_UPLOADING:'upload.client.invalidated_uploading',EVENT_STARTED_UPLOADING:'upload.client.started_uploading',EVENT_PROGRESS_UPLOADING_START_REQUEST:'upload.client.progress_uploading_start_request',EVENT_FINISHED_UPLOADING:'upload.client.finished_uploading',EVENT_CANCELED_UPLOADING:'upload.client.canceled_uploading',EVENT_ABANDONED_UPLOADING:'upload.client.abandoned_uploading',EVENT_FAILED_UPLOADING:'upload.client.failed_uploading',EVENT_STARTED_SENDING_BYTES:'upload.client.started_sending_bytes',EVENT_FINISHED_SENDING_BYTES:'upload.client.finished_sending_bytes',EVENT_CANCELED_SENDING_BYTES:'upload.client.canceled_sending_bytes',EVENT_FAILED_SENDING_BYTES:'upload.client.failed_sending_bytes',EVENT_STARTED_SENDING_CHUNK_BYTES:'upload.client.started_sending_chunk_bytes',EVENT_FINISHED_SENDING_CHUNK_BYTES:'upload.client.finished_sending_chunk_bytes',EVENT_CANCELED_SENDING_CHUNK_BYTES:'upload.client.canceled_sending_chunk_bytes',EVENT_FAILED_SENDING_CHUNK_BYTES:'upload.client.failed_sending_chunk_bytes',EVENT_TIMEOUT_SENDING_CHUNK_BYTES:'upload.client.timeout_sending_chunk_bytes',EVENT_ENCODING_START_OBSERVED:'encode.client.encoding_start_observed',EVENT_ENCODING_SUCCESS_OBSERVED:'encode.client.encoding_success_observed',EVENT_ENCODING_FAIL_OBSERVED:'encode.client.encoding_fail_observed',EVENT_RECEIVED_RESPONSE:'upload.client.received_response'});h(i.prototype,{logEvent:function(event,j){var k=h({},j);if(k.elapsed_time==null)if(event.indexOf('started')!==-1){this._times[event]=Date.now();}else if(event.indexOf('finished')!==-1){k.elapsed_time=this._computeElapsedTime(event,'finished');}else if(event.indexOf('canceled')!==-1){k.elapsed_time=this._computeElapsedTime(event,'canceled');}else if(event.indexOf('failed')!==-1)k.elapsed_time=this._computeElapsedTime(event,'failed');k.event=event;k.source=this._source;k.waterfall_id=this._waterfallID;k.target_id=this._targetID;k.is_chunked_upload=this._isChunkedUpload;g.post(i.BANZAI_ROUTE,k,{delay:this._delay});},_computeElapsedTime:function(event,j){var k=event.replace(j,'started'),l=this._times[k];return l?Date.now()-l:null;}});e.exports=i;},null);
__d("VideoUploadFileValidator",["ErrorDialog","JSXDOM","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this.$VideoUploadFileValidator0=k;}j.prototype.validate=function(k,l){"use strict";return this.$VideoUploadFileValidator1(k)&&this.$VideoUploadFileValidator2(k)&&this.$VideoUploadFileValidator3(l);};j.prototype.getValidationErrorMessage=function(k,l){"use strict";return this.$VideoUploadFileValidator4(k)||this.$VideoUploadFileValidator5(k)||this.$VideoUploadFileValidator6(l);};j.prototype.$VideoUploadFileValidator1=function(k){"use strict";var l=this.$VideoUploadFileValidator4(k);if(l){g.show(l.summary,l.description);return false;}else return true;};j.prototype.$VideoUploadFileValidator4=function(k){"use strict";if(this.$VideoUploadFileValidator0.extensions[k.getExtension()])return;var l="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",m=h.a({href:l},i._("recommended formats"));return {summary:i._("Nieobs\u0142ugiwany format pliku"),description:i._("Sorry, the file you selected is in a format that we don't support. Please use one of our {link} for video files.",[i.param("link",m)])};};j.prototype.$VideoUploadFileValidator2=function(k){"use strict";var l=this.$VideoUploadFileValidator5(k);if(l){g.show(l.summary,l.description);return false;}else return true;};j.prototype.$VideoUploadFileValidator5=function(k){"use strict";var l;if(k.getSize()===null)return;if(k.getSize()<this.$VideoUploadFileValidator0.minSize)l=this.$VideoUploadFileValidator7();if(k.getSize()>this.$VideoUploadFileValidator0.maxSize)l=this.$VideoUploadFileValidator8();return l;};j.prototype.$VideoUploadFileValidator7=function(){"use strict";var k=h.strong(null,i._("{kilobytes} kB",[i.param("kilobytes",Math.round(this.$VideoUploadFileValidator0.minSize/1024))]));return {summary:i._("Za ma\u0142y plik wideo"),description:i._("The video file you tried to upload is too small. The minimum size for a video file is {min-size}. Please try again with a larger file.",[i.param("min-size",k)])};};j.prototype.$VideoUploadFileValidator8=function(){"use strict";var k=h.strong(null,i._("{max-size} MB",[i.param("max-size",Math.round(this.$VideoUploadFileValidator0.maxSize/1024/1024))]));return {summary:i._("Za du\u017cy plik wideo"),description:i._("The video file you tried to upload is too large. The maximum size for a video file is {max-size}. Please try again with a smaller file.",[i.param("max-size",k)])};};j.prototype.$VideoUploadFileValidator3=function(k){"use strict";var l=this.$VideoUploadFileValidator6(k);if(l){g.show(l.summary,l.description);return false;}else return true;};j.prototype.$VideoUploadFileValidator6=function(k){"use strict";var l;if(!k)return;var m=k.format.duration;if(m>this.$VideoUploadFileValidator0.maxLength)l=this.$VideoUploadFileValidator9();if(m<this.$VideoUploadFileValidator0.minLength)l=this.$VideoUploadFileValidatora();if(!k.streams.primaryVideo&&k.streams.primaryAudio)l=this.$VideoUploadFileValidatorb();if(k.streams.primaryVideo.width<this.$VideoUploadFileValidator0.minWidth)l=this.$VideoUploadFileValidatorc();if(k.streams.primaryVideo.height<this.$VideoUploadFileValidator0.minHeight)l=this.$VideoUploadFileValidatord();return l;};j.prototype.$VideoUploadFileValidator9=function(){"use strict";return {summary:i._("Video Duration Too Long"),description:i._("The duration of the video you tried to upload is too long. The maximum duration for a video is {max-length} minutes. Please upload a shorter video.",[i.param("max-length",Math.round(this.$VideoUploadFileValidator0.maxLength/60))])};};j.prototype.$VideoUploadFileValidatora=function(){"use strict";return {summary:i._("Video File Too Short"),description:i._("The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} minutes. Please upload a longer video.",[i.param("min-length",Math.round(this.$VideoUploadFileValidator0.minLength/60))])};};j.prototype.$VideoUploadFileValidatorb=function(){"use strict";var k="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",l=h.a({href:k},i._("supported video format"));return {summary:i._("Nie wykryto filmu"),description:i._("It looks like you're trying to upload a file that isn't a video. Please try uploading a {supported-video-format link}",[i.param("supported-video-format link",l)])};};j.prototype.$VideoUploadFileValidatorc=function(){"use strict";return {summary:i._("Video Width Too Narrow"),description:i._("The width of the video you tried to upload is too short. The minimum width for a video is {min-width}. Please upload a wider video.",[i.param("min-width",this.$VideoUploadFileValidator0.minWidth)])};};j.prototype.$VideoUploadFileValidatord=function(){"use strict";return {summary:i._("Video Height Too Short"),description:i._("The height of the video you tried to upload is too short. The minimum height for a video is {min-height}. Please upload a taller video.",[i.param("min-height",this.$VideoUploadFileValidator0.minHeight)])};};e.exports=j;},null);
__d("VideoUploadRequest",["AsyncRequest","DOM","DTSG","FileForm","Form","VideoUploadFeatureDetector","copyProperties","emptyFunction","submitForm"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p='video';function q(r){"use strict";this.$VideoUploadRequest0=r;this.$VideoUploadRequest1=null;this.$VideoUploadRequest2=false;this.$VideoUploadRequest3=null;this.$VideoUploadRequest4=null;this.$VideoUploadRequest5=null;this.$VideoUploadRequest6=n;this.$VideoUploadRequest7=n;this.$VideoUploadRequest8=n;this.$VideoUploadRequest9=n;this.$VideoUploadRequesta=null;}q.prototype.setAllowCrossOrigin=function(r){"use strict";this.$VideoUploadRequest2=r;return this;};q.prototype.setData=function(r){"use strict";this.$VideoUploadRequest3=r;return this;};q.prototype.setWaterfallID=function(r){"use strict";this.$VideoUploadRequest4=r;return this;};q.prototype.setSuccessHandler=function(r){"use strict";this.$VideoUploadRequest6=r;return this;};q.prototype.setErrorHandler=function(r){"use strict";this.$VideoUploadRequest7=r;return this;};q.prototype.setTransportErrorHandler=function(r){"use strict";this.$VideoUploadRequest8=r;return this;};q.prototype.setUploadProgressHandler=function(r){"use strict";this.$VideoUploadRequest9=r;return this;};q.prototype.setTimeoutHandler=function(r,s){"use strict";this.$VideoUploadRequest5=r;this.$VideoUploadRequesta=s;return this;};q.prototype.setThumbnail=function(r){"use strict";this.$VideoUploadRequestb=r;return this;};q.prototype.send=function(){"use strict";if(this.$VideoUploadRequest1)throw new Error('An upload request is already in progress.');if(l.supportsXHR()){this.$VideoUploadRequest1=this.$VideoUploadRequestc();if(this.$VideoUploadRequestb){var r=new FormData();r.append('thumb',this.$VideoUploadRequestb);this.$VideoUploadRequest1.setRawData(r);}this.$VideoUploadRequest1.send();}else{this.$VideoUploadRequest1=this.$VideoUploadRequestd();this.$VideoUploadRequeste(this.$VideoUploadRequest1);}};q.prototype.sendChunk=function(r){"use strict";if(this.$VideoUploadRequest1)throw new Error('An upload request is already in progress.');var s=new FormData();s.append('video_file_chunk',r);this.$VideoUploadRequest1=this.$VideoUploadRequestc();this.$VideoUploadRequest1.setRawData(s);this.$VideoUploadRequest1.send();};q.prototype.sendFile=function(r){"use strict";if(this.$VideoUploadRequest1)throw new Error('An upload request is already in progress.');this.$VideoUploadRequest1=this.$VideoUploadRequestd();var s=r.cloneNode(false);r.name=p;h.replace(r,s);h.appendContent(this.$VideoUploadRequest1.getRoot(),r);this.$VideoUploadRequeste(this.$VideoUploadRequest1);r.name=s.name;h.replace(s,r);};q.prototype.abort=function(){"use strict";if(!this.$VideoUploadRequest1)throw new Error('There is no upload request in progress.');this.$VideoUploadRequest1.abort();this.$VideoUploadRequest1=null;};q.prototype.$VideoUploadRequestc=function(){"use strict";var r=this.__getAsyncRequest().setAllowCrossOrigin(this.$VideoUploadRequest2).setURI(this.$VideoUploadRequest0).setData(this.$VideoUploadRequest3).setRequestHeader('X_FB_VIDEO_WATERFALL_ID',this.$VideoUploadRequest4).setHandler(this.$VideoUploadRequest6).setErrorHandler(this.$VideoUploadRequest7).setTransportErrorHandler(this.$VideoUploadRequest8).setUploadProgressHandler(this.$VideoUploadRequest9);if(this.$VideoUploadRequesta)r.setTimeoutHandler(this.$VideoUploadRequest5,this.$VideoUploadRequesta);return r;};q.prototype.__getAsyncRequest=function(){"use strict";return new g();};q.prototype.$VideoUploadRequestd=function(){"use strict";var r=h.create('form',{action:this.$VideoUploadRequest0,method:'POST'});k.createHiddenInputs(m({fb_dtsg:i.getToken()},this.$VideoUploadRequest3),r);var s=new j(r,null,{allowCrossOrigin:this.$VideoUploadRequest2});s.subscribe('success',this.$VideoUploadRequestf.bind(this));s.subscribe('failure',this.$VideoUploadRequestg.bind(this));s.subscribe('progress',this.$VideoUploadRequesth.bind(this));return s;};q.prototype.$VideoUploadRequeste=function(r){"use strict";h.appendContent(document.body,r.getRoot());o(r.getRoot());};q.prototype.$VideoUploadRequestf=function(event,r){"use strict";this.$VideoUploadRequest6(r.response);};q.prototype.$VideoUploadRequestg=function(event,r){"use strict";this.$VideoUploadRequest7(r.response);};q.prototype.$VideoUploadRequesth=function(event,r){"use strict";this.$VideoUploadRequest9(r.event);};e.exports=q;},null);
__d("VideoUploadRequestContext",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){"use strict";this.reset();}g.prototype.setFile=function(h){"use strict";this.$VideoUploadRequestContext0=h;return this;};g.prototype.getFile=function(){"use strict";return this.$VideoUploadRequestContext0;};g.prototype.setMetadata=function(h){"use strict";this.$VideoUploadRequestContext1=h;return this;};g.prototype.getMetadata=function(){"use strict";return this.$VideoUploadRequestContext1;};g.prototype.setVideoID=function(h){"use strict";this.$VideoUploadRequestContext2=h;return this;};g.prototype.getVideoID=function(){"use strict";return this.$VideoUploadRequestContext2;};g.prototype.setStartOffset=function(h){"use strict";this.$VideoUploadRequestContext3=h;return this;};g.prototype.getStartOffset=function(){"use strict";return this.$VideoUploadRequestContext3;};g.prototype.setEndOffset=function(h){"use strict";this.$VideoUploadRequestContext4=h;return this;};g.prototype.getEndOffset=function(){"use strict";return this.$VideoUploadRequestContext4;};g.prototype.setPartitionStartOffset=function(h){"use strict";this.$VideoUploadRequestContext5=h;return this;};g.prototype.getPartitionStartOffset=function(){"use strict";return this.$VideoUploadRequestContext5;};g.prototype.setPartitionEndOffset=function(h){"use strict";this.$VideoUploadRequestContext6=h;return this;};g.prototype.getPartitionEndOffset=function(){"use strict";return this.$VideoUploadRequestContext6;};g.prototype.setTargetID=function(h){"use strict";this.$VideoUploadRequestContext7=h;return this;};g.prototype.getTargetID=function(){"use strict";return this.$VideoUploadRequestContext7;};g.prototype.setSource=function(h){"use strict";this.$VideoUploadRequestContext8=h;return this;};g.prototype.getSource=function(){"use strict";return this.$VideoUploadRequestContext8;};g.prototype.setWaterfallID=function(h){"use strict";this.$VideoUploadRequestContext9=h;return this;};g.prototype.getWaterfallID=function(){"use strict";return this.$VideoUploadRequestContext9;};g.prototype.setSupportsChunking=function(h){"use strict";this.$VideoUploadRequestContexta=h;return this;};g.prototype.getSupportsChunking=function(){"use strict";return this.$VideoUploadRequestContexta;};g.prototype.setSupportsFileAPI=function(h){"use strict";this.$VideoUploadRequestContextb=h;return this;};g.prototype.getSupportsFileAPI=function(){"use strict";return this.$VideoUploadRequestContextb;};g.prototype.reset=function(){"use strict";this.$VideoUploadRequestContext0=null;this.$VideoUploadRequestContext2=null;this.$VideoUploadRequestContext3=null;this.$VideoUploadRequestContext4=null;this.$VideoUploadRequestContext7=null;this.$VideoUploadRequestContext8=null;this.$VideoUploadRequestContext9=null;this.$VideoUploadRequestContexta=null;this.$VideoUploadRequestContextb=null;this.$VideoUploadRequestContext5=null;this.$VideoUploadRequestContext6=null;};e.exports=g;},null);
__d("VideoUploadPostRequestManager",["ArbiterMixin","VideoUploadRequest","copyProperties","mixin"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j(g);for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(o){"use strict";this.$VideoUploadPostRequestManager0=o;}n.prototype.getRequest=function(){"use strict";return this.$VideoUploadPostRequestManager1;};n.prototype.sendRequest=function(o){"use strict";if(this.$VideoUploadPostRequestManager1)return;var p=i(o.getMetadata(),this.__createRequestData(o)),q=p.thumb;delete p.thumb;this.$VideoUploadPostRequestManager1=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager0).setAllowCrossOrigin(true).setData(p).setThumbnail(q).setWaterfallID(o.getWaterfallID()).setSuccessHandler(this.$VideoUploadPostRequestManager2.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager3.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager3.bind(this));this.$VideoUploadPostRequestManager1.send();this.inform('request-started');};n.prototype.__createRequestData=function(o){"use strict";return {video_id:o.getVideoID(),target_id:o.getTargetID(),source:o.getSource(),waterfall_id:o.getWaterfallID(),supports_chunking:o.getSupportsChunking()};};n.prototype.__getVideoUploadRequest=function(o){"use strict";return new h(o);};n.prototype.clearRequest=function(){"use strict";this.$VideoUploadPostRequestManager1=null;};n.prototype.isInProgress=function(){"use strict";return !!this.$VideoUploadPostRequestManager1;};n.prototype.$VideoUploadPostRequestManager2=function(o){"use strict";this.inform('request-finished',{video_id:o.getPayload().video_id});this.clearRequest();};n.prototype.$VideoUploadPostRequestManager3=function(o){"use strict";this.inform('request-failed',{error_code:o.getError(),error_description:o.getErrorDescription(),error_summary:o.getErrorSummary()});this.clearRequest();};e.exports=n;},null);
__d("VideoUploadConnectionMonitor",["ArbiterMixin","Network","VideoUploadFeatureDetector","debounce","mixin"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=k(g);for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(){"use strict";this.$VideoUploadConnectionMonitor0=false;this.$VideoUploadConnectionMonitor1=[];this.$VideoUploadConnectionMonitor2=false;this.$VideoUploadConnectionMonitor3=true;this.$VideoUploadConnectionMonitor4=j(function(){this.$VideoUploadConnectionMonitor5(false);}.bind(this),2000);}o.prototype.notifyStart=function(){"use strict";if(this.$VideoUploadConnectionMonitor2)return;if(this.$VideoUploadConnectionMonitor1.length===0){this.$VideoUploadConnectionMonitor1.push(h.addListener('online',function(){this.$VideoUploadConnectionMonitor5(true);}.bind(this)));this.$VideoUploadConnectionMonitor1.push(h.addListener('offline',function(){if(this.$VideoUploadConnectionMonitor0){this.$VideoUploadConnectionMonitor4();}else{this.$VideoUploadConnectionMonitor4.reset();setTimeout(this.$VideoUploadConnectionMonitor4,2000);}}.bind(this)));}this.$VideoUploadConnectionMonitor2=true;};o.prototype.notifyProgress=function(event){"use strict";if(!this.$VideoUploadConnectionMonitor2)return;if(!event)return;if(i.supportsFullProgress()){this.$VideoUploadConnectionMonitor0=true;if(event.total&&event.loaded===event.total){this.$VideoUploadConnectionMonitor4.reset();}else this.$VideoUploadConnectionMonitor4();}};o.prototype.notifySuccess=function(){"use strict";if(!this.$VideoUploadConnectionMonitor2)return;this.reset();this.$VideoUploadConnectionMonitor5(true);};o.prototype.notifyTransportError=function(){"use strict";if(!this.$VideoUploadConnectionMonitor2)return;this.$VideoUploadConnectionMonitor2=false;this.$VideoUploadConnectionMonitor5(false);};o.prototype.notifyError=function(){"use strict";if(!this.$VideoUploadConnectionMonitor2)return;this.reset();this.$VideoUploadConnectionMonitor5(true);};o.prototype.isOnline=function(){"use strict";return this.$VideoUploadConnectionMonitor3;};o.prototype.reset=function(){"use strict";while(this.$VideoUploadConnectionMonitor1.length)this.$VideoUploadConnectionMonitor1.pop().remove();this.$VideoUploadConnectionMonitor4.reset();this.$VideoUploadConnectionMonitor2=false;};o.prototype.$VideoUploadConnectionMonitor5=function(p){"use strict";this.$VideoUploadConnectionMonitor4.reset();if(this.$VideoUploadConnectionMonitor3!==p){this.$VideoUploadConnectionMonitor3=p;if(this.$VideoUploadConnectionMonitor3){this.inform('online');}else this.inform('offline');}};e.exports=o;},null);
__d("VideoUploadReceiveRequestManager",["ArbiterMixin","VideoUploadConnectionMonitor","VideoUploadRequest","mixin","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=1363037,m=j(g);for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q,r,s,t,u,v,w,x,y){"use strict";this.$VideoUploadReceiveRequestManager0=q;this.$VideoUploadReceiveRequestManager1=r;this.$VideoUploadReceiveRequestManager2=s;this.$VideoUploadReceiveRequestManager3=t;this.$VideoUploadReceiveRequestManager4=u;this.$VideoUploadReceiveRequestManager5=v;this.$VideoUploadReceiveRequestManager6=w;this.$VideoUploadReceiveRequestManager7=x;this.$VideoUploadReceiveRequestManager8=y;this.$VideoUploadReceiveRequestManager9=0;this.$VideoUploadReceiveRequestManagera=0;this.$VideoUploadReceiveRequestManagerb=0;this.$VideoUploadReceiveRequestManagerc=null;this.$VideoUploadReceiveRequestManagerd=null;this.$VideoUploadReceiveRequestManagere=0;this.$VideoUploadReceiveRequestManagerf=new h();this.$VideoUploadReceiveRequestManagerf.subscribe('online',this.$VideoUploadReceiveRequestManagerg.bind(this));this.$VideoUploadReceiveRequestManagerf.subscribe('offline',this.$VideoUploadReceiveRequestManagerh.bind(this));}p.prototype.sendRequest=function(q){"use strict";if(this.$VideoUploadReceiveRequestManageri)return;this.$VideoUploadReceiveRequestManagere=q.getEndOffset()-q.getStartOffset();this.$VideoUploadReceiveRequestManagerj=q;this.$VideoUploadReceiveRequestManagerk();};p.prototype.cancelRequest=function(){"use strict";if(!this.$VideoUploadReceiveRequestManageri)return;this.$VideoUploadReceiveRequestManageri.abort();this.$VideoUploadReceiveRequestManagerl();};p.prototype.$VideoUploadReceiveRequestManagerl=function(){"use strict";this.$VideoUploadReceiveRequestManageri=null;this.$VideoUploadReceiveRequestManagerm=null;this.$VideoUploadReceiveRequestManager9=0;this.$VideoUploadReceiveRequestManagera=0;this.$VideoUploadReceiveRequestManagerb=0;this.$VideoUploadReceiveRequestManagerc=null;this.$VideoUploadReceiveRequestManagerd=null;this.$VideoUploadReceiveRequestManagere=0;this.$VideoUploadReceiveRequestManagerj.reset();this.$VideoUploadReceiveRequestManagerf.reset();clearTimeout(this.$VideoUploadReceiveRequestManagern);this.$VideoUploadReceiveRequestManagern=null;};p.prototype.$VideoUploadReceiveRequestManagerk=function(q){"use strict";clearTimeout(this.$VideoUploadReceiveRequestManagern);this.$VideoUploadReceiveRequestManagern=null;if(this.$VideoUploadReceiveRequestManagerj.getSupportsChunking()&&(this.$VideoUploadReceiveRequestManagerj.getStartOffset()>=this.$VideoUploadReceiveRequestManagerj.getPartitionEndOffset())){if(!q)this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManagerj.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManagerj.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager9,server_retries:this.$VideoUploadReceiveRequestManagera,upload_speed:this.$VideoUploadReceiveRequestManagerd});return;}this.$VideoUploadReceiveRequestManageri=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager0).setAllowCrossOrigin(true).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManagerj)).setWaterfallID(this.$VideoUploadReceiveRequestManagerj.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManagero.bind(this)).setUploadProgressHandler(this.$VideoUploadReceiveRequestManagerp.bind(this));this.$VideoUploadReceiveRequestManagerc=Date.now();if(this.$VideoUploadReceiveRequestManagerj.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager3){var r=this.$VideoUploadReceiveRequestManagerq(this.$VideoUploadReceiveRequestManagerj.getEndOffset()-this.$VideoUploadReceiveRequestManagerj.getStartOffset(),this.$VideoUploadReceiveRequestManagerd);this.$VideoUploadReceiveRequestManageri.setTimeoutHandler(r,this.__handleResponseTimeout.bind(this));}this.$VideoUploadReceiveRequestManageri.sendChunk(this.$VideoUploadReceiveRequestManagerr());}else this.$VideoUploadReceiveRequestManageri.sendFile(this.$VideoUploadReceiveRequestManagerj.getFile().getFileInput());this.$VideoUploadReceiveRequestManagerf.notifyStart();this.inform('request-started',{start_offset:this.$VideoUploadReceiveRequestManagerj.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManagerj.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager9,server_retries:this.$VideoUploadReceiveRequestManagera,upload_speed:this.$VideoUploadReceiveRequestManagerd});};p.prototype.__getVideoUploadRequest=function(q){"use strict";return new i(q);};p.prototype.$VideoUploadReceiveRequestManagers=function(q){"use strict";clearTimeout(this.$VideoUploadReceiveRequestManagern);this.$VideoUploadReceiveRequestManagern=setTimeout(this.$VideoUploadReceiveRequestManagerk.bind(this),q);};p.prototype.$VideoUploadReceiveRequestManagerr=function(){"use strict";if(this.$VideoUploadReceiveRequestManagerm)return this.$VideoUploadReceiveRequestManagerm;this.$VideoUploadReceiveRequestManagerm=this.$VideoUploadReceiveRequestManagerj.getFile().getChunk(this.$VideoUploadReceiveRequestManagerj.getStartOffset(),this.$VideoUploadReceiveRequestManagerj.getEndOffset());return this.$VideoUploadReceiveRequestManagerm;};p.prototype.__createRequestData=function(q){"use strict";return {video_id:q.getVideoID(),start_offset:q.getStartOffset(),source:q.getSource(),target_id:q.getTargetID(),waterfall_id:q.getWaterfallID(),supports_chunking:q.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManagerd,partition_start_offset:q.getPartitionStartOffset(),partition_end_offset:q.getPartitionEndOffset()};};p.prototype.__handleSuccessResponse=function(q){"use strict";var r=Date.now()-this.$VideoUploadReceiveRequestManagerc;r=(r===0)?1:r;var s=q.getPayload();if(s.start_offset===this.$VideoUploadReceiveRequestManagerj.getEndOffset()){var t=this.$VideoUploadReceiveRequestManagerj.getEndOffset()-this.$VideoUploadReceiveRequestManagerj.getStartOffset();this.$VideoUploadReceiveRequestManagerd=Math.floor(t/r);}else this.$VideoUploadReceiveRequestManagerd=null;this.$VideoUploadReceiveRequestManagerf.notifySuccess();this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManagerj.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManagerj.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager9,server_retries:this.$VideoUploadReceiveRequestManagera,upload_speed:this.$VideoUploadReceiveRequestManagerd});this.$VideoUploadReceiveRequestManagerj.setStartOffset(s.start_offset);this.$VideoUploadReceiveRequestManagerj.setEndOffset(s.end_offset);this.$VideoUploadReceiveRequestManageri=null;this.$VideoUploadReceiveRequestManagerm=null;this.$VideoUploadReceiveRequestManager9=0;this.$VideoUploadReceiveRequestManagera=0;this.$VideoUploadReceiveRequestManagerb=0;if(this.$VideoUploadReceiveRequestManagerj.getSupportsChunking())this.$VideoUploadReceiveRequestManagerk(true);};p.prototype.__handleServerFailureResponse=function(q){"use strict";this.$VideoUploadReceiveRequestManageri=null;this.$VideoUploadReceiveRequestManager9=0;this.$VideoUploadReceiveRequestManagerd=null;this.$VideoUploadReceiveRequestManagerb=0;this.$VideoUploadReceiveRequestManagerf.notifyError();if(this.__hasInvalidStartOffsetAndHasRetries(q.getError())){var r=q.getPayload();if(this.$VideoUploadReceiveRequestManagerj.getStartOffset()!=r.start_offset||this.$VideoUploadReceiveRequestManagerj.getEndOffset()!=r.end_offset){this.$VideoUploadReceiveRequestManagerj.setStartOffset(r.start_offset);this.$VideoUploadReceiveRequestManagerj.setEndOffset(r.end_offset);this.$VideoUploadReceiveRequestManagerm=null;}this.$VideoUploadReceiveRequestManagerk();}else if((q.isTransient()||this.$VideoUploadReceiveRequestManager8)&&++this.$VideoUploadReceiveRequestManagera<=this.$VideoUploadReceiveRequestManager2){this.$VideoUploadReceiveRequestManagers(this.$VideoUploadReceiveRequestManagert(this.$VideoUploadReceiveRequestManager7,this.$VideoUploadReceiveRequestManagera));}else this.$VideoUploadReceiveRequestManageru(q);};p.prototype.__handleResponseTimeout=function(q){"use strict";this.inform('request-timeout',{start_offset:this.$VideoUploadReceiveRequestManagerj.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManagerj.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager9,server_retries:this.$VideoUploadReceiveRequestManagera,timeout_retries:this.$VideoUploadReceiveRequestManagerb,upload_speed:this.$VideoUploadReceiveRequestManagerd});this.$VideoUploadReceiveRequestManageri.abort();this.$VideoUploadReceiveRequestManageri=null;this.$VideoUploadReceiveRequestManagerd=null;this.$VideoUploadReceiveRequestManagerf.notifyTransportError();if(++this.$VideoUploadReceiveRequestManagerb<=this.$VideoUploadReceiveRequestManager4){var r=this.$VideoUploadReceiveRequestManagerj.getEndOffset()-this.$VideoUploadReceiveRequestManagerj.getStartOffset();r=Math.floor(r/2);r=Math.max(r,this.$VideoUploadReceiveRequestManagere);var s=this.$VideoUploadReceiveRequestManagerj.getEndOffset();s=Math.min(s,this.$VideoUploadReceiveRequestManagerj.getStartOffset()+r);this.$VideoUploadReceiveRequestManagerj.setEndOffset(s);this.$VideoUploadReceiveRequestManagerm=null;this.$VideoUploadReceiveRequestManagerk();}else this.$VideoUploadReceiveRequestManagerv({error_code:1006,error_description:k._("Wyszukiwarka jest w trybie offline. Sprawd\u017a po\u0142\u0105czenie z Internetem i spr\u00f3buj ponownie."),error_summary:k._("Brak po\u0142\u0105czenia z Internetem.")});};p.prototype.__hasInvalidStartOffsetAndHasRetries=function(q){"use strict";return q===l&&++this.$VideoUploadReceiveRequestManagera<=this.$VideoUploadReceiveRequestManager2;};p.prototype.$VideoUploadReceiveRequestManagero=function(q){"use strict";this.$VideoUploadReceiveRequestManagerf.notifyTransportError();this.$VideoUploadReceiveRequestManagerd=null;this.$VideoUploadReceiveRequestManagerb=0;if(++this.$VideoUploadReceiveRequestManager9<=this.$VideoUploadReceiveRequestManager1){this.$VideoUploadReceiveRequestManageri=null;this.$VideoUploadReceiveRequestManagers(this.$VideoUploadReceiveRequestManagert(this.$VideoUploadReceiveRequestManager6,this.$VideoUploadReceiveRequestManager9));}else this.$VideoUploadReceiveRequestManageru(q);};p.prototype.$VideoUploadReceiveRequestManageru=function(q){"use strict";this.$VideoUploadReceiveRequestManagerv({error_code:q.getError(),error_description:q.getErrorDescription(),error_summary:q.getErrorSummary()});};p.prototype.$VideoUploadReceiveRequestManagerv=function(q){"use strict";this.inform('request-failed',q);this.$VideoUploadReceiveRequestManagerl();};p.prototype.$VideoUploadReceiveRequestManagerp=function(event){"use strict";this.$VideoUploadReceiveRequestManagerf.notifyProgress(event);this.inform('request-progressed',{file_size:this.$VideoUploadReceiveRequestManagerj.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManagerj.getStartOffset(),sent_bytes:event.loaded});};p.prototype.$VideoUploadReceiveRequestManagerg=function(event){"use strict";this.inform('online');this.$VideoUploadReceiveRequestManager9=0;this.$VideoUploadReceiveRequestManagerb=0;if(this.$VideoUploadReceiveRequestManagern)this.$VideoUploadReceiveRequestManagerk();};p.prototype.$VideoUploadReceiveRequestManagerh=function(event){"use strict";this.inform('offline');};p.prototype.$VideoUploadReceiveRequestManagert=function(q,r){"use strict";return Math.pow(q,r)*1000;};p.prototype.$VideoUploadReceiveRequestManagerq=function(q,r){"use strict";var s;if(r>0){s=r;}else s=10;var t=Math.floor((q/s)*this.$VideoUploadReceiveRequestManager5/100);return Math.max(t,30000);};e.exports=p;},null);
__d("VideoUploadMetadataParser",["VideoUploadFeatureDetector","fileSlice"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=4,j=4,k=5242880,l=24,m=88,n=20,o=16,p=4,q=84;function r(s,t){"use strict";this.$VideoUploadMetadataParser0=s;this.$VideoUploadMetadataParser1=t;}r.prototype.getHandler=function(){"use strict";return this.$VideoUploadMetadataParser1;};r.prototype.parse=function(){"use strict";if(!g.supportsFileReading()){this.$VideoUploadMetadataParser1(null);return;}switch(this.$VideoUploadMetadataParser0.getExtension()){case 'mp4':case 'mov':case 'm4v':case '3gp':case '3g2':break;default:this.$VideoUploadMetadataParser1(null);return;}this.$VideoUploadMetadataParser2(0,Math.min(k,this.$VideoUploadMetadataParser0.getSize()),null);};r.prototype.$VideoUploadMetadataParser2=function(s,t,u){"use strict";var v=new FileReader();v.onload=(function(event){try{var y=this.$VideoUploadMetadataParser3(new DataView(v.result),0,t-s,s,u);if(y.completed){y=this.$VideoUploadMetadataParser4(y);this.$VideoUploadMetadataParser1(y);}else this.$VideoUploadMetadataParser2(s+y.nextOffset,Math.min(this.$VideoUploadMetadataParser0.getSize(),s+y.nextOffset+k),y);}catch(x){this.$VideoUploadMetadataParser1(null);}}.bind(this));var w=this.$VideoUploadMetadataParser0.getFile();v.readAsArrayBuffer(h.call(w,s,t));};r.prototype.$VideoUploadMetadataParser5=function(s,t,u){"use strict";var v=[];for(var w=0;w<u;w++)v.push(String.fromCharCode(s.getUint8(t+w)));return v.join('');};r.prototype.$VideoUploadMetadataParser3=function(s,t,u,v,w){"use strict";if(!w)w={widths:[],heights:[],streamTypes:[],streamDurations:[]};while(t<u){var x=s.getUint32(t),y=this.$VideoUploadMetadataParser5(s,t+i,j);if(t+x>u){w.completed=false;w.nextOffset=t;if(x>u)w.nextOffset+=x;return w;}if(t+v===0&&y!=='ftyp')throw new Error('No ftyp atom');if(x===0)throw new Error('len is 0');var z=function(){var da=s.getUint32(t+n),ea=s.getUint32(t+l);return ea/da;};switch(y){case 'moov':case 'trak':case 'mdia':t+=i+j;break;case 'mvhd':w.duration=z();t+=x;break;case 'tkhd':var aa=s.getUint16(t+q),ba=s.getUint16(t+m);w.widths.push(aa);w.heights.push(ba);t+=x;break;case 'hdlr':var ca=this.$VideoUploadMetadataParser5(s,t+o,p);switch(ca){case 'vide':ca='video';break;case 'soun':ca='audio';break;case 'subt':ca='subtitle';break;default:ca='data';}w.streamTypes.push(ca);t+=x;break;case 'mdhd':w.streamDurations.push(z());t+=x;break;default:t+=x;}}w.completed=true;return w;};r.prototype.$VideoUploadMetadataParser4=function(s){"use strict";var t={streams:{},format:{}},u=s.widths.length,v=s.heights.length,w=s.streamTypes.length,x=s.streamDurations.length;if(u!==v||u!==w||u!==x)return null;for(var y=0;y<u;y++){var z={width:s.widths[y],height:s.heights[y],duration:s.streamDurations[y],type:s.streamTypes[y]};if(z.type==='video'){var aa=z.width*z.height,ba=t.streams.primaryVideo;if(!ba||(ba.width*ba.height)>aa)t.streams.primaryVideo=z;}else if(z.type==='audio'){var ca=t.streams.primaryAudio;if(!ca||ca.duration<z.duration)t.streams.primaryAudio=z;}}t.format.duration=s.duration;return t;};e.exports=r;},null);
__d("VideoUploadSession",["ArbiterMixin","AsyncRequest","VideoUploadFeatureDetector","VideoUploadFileValidator","VideoUploadLogger","VideoUploadMetadataParser","VideoUploadPostRequestManager","VideoUploadReceiveRequestManager","VideoUploadRequestContext","VideoUploadStartRequestManager","WaterfallIDGenerator","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=r(g);for(var t in s)if(s.hasOwnProperty(t))v[t]=s[t];var u=s===null?null:s.prototype;v.prototype=Object.create(u);v.prototype.constructor=v;v.__superConstructor__=s;function v(w){"use strict";this.$VideoUploadSession0=w.source;this.$VideoUploadSession1=w.target_id;this.$VideoUploadSession2=w.logging_delay;this.$VideoUploadSession3=w.silent_file_validation;this.$VideoUploadSession4=w.background_upload;this.$VideoUploadSession5=new j({minSize:w.min_size,maxSize:w.max_size,minLength:w.min_length,maxLength:w.max_length,minWidth:w.min_width,minHeight:w.min_height,extensions:w.extensions});this.$VideoUploadSession6=i.supportsChunking();this.$VideoUploadSession7=i.supportsFileAPI();if(this.$VideoUploadSession6){this.$VideoUploadSession8=w.parallel_chunk_uploads;if(this.$VideoUploadSession8){this.$VideoUploadSession9=w.parallel_chunk_upload_filesize;this.$VideoUploadSessiona=w.default_chunk_size;}}else this.$VideoUploadSession8=false;this.$VideoUploadSessionb=this.$VideoUploadSessionc(w);this.$VideoUploadSessiond=this.$VideoUploadSessione(w);if(this.$VideoUploadSession8)this.$VideoUploadSessionf=this.$VideoUploadSessione(w);this.$VideoUploadSessiong=this.$VideoUploadSessionh(w);}v.prototype.$VideoUploadSessioni=function(){"use strict";this.$VideoUploadSessionj=q.generate();this.$VideoUploadSessionk=new k({source:this.$VideoUploadSession0,waterfall_id:this.$VideoUploadSessionj,target_id:this.$VideoUploadSession1,delay:this.$VideoUploadSession2,is_chunked_upload:this.$VideoUploadSession6});};v.prototype.getLogger=function(){"use strict";if(!this.$VideoUploadSessionk)return;return this.$VideoUploadSessionk;};v.prototype.start=function(w){"use strict";this.$VideoUploadSessionl=null;this.$VideoUploadSessionm=false;this.$VideoUploadSessionn=false;this.$VideoUploadSessiono=w;this.$VideoUploadSessioni();this.__logEvent(k.EVENT_REQUESTED_UPLOADING);this.inform('upload-requested');var x=new l(this.$VideoUploadSessiono,this.$VideoUploadSessionp.bind(this));x.parse();};v.prototype.post=function(w){"use strict";this.inform('post-started',w);var x=this.__createPostRequestContext(w);this.$VideoUploadSessiong.sendRequest(x);};v.prototype.__createPostRequestContext=function(w){"use strict";var x=new o();this.__setupPostRequestContext(x,w);return x;};v.prototype.__setupPostRequestContext=function(w,x){"use strict";w.setMetadata(x).setVideoID(this.$VideoUploadSessionl).setTargetID(this.$VideoUploadSession1).setSource(this.$VideoUploadSession0).setWaterfallID(this.$VideoUploadSessionj).setSupportsChunking(this.$VideoUploadSession6).setFile(this.$VideoUploadSessiono);};v.prototype.cancel=function(){"use strict";if(!this.$VideoUploadSessionm)return;this.$VideoUploadSessionq();if(this.$VideoUploadSession4){if(!this.$VideoUploadSessionn)this.__logEvent(k.EVENT_CANCELED_UPLOADING);if(this.$VideoUploadSessionr){this.__logEvent(k.EVENT_CANCELED_FLOW);this.$VideoUploadSessionr=false;}}else{this.__logEvent(k.EVENT_CANCELED_UPLOADING);this.__logEvent(k.EVENT_CANCELED_FLOW);}};v.prototype.abandon=function(){"use strict";if(!this.$VideoUploadSessionm)return;this.$VideoUploadSessionq();if(this.$VideoUploadSession4){if(!this.$VideoUploadSessionn)this.__logEvent(k.EVENT_ABANDONED_UPLOADING);if(this.$VideoUploadSessionr){this.__logEvent(k.EVENT_CANCELED_FLOW);this.$VideoUploadSessionr=false;}}else{this.__logEvent(k.EVENT_ABANDONED_UPLOADING);this.__logEvent(k.EVENT_FAILED_FLOW);}};v.prototype.isPostInProgress=function(){"use strict";return this.$VideoUploadSessiong.isInProgress();};v.prototype.isInProgress=function(){"use strict";return this.$VideoUploadSessionm;};v.prototype.getVideoID=function(){"use strict";return this.$VideoUploadSessionl;};v.prototype.getUploadTime=function(){"use strict";return this.$VideoUploadSessions;};v.prototype.startFlow=function(){"use strict";if(!this.$VideoUploadSession4||this.$VideoUploadSessionr)return;this.__logEvent(k.EVENT_STARTED_FLOW);this.$VideoUploadSessionr=true;};v.prototype.$VideoUploadSessionp=function(w){"use strict";var x,y;if(this.$VideoUploadSession3){var z=this.$VideoUploadSession5.getValidationErrorMessage(this.$VideoUploadSessiono,w);if(z){y={error_summary:z.summary,error_description:z.description};x=false;}else x=true;}else x=this.$VideoUploadSession5.validate(this.$VideoUploadSessiono,w);if(!x){this.__logEvent(k.EVENT_INVALIDATED_UPLOADING);this.inform('upload-failed',y);return;}if(!this.$VideoUploadSession4)this.__logEvent(k.EVENT_STARTED_FLOW);this.$VideoUploadSessiont=this.$VideoUploadSession8&&(this.$VideoUploadSessiono.getSize()>=this.$VideoUploadSession9);this.$VideoUploadSessionu=false;this.$VideoUploadSessionv=false;this.$VideoUploadSessionw=0;this.$VideoUploadSessionx=this.$VideoUploadSessionw;this.$VideoUploadSessiony=0;if(this.$VideoUploadSessiont){this.$VideoUploadSessionz=Math.floor(this.$VideoUploadSessiono.getSize()/2);this.$VideoUploadSessionA=this.$VideoUploadSessionz;this.$VideoUploadSessionB=this.$VideoUploadSessionA;this.$VideoUploadSessionC=0;this.$VideoUploadSessionD=this.$VideoUploadSessiono.getSize();}else this.$VideoUploadSessionz=this.$VideoUploadSessiono.getSize();var aa=new o().setFile(this.$VideoUploadSessiono).setTargetID(this.$VideoUploadSession1).setSource(this.$VideoUploadSession0).setWaterfallID(this.$VideoUploadSessionj).setSupportsChunking(this.$VideoUploadSession6).setSupportsFileAPI(this.$VideoUploadSession7).setPartitionStartOffset(this.$VideoUploadSessionw).setPartitionEndOffset(this.$VideoUploadSessionz);this.$VideoUploadSessionm=true;this.$VideoUploadSessionb.sendRequest(aa);};v.prototype.$VideoUploadSessionc=function(w){"use strict";var x=this.$VideoUploadSession6?w.chunk_start_uri:w.start_uri,y=this.__getVideoUploadStartRequestManager(x,w.start_max_transport_retries,w.start_transport_retry_interval_base,w.skip_upload_enabled,w.skip_upload_file_size_limit);y.subscribe('request-started',this.$VideoUploadSessionE.bind(this));y.subscribe('request-finished',this.$VideoUploadSessionF.bind(this));y.subscribe('request-failed',this.$VideoUploadSessionG.bind(this));return y;};v.prototype.$VideoUploadSessione=function(w){"use strict";var x=this.$VideoUploadSession6?w.chunk_receive_uri:w.receive_uri,y=this.__getVideoUploadReceiveRequestManager(x,w);y.subscribe('request-started',this.$VideoUploadSessionH.bind(this));y.subscribe('request-progressed',this.$VideoUploadSessionI.bind(this));y.subscribe('request-finished',this.$VideoUploadSessionJ.bind(this));y.subscribe('request-failed',this.$VideoUploadSessionK.bind(this));y.subscribe('request-timeout',this.$VideoUploadSessionL.bind(this));y.subscribe('online',this.$VideoUploadSessionM.bind(this));y.subscribe('offline',this.$VideoUploadSessionN.bind(this));return y;};v.prototype.$VideoUploadSessionh=function(w){"use strict";var x=this.$VideoUploadSession6?w.chunk_post_uri:w.post_uri,y=this.__getVideoUploadPostRequestManager(x);y.subscribe('request-finished',this.__handlePostRequestFinished.bind(this));y.subscribe('request-failed',this.$VideoUploadSessionO.bind(this));return y;};v.prototype.$VideoUploadSessionE=function(event,w){"use strict";this.__logEvent(k.EVENT_STARTED_UPLOADING,{hash_time:w.hash_time,hash_exception:w.hash_exception});this.$VideoUploadSessionP=Date.now();this.inform('upload-started');};v.prototype.$VideoUploadSessionF=function(event,w){"use strict";this.__logEvent(k.EVENT_PROGRESS_UPLOADING_START_REQUEST,{transport_retries:w.transport_retries,hash_time:w.hash_time,skip_upload:(w.skip_upload)?1:null});this.$VideoUploadSessionl=w.video_id;this.$VideoUploadSessionQ=w.skip_upload;if(!w.skip_upload){var x;x=this.__createReceiveRequestContext(w,false);this.$VideoUploadSessiond.sendRequest(x);if(this.$VideoUploadSessiont){x=this.__createReceiveRequestContext(w,true);this.$VideoUploadSessionf.sendRequest(x);}}else{this.inform('upload-progressed',{start_offset:0,end_offset:this.$VideoUploadSessiono.getSize()});if(this.$VideoUploadSession4)this.__logFinishedUploading();this.inform('upload-finished',{start_offset:0,end_offset:this.$VideoUploadSessiono.getSize()});}};v.prototype.__createReceiveRequestContext=function(w,x){"use strict";if(!x)x=false;var y=new o();this.__setupReceiveRequestContext(y,w,x);return y;};v.prototype.__setupReceiveRequestContext=function(w,x,y){"use strict";var z,aa,ba,ca;if(!y){z=this.$VideoUploadSessionw;aa=this.$VideoUploadSessionz;ba=x.start_offset;ca=x.end_offset;}else{z=this.$VideoUploadSessionA;aa=this.$VideoUploadSessionD;ba=this.$VideoUploadSessionA;ca=((this.$VideoUploadSessionA+this.$VideoUploadSessiona)>=this.$VideoUploadSessionD)?this.$VideoUploadSessionD:(this.$VideoUploadSessionA+this.$VideoUploadSessiona);}w.setFile(this.$VideoUploadSessiono).setVideoID(x.video_id).setStartOffset(ba).setEndOffset(ca).setPartitionStartOffset(z).setPartitionEndOffset(aa).setTargetID(this.$VideoUploadSession1).setSource(this.$VideoUploadSession0).setWaterfallID(this.$VideoUploadSessionj).setSupportsChunking(this.$VideoUploadSession6);};v.prototype.$VideoUploadSessionG=function(event,w){"use strict";this.__logEvent(k.EVENT_FAILED_UPLOADING,{error_code:w.error_code,error_description:w.error_description,transport_retries:w.transport_retries});if(this.$VideoUploadSession4){if(this.$VideoUploadSessionr){this.__logEvent(k.EVENT_RESIGNED_FLOW);this.$VideoUploadSessionr=false;}}else this.__logEvent(k.EVENT_RESIGNED_FLOW);this.$VideoUploadSessionm=false;this.inform('upload-failed',w);};v.prototype.$VideoUploadSessionH=function(event,w){"use strict";if(!w.start_offset&&!w.transport_retries&&!w.server_retries)this.__logEvent(k.EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSessiono.getSize()});if(this.$VideoUploadSession6)this.__logEvent(k.EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:w.start_offset,total_bytes:w.end_offset-w.start_offset,transport_retries:w.transport_retries,server_retries:w.server_retries,upload_speed:w.upload_speed});};v.prototype.$VideoUploadSessionI=function(event,w){"use strict";if(w.start_offset<this.$VideoUploadSessionz){this.$VideoUploadSessionx=w.start_offset;this.$VideoUploadSessiony=w.sent_bytes;}else{this.$VideoUploadSessionB=w.start_offset;this.$VideoUploadSessionC=w.sent_bytes;}w.start_offset=this.$VideoUploadSessionx;w.sent_bytes=this.$VideoUploadSessiony;if(this.$VideoUploadSessiont){w.start_offset+=(this.$VideoUploadSessionB-this.$VideoUploadSessionA);w.sent_bytes+=this.$VideoUploadSessionC;}this.inform('upload-progressed',w);};v.prototype.$VideoUploadSessionJ=function(event,w){"use strict";if(this.$VideoUploadSession6)this.__logEvent(k.EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:w.start_offset,sent_bytes:w.end_offset-w.start_offset,transport_retries:w.transport_retries,server_retries:w.server_retries,upload_speed:w.upload_speed});if(w.start_offset<this.$VideoUploadSessionz){this.$VideoUploadSessionu=(w.end_offset>=this.$VideoUploadSessionz);}else this.$VideoUploadSessionv=(w.end_offset>=this.$VideoUploadSessionD);if(!this.$VideoUploadSession7||(this.$VideoUploadSessionu&&(!this.$VideoUploadSessiont||this.$VideoUploadSessionv))){this.__logEvent(k.EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSessiono.getSize()});this.$VideoUploadSessions=Date.now()-this.$VideoUploadSessionP;if(this.$VideoUploadSession4)this.__logFinishedUploading();this.inform('upload-finished',w);}};v.prototype.$VideoUploadSessionK=function(event,w){"use strict";this.__logEvent(k.EVENT_FAILED_UPLOADING,{error_code:w.error_code,error_description:w.error_description});if(this.$VideoUploadSession4){if(this.$VideoUploadSessionr){this.__logEvent(k.EVENT_RESIGNED_FLOW);this.$VideoUploadSessionr=false;}}else this.__logEvent(k.EVENT_RESIGNED_FLOW);this.$VideoUploadSessionm=false;this.inform('upload-failed',w);};v.prototype.$VideoUploadSessionL=function(event,w){"use strict";this.__logEvent(k.EVENT_TIMEOUT_SENDING_CHUNK_BYTES,{start_offset:w.start_offset,sent_bytes:w.end_offset-w.start_offset,transport_retries:w.transport_retries,server_retries:w.server_retries,timeout_retries:w.timeout_retries,upload_speed:w.upload_speed});};v.prototype.$VideoUploadSessionM=function(event,w){"use strict";this.inform('online',w);};v.prototype.$VideoUploadSessionN=function(event,w){"use strict";this.inform('offline',w);};v.prototype.__handlePostRequestFinished=function(event,w){"use strict";if(!w.video_id)w.video_id=this.$VideoUploadSessionl;if(!this.$VideoUploadSession4)this.__logFinishedUploading();this.__logEvent(k.EVENT_FINISHED_FLOW);this.$VideoUploadSessionr=false;this.$VideoUploadSessionm=false;this.inform('post-finished',w);};v.prototype.__logFinishedUploading=function(){"use strict";this.__logEvent(k.EVENT_FINISHED_UPLOADING,{elapsed_time:this.$VideoUploadSessions,skip_upload:(this.$VideoUploadSessionQ)?1:null});this.$VideoUploadSessionn=true;};v.prototype.$VideoUploadSessionO=function(event,w){"use strict";if(this.$VideoUploadSessionm){this.__logEvent(k.EVENT_FAILED_UPLOADING,{error_code:w.error_code,error_description:w.error_description});this.__logEvent(k.EVENT_RESIGNED_FLOW);}this.$VideoUploadSessionm=false;this.inform('post-failed',w);};v.prototype.$VideoUploadSessionq=function(){"use strict";this.$VideoUploadSessionb.cancelRequest();this.$VideoUploadSessiond.cancelRequest();if(this.$VideoUploadSessiont)this.$VideoUploadSessionf.cancelRequest();if(this.$VideoUploadSessionl){new h('/ajax/video/actions/delete').setData({fbid:this.$VideoUploadSessionl,redirect:false}).send();this.$VideoUploadSessionl=null;}};v.prototype.__logEvent=function(event,w){"use strict";var x=this.getLogger();w=w||{};if(this.$VideoUploadSessiono){w.file_size=this.$VideoUploadSessiono.getSize();w.file_extension=this.$VideoUploadSessiono.getExtension();}x.logEvent(event,w);};v.prototype.__getVideoUploadStartRequestManager=function(w,x,y,z,aa){"use strict";return new p(w,x,y,z,aa);};v.prototype.__getVideoUploadReceiveRequestManager=function(w,x){"use strict";return new n(w,x.max_transport_retries,x.max_server_retries,x.response_timeout_enabled,x.max_response_timeout_retries,x.response_timeout_speed_variation_factor_ppt,x.transport_retry_interval_base,x.server_retry_interval_base,x.receive_errors_force_retry);};v.prototype.__getVideoUploadPostRequestManager=function(w){"use strict";return new m(w);};e.exports=v;},null);
__d("VideoUploader",["ArbiterMixin","VideoUploadSession","arrayContains","mixin"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j(g);for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(o){"use strict";this.$VideoUploader0=o;this.$VideoUploader1=null;}n.prototype.getLogger=function(){"use strict";if(!this.$VideoUploader1)return;if(this.$VideoUploader1.getLogger)return this.$VideoUploader1.getLogger();};n.prototype.upload=function(o){"use strict";if(this.$VideoUploader1)return;this.$VideoUploader1=this.__getVideoUploadSession(this.$VideoUploader0);this.$VideoUploader1.subscribe(this.__getEventsWhichShouldListenFromSession(),function(event,p){return this.$VideoUploader2(event,p);}.bind(this));this.$VideoUploader1.start(o);};n.prototype.__getVideoUploadSession=function(o){"use strict";return new h(o);};n.prototype.__getEventsWhichShouldListenFromSession=function(){"use strict";return ['upload-requested','upload-started','upload-progressed','upload-finished','upload-failed','post-started','post-finished','post-failed','online','offline'];};n.prototype.postUserRequest=function(){"use strict";if(!this.$VideoUploader1)return;if(this.$VideoUploader1.startFlow)this.$VideoUploader1.startFlow();};n.prototype.post=function(o){"use strict";if(!this.$VideoUploader1)return;this.$VideoUploader1.post(o);};n.prototype.cancel=function(){"use strict";if(!this.$VideoUploader1)return;this.$VideoUploader1.cancel();this.$VideoUploader1=null;};n.prototype.abandon=function(){"use strict";if(!this.$VideoUploader1)return;this.$VideoUploader1.abandon();this.$VideoUploader1=null;};n.prototype.reset=function(){"use strict";this.$VideoUploader1=null;};n.prototype.getUploadSession=function(){"use strict";return this.$VideoUploader1;};n.prototype.isPostInProgress=function(){"use strict";return !!this.$VideoUploader1&&this.$VideoUploader1.isPostInProgress();};n.prototype.isSessionInProgress=function(){"use strict";return !!this.$VideoUploader1&&this.$VideoUploader1.isInProgress();};n.prototype.__getSession=function(){"use strict";return this.$VideoUploader1;};n.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){"use strict";return ['upload-failed','post-finished'];};n.prototype.$VideoUploader2=function(event,o){"use strict";if(i(this.__getEventsForWhichSessionShouldBeSetToNull(),event))this.$VideoUploader1=null;this.__delegateEvent(event,o);};n.prototype.__delegateEvent=function(event,o){"use strict";this.inform(event,o);};e.exports=n;},null);