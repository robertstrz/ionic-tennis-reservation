/*!CK:3933003752!*//*1434123762,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["27TpY"]); }

__d("ChatSidebarSections",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MORE_ONLINE_FRIENDS:"more_online_friends",MORE_ONLINE_COWORKERS:"more_online_coworkers",OFFLINE_USERS:"offline_users",ORDERED_LIST:"ordered_list",ORDERED_COWORKERS:"ordered_coworkers",TYPEAHEAD:"typeahead",NOW_PINNED_LIST:"now_pinned_list"};},null);
__d("ItunesPluginLogging",["Run","Bootloader"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={logPluginData:function(){g.onAfterLoad(function(){var i=b('Bootloader');i.loadModules(["ItunesDetector","AsyncRequest"],function(j,k){new k().setURI('/ajax/ads/media/log').setData({status:j.hasItunes()}).send();});});}};e.exports=h;},null);
__d("AppsDivebarDisplayController",["AppsDivebarConfigData","AsyncRequest","Arbiter","CSS","UIPagelet","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m='173',n={isVisible:function(){if(typeof(this._visible)!='undefined')return this._visible;this._visible=!g.hidden;return this._visible;},showApps:function(){this._visible=true;var o={fb_source_category:'sidebar'};k.loadFromEndpoint('GamesDivebarPagelet','pagelet_canvas_nav_content',o);j.show('apps_gripper');j.show('pagelet_canvas_nav_content');j.addClass('pagelet_canvas_nav_content',"_4woj");i.inform('AppsDivebar/show-apps');new h('/ajax/feed/apps/resize').setData({height:''+m,menu:true}).setMethod('POST').send();},hideApps:function(){this._visible=false;i.inform('AppsDivebar/hide-apps');j.hide('pagelet_canvas_nav_content');j.hide('apps_gripper');new h('/ajax/feed/apps/resize').setData({height:'1',menu:true}).setMethod('POST').send();}};e.exports=n;},null);
__d("AsyncLoader",["copyProperties","AsyncRequest","BaseAsyncLoader"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l){this._endpoint=k;this._type=l;}g(j.prototype,i.prototype);j.prototype.send=function(k,l,m,n,o){new h(k).setData({ids:l}).setHandler(n).setErrorHandler(o).setAllowCrossPageTransition(true).setMethod('GET').setReadOnly(true).send();};e.exports=j;},null);
__d("ChatContexts",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};function h(k){var l=k?k.subtext:'';return l;}function i(k,l){g[k]=l;}var j={get:function(k){if(k in g){return g[k];}else return null;},update:function(k){for(var l in k)i(l,k[l]);},getShortDisplay:function(k){return h(j.get(k));}};e.exports=j;},null);
__d("ChatHovercard",["Arbiter","AsyncLoader","Bootloader","JSLogger","debounce"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=5,m=new h('/ajax/chat/hovercard/sidebar.php','hover'),n=j.create('chat_hovercard');g.subscribe('Hovercard/dirty',m.reset.bind(m));function o(s,t){m.get(s,function(u){setTimeout(function(){if(!u){n.error('fetch_failure',{id:s});return;}i.loadModules(["Hovercard"],function(v){var w=v.getDialog(u);if(!w){n.error('no_hovercard',{id:s,endpoint:u});return;}if(s==t.getActiveID())t.showHovercard(s,w);});},0);});}function p(s,t){var u=[];function v(y){if(y>=0&&y<s.length)u.push(s[y]);}var w=s.indexOf(t);if(w>-1){v(w);for(var x=1;x<l;x++){v(w+x);v(w-x);}}return u.filter(function(y){return y;});}function q(s,t){var u=t.getActiveID();if(u){var v=s.getShowingUsers(),w=p(v,u);m.get(w,function(){});}}function r(s){var t=s.getHoverController();t.registerDefault(o);t.subscribe('hover',k(q.bind(null,s,t),100));}e.exports=r;},null);
__d("ChatOrderedListHover",["ArbiterMixin","CSS","ErrorUtils","Event","LayerHideOnBlur","Parent","copyProperties","cx","mixin","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();function r(x){h.addClass(x,'fetching');}function s(x){h.removeClass(x,'fetching');}var t=o(g);for(var u in t)if(t.hasOwnProperty(u))w[u]=t[u];var v=t===null?null:t.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=t;function w(x){"use strict";this._orderedList=x;this._root=x.getRoot();j.listen(this._root,'mouseover',this._mouseOver.bind(this));j.listen(this._root,'mouseleave',this._mouseLeave.bind(this));x.subscribe('click',q(this._hide,this));}w.prototype._mouseOver=function(event){"use strict";if(this._paused)return;var x=event.getTarget(),y=l.byClass(x,"_42fz")||l.byClass(x,"_5a58");y&&this._setActiveItem(y);};w.prototype._mouseLeave=function(event){"use strict";this._setActiveItem(null);};w.prototype._clearTimeouts=function(){"use strict";this._showTimeout&&clearTimeout(this._showTimeout);this._showTimeout=null;this._hideTimeout&&clearTimeout(this._hideTimeout);this._hideTimeout=null;};w.prototype._hide=function(){"use strict";if(this._showingDialog){this._showingDialog.hide();this._showingDialog=null;this._showingID=null;}};w.prototype._show=function(){"use strict";var x=this.getActiveID(),y=false;if(this._defaultHandler){y=true;i.applyWithGuard(this._defaultHandler,{},[x,this]);}if(y&&this._showingID!=this.getActiveID())r(this._activeItem);};w.prototype._setActiveItem=function(x){"use strict";if(x!=this._activeItem){this._clearTimeouts();this._activeItem&&s(this._activeItem);this._activeItem=null;var y=x?0:100;this._hideTimeout=p(function(){if(this.getActiveID()!=this._showingID)this._hide();}.bind(this),y);if(x){this._activeItem=x;var z=y+500;this._showTimeout=p(function(){this._show();}.bind(this),z);this.inform('hover');}else this.inform('leave');}};w.prototype.registerDefault=function(x){"use strict";this._defaultHandler=x;};w.prototype.getActiveID=function(){"use strict";var x=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return x||null;};w.prototype.showHovercard=function(x,y){"use strict";if(x==this.getActiveID()&&x!=this._showingID){this._clearTimeouts();s(this._activeItem);this._hide();this._showingDialog=y;this._showingID=x;var z=y.subscribe('mouseenter',this._setActiveItem.bind(this,this._activeItem)),aa=y.subscribe('mouseleave',function(){z.unsubscribe();this._setActiveItem(null);}.bind(this)),ba=y.subscribe('hide',function(){this.inform('hovercard_hide');z.unsubscribe();aa.unsubscribe();ba.unsubscribe();}.bind(this));y.enableBehavior(k).setContext(this._activeItem).setPosition('left').show();this.inform('hovercard_show');}};m(w.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_showingDialog:null,_showingID:null,_defaultHandler:null});e.exports=w;},null);
__d("ChatSidebarItem.react",["AvailableListConstants","XUIBadge.react","ChatConfig","ChatSidebarConstants","Image.react","Link.react","ReactComponentWithPureRenderMixin","React","SplitImage.react","TextWithEmoticons.react","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=n,t=s.PropTypes,u=9,v=n.createClass({displayName:"ChatSidebarItem",mixins:[m],propTypes:{image:t.string,images:t.array,birthday:t.bool,context:t.string,detailedStatus:t.string,href:t.string,imageSize:t.number,name:t.string,onClick:t.func,status:t.number,statusTime:t.string,unreadCount:t.number,nowData:t.object},render:function(){var w=(("_55ln")+(this.props.context?' '+"_55lo":'')+(this.props.unreadCount?' '+"_5bom":''));return (n.createElement(l,{className:w,href:{url:this.props.href},onClick:this.props.onClick,rel:"ignore"},n.createElement("div",{className:"_55lp"},n.createElement("div",{className:"_56p9"},n.createElement(o,{size:this.props.imageSize||j.IMAGE_SIZE,srcs:this.props.image||this.props.images}),n.createElement("div",{className:"_568w"})),n.createElement("div",{className:"_5bon"},this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()),n.createElement("div",{className:"_55lr"},n.createElement(p,{renderEmoticons:true,renderEmoji:true,text:this.props.name})),n.createElement("div",{className:"_55ls"},this.props.context))));},renderUnreadCount:function(){var w=this.props.unreadCount;if(!w||!i.get('unread_count_enabled'))return null;return (n.createElement(h,{count:w,maxcount:u,type:"regular"}));},renderStatus:function(){if(i.get('badger_www_nub')&&this.props.nowData&&this.props.nowData.icon&&this.props.nowData.background_color){var w=this.props.nowData,x={backgroundColor:'#'+w.background_color,borderRadius:'6px',height:'16px',padding:'4px',width:'16px'},y=w.icon.filepath?'/'+w.icon.filepath:w.icon.uri;return (n.createElement("div",{className:"_568z"},n.createElement(k,{className:"_568_",src:y,style:x})));}var z=this.getStatusSrc();if(!z&&!this.props.statusTime)return null;var aa=z?n.createElement(k,{className:"_568_",src:z}):null,ba=true,ca=this.props.unreadCount||0;if(ca>0&&i.get('unread_replace_presence'))return null;if(i.get('remove_lat')){aa=this.props.statusTime?null:aa;ba=false;}else if(i.get('unread_replace_lat')&&ca>0){aa=this.props.statusTime?null:aa;ba=false;}return (n.createElement("div",{className:"_568z"},ba?this.renderLastActiveTime():null,this.renderDetailedPresence(),aa));},renderLastActiveTime:function(){return (n.createElement("div",{className:"_568-"},this.props.statusTime));},renderDetailedPresence:function(){if(i.get('remove_surface')){return null;}else if(i.get('unread_replace_surface')){var w=this.props.unreadCount||0;if(w>0)return null;}return (n.createElement("div",{className:"_5t35"},this.props.detailedStatus));},renderBirthday:function(){if(!this.props.birthday)return null;var w=r('/images/gifts/icons/cake_icon.png');return (n.createElement(k,{className:"_5dv3",src:w}));},getStatusSrc:function(){switch(this.props.status){case g.ACTIVE:return r('/images/litestand_classic/sidebar/online.png');case g.MOBILE:return r('/images/litestand_classic/sidebar/pushable.png');}return null;}});e.exports=v;},null);
__d("ChatSidebarThread.react",["ChatSidebarItem.react","ChatOpenTab","WebMessengerPermalinkConstants","React","MercuryThreadMetadataRawRenderer","Tooltip.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j,o=n.PropTypes,p=j.createClass({displayName:"ChatSidebarThread",getInitialState:function(){return {maxNumParticipantsToRender:10};},propTypes:{image:o.string,imageSize:o.number,name:o.string,participants:o.array,numOtherParticipants:o.number,referrer:o.string,status:o.number,threadFBID:o.string,unreadCount:o.number},_renderParticipants:function(){var s=[],t=this.props.participants.length,u=this.props.numOtherParticipants,v=Math.min(this.state.maxNumParticipantsToRender,t);if(u-v==1)v--;for(var w=0;w<v;w++){var x=this.props.participants[w];s.push(j.createElement("li",{key:x.id},x.name));}if(v<u)s.push(j.createElement("li",{key:"more-participants"},m._("and {num} more...",[m.param("num",u-v)])));return (j.createElement("ul",null,s));},render:function(){var s=this.props.name,t=q(this.props.threadFBID,this.props.participants,this.props.numOtherParticipants),u=s?t:undefined,v=i.getURIPathForThreadID(this.props.threadFBID),w=r(this.props.image,this.props.participants),x=s?s:t;return (j.createElement(l,{display:"block",position:"above",tooltip:this._renderParticipants()},j.createElement(g,{context:u,href:v,imageSize:this.props.imageSize,image:this.props.image,images:w,name:x,onClick:this._openTab,referrer:this.props.referrer,status:this.props.status,unreadCount:this.props.unreadCount})));},_openTab:function(s){s.preventDefault();h.openThread(this.props.threadFBID,this.props.referrer);}});function q(s,t,u){return k.renderRawParticipantList(s,t,u,{names_renderer:k.renderShortNames});}function r(s,t){if(s)return null;return t.map(function(u){return u.image_src;});}e.exports=p;},null);
__d("ChatSidebarGroupThreadsGroup.react",["ChannelConnection","ChatSidebarThread.react","ChatSidebarSections","ChatSidebarConstants","PresencePrivacy","PresenceStatus","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=m,p=o.PropTypes,q=m.createClass({displayName:"ChatSidebarGroupThreadsGroup",propTypes:{groups:p.array.isRequired},render:function(){return (m.createElement("ul",null,this.props.groups.map(this._renderGroup)));},_renderGroup:function(r){var s=r.mercury_thread.participants,t=g.disconnected(),u=k.isUserOffline();return (m.createElement("li",{className:(("_42fz")+(t?' '+"_570-":'')+(u?' '+"_1dcc":'')),"data-id":r.uid,key:r.uid},m.createElement(h,{image:r.mercury_thread.image_src,imageSize:j.getImageSize(),name:r.mercury_thread.name,participants:r.participants_to_render,numOtherParticipants:s.length-1,referrer:i.ORDERED_LIST,status:l.getGroup(s),threadFBID:r.uid})));}});e.exports=q;},null);
__d("ChatSidebarLog",["AsyncSignal","Banzai","BanzaiLogger","Bootloader","ChatPerfEvent","csx","DOM","ErrorUtils","ModuleDependencies","JSLogger","Run","copyProperties","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=p.create('chat_sidebar_load'),u=null,v=false,w=(Math.random()*2147483648|0).toString(36),x=Date.now(),y=null,z=false;q.onLoad(function(){v=true;});try{d(['ChatSidebar'],function(ga){u=ga;});}catch(aa){t.warn('exception',{reason:aa.toString()});}function ba(ga,ha){if(ga&&ga.length>ha)return ga[ha];return null;}function ca(ga){if(ga.name=='SyntaxError'||/syntaxerror/i.test(ga.message))z=true;}function da(){if(!y)y=i.create(r({retry:true},h.VITAL));return y;}function ea(ga){setTimeout(function(){var ha=o.getMissing('ChatSidebar'),ia=j.getErrorUrls(),ja=j.getLoadingUrls(),ka=[];for(var la in ja)ka.push({url:la,time:ja[la]});ka.sort(function(sa,ta){return ta.time-sa.time;});var ma={};for(var na=0,oa=ka.length;na<oa;na++)ma[ka.url]=ka.time;var pa={start_gap:x-j.getStartTime(),page_loaded:v,page_id:w,timeout:ga,missing_total:ha?ha.length:null,module_1:ba(ha,0),module_2:ba(ha,1),module_3:ba(ha,2),error_url_total:ia.length,error_url_1:ba(ia,0),error_url_2:ba(ia,1),error_url_3:ba(ia,2),loading_url_total:ka.length,loading_url_1:ba(ka,0)?ba(ka,0).url:null,loading_time_1:ba(ka,0)?ba(ka,0).time:null,loading_url_2:ba(ka,1)?ba(ka,1).url:null,loading_time_2:ba(ka,1)?ba(ka,1).time:null,loading_url_3:ba(ka,2)?ba(ka,2).url:null,loading_time_3:ba(ka,2)?ba(ka,2).time:null},qa=null;if(!u){t.warn('require_'+ga,{missing:ha});qa='require';}if(u&&!u.isInitialized()){t.warn('init_'+ga,{missing:ha});qa='init';}if(u&&u.isInitialized()&&u.isEnabled()&&u.shouldShowSidebar()){var ra=m.scry(u.getRoot(),"._42fz");if(!ra||ra.length===0){t.warn('render_'+ga,{missing:ha});qa='render';}}if(qa){pa.symptom=qa;new g('/ajax/chat/sidebar_load.php',pa).send();da().log('SidebarLoadFailureLoggerConfig',{start_gap:x-j.getStartTime(),page_loaded:v,page_id:w,timeout:ga,symptom:qa,has_syntax_error:z});}},ga);}var fa={start:function(){this._serverStartTime=s();n.addListener(ca);ea(5000);ea(10000);ea(15000);ea(30000);ea(60000);},logRendered:function(){if(this._loggedPerformance)return;var ga=s();if(this._serverStartTime)i.log('ChatPerfLoggerConfig',{event:k.SIDEBAR_FROM_SERVER_TTI,duration:ga-this._serverStartTime});var ha=u&&u.getInitTime();if(ha)i.log('ChatPerfLoggerConfig',{event:k.SIDEBAR_FROM_CLIENT_TTI,duration:ga-ha});this._loggedPerformance=true;}};e.exports=fa;},null);
__d("ChatSidebarUser.react",["ChatOpenTab","ChatSidebarItem.react","WebMessengerPermalinkConstants","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=k,m=l.PropTypes,n=k.createClass({displayName:"ChatSidebarUser",mixins:[j],propTypes:{birthday:m.bool,detailedStatus:m.string,image:m.string,imageSize:m.number,name:m.string,sectionName:m.string.isRequired,slot:m.number,status:m.number,statusTime:m.string,unreadCount:m.number,userID:m.string.isRequired,nowData:m.object},_openTab:function(event){g.openUserTab(this.props.userID,this.props.sectionName,{global_slot:this.props.slot});return event.preventDefault();},render:function(){var o=i.getURIPathForIDOrVanity(this.props.userID);return (k.createElement(h,{onClick:this._openTab,href:o,imageSize:this.props.imageSize,image:this.props.image,name:this.props.name,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,detailedStatus:this.props.detailedStatus,context:this.props.context,unreadCount:this.props.unreadCount,nowData:this.props.nowData}));}});e.exports=n;},null);
__d("ChatUnreadCount",["ArbiterMixin","ChatConfig","Map","MercuryIDs","MercurySingletonMixin","MercuryThreadInformer","MercuryThreads","MercuryUnreadState","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=o(g);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t){"use strict";this.$ChatUnreadCount0=t;this.$ChatUnreadCount1=l.getForFBID(t);this.$ChatUnreadCount2=m.getForFBID(t);this.$ChatUnreadCount3=new i();this.$ChatUnreadCount4=n.getForFBID(t);this.setupSubscriptions();}s.prototype.getUnreadCountForUID=function(t){"use strict";if(!h.get('unread_count_enabled')||!t)return null;var u=j.getThreadIDFromUserID(t);if(!this.$ChatUnreadCount4.getIsThreadUnread(u)){this.$ChatUnreadCount3["delete"](t);return 0;}var v=this.$ChatUnreadCount2.getOrFetch(u),w=v&&v.unread_count;this.$ChatUnreadCount3.set(t,w);return w;};s.prototype.setupSubscriptions=function(){"use strict";if(!h.get('unread_count_enabled'))return;this.$ChatUnreadCount1.subscribe('threads-updated',function(t,u){var v=Object.keys(u).some(function(w){var x=j.getUserIDFromThreadID(w);if(x===null)return false;var y=this.$ChatUnreadCount3.get(x)||0;return this.getUnreadCountForUID(x)!==y;}.bind(this));if(v)this.inform('unread-count-changed');}.bind(this));this.$ChatUnreadCount1.subscribe('unread-updated',function(){return this.inform('unread-count-changed');}.bind(this));};Object.assign(s,k);e.exports=s;},null);
__d("ChatSidebarUserGroup.react",["AvailableList","AvailableListConstants","ChannelConnection","ChatContexts","ChatSidebarSections","ChatSidebarUser.react","LastMobileActiveTimes","PresencePrivacy","PresenceStatus","React","ShortProfiles","SubscriptionsHandler","WorkModeConfig","cx","shield","ChatUnreadCount"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=b('ChatUnreadCount').get(),w=p,x=w.PropTypes,y=Object.keys(k).map(function(aa){return k[aa];}),z=p.createClass({displayName:"ChatSidebarUserGroup",propTypes:{ids:x.array.isRequired,sectionName:x.oneOf(y).isRequired,nowDataFetcher:x.func},getInitialState:function(){return {userData:[]};},componentWillMount:function(){this.componentWillReceiveProps(this.props);this._subscriptions=new r();this._subscriptions.addSubscriptions(g.subscribe(h.ON_AVAILABILITY_CHANGED,u(this.forceUpdate,this)),v.subscribe('unread-count-changed',u(this.forceUpdate,this)));},componentWillUnmount:function(){this._subscriptions.release();},componentWillReceiveProps:function(aa){q.getMulti(aa.ids,function(ba){var ca=aa.ids.map(function(da){return ba[da];});this.setState({userData:ca});}.bind(this));},_renderProfile:function(aa,ba){var ca=s.is_work_user;if(aa.id===0||!(aa.is_friend||ca))return null;var da=o.get(aa.id),ea=(da!==h.ACTIVE)?m.getShortDisplay(aa.id):null,fa=(da===h.ACTIVE)?o.getDetailedActivePresence(aa.id):null,ga=i.disconnected(),ha=!n.allows(aa.id),ia=j.getShortDisplay(aa.id),ja=this.props.nowDataFetcher?this.props.nowDataFetcher(aa.id):null;return (p.createElement("li",{className:(("_42fz")+(ia?' '+"_52zj":'')+(ga?' '+"_570-":'')+(ha?' '+"_1dcc":'')),"data-id":aa.id,key:aa.id},p.createElement(l,{birthday:aa.is_birthday,context:ia,detailedStatus:fa,image:aa.thumbSrc,imageSize:this.props.imageSize,name:aa.name,sectionName:this.props.sectionName,slot:ba,status:da,statusTime:ea,userID:aa.id,nowData:ja,unreadCount:v.getUnreadCountForUID(aa.id)})));},render:function(){return (p.createElement("ul",p.__spread({},this.props),this.state.userData.map(this._renderProfile)));}});e.exports=z;},null);
__d("XNowQueryController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/status\/sidebar\/",{});},null);
__d("NowPoller",["Arbiter","Poller","XNowQueryController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=5000;function k(n,o){"use strict";this.$NowPoller0=n;this.$NowPoller1=new h({interval:j,setupRequest:this.$NowPoller2.bind(this),clearOnQuicklingEvents:false,dontStart:true});this.$NowPoller3=o;this.$NowPoller4=null;}k.prototype.$NowPoller2=function(n){"use strict";this.$NowPoller5=Date.now();n.setHandler(this.$NowPoller6.bind(this)).setErrorHandler(this.$NowPoller7.bind(this)).setOption('suppressErrorAlerts',true).setOption('retries',1).setData({section:this.$NowPoller3,includeusers:this.$NowPoller4}).setURI(i.getURIBuilder().getURI()).setAllowCrossPageTransition(true);};k.prototype.$NowPoller6=function(n){"use strict";var o=n.getPayload();this.$NowPoller0({pinnedfriends:o.pinned,topfriends:o.top_friends,mostrecent:o.most_recent,self:o.self});};k.prototype.$NowPoller7=function(n){"use strict";};k.prototype.setIncludeUsers=function(n){"use strict";this.$NowPoller4=n;};k.prototype.start=function(){"use strict";setTimeout(this.$NowPoller1.start.bind(this.$NowPoller1),0);};k.prototype.restart=function(){"use strict";if(this.$NowPoller1.isMuted()){this.$NowPoller1.resume();this.forceUpdate();}};k.prototype.stop=function(){"use strict";this.$NowPoller1.mute();};k.prototype.forceUpdate=function(){"use strict";this.$NowPoller1.request();};var l,m;k.start=function(){if(!l){l=new k(function(n){g.inform('Now/updatedData',n);},'all');if(m)l.setIncludeUsers(m);l.start();}};k.setIncludeUsers=function(n){m=n;if(l)l.setIncludeUsers(m);};k.forceUpdate=function(){if(l)l.forceUpdate();};k.listenForUpdate=function(n){g.subscribe('Now/updatedData',function(o,p){n(p);});};e.exports=k;},null);
__d("ChatSidebarOrderedList.react",["Animation","AsyncDialog","AsyncRequest","BanzaiODS","ChatQuietLinks","ChatSidebarConstants","ChatSidebarGroupThreadsGroup.react","ChatSidebarLog","ChatSidebarSections","ChatSidebarUserGroup.react","NowPoller","PresencePrivacy","ReactComponentWithPureRenderMixin","React","Scroll","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y='chat_sidebar_visibility',z=t,aa=z.PropTypes;j.setEntitySample(y,.0001);var ba=t.createClass({displayName:"ChatSidebarOrderedList",propTypes:{topUsers:aa.array.isRequired,availableUsers:aa.array.isRequired,isSidebar:aa.bool.isRequired,scrollContainer:aa.object,groups:aa.array.isRequired,showNow:aa.bool},getInitialState:function(){return {nowData:{}};},componentDidMount:function(){n.logRendered&&n.logRendered();k.nukeLinks(t.findDOMNode(this));this._logFriendCount();if(this.props.showNow){q.listenForUpdate(function(da){return this.setState({nowData:da});}.bind(this));q.start();}},_scrollToSeparator:function(da){if(!this.props.scrollContainer)return;var ea=this.props.scrollContainer.scrollHeight,fa=this.props.scrollContainer.clientHeight,ga=u.getTop(this.props.scrollContainer),ha=Math.min(da.offsetTop,ea-fa);if(ga!==ha){var ia=Math.abs(ha-ga)/this.props.scrollContainer.clientHeight*500;new g(this.props.scrollContainer).to('scrollTop',ha).ease(g.ease.end).duration(ia).go();}},_openBlackbirdSettings:function(){var da=new v('/ajax/chat/privacy/settings_dialog.php').addQueryData({ref:'whitelist_separator'});h.send(new i(da));},_renderOfflineSection:function(){var da=l.getImageSize(this.props.isSidebar),ea=this.props.topUsers.filter(function(ga){return !r.allows(ga);});ea.splice(-2);var fa=(t.createElement("a",{href:"#",onClick:this._openBlackbirdSettings},x._("Edytuj")));return [t.createElement("div",{key:"users_separator1",className:"_554m"},t.createElement("div",{className:"_554o"},t.createElement("div",{className:"_554n"},t.createElement("span",{className:"_554p"},x._("WI\u0118CEJ ZNAJOMYCH")),t.createElement("div",{className:"_554q"},t.createElement("span",{className:"_554r"}))))),t.createElement("div",{key:"users_separator2",className:"_554m blackbirdWhitelist"},t.createElement("div",{className:"_554o"},t.createElement("div",{className:"_554n"},t.createElement("div",{className:"_5v-d"},t.createElement("span",{className:"_554t"},x._("Ci znajomi nie widz\u0105 Ci\u0119 na czacie. {=link}",[x.param("=link",fa)])))))),t.createElement(p,{key:o.OFFLINE_USERS,sectionName:o.OFFLINE_USERS,ids:ea,imageSize:da})];},_renderOnlineSection:function(){if(this.props.availableUsers.length===0)return null;var da=l.getImageSize(this.props.isSidebar);return [t.createElement("div",{key:"users_separator",ref:"usersSeparator",onClick:function(){return this._scrollToSeparator(t.findDOMNode(this.refs.usersSeparator));}.bind(this),className:"_554m moreOnlineFriends"},t.createElement(ca,null,x._("{MORE ONLINE FRIENDS} ({=count})",[x.param("MORE ONLINE FRIENDS",x._("WI\u0118CEJ ZNAJOMYCH")),x.param("=count",this.props.availableUsers.length)]))),t.createElement(p,{key:o.MORE_ONLINE_FRIENDS,sectionName:o.MORE_ONLINE_FRIENDS,ids:this.props.availableUsers,imageSize:da})];},_renderGroupsSection:function(){if(this.props.groups.length===0)return null;return [t.createElement("div",{key:"group_separator",ref:"groupSeparator",onClick:function(){return this._scrollToSeparator(t.findDOMNode(this.refs.groupSeparator));}.bind(this),className:"_554m moreOnlineFriends"},t.createElement(ca,null,x._("KONWERSACJE GRUPOWE"))),t.createElement(m,{key:"group_threads_section",groups:this.props.groups})];},render:function(){var da=l.getImageSize(this.props.isSidebar),ea=this.props.topUsers;if(r.getVisibility()==r.ONLINE)ea=this.props.topUsers.filter(function(la){return r.allows(la);});var fa=(r.getOnlinePolicy()==r.ONLINE_TO_WHITELIST&&r.getVisibility())?this._renderOfflineSection():this._renderOnlineSection(),ga=null,ha=null;if(this.props.showNow&&this.state.nowData){var ia=ea,ja=[];if(this.state.nowData.pinnedfriends)ja=this.state.nowData.pinnedfriends.map(function(la){return la.user_id;});if(this.state.nowData.topfriends)ea=this.state.nowData.topfriends.map(function(la){return la.user_id;});ia=ia.filter(function(la){return (ja.indexOf(la)==-1);});q.setIncludeUsers(ia);ia=ia.filter(function(la){return (ea.indexOf(la)==-1);});ia.forEach(function(la){ea.push(la);});var ka=function(la){var ma=null;if(this.state.nowData.pinnedfriends)this.state.nowData.pinnedfriends.forEach(function(na){if(na.user_id==la)ma=na;});if(this.state.nowData.topfriends)this.state.nowData.topfriends.forEach(function(na){if(na.user_id==la)ma=na;});return ma;}.bind(this);ga=t.createElement("div",null,t.createElement(ca,null,x._("PRZYPI\u0118CI ZNAJOMI")),t.createElement(p,{ids:ja,imageSize:da,key:o.NOW_PINNED_LIST,nowDataFetcher:ka,sectionName:o.NOW_PINNED_LIST}));ha=t.createElement("div",null,t.createElement(ca,null,x._("NAJLEPSI ZNAJOMI")),t.createElement(p,{key:o.ORDERED_LIST,ids:ea,imageSize:da,nowDataFetcher:ka,sectionName:o.ORDERED_LIST}));}else ha=t.createElement(p,{key:o.ORDERED_LIST,ids:ea,imageSize:da,sectionName:o.ORDERED_LIST});return (t.createElement("li",null,ga,ha,this._renderGroupsSection(),fa));},_logFriendCount:function(){this._logTimeout=setTimeout(function(){j.bumpEntityKey(y,this.props.availableUsers.length===0?'state_list_empty':'state_list_mounted');}.bind(this),5000);}}),ca=t.createClass({displayName:"ChatSidebarSeparator",mixins:[s],render:function(){return (t.createElement("div",{className:"_554o"},t.createElement("div",{className:"_554n"},t.createElement("span",{className:"_554p"},this.props.children),t.createElement("div",{className:"_554q"},t.createElement("span",{className:"_554r"})))));}});e.exports=ba;},null);
__d("ChatOrderedList",["Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","CSS","ChatConfig","ChatOptions","ChatHovercard","ChatOrderedListHover","ChatSidebarConstants","ChatSidebarInboxConfig","ChatSidebarOrderedList.react","ChatSortUsers","ChatVisibility","DOM","DataStore","Event","JSLogger","OrderedFriendsList","Parent","PresencePrivacy","PresenceStatus","React","createObjectFrom","csx","debounceAcrossTransitions","mixin","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){b.__markCompiled&&b.__markCompiled();var ia=null,ja,ka=ga(h);for(var la in ka)if(ka.hasOwnProperty(la))na[la]=ka[la];var ma=ka===null?null:ka.prototype;na.prototype=Object.create(ma);na.prototype.constructor=na;na.__superConstructor__=ka;function na(oa,pa){"use strict";this._isSidebar=oa;this._root=pa;this._isVisible=false;this._excludedIds={};this._numTopFriends=5;this._groups=[];this._hoverController=null;this._orderedList=u.find(this._root,'.fbChatOrderedList');this._scrollableOrderedList=z.byClass(this._root,'scrollableOrderedList');this._scrollableArea=z.byClass(this._root,'scrollable');if(this._isSidebar)new n(this);g.subscribe(x.DUMP_EVENT,function(qa,ra){ra.chat_lists=ra.chat_lists||{sorted_list:this.getCachedSortedList(),ordered_list:y.getList(),available_list:na.getAvailableList(this._excludedIds),excluded_list:this._excludedIds};}.bind(this));aa.subscribe('privacy-user-presence-changed',ha(this._render,this));i.subscribe(j.ON_AVAILABILITY_CHANGED,ha(this._render,this));}na.prototype.getShowingUsers=function(){"use strict";return u.scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode);};na.prototype.getUserForNode=function(oa){"use strict";return v.get(oa,'id')||v.get(oa,'serverthreadid');};na.prototype.getHoverController=function(){"use strict";if(!this._hoverController)this._hoverController=new o(this);return this._hoverController;};na.prototype.getItemHeight=function(){"use strict";return p.getItemHeight(this._isSidebar);};na.prototype.getRoot=function(){"use strict";return this._root;};na.prototype.getSortedList=function(oa){"use strict";return na.getSortedList(oa||this._excludedIds,this._numTopFriends);};na.prototype.getCachedSortedList=function(oa){"use strict";if(ia==null)ia=this.getSortedList(oa);return ia;};na.prototype.hide=function(){"use strict";if(!this._isVisible)return;this._isVisible=false;k.hide(this._scrollableOrderedList||this._root);this.inform('hide');};na.prototype.setNumTopFriends=function(oa){"use strict";var pa=na.getGroups(),qa=oa-pa.length;if(qa>l.get('min_top_friends'))oa=qa;if(oa!==this._numTopFriends||pa.length!==this._groups.length){this._groups=pa;this._numTopFriends=oa;this._render();}};na.prototype._renderOrderedList=function(){"use strict";if(!this._isVisible||ja)return;var oa=na.getSortedList({},this._numTopFriends),pa=na.getAvailableList(da(oa));pa.sort(s.sortMobile);var qa=q.component;if(qa){ca.render(ca.createElement(qa,{showCount:q.show_count,showPresence:q.show_presence,threadCount:this._numTopFriends}),this._orderedList);}else ca.render(ca.createElement(r,{availableUsers:pa,isSidebar:this._isSidebar,scrollContainer:this._scrollContainer,topUsers:oa,groups:na.getGroups(),showNow:l.get('badger_www_nub')}),this._orderedList);this.inform('render');};na.prototype._render=function(){"use strict";this._render=fa(this._renderOrderedList.bind(this),300);this._render();};na.prototype.show=function(){"use strict";if(this._isVisible)return;this._isVisible=true;k.show(this._scrollableOrderedList||this._root);this._render();this.inform('show');};na.prototype.isVisible=function(){"use strict";return this._isVisible;};na.prototype.setScrollContainer=function(oa){"use strict";if(u.contains(oa,this._root))this._scrollContainer=oa;};na.getGroups=function(){"use strict";if(!m.getSetting('hide_groups')){return y.getGroups();}else return [];};na.getSortedList=function(oa,pa){"use strict";var qa=y.getList().filter(function(ta){return !(ta in oa)&&aa.getFriendVisibility(ta)!==aa.BLACKLISTED;});if(!t.isOnline())if(aa.getOnlinePolicy()===aa.ONLINE_TO_WHITELIST)qa=this._filterByWhitelist(qa);var ra=qa.slice(0,pa);if(ra.length===pa){var sa=na.getAvailableList(ra.concat(oa)).length;sa&&ra.splice(-1);}ia=ra.slice();return ra;};na._filterByWhitelist=function(oa){"use strict";var pa=oa,qa={},ra,sa;oa=[];for(ra=0;ra<pa.length;++ra){sa=pa[ra];if(aa.allows(sa)){qa[sa]=true;oa.push(sa);}}var ta=aa.getWhitelist();for(ra=0;ra<ta.length;++ra){sa=ta[ra];if(!(sa in qa))oa.push(sa);}for(ra=0;ra<pa.length;++ra){sa=pa[ra];if(!aa.allows(sa))oa.push(sa);}return oa;};na.getAvailableList=function(oa){"use strict";var pa;if(!pa)pa=ba.getOnlineIDs();return pa.filter(function(qa){return !(qa in oa);});};na._pause=function(){"use strict";ja=true;};na._unpause=function(){"use strict";ja=false;};na._registerToggleRenderItem=function(oa){"use strict";w.listen(oa,'click',function(){ja=!ja;k.conditionClass(oa,'checked',ja);});};e.exports=na;},null);
__d("ChatSidebarDropdown",["AppsDivebarDisplayController","Arbiter","AsyncRequest","ChatOptions","ChatOrderedList","ChatSidebar","ChatSidebarActions","ChatTabActions","ChatVisibility","CSS","JSLogger","PresenceState","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();function u(v,w,x,y,z,aa){"use strict";this._menu=w;this._popover=v.getPopover();this._selectedValues={};this._menuIsRendered=false;this._editingFavoriteList=false;this._hasAppsOption=aa;this._logger=q.create('blackbird');this._menu.subscribe('itemclick',this._onClick.bind(this));this._popover.subscribe('init',this._onLayerInit.bind(this));this._popover.subscribe('show',this._updateTickerVisibility.bind(this));h.subscribe('chat/option-changed',this._onOptionChanged.bind(this));}u.prototype._onLayerInit=function(){"use strict";this._menuIsRendered=true;p.addClass(this._popover.getLayer().getContentRoot(),"_5vm9");this._displayBrowserNotificationsIfNeeded();this._updateVisibility();h.subscribe('chat-visibility/go-online',this._updateVisibility.bind(this));h.subscribe('chat-visibility/go-offline',this._updateVisibility.bind(this));this._updateSelectedItems();if(this._editingFavoriteList)this._updateEditFavoriteListLabel(this._editingFavoriteList);if(this._hasAppsOption)this._registerAppHandlers();};u.prototype._updateSelectedItems=function(){"use strict";this._menu.forEachItem(function(v){var w=v.getValue&&v.getValue();if(w in this._selectedValues){var x=this._selectedValues[w];if(x){v.select();}else v.deselect();}}.bind(this));};u.prototype._registerAppHandlers=function(){"use strict";this._updateAppsVisibility();h.subscribe('AppsDivebar/hide-apps',this._updateAppsVisibility.bind(this));h.subscribe('AppsDivebar/show-apps',this._updateAppsVisibility.bind(this));};u.prototype._updateTickerVisibility=function(){"use strict";var v=t('pagelet_ticker');p.conditionClass(this._popover.getLayer().getContentRoot(),"_2rox",!v||v.offsetHeight===0);};u.prototype._updateAppsVisibility=function(){"use strict";p.conditionClass(this._popover.getLayer().getContentRoot(),"_2vh",!g.isVisible());};u.prototype._updateVisibility=function(){"use strict";p.conditionClass(this._popover.getLayer().getContentRoot(),"_5vma",!o.isOnline());};u.prototype._displayBrowserNotificationsIfNeeded=function(){"use strict";if(window.webkitNotifications){var v;this._menu.forEachItem(function(w){if(w.getValue&&w.getValue()==='browser_notif')v=w;});if(v){p.show(v.getRoot());if(window.webkitNotifications.checkPermission()!==0)v.deselect();}}};u.prototype._onChangeSettingResponse=function(v,w,x){"use strict";r.doSync();};u.prototype._onChangeSettingError=function(v,w,x){"use strict";j.setSetting(v,!w,'sidebar_menu_error');};u.prototype._onChangeFinally=function(){"use strict";this._pendingChange=false;};u.prototype._onOptionChanged=function(v,w){"use strict";var x=w.name,y=w.value;if(this._menuIsRendered){this._menu.forEachItem(function(z){if(z.getValue&&(z.getValue()===x))if(z.isSelected()&&!y){z.deselect();}else if(!z.isSelected()&&y)z.select();});}else this._selectedValues[x]=y;};u.prototype._onClick=function(v,w){"use strict";if(this._pendingChange)return false;var x=false,y=w.item.getValue(),z=true;switch(y){case 'sidebar':this.toggleSidebar();break;case 'online':if(!o.isOnline()){o.goOnline();}else this._logVisibilityChange(y,true);x=true;break;case 'offline':if(o.isOnline()){o.goOffline();}else this._logVisibilityChange(y,true);x=true;break;case 'advanced_settings':case 'turn_off_dialog':h.inform('chat/advanced-settings-dialog-opened');x=true;this._logVisibilityChange(y,false);break;case 'browser_notif':if(!w.item.isSelected()&&window.webkitNotifications&&window.webkitNotifications.checkPermission()!==0){window.webkitNotifications.requestPermission(function(){this.changeSetting(y,!w.item.isSelected());}.bind(this));}else this.changeSetting(y,!w.item.isSelected());x=true;break;case 'sound':this.changeSetting(y,!w.item.isSelected());x=true;break;case 'pause':var aa=!w.item.isSelected();if(aa){k._pause();}else k._unpause();x=true;z=false;break;case 'close_all_tabs':n.closeAllTabs();this._logVisibilityChange(y,false);x=true;break;case 'show_apps':if(!g.isVisible()){g.showApps();l.resize();}x=true;break;case 'hide_apps':if(g.isVisible()){g.hideApps();l.resize();}x=true;break;case 'show_ticker':h.inform('ChatSidebarDropdown/openTicker');x=true;break;case 'hide_ticker':h.inform('ChatSidebarDropdown/closeTicker');x=true;break;case 'hide_groups':var ba=w.item.isSelected();this.changeSetting('hide_groups',!ba);x=true;break;}if(x){this.hideMenu();return z;}};u.prototype._logVisibilityChange=function(v,w){"use strict";this._logger.error(w?'sidebar_dropdown_visibility_error':'sidebar_dropdown_set_visibility',{action:v});};u.prototype.changeSetting=function(v,w){"use strict";if(this._pendingChange)return false;this._pendingChange=true;var x={};x[v]=w;j.setSetting(v,w,'sidebar_menu');new i('/ajax/chat/settings.php').setHandler(this._onChangeSettingResponse.bind(this,v,w)).setErrorHandler(this._onChangeSettingError.bind(this,v,w)).setFinallyHandler(this._onChangeFinally.bind(this)).setData(x).setAllowCrossPageTransition(true).send();};u.prototype.hideMenu=function(){"use strict";if(this._menuIsRendered)this._popover.hideLayer();};u.prototype.toggleSidebar=function(){"use strict";m.toggle();this.hideMenu();return false;};e.exports=u;},null);
__d("ChatSidebarTypeaheadDataSource",["MercuryConfig","MercuryTypeaheadDataSource","ShortProfiles"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();for(var j in h)if(h.hasOwnProperty(j))l[j]=h[j];var k=h===null?null:h.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=h;function l(m){"use strict";m=m||{};m.kanaNormalization=true;if(g.ScrollableSidebarTypeaheadGK)m.maxResults=30;h.call(this,m);}l.prototype.init=function(){"use strict";k.init.call(this);this.updateBootstrapData();};l.prototype.bootstrap=function(){"use strict";k.bootstrap.call(this);};l.prototype.updateBootstrapData=function(){"use strict";if(this.isBootstrapped())return;k.updateBootstrapData.call(this);};l.prototype.fetchAll=function(){"use strict";i.fetchAll();};l.prototype.refreshData=function(){"use strict";this.fetchAll();d(['AvailableList'],function(m){m.update();}.bind(this));};l.prototype.query=function(m,n,o,p){"use strict";this.logQuery({event:'query_dive_bar',query:m});return k.query.call(this,m,n,o,p);};l.prototype.respond=function(m,n,o){"use strict";var p=k.respond.call(this,m,n,o);this.logResponse({event:'query_response_dive_bar',response_query:m,response_uids:n});return p;};e.exports=l;},null);
__d("ChatTypeaheadCore",["Event","Keys","TypeaheadCore","copyProperties","emptyFunction","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(){"use strict";if(i!==null)i.apply(this,arguments);}o.prototype.init=function(p,q,r){"use strict";n.init.call(this,p,q,r);this.informBeginActive=false;this.informEndActive=false;this.data.subscribe('respond',function(){if(this.informBeginActive){this.informBeginActive=false;this.inform('sidebar/typeahead/active',true);}else if(this.informEndActive){this.informEndActive=false;this.inform('sidebar/typeahead/active',false);}}.bind(this));};o.prototype.keydown=function(event){"use strict";this.data.fetchAll();var p=g.getKeyCode(event);if(p===h.ESC){this.view.clearContent();setTimeout(l(this.reset,this),0);if(!this.getValue()){this.element.blur();this.inform('escape');}return event.kill();}return n.keydown.call(this,event);};o.prototype.checkValue=function(){"use strict";var p=this.getValue(),q=this.value;if(p==q)return;if(q&&!p){this.typeaheadActive=false;this.informEndActive=true;}else if(!q&&p){this.typeaheadActive=true;this.informBeginActive=true;this.inform('sidebar/typeahead/preActive');}n.checkValue.call(this);};j(o.prototype,{handleTab:k});e.exports=o;},null);
__d("ChatSidebarHeader.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"ReactChatSidebarHeader",render:function(){return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,"_55ob")}),g.createElement("div",{className:"_55oc"},this.props.children)));}});e.exports=j;},null);
__d("ChatTypeaheadRenderer",["AvailableListConstants","ChatSidebarConstants","ChatSidebarHeader.react","ChatSidebarSections","ChatSidebarThread.react","ChatSidebarUser.react","ChatTypeaheadConstants","DOM","LastMobileActiveTimes","MercuryIDs","PresenceStatus","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s={};function t(y,z){if(!(y in s))s[y]=n.create('li');r.render(z,s[y]);return s[y];}function u(y){return t(y.text,r.createElement(i,null,y.text));}function v(y){var z=y.mercury_thread.participants.map(function(aa){return p.getUserIDFromParticipantID(aa);});return t(y.uid,r.createElement(k,{image:y.mercury_thread.image_src,imageSize:h.getImageSize(),name:y.mercury_thread.name,participants:y.participants_to_render,numOtherParticipants:z.length-1,referrer:j.TYPEAHEAD,status:q.getGroup(z),threadFBID:y.uid}));}function w(y){var z=q.get(y.uid),aa=(z===g.MOBILE)?o.getShortDisplay(y.uid):null,ba=(y.render_type==m.NON_FRIEND_TYPE||y.render_type==m.PAGE_TYPE||y.render_type==m.FB4C_TYPE)?y.subtext:null,ca=null;if(z===g.ACTIVE)ca=q.getDetailedActivePresence(y.uid);return t(y.uid,r.createElement(l,{image:y.photo,imageSize:h.getImageSize(),name:y.text,sectionName:j.TYPEAHEAD,status:z,statusTime:aa,detailedStatus:ca,userID:y.uid,context:ba}));}function x(y,z){if(y.type===m.HEADER_TYPE)return u(y);if(y.type==m.THREAD_TYPE)return v(y);return w(y);}e.exports=x;},null);
__d("ChatTypeaheadView",["BucketedTypeaheadView","ChatTypeaheadConstants","CurrentUser","DOM","MercuryConfig","React","ScrollableArea","MercuryThreadSearchUtils","Style","WorkModeConfig","XUISpinner.react","arrayContains","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();for(var u in g)if(g.hasOwnProperty(u))w[u]=g[u];var v=g===null?null:g.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=g;function w(x,y){"use strict";if(k.ScrollableSidebarTypeaheadGK){this.$ChatTypeaheadView0=m.renderDOM();j.appendContent(x,this.$ChatTypeaheadView0.root);this.$ChatTypeaheadView1=m.fromNative(this.$ChatTypeaheadView0.root);g.call(this,this.$ChatTypeaheadView0.content,y);}else g.call(this,x,y);this.showingLoadingIndicator=false;this.typeObjects={};this.typeObjectsOrder=[];this.typeObjects[h.NON_FRIEND_TYPE]={uid:h.NON_FRIEND_TYPE,type:h.HEADER_TYPE,text:t._("WI\u0118CEJ OS\u00d3B")};this.typeObjectsOrder.push(h.NON_FRIEND_TYPE);this.typeObjects[h.PAGE_TYPE]={disabled:true,uid:h.PAGE_TYPE,type:h.HEADER_TYPE,text:t._("STRONY")};this.typeObjectsOrder.push(h.PAGE_TYPE);this.typeObjects[h.THREAD_TYPE]={uid:h.THREAD_TYPE,type:h.HEADER_TYPE,text:t._("KONWERSACJE GRUPOWE")};this.typeObjectsOrder.push(h.THREAD_TYPE);this.typeObjects[h.FB4C_TYPE]={uid:h.FB4C_TYPE,type:h.HEADER_TYPE,text:t._("WSP\u00d3\u0141PRACOWNICY")};this.typeObjects[h.FRIEND_TYPE]={disabled:true,uid:h.FRIEND_TYPE,type:h.HEADER_TYPE,text:t._("ZNAJOMI")};this.typeObjectsOrder.push(h.FB4C_TYPE);this.typeObjectsOrder.push(h.FRIEND_TYPE);}w.prototype.reset=function(){"use strict";if(this.value==='')this.clearContent();this.index=-1;this.items=[];this.results=[];this.value='';this.inform('reset');return this;};w.prototype.clearContent=function(){"use strict";this.hideLoadingIndicator();j.empty(this.content);};w.prototype.buildBuckets=function(x,y){"use strict";var z=y.filter(function(aa){var ba=aa.render_type||aa.type;if(ba==='thread'){var ca='fbid:'+i.getID();if(!r(aa.mercury_thread.participants,ca))return false;var da=aa.participants_to_render.some(function(fa){return n.queryMatchesName(x,fa.name);}),ea=n.queryMatchesName(x,aa.mercury_thread.name);if(!da&&!ea)return false;}return true;}).reverse();return v.buildBuckets.call(this,x,z);};w.prototype.getDefaultIndex=function(x){"use strict";if(x.length===0)return -1;var y=x.length-1;while(!this.isHighlightable(x[y])&&y>=0)y--;return y;};w.prototype.showLoadingIndicator=function(){"use strict";if(!this.showingLoadingIndicator){l.render(l.createElement("div",{className:"spinnerContainer"},l.createElement(q,{className:"_3-8i",background:"light",size:"small",paused:false})),this.content);this.showingLoadingIndicator=true;}};w.prototype.hideLoadingIndicator=function(){"use strict";if(this.showingLoadingIndicator){l.unmountComponentAtNode(this.content);this.showingLoadingIndicator=false;}};w.prototype.showNoResults=function(){"use strict";var x=t._("Nie znaleziono znajomego");if(p.is_work_user)x=t._("Nie znaleziono wsp\u00f3\u0142pracownika.");this.hideLoadingIndicator();j.setContent(this.content,j.create('div',{className:"noResults _3-9a"},x));};w.prototype.hide=function(){"use strict";this.clearContent();return v.hide.call(this);};w.prototype.next=function(){"use strict";v.next.call(this);if(k.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView1.scrollIntoView(this.selected,false);};w.prototype.prev=function(){"use strict";v.prev.call(this);if(k.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView1.scrollIntoView(this.selected,false);};w.prototype.setMaxHeight=function(x){"use strict";o.set(this.$ChatTypeaheadView0.wrap,'max-height',x+'px');};w.prototype.render=function(x,y,z){"use strict";if(k.ScrollableSidebarTypeaheadGK)var aa=this.value!==x||this.$ChatTypeaheadView1.isScrolledToBottom();if(!y.length){if(x&&x.length>1)this.showLoadingIndicator();}else this.hideLoadingIndicator();v.render.call(this,x,y,z);if(k.ScrollableSidebarTypeaheadGK&&aa)this.$ChatTypeaheadView1.scrollToBottom(false);};e.exports=w;},null);
__d("legacy:ChatTypeaheadBehavior",["ChatTypeaheadBehavior"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.chatTypeahead=function(h){h.enableBehavior(g);};},3);
__d("NotificationImpressions",["AsyncSignal","NotificationTokens","URI"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j='/ajax/notifications/impression.php';function k(l,m){var n={ref:m};h.untokenizeIDs(l).forEach(function(o,p){n['alert_ids['+p+']']=o;});new g(new i(j).getQualifiedURI().toString(),n).send();}e.exports={log:k};},null);
__d("NotificationBeeperItemContents.react",["Animation","AsyncRequest","Bootloader","CloseButton.react","ImageBlock.react","NotificationURI","NotificationUserActions","React","TextWithEntities.react","Timestamp.react","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(u,v){return n.createElement("span",{className:"fwb"},u);}var t=n.createClass({displayName:"NotificationBeeperItemContents",_markAsRead:function(){m.markNotificationsAsRead([this.props.beep.notificationID]);},_onClick:function(u){this._markAsRead();this.props.onHide();if(u.button===1||u.altKey||u.ctrlKey||u.metaKey||u.shiftKey)return;var v=this.props.beep,w=new q(v.url).getPath();if(l.isAlbumDraftRecoveryDialogURI(v.link)){new h(v.link).send();u.preventDefault();}else if(v.photo&&l.snowliftable(v.link)){i.loadModules(["PhotoSnowlift"],function(x){x.bootstrap(v.link,u.currentTarget);});u.preventDefault();}else if(v.ajaxifyLink){i.loadModules(["AsyncDialog"],function(x){x.bootstrap(v.ajaxifyLink,u.currentTarget,'dialog');});u.preventDefault();}},_onClose:function(){this._markAsRead();this.props.onHide();},_doFlash:function(){new g(n.findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();},componentDidMount:function(){this.props.onReadyToHide(this.props.beep.notificationID);},componentDidUpdate:function(u){if(u.beep.beepID!==this.props.beep.beepID){this._doFlash();this.props.onReadyToHide(this.props.beep.notificationID);}},render:function(){var u=this.props.beep;return (n.createElement("div",{ref:"inner"},n.createElement(j,{className:"_3soc",onClick:this._onClose,size:"medium"}),n.createElement("a",{href:u.link,onClick:this._onClick,className:"_3soi"},n.createElement(k,{className:"_3soj",spacing:"medium"},n.createElement("img",{src:u.actors[0].profile_picture.uri,className:"_3sok"}),n.createElement("div",{className:"_3sol"},n.createElement(o,{renderEmoticons:true,renderEmoji:true,interpolator:s,ranges:u.text.ranges,aggregatedranges:u.text.aggregated_ranges,text:u.text.text}),n.createElement(k,{className:"_3som"},n.createElement("img",{className:"_1x8t",src:u.icon.uri}),n.createElement(p,{time:u.timestamp.time,text:u.timestamp.text,verbose:u.timestamp.verbose})))))));}});e.exports=t;},null);
__d("NotificationBeeperConst",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={IDLE_DELAY:10000,ACTIVE_DELAY_LONG:4000,FADE_OUT_LENGTH:1500,BeepStates:g({PENDING:true,RENDERED:true,READY_TO_HIDE:true,FADING_OUT:true})};e.exports=h;},null);
__d("NotificationBeeperItem.react",["Animation","BrowserSupport","NotificationBeeperItemContents.react","React","NotificationBeeperItemRenderersList","Style","NotificationBeeperConst","cx","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=j.createClass({displayName:"NotificationBeeperItem",getInitialState:function(){return {fadedIn:false,hidden:false};},componentDidMount:function(){var q;if(h.hasCSSAnimations()){q=this.setState.bind(this,{fadedIn:true},null);}else q=function(){new g(j.findDOMNode(this.refs.item)).from('top','-30px').from('opacity','0').to('top','0px').to('opacity','1').duration(200).ondone(this.setState.bind(this,{fadedIn:true},null)).go();}.bind(this);o(q,50);this.props.onInserted(this.props.beep);},componentWillUnmount:function(){if(this._fadeOutAnimation){this._fadeOutAnimation.stop();this._fadeOutAnimation=null;}},_onHide:function(){this.setState({hidden:true});},render:function(){var q=this.props.beep,r=(("_3sod")+(this.state.fadedIn?' '+"_3soe":'')+(this.state.hidden?' '+"_3sof":'')),s=this._getRenderer(q.beepRenderer);return (j.createElement("li",{className:r,ref:"item","data-gt":q.tracking},j.createElement(s,{beep:q,onHide:this._onHide,onReadyToHide:this.props.onReadyToHide,ref:"itemContents"})));},componentDidUpdate:function(q,r,s){if(this.props.fadingOut){if(!this._fadeOutAnimation)this._fadeOutAnimation=new g(j.findDOMNode(this.refs.item)).from('opacity','1').to('opacity','0').duration(m.FADE_OUT_LENGTH).ondone(this._onHide).go();j.findDOMNode(this.refs.item).style.transitionDuration='0ms';}else if(this._fadeOutAnimation){this._fadeOutAnimation.stop();this._fadeOutAnimation=null;l.set(j.findDOMNode(this.refs.item),'opacity','1');}},_getRenderer:function(q){if(q in k)return k[q];return i;}});e.exports=p;},null);
__d("NotificationSound",["Sound","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=5000;g.init(['audio/mpeg']);function j(k){this._soundPath=k;this._lastPlayed=0;}h(j.prototype,{play:function(k){if(!this._soundPath)return;var l=Date.now();if((l-this._lastPlayed)<i)return;this._lastPlayed=l;g.play(this._soundPath,k);}});e.exports=j;},null);
__d("NotificationBeeper.react",["Arbiter","ChannelConstants","NotificationBeeperItem.react","NotificationConstants","NotificationImpressions","NotificationPhotoThumbnail","NotificationSound","NotificationUpdates","NotificationURI","NotificationUserActions","React","NotificationBeeperConst","NotificationBeeperPinnedPostLoader","cx","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=r.BeepStates,x='beeper',y=j.PayloadSourceType.LIVE_SEND,z=j.PayloadSourceType.OTHER_APPLICATION,aa=q.createClass({displayName:"NotificationBeeper",getInitialState:function(){return {soundEnabled:this.props.soundEnabled,hovering:false,fading:false,beeps:{}};},componentWillMount:function(){var ba=h.getArbiterType('notif_sound_pref_changed'),ca='update-notifications';this.subscriptions=[n.subscribe(ca,function(da,ea){if(ea.payloadsource===y||ea.payloadsource===z){var fa=ea.nodes;if(fa&&fa.length)this._handleBeepChanges(this._convertNotifications(fa));}}.bind(this)),g.subscribe(ba,function(da,ea){this.setState({soundEnabled:ea.obj.enabled});}.bind(this))];g.inform('NotificationBeeper/mounted',null,g.BEHAVIOR_PERSISTENT);if(s.payload)this._handleBeepChanges(this._convertNotifications(s.payload.nodes));},componentWillUnmount:function(){this.subscriptions.forEach(function(ba){ba.unsubscribe();});this.subscriptions=null;},_onMouseEnter:function(){this._hideWait&&clearTimeout(this._hideWait);var ba=[],ca=this.state.beeps;Object.keys(ca).forEach(function(da){if(ca[da].state!=w.PENDING){ba.push(da);}else ca[da].state=w.RENDERED;});p.markNotificationsAsSeen(ba);this.setState({hovering:true,fading:false,beeps:ca});},_onMouseLeave:function(){this._waitToHide(r.ACTIVE_DELAY_LONG);this.setState({hovering:false});},_onInsertedItem:function(ba){if(!this.state.hovering)this._waitToHide();if(this.state.soundEnabled&&ba.sound){if(!this._notifSound)this._notifSound=new m(this.props.soundPath);this._notifSound.play(ba.beepID);}if(this.props.shouldLogImpressions)k.log([ba.notificationID],x);},_waitToHide:function(ba){this._hideWait&&clearTimeout(this._hideWait);this._hideWait=u(v(this._hide,this),ba||r.IDLE_DELAY);},_onReadyToHide:function(ba){this.state.beeps[ba].state=w.READY_TO_HIDE;if(!this._hideWait)this._waitToHide();},_hide:function(){this._hideWait=null;var ba=this.state.beeps;Object.keys(ba).forEach(function(ca){if(ba[ca].state==w.READY_TO_HIDE)ba[ca].state=w.FADING_OUT;});this.setState({fading:true});u(v(this._finishHide,this),r.FADE_OUT_LENGTH);},_finishHide:function(){if(!this.state.fading)return;var ba=this.state.beeps;Object.keys(ba).forEach(function(ca){if(ba[ca].state==w.FADING_OUT)delete ba[ca];});this.setState({fading:false,beeps:ba});u(function(){var ca=this.state.beeps;Object.keys(ca).forEach(function(da){if(ca[da].state==w.PENDING)ca[da].state=w.RENDERED;});this.setState({beeps:ca});}.bind(this));},_handleBeepChanges:function(ba){var ca=this.state.fading?w.PENDING:w.RENDERED,da=this.state.beeps,ea=false;Object.keys(ba).reverse().forEach(function(fa){var ga={state:ca,data:ba[fa]};if(!da[fa]||da[fa].data.beepID!=ga.data.beepID){if(da[fa]){ea=true;if(ga.data.beepUpdatesOnTop)delete da[fa];}da[fa]=ga;}});if(ea)this._waitToHide();this.forceUpdate();},render:function(){var ba=this.state.beeps,ca=[];Object.keys(ba).reverse().forEach(function(fa){var ga=ba[fa];if(ga.state==w.PENDING)return;ca.push(q.createElement(i,{key:fa,fadingOut:this.state.fading&&ga.state==w.FADING_OUT,beep:ga.data,onInserted:this._onInsertedItem,onReadyToHide:this._onReadyToHide}));},this);var da=ca.length>0,ea=((!da?"hidden_elem":'')+(' '+"_50d1"));return (q.createElement("ul",{ref:"container",className:ea,"data-gt":this.props.tracking,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},ca));},_convertNotifications:function(ba){var ca={};ba.forEach(function(da){if(!da.showBeep)return;var ea=da.alert_id,fa=ea+'-'+da.receivedTime,ga=l.getThumbnail(da.attachments,da.attached_story),ha=ca[ea]={notificationID:ea,notifID:da.id,beepID:fa,beepRenderer:da.beepRenderer,rendererData:da.rendererData,beepUpdatesOnTop:da.beepUpdatesOnTop,actors:da.unaggregatedActors||da.actors,icon:da.icon,link:da.url?o.localize(da.url):'#',url:da.url,ajaxifyLink:da.ajaxify_url,photo:ga,text:da.unaggregatedTitle||da.title,timestamp:da.timestamp,receivedTime:da.receivedTime,sound:!!da.sound,tracking:da.tracking};});return ca;}});e.exports=aa;},null);
__d("SyncRequestTitle.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestTitle",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("{sender} wants to play {app_name} with you, right now.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestAcceptedMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestAcceptedMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} accepted your invite to play {app name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You accepted an invite from {sender} to play {app name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestRejectedMessage.react",["AsyncRequest","Link.react","React","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"SyncRequestRejectedMessage",propTypes:{requestId:n.string.isRequired,app:n.object.isRequired,isSender:n.bool.isRequired,receiver:n.object.isRequired,sender:n.object.isRequired},render:function(){if(this.props.isSender){return (i.createElement("div",null,l._("{receiver} declined your invite to play {app_name}.",[l.param("receiver",i.createElement("span",{className:"_dg4"},this.props.receiver.name)),l.param("app_name",i.createElement("span",{className:"_dg5"},this.props.app.name))])));}else return (i.createElement("div",null,l._("You declined an invite from {sender} to play {app_name}.",[l.param("sender",i.createElement("span",{className:"_dg4"},this.props.sender.name)),l.param("app_name",i.createElement("span",{className:"_dg5"},this.props.app.name))]),i.createElement("div",{className:"_13n7"},i.createElement("div",null,i.createElement(h,{onClick:this._submitBlockApp},l._("Block {app}",[l.param("app",this.props.app.name)]))),i.createElement("div",null,i.createElement(h,{onClick:this._submitBlockUser},l._("Block requests from {sender}",[l.param("sender",this.props.sender.name)]))))));},_submitBlockApp:function(){var p=new j('/games/block_app/'),q=new g().setURI(p);q.setData({app_id:this.props.app.id,source:'sync_request'});q.send();},_submitBlockUser:function(){var p=new j('/games/block_user/'),q=new g().setURI(p);q.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});q.send();}});e.exports=o;},null);
__d("SyncRequestExpiredMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestExpiredMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} missed your invite to play {app name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You missed an invite from {sender} to play {app name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestCanceledMessage.react",["React","cx","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestCanceledMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,i._("You canceled an invite to {receiver} to play {app name}.",[i.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),i.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,i._("{sender} canceled an invitation to play {app name}.",[i.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),i.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestTimer.react",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes;function k(m){if(m){m=Math.ceil(m);var n=m%60;if(n<10)n='0'+n;var o=Math.floor(m/60);return o+':'+n;}else return "0:00";}var l=g.createClass({displayName:"SyncRequestTimer",propTypes:{timeRemaining:j.number.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("({time_remaining} remaining)",[h.param("time_remaining",k(this.props.timeRemaining))])));}else return (g.createElement("div",null,h._("You have {time_remaining} to accept.",[h.param("time_remaining",k(this.props.timeRemaining))])));}});e.exports=l;},null);
__d("XSyncRequestSubmitController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});},null);
__d("SyncRequest.react",["Arbiter","AsyncRequest","ChannelConstants","React","SyncRequestStatusEnum","SyncRequestTitle.react","SyncRequestAcceptedMessage.react","SyncRequestRejectedMessage.react","SyncRequestExpiredMessage.react","SyncRequestCanceledMessage.react","SyncRequestTimer.react","XUIButton.react","XSyncRequestSubmitController","cx","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=j,x=w.PropTypes,y=j.createClass({displayName:"SyncRequest",propTypes:{app:x.object.isRequired,creationTime:x.number.isRequired,requestId:x.string.isRequired,receiver:x.object.isRequired,sender:x.object.isRequired,status:x.oneOf(v(k)).isRequired,timeout:x.number.isRequired,timeRemaining:x.number.isRequired,viewerId:x.number.isRequired,onStatusUpdate:x.func},componentWillMount:function(){if(this.props.status===k.PENDING){var z=g.subscribe(i.getArbiterType('sync_request_updated'),function(ca,da){da=da.obj;if(da.id.toString()!==this.props.requestId)return;this.setState({status:da.status});}.bind(this));this.setState({statusEvent:z});}var aa=null;if(this.props.status===k.PENDING){var ba=function(){this.setState({time_remaining:(this.state.time_remaining-1)});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var ca={counter:null,time_remaining:0};if(this.state.status===k.PENDING)ca.status=k.EXPIRED;this.setState(ca);}};aa=setInterval(ba.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:aa});},componentWillUnmount:function(){if(this.state.counter)clearInterval(this.state.counter);g.unsubscribe(this.state.statusEvent);},getInitialState:function(){return {buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id};},componentDidUpdate:function(z,aa){if(this.props.status!=k.PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,aa.status);},render:function(){var z;switch(this.state.status){case k.PENDING:var aa;if(!this.state.viewerIsSender){aa=[j.createElement(r,{use:"confirm",onClick:this._handleAccept,disabled:this.state.buttonsDisabled,label:u._("Accept")}),j.createElement(r,{use:"default",onClick:this._handleReject,disabled:this.state.buttonsDisabled,label:u._("Decline")})];}else aa=j.createElement(r,{use:"default",onClick:this._handleCancel,disabled:this.state.buttonsDisabled,label:u._("Cancel")});z=(j.createElement("div",null,j.createElement("div",{className:"_372m"},j.createElement(l,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),j.createElement("div",{className:"_372n"},j.createElement(q,{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),j.createElement("div",{className:"_372o"},aa)));break;case k.ACCEPTED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(m,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.REJECTED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(n,{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case k.EXPIRED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(o,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.CANCELED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(p,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return (j.createElement("div",{className:"_372q"},z));},_handleAccept:function(){this._handleStatusUpdate(k.ACCEPTED);var z=window.open(this.props.app.uri);if(z)z.focus();},_handleReject:function(){this._handleStatusUpdate(k.REJECTED);},_handleCancel:function(){this._handleStatusUpdate(k.CANCELED);},_handleStatusUpdate:function(z){this.setState({status:z,buttonsDisabled:true});var aa=s.getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',z).getURI();new h().setURI(aa).setHandler(function(ba){this.setState({status:z});}.bind(this)).setErrorHandler(function(ba){this.setState({buttonsDisabled:false});}.bind(this)).send();}});e.exports=y;},null);
__d("XGamesGripperNoteUpdaterController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/async\/games\/gripper_note_viewed\/",{});},null);
__d("SidebarAppTickerResizer",["Animation","Arbiter","AsyncRequest","ChatSidebar","CSS","cx","debounce","DOMQuery","Event","SimpleDrag","$","queryThenMutateDOM","XGamesGripperNoteUpdaterController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=1e-07,t=1,u=85,v=173,w=300,x=46,y=90,z=82,aa=150;function ba(ca,da,ea,fa,ga){"use strict";this.$SidebarAppTickerResizer0=q('pagelet_ticker');this.$SidebarAppTickerResizer1=q('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer2=this.$SidebarAppTickerResizer0.parentNode;this.$SidebarAppTickerResizer3=ga;this.$SidebarAppTickerResizer1.style.height=ea;this.$SidebarAppTickerResizer4(ca,da);if(ea===null)if(fa!==null){this.$SidebarAppTickerResizer5();this.$SidebarAppTickerResizer6(this.$SidebarAppTickerResizer7());}else h.subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer5.bind(this));if(!ga){this.$SidebarAppTickerResizer8();k.hide(ca);}h.subscribe('ChatSidebarDropdown/closeTicker',this.$SidebarAppTickerResizer8.bind(this));h.subscribe('ChatSidebarDropdown/openTicker',this.$SidebarAppTickerResizer9.bind(this));if(fa){var ha=n.scry(document.body,'#pagelet_ticker')[0],ia=ha&&ha.parentNode,ja,ka=function(){if(!k.shown(ia))return;var la=b('XGamesGripperNoteUpdaterController').getURIBuilder().getURI();new i().setURI(la).send();fa.show();if(ja)ja.unsubscribe();};if(ia&&k.shown(ia)){ka();}else ja=h.subscribe('ticker/show',ka);}this.$SidebarAppTickerResizera=m(this.$SidebarAppTickerResizer5.bind(this),200);o.listen(window,'resize',this.$SidebarAppTickerResizera);}ba.prototype.$SidebarAppTickerResizer5=function(ca){"use strict";r(function(){this.$SidebarAppTickerResizerb();}.bind(this),function(){var da=Math.round(parseFloat(this.$SidebarAppTickerResizer0.style.height));if(da>Math.round(this.$SidebarAppTickerResizerc())||this.$SidebarAppTickerResizerd&&this.$SidebarAppTickerResizerd>t){var ea=(this.$SidebarAppTickerResizerd/this.$SidebarAppTickerResizere)*100,fa=this.$SidebarAppTickerResizerf(0,this.$SidebarAppTickerResizerc()-ea);if(!(ca&&ca.type==='resize'))this.$SidebarAppTickerResizerg(fa);j.resize();}}.bind(this));};ba.prototype.$SidebarAppTickerResizerc=function(){"use strict";if(!this.$SidebarAppTickerResizer3)return 0;if(!j.isVisible())return y;return Math.min(y,(this.$SidebarAppTickerResizere-this.$SidebarAppTickerResizerh-z)*100/this.$SidebarAppTickerResizere);};ba.prototype.$SidebarAppTickerResizer4=function(ca,da){"use strict";var ea=new p(ca);ea.subscribe('start',this.$SidebarAppTickerResizeri.bind(this));ea.subscribe(['update','end'],this.$SidebarAppTickerResizerj.bind(this));var fa=new p(da);fa.subscribe('start',this.$SidebarAppTickerResizeri.bind(this));fa.subscribe('update',this.$SidebarAppTickerResizerk.bind(this));fa.subscribe('end',this.$SidebarAppTickerResizerl.bind(this));};ba.prototype.$SidebarAppTickerResizeri=function(ca,event){"use strict";this.$SidebarAppTickerResizerm=event.clientY;this.$SidebarAppTickerResizerb();this.$SidebarAppTickerResizern();};ba.prototype.$SidebarAppTickerResizerb=function(){"use strict";this.$SidebarAppTickerResizerh=this.$SidebarAppTickerResizer1.offsetTop;this.$SidebarAppTickerResizero=this.$SidebarAppTickerResizer0.offsetHeight;this.$SidebarAppTickerResizere=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizerd=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizerp=this.$SidebarAppTickerResizerd;};ba.prototype.$SidebarAppTickerResizern=function(){"use strict";k.addClass(this.$SidebarAppTickerResizer2,"_4vfq");};ba.prototype.$SidebarAppTickerResizerq=function(){"use strict";k.removeClass(this.$SidebarAppTickerResizer2,"_4vfq");};ba.prototype.$SidebarAppTickerResizerj=function(ca,event){"use strict";var da=(this.$SidebarAppTickerResizerd/this.$SidebarAppTickerResizere)*100,ea=this.$SidebarAppTickerResizerf(event.clientY-this.$SidebarAppTickerResizerm,this.$SidebarAppTickerResizerc()-da);if(ca=='end'){this.$SidebarAppTickerResizerq();this.$SidebarAppTickerResizerg(ea);}j.resize();};ba.prototype.$SidebarAppTickerResizerk=function(ca,event){"use strict";var da=-this.$SidebarAppTickerResizerd,ea=this.$SidebarAppTickerResizer7()-this.$SidebarAppTickerResizerd,fa=this.$SidebarAppTickerResizerr(event.clientY-this.$SidebarAppTickerResizerm,da,ea);this.$SidebarAppTickerResizerf(-fa,this.$SidebarAppTickerResizerc());this.$SidebarAppTickerResizerp=this.$SidebarAppTickerResizerd+fa;this.$SidebarAppTickerResizerp=Math.max(t,this.$SidebarAppTickerResizerp);this.$SidebarAppTickerResizer1.style.height=this.$SidebarAppTickerResizerp+'px';};ba.prototype.$SidebarAppTickerResizerl=function(ca,event){"use strict";var da=this.$SidebarAppTickerResizerp,ea=this.$SidebarAppTickerResizert(this.$SidebarAppTickerResizerp),fa=this.$SidebarAppTickerResizerf(this.$SidebarAppTickerResizerd-ea,this.$SidebarAppTickerResizerc());if(this.$SidebarAppTickerResizerd!=ea){this.$SidebarAppTickerResizer6(ea);this.$SidebarAppTickerResizerg(fa);}new g(this.$SidebarAppTickerResizer1).from('height',da).to('height',ea).duration(w).go();};ba.prototype.$SidebarAppTickerResizerf=function(ca,da){"use strict";var ea=this.$SidebarAppTickerResizero+ca,fa=(ea/this.$SidebarAppTickerResizere)*100;fa=Math.max(s,Math.min(da,fa));this.$SidebarAppTickerResizer0.style.height=fa+'%';return fa;};ba.prototype.$SidebarAppTickerResizert=function(ca){"use strict";var da=this.$SidebarAppTickerResizeru(),ea=this.$SidebarAppTickerResizer7();return (ca<(ea-x))?((ca<(da-x))?t:da):ea;};ba.prototype.$SidebarAppTickerResizeru=function(){"use strict";return u;};ba.prototype.$SidebarAppTickerResizer7=function(){"use strict";return v;};ba.prototype.$SidebarAppTickerResizerv=function(ca){"use strict";var da=this.$SidebarAppTickerResizer7();return (ca<0)?t:(ca>da?da:ca);};ba.prototype.$SidebarAppTickerResizerr=function(ca,da,ea){"use strict";return (ca<da)?da:((ca>ea)?ea:ca);};ba.prototype.$SidebarAppTickerResizerg=function(ca){"use strict";new i('/ajax/feed/ticker/resize').setData({height:''+ca}).setMethod('POST').send();h.inform('Ticker/resized');};ba.prototype.$SidebarAppTickerResizer6=function(ca){"use strict";new i('/ajax/feed/apps/resize').setData({height:''+ca}).setMethod('POST').send();};ba.prototype.$SidebarAppTickerResizerw=function(ca){"use strict";var da=this.$SidebarAppTickerResizero,ea=this.$SidebarAppTickerResizere*ca/100;new g(this.$SidebarAppTickerResizer0).from('height',da).to('height',ea).duration(aa).ondone(function(){this.$SidebarAppTickerResizer0.style.height=ca+'%';j.resize();}.bind(this)).go();};ba.prototype.$SidebarAppTickerResizer8=function(){"use strict";this.$SidebarAppTickerResizerb();this.$SidebarAppTickerResizerw(0);this.$SidebarAppTickerResizerg('0.0');};ba.prototype.$SidebarAppTickerResizer9=function(){"use strict";this.$SidebarAppTickerResizerb();var ca=((this.$SidebarAppTickerResizere-this.$SidebarAppTickerResizerh-z-this.$SidebarAppTickerResizerd)*50/this.$SidebarAppTickerResizere);this.$SidebarAppTickerResizerw(ca);this.$SidebarAppTickerResizerg(ca);};e.exports=ba;},null);
__d("SidebarTicker",["Arbiter","ChatSidebar","CSS","DOM","Run","TickerController","$","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(){this._ticker=m('pagelet_ticker');this._initSubscriptions();if(i.hasClass(document.documentElement,'sidebarMode'))this._onSidebarShow();}o.hide=function(){k.onAfterLoad(function(){j.remove(m('pagelet_ticker'));j.remove(j.find(document.body,'div.fbSidebarGripper'));h.resize();});};n(o.prototype,{_initSubscriptions:function(){this._subscriptions=[g.subscribe('sidebar/show',this._onSidebarShow.bind(this))];},_onSidebarShow:function(){l.show(this._ticker);}});e.exports=o;},null);
__d("XOfferSetNotificationsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/offers\/v2\/notifications\/",{offer:{type:"Int",required:true},enable:{type:"Bool",defaultValue:false}});},null);
__d("XOfferSendPlatformNotificationController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/offers\/v2\/send_platform_notification\/",{});},null);
__d("OffersUtil",["DOM","DOMQuery","CSS","Event","AsyncRequest","XOfferSetNotificationsController","XOfferSendPlatformNotificationController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={attachHideShowClickListener:function(o,p,q){j.listen(o,'click',function(){var r=h.scry(h.getRootElement(),p),s=h.scry(h.getRootElement(),q);for(var t=0;t<r.length;t++)i.hide(r[t]);for(var u=0;u<s.length;u++)i.show(s[u]);});},registerRedirectAfter:function(o,p){setTimeout(function(){window.location.href=o;},p);},attachDeletelLinkClickListener:function(o,p,q,r,s){j.listen(o,'click',function(){new k().setURI(q).setHandler(function(t){var u=t.getPayload();if(u){p.className=r;}else p.className=s;}).send();});},listen:function(o,p){j.listen(o,'click',p.show.bind(p));},showRegistered:function(o,p){j.listen(o,'click',function(){p.show();});},logGoToWebsiteClick:function(o,p){j.listen(o,'click',function(){new k().setURI(p).send();});},sendPlatformNotification:function(){var o=m.getURIBuilder().getURI();new k().setURI(o).send();}};e.exports=n;},null);
__d("SyncRequestNotificationBeeperItemContents.react",["Animation","CloseButton.react","ImageBlock.react","NotificationUserActions","React","SyncRequest.react","SyncRequestStatusEnum","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=k.createClass({displayName:"SyncRequestNotificationBeeperItemContents",_markAsRead:function(){j.markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide();},_onClose:function(){this._markAsRead();this.props.onHide();},_doFlash:function(){new g(k.findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();},componentDidMount:function(){if(this.props.beep.rendererData.status!=m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},componentDidUpdate:function(p){if(this.props.beep.rendererData.status!=m.PENDING&&p.beep.rendererData.status==m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},onRequestStatusUpdate:function(p,q){if(p!=m.PENDING&&q==m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},render:function(){var p=this.props.beep,q=p.rendererData;return (k.createElement("div",{ref:"inner"},k.createElement(h,{className:"_3soc",onClick:this._onClose,size:"medium"}),k.createElement(i,{className:"_3soj"},k.createElement("img",{src:p.actors[0].profile_picture.uri,className:"_3sok"}),k.createElement("div",{className:"_3sol"},k.createElement(l,{app:q.app,creationTime:q.creation_time,requestId:q.id.toString(),receiver:q.receiver,sender:q.sender,status:q.status,timeout:q.timeout,timeRemaining:q.time_remaining,viewerId:q.receiver.id,onStatusUpdate:this.onRequestStatusUpdate})))));}});e.exports=o;},null);
__d("LiveMessageReceiver",["Arbiter","ChannelConstants","copyProperties","emptyFunction","shield"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m){this.eventName=m;this.subs=null;this.handler=j;this.shutdownHandler=null;this.registered=false;this.appId=1;}i(l,{getAppMessageType:function(m,n){return 'live_message/'+m+':'+n;},route:function(m){var n=function(o){var p=l.getAppMessageType(m.app_id,m.event_name);g.inform(p,o,g.BEHAVIOR_PERSISTENT);};n(m.response);}});i(l.prototype,{setAppId:function(m){this.appId=m;return this;},setHandler:function(m){this.handler=m;this._dirty();return this;},setRestartHandler:j,setShutdownHandler:function(m){this.shutdownHandler=k(m);this._dirty();return this;},_dirty:function(){if(this.registered){this.unregister();this.register();}},register:function(){var m=function(o,p){return this.handler(p);}.bind(this),n=l.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=g.subscribe(n,m);if(this.shutdownHandler)this.subs.shut=g.subscribe(h.ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this;},unregister:function(){if(!this.subs)return this;for(var m in this.subs)if(this.subs[m])this.subs[m].unsubscribe();this.subs=null;this.registered=false;return this;}});e.exports=l;},null);
__d("initLiveMessageReceiver",["Arbiter","ChannelConstants","LiveMessageReceiver"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();g.subscribe(h.getArbiterType('app_msg'),function(j,k){i.route(k.obj);});},null);