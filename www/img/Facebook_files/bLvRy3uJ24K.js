/*!CK:4014791219!*//*1434123751,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["atRJV"]); }

__d("GenderConst",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={NOT_A_PERSON:0,FEMALE_SINGULAR:1,MALE_SINGULAR:2,FEMALE_SINGULAR_GUESS:3,MALE_SINGULAR_GUESS:4,MIXED_SINGULAR:5,MIXED_PLURAL:5,NEUTER_SINGULAR:6,UNKNOWN_SINGULAR:7,FEMALE_PLURAL:8,MALE_PLURAL:9,NEUTER_PLURAL:10,UNKNOWN_PLURAL:11,UNKNOWN:0};},null);
__d("P2PChannelType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TRANSFER_STATUS_CHANGED:"P2P\/TransferStatusChanged"};},null);
__d("P2PPasswordProtectionParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={STATUS:"status"};},null);
__d("P2PPaymentCreditCardsTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SENDING:1,RECEIVING:2};},null);
__d("P2PTransferParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TRANSFER_ID:"transfer_id",STATUS:"status",SENDER_STATUS:"sender_status",RECEIVER_STATUS:"receiver_status",RISK_RESULT:"risk_result"};},null);
__d("P2PTransferStatus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18};},null);
__d("BuddyListNub",["Arbiter","AvailableList","ChannelConnection","ChannelConstants","ChatConfig","ChatSidebarActions","ChatVisibility","CSS","Dock","DOM","Event","JSLogger","JSXDOM","KeyEventController","Keys","NubController","OrderedFriendsList","Parent","PresencePrivacy","PresenceStatus","Toggler","csx","cx","setTimeoutAcrossTransitions","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();var fa=32,ga=r.create('buddylist_nub');for(var ha in v)if(v.hasOwnProperty(ha))ja[ha]=v[ha];var ia=v===null?null:v.prototype;ja.prototype=Object.create(ia);ja.prototype.constructor=ja;ja.__superConstructor__=v;function ja(ka,la,ma){"use strict";v.call(this);ia.init.call(this,ka);this.root=ka;this.orderedList=la;this.typeahead=ma;this.button=p.find(ka,'a.fbNubButton');this.unreadCount=p.find(ka,"span._5ayx");this.label=p.find(ka,'span.label');this.body=p.scry(ka,'div.fbNubFlyoutBody')[0];this.container=x.byClass(ka,"_56ox");this.typeaheadContainer=p.find(ka,'.fbChatTypeaheadViewContainer');var na=p.find(ka,'div.fbNubFlyoutTitlebar');aa.createInstance(na).setSticky(false);la.subscribe('render',this.flyoutContentChanged.bind(this));la.setScrollContainer(this.body);h.subscribe('buddylist/availability-changed',this._updateCount.bind(this));g.subscribe('chat/connect',this._handleConnect.bind(this));g.subscribe('chat/option-changed',function(oa,pa){if(pa.name=='hide_groups')this.onResize();}.bind(this));y.subscribe('privacy-user-presence-changed',this._handleVisibilityChange.bind(this));this.message=p.find(ka,"div._4mq1");this.warningMsgText=null;this.warningMsgEventListener=null;this.showWarningTimeout=null;i.subscribe(i.CONNECTED,this._handleChannelConnected.bind(this));i.subscribe(i.SHUTDOWN,this._handleChannelShutdown.bind(this));i.subscribe(i.RECONNECTING,this._handleChannelReconnecting.bind(this));i.subscribe([i.MUTE_WARNING,i.UNMUTE_WARNING],this._updateView.bind(this));this.subscribe('show',this.onShow.bind(this));this.subscribe('hide',this.onHide.bind(this));this.subscribe('resize',this.onResize.bind(this));q.listen(ka,'keydown',this._onKeyDown.bind(this));q.listen(this.button,'click',this.onButtonClick.bind(this));t.registerKey('q',function(event){if(this._isOpen){ma.getCore().getElement().focus();}else{this.onButtonClick();this.show();}event.prevent();}.bind(this));ma.getCore().subscribe('escape',this.hide.bind(this));ma.subscribe(['respond','reset'],function(oa,pa){if(this._isOpen){if(pa&&pa.value&&pa.value===ma.getCore().getValue()&&ma.getView().isVisible()){o.setUseMaxHeight(this.root,false);this._hideBuddyList();}else this._showBuddyList();this.flyoutContentChanged();}}.bind(this));g.subscribe('sidebar/show',this.hide.bind(this));g.subscribe('minisidebar/show',this.hide.bind(this));g.subscribe('sidebar/hide',this._onSidebarHide.bind(this));this._orderedListCount=w.getList().length;g.inform('buddylist-nub/initialized',this,g.BEHAVIOR_PERSISTENT);this._handleVisibilityChange();ga.log('buddylist_initialized');}ja.prototype.getButton=function(){"use strict";return this.button;};ja.prototype.getRoot=function(){"use strict";return this.root;};ja.prototype._handleConnect=function(ka){"use strict";this._updateView(true);};ja.prototype._getShutdownReason=function(ka){"use strict";switch(ka){case j.HINT_AUTH:return ea._("Sesja wygas\u0142a. Zaloguj si\u0119 ponownie.");case j.HINT_CONN:return ea._("{Chat} Facebooka jest obecnie niedost\u0119pny.",[ea.param("Chat",ea._("Czat"))]);case j.HINT_MAINT:return ea._("{Chat} Facebooka jest obecnie poddawany czynno\u015bciom konserwacyjnym.",[ea.param("Chat",ea._("Czat"))]);default:return ea._("{Chat} Facebooka jest obecnie niedost\u0119pny.",[ea.param("Chat",ea._("Czat"))]);}};ja.prototype._getReconnectMsg=function(ka){"use strict";var la;if(ka===null||false===navigator.onLine){la=ea._("Nie mo\u017cna po\u0142\u0105czy\u0107 z czatem. Sprawd\u017a po\u0142\u0105czenie z internetem.");}else if(ka>k.get('warning_countdown_threshold_msec')){var ma=p.create('a',{href:'#',className:'fbChatReconnectLink'},ea._("Spr\u00f3buj ponownie")),na=p.create('div',null,ma);la=p.create('div',{},ea._("Brak mo\u017cliwo\u015bci po\u0142\u0105czenia si\u0119 z czatem"));p.appendContent(la,na);}else if(ka>1000){la=ea._("Nie mo\u017cna po\u0142\u0105czy\u0107 z czatem. Pr\u00f3ba ponownego nawi\u0105zania po\u0142\u0105czenia za {seconds} sekund...",[ea.param("seconds",Math.floor(ka/1000))]);}else la=ea._("Nie mo\u017cna po\u0142\u0105czy\u0107 z czatem. Pr\u00f3ba ponownego nawi\u0105zania po\u0142\u0105czenia...");return la;};ja.prototype._resetShowWarningTimeout=function(){"use strict";if(this.showWarningTimeout){clearTimeout(this.showWarningTimeout);this.showWarningTimeout=null;}};ja.prototype._handleChannelConnected=function(ka){"use strict";this._resetShowWarningTimeout();if(this.orderedList.isVisible())m.goOnline();this.warningMsgText=null;this._updateView();};ja.prototype._handleChannelShutdown=function(ka,la){"use strict";this._resetShowWarningTimeout();this.warningMsgText=this._getShutdownReason(la);this._updateView();};ja.prototype._handleChannelReconnecting=function(ka,la){"use strict";this._resetShowWarningTimeout();this.warningMsgText=this._getReconnectMsg(la);if(la>1000){if(la>k.get('warning_countdown_threshold_msec')){if(this.warningMsgEventListener){this.warningMsgEventListener.remove();this.warningMsgEventListener=null;}this.warningMsgEventListener=q.listen(this.message,'click',function(event){if(n.hasClass(event.getTarget(),'fbChatReconnectLink')){this._tryReconnect();event.kill();}}.bind(this));}this.showWarningTimeout=da(this._handleChannelReconnecting.bind(this,ka,la-1000),1000);}this._updateView();};ja.prototype._tryReconnect=function(){"use strict";if(i.disconnected())i.reconnect();};ja.prototype._handleVisibilityChange=function(){"use strict";this._updateView();if(!m.isOnline())this.hide();};ja.prototype._updateView=function(ka){"use strict";var la=this.container;if(la){n.conditionClass(la,'offline',!m.isOnline());n.conditionClass(la,'error',i.disconnected());}if(i.disconnected())p.setContent(this.message,this.warningMsgText);var ma,na;if(!m.isOnline()){ma=ea._("{Chat} (Wy\u0142\u0105czony)",[ea.param("Chat",ea._("Czat"))]);}else if(i.disconnected()){ma=ea._("{Chat} (roz\u0142\u0105czono)",[ea.param("Chat",ea._("Czat"))]);}else{var oa=z.getOnlineCount();if(oa){var pa=s.span({className:"count"},"(",oa,")");ma=ea._({"*":"{Chat} {number-available}"},[ea.param("Chat",ea._("Czat")),ea.param("number-available",pa,[0,oa])]);}else{ma=ea._("Czat");na=true;}}this._setUnread(this._unreadMessageCount);this._setLabel(ma,na);this.buttonContentChanged();};ja.prototype.onButtonClick=function(){"use strict";if(n.shown(this.typeahead.getElement())){var ka=this.subscribe('show',function(){this.typeahead.getCore().getElement().focus();}.bind(this));setTimeout(this.unsubscribe.bind(this,ka),0);}};ja.prototype.onHide=function(){"use strict";this._isOpen=false;if(this._buddyListRenderSubscription){this.orderedList.unsubscribe(this._buddyListRenderSubscription);this._buddyListRenderSubscription=null;}this._hideBuddyList();this.typeahead.getCore().reset();};ja.prototype._onKeyDown=function(event){"use strict";var ka=q.getKeyCode(event);if(ka===u.ESC&&!n.hasClass(this.root,'menuOpened')){this.hide();return false;}else if(ka==u.RETURN)l.enable();};ja.prototype._onSidebarHide=function(event){"use strict";this.getButton().focus();};ja.prototype.onResize=function(){"use strict";var ka=o.getMaxFlyoutHeight(this.root)-60,la=Math.max(250,ka);this.orderedList.setNumTopFriends(Math.floor(la/fa));};ja.prototype._showBuddyList=function(){"use strict";if(!this._buddyListRenderSubscription)this._buddyListRenderSubscription=this.orderedList.subscribe('render',o.setUseMaxHeight.bind(o,this.root,false));n.hide(this.typeaheadContainer);this.orderedList.show();ga.bump('buddylist_show');};ja.prototype._hideBuddyList=function(){"use strict";n.show(this.typeaheadContainer);this.orderedList.hide();ga.bump('buddylist_hide');};ja.prototype.onShow=function(){"use strict";this._isOpen=true;if(i.disconnected()){this._tryReconnect();this._showBuddyList();}else m.goOnline(this._showBuddyList.bind(this));};ja.prototype._setLabel=function(ka,la){"use strict";var ma=this.label.textContent||this.label.innerText;if(ma!==ka){var na=this.label.cloneNode(true);p.setContent(na,ka);p.replace(this.label,na);this.label=na;}this.throbber&&n.conditionShow(this.throbber,!!la);};ja.prototype._setUnread=function(ka){"use strict";n.conditionShow(this.unreadCount,!!ka);if(ka){ka=s.span({className:"_51jx _5ayw"},ka);p.setContent(this.unreadCount,ka);}};ja.prototype._updateCount=function(){"use strict";this._updateView();};e.exports=ja;},null);
__d("P2PTriggersUtils",["CurrentEnvironment","MercuryIDs","P2PGKValues","P2PQEValues"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,l={canSeeTriggers:function(m){if(!j.P2PMessageTriggersEnabled)return false;if(h.isGroupChat(m))if(g.messengerdotcom&&!i.P2PGroupSendMessengerDotCom){return false;}else if(g.facebookdotcom&&!i.P2PGroupSendWWW)return false;return true;},getMatches:function(m){return m.match(k);}};e.exports=l;},null);
__d("DOMP2PTrigger",["CurrentEnvironment","JSXDOM","P2PAmountUtils","P2PTriggersUtils","TransformTextToDOMMixin","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={MAX_ITEMS:40,match:function(o){var p=j.getMatches(o);if(!p||!p.length)return false;var q=p[0];if(i.isAmountOverLegalLimit(q))return false;var r=p.index;return {startIndex:r,endIndex:r+q.length,element:this._element(q)};},_element:function(o){return (h.a({href:"#",className:(("_35i0")+(g.facebookdotcom?' '+"_4g4e":'')),"data-p2p-trigger":o},o));}};e.exports=l(n,k);},null);
__d("p2pTriggerJSXDOMToString",["DOMEmoji","DOMEmote","DOMP2PTrigger","JSXDOM","transformTextToDOM"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=function(m,n,o){var p=[];p.push(i);if(n)p.push(g);if(o)p.push(h);return (j.span(null,k(m,p))).innerHTML;};e.exports=l;},null);
__d("P2PTriggers.react",["DOM","Event","P2PActions","React","nullthrows","p2pTriggerJSXDOMToString"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"P2PTriggers",propTypes:{renderEmoji:n.bool,renderEmoticons:n.bool,text:n.string.isRequired,threadID:n.string.isRequired},getInitialState:function(){return {amount:''};},_clickListeners:(null),componentDidMount:function(){this._clickListeners=[];var p=g.scry(j.findDOMNode(this),'[data-p2p-trigger]');for(var q=0,r=p.length;q<r;q++)k(this._clickListeners).push(h.listen(p[q],'click',this.handleTriggerClick));},componentWillUnmount:function(){var p;if(this._clickListeners){for(var q=0,r=this._clickListeners.length;q<r;q++){p=this._clickListeners[q];if(p)p.remove();}this._clickListeners=[];}},getAmountFromTriggerClickEvent:function(p){var q=p.target.getAttribute('data-p2p-trigger')||'';return q.replace(/[^0-9\.]+/g,'');},handleTriggerClick:function(p){p.preventDefault();var q=this.getAmountFromTriggerClickEvent(p);this.setState({amount:q});this.openSendView();},openSendView:function(){i.chatSendViewOpened({threadID:this.props.threadID,amount:this.state.amount});},render:function(){var p=l(this.props.text,this.props.renderEmoji,this.props.renderEmoticons);return (j.createElement("span",{dangerouslySetInnerHTML:{__html:p}}));}});e.exports=o;},null);
__d("TextWithEntitiesAndP2P.react",["BaseTextWithEntities.react","Link.react","P2PTriggers.react","React"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=j.createClass({displayName:"TextWithEntitiesAndP2P",_renderText:function(l){return (j.createElement(i,{text:l,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji,threadID:this.props.threadID}));},_renderRange:function(l,m){if(this.props.interpolator){return this.props.interpolator(l,m);}else return (j.createElement(h,{href:m.entity},l));},render:function(){return (j.createElement(g,j.__spread({},this.props,{textRenderer:this._renderText,rangeRenderer:this._renderRange,ranges:this.props.ranges,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:this.props.text})));}});e.exports=k;},null);
__d("getURLRanges",["URI","URLScraper"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j,k){k=k||0;var l=h.match(j);if(!l)return [];var m=l;if(!(/^[a-z][a-z0-9\-+.]+:\/\//i.test(l)))m='http://'+l;if(!g.isValidURI(m))return [];k+=j.indexOf(l);var n=l.length,o=[{offset:k,length:l.length,entity:{url:m}}];return o.concat(i(j.substr(k+n),k+n));}e.exports=i;},null);
__d("MercuryMessageBody.react",["EmoticonsList","React","Link.react","P2PTriggersUtils","ReactComponentWithPureRenderMixin","SupportedEmoji","TextWithEntities.react","TextWithEntitiesAndP2P.react","URI","URLMatcher","cancelAnimationFrame","cx","fbt","getURLRanges","isFacebookURI","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=h,x=w.PropTypes,y=h.createClass({displayName:"MercuryMessageBody",mixins:[k],propTypes:{body:x.string,ranges:x.array,threadID:x.string},getInitialState:function(){return {richText:false};},_shouldRenderP2PTriggers:false,componentDidMount:function(){this._raf=v(this.setIsRichText);},targetBlankLinkInterpolator:function(z,aa){if(aa.entity&&aa.entity.url){var ba=new o(aa.entity.url);if(u(ba)&&!ba.getFragment())aa.entity.url=ba.addQueryData({__mref:'message_bubble'}).toString();}return (h.createElement(i,{target:"_blank",href:aa.entity},z));},setIsRichText:function(){delete this._raf;var z=this.props,aa=z.body,ba=z.ranges;this._shouldRenderP2PTriggers=!!(this.props.threadID&&j.canSeeTriggers(this.props.threadID)&&j.getMatches(aa));if((ba&&ba.length)||g.noncapturingRegexp.test(aa)||l.findEmoji(aa||'')||p.match(aa)||this._shouldRenderP2PTriggers)this.setState({richText:true});},componentWillUnmount:function(){this._raf&&q(this._raf);},render:function(){var z=this.props.body||'',aa;if(z.startsWith('?OTR'))return (h.createElement("span",{className:"_89h"},s._("[wiadomo\u015b\u0107 zaszyfrowana]")));z=z.replace(/\s+$/,'');if(z.length===0)return null;if(!this.state.richText)return h.createElement("span",{className:this.props.className},z);var ba=this.props.ranges;if(ba==undefined)ba=t(z);aa={className:this.props.className,interpolator:this.targetBlankLinkInterpolator,text:z,ranges:ba,renderEmoticons:true,renderEmoji:true};if(this._shouldRenderP2PTriggers){return (h.createElement(n,h.__spread({},aa,{threadID:this.props.threadID})));}else return (h.createElement(m,h.__spread({},aa)));}});e.exports=y;},null);
__d("DataViewPolyfill",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h,i,j){if(i===(void 0)){this.$DataViewPolyfill0=new Uint8Array(h);}else if(j===(void 0)){this.$DataViewPolyfill0=new Uint8Array(h,i);}else this.$DataViewPolyfill0=new Uint8Array(h,i,j);this.byteLength=this.$DataViewPolyfill0.byteLength;}g.prototype.getUint8=function(h){if(h>=this.$DataViewPolyfill0.length)throw new Error('Trying to read beyond bounds of DataViewPolyfill');return this.$DataViewPolyfill0[h];};g.prototype.getUint16=function(h,i){var j=this.getUint8(h),k=this.getUint8(h+1);return i?(k*256)+j:(j*256)+k;};g.prototype.getUint32=function(h,i){var j=this.getUint8(h),k=this.getUint8(h+1),l=this.getUint8(h+2),m=this.getUint8(h+3);return i?(((m*256+l)*256+k)*256)+j:(((j*256+k)*256+l)*256)+m;};g.isSupported=function(){return !!a.Uint8Array;};e.exports=g;},null);
__d("FBRTCCallabilityActions",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});function i(j){this.$FBRTCCallabilityActions0=j;}i.prototype.callabilityFetched=function(j,k){this.$FBRTCCallabilityActions0.dispatch({type:h.CALLABILITY_FETCHED,userID:j,callability:k});};i.prototype.callabilityFetchError=function(j){this.$FBRTCCallabilityActions0.dispatch({type:h.CALLABILITY_FETCH_ERROR,userID:j});};i.Types=h;e.exports=i;},null);
__d("XRTCCallabilityController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/rtc\/callability\/",{user_id:{type:"Int",required:true}});},null);
__d("FBRTCCallabilityDataManager",["AsyncRequest","FBRTCCallabilityActions","XRTCCallabilityController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k){this.$FBRTCCallabilityDataManager0=new h(k);}j.prototype.fetchCallability=function(k){var l=i.getURIBuilder().setInt('user_id',parseInt(k,10)).getURI(),m=this.$FBRTCCallabilityDataManager1.bind(this,k),n=this.$FBRTCCallabilityDataManager2.bind(this,k);new g().setURI(l).setHandler(m).setErrorHandler(n).send();};j.prototype.$FBRTCCallabilityDataManager1=function(k,l){this.$FBRTCCallabilityDataManager0.callabilityFetched(k,l.payload);};j.prototype.$FBRTCCallabilityDataManager2=function(k,l){this.$FBRTCCallabilityDataManager0.callabilityFetchError(k);};e.exports=j;},null);
__d("RTCCallabilityStore",["Cache","FBRTCAvailability","FluxStore","FBRTCCallabilityActions","FBRTCCallabilityDataManager","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=.5,n=5;for(var o in i)if(i.hasOwnProperty(o))q[o]=i[o];var p=i===null?null:i.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=i;function q(r){i.call(this,r);this.$RTCCallabilityStore0=new k(r);this.$RTCCallabilityStore1=new g();}q.prototype.__onDispatch=function(r){var s=r.type;switch(s){case j.Types.CALLABILITY_FETCHED:var t=r,u=t.userID,v=t.callability;this.$RTCCallabilityStore1.set(u,v.is_callable,null,(v.is_callable?n:m));this.__emitChange();break;case j.Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(r.userID,false,null,m);this.__emitChange();break;}};q.prototype.isCallable=function(r){if(h.isCallable(r))return true;if(!this.$RTCCallabilityStore1.has(r)){this.$RTCCallabilityStore0.fetchCallability(r);this.$RTCCallabilityStore1.set(r,false,null,m);}return !!(this.$RTCCallabilityStore1.get(r));};q.prototype.callButtonTooltip=function(r,s){if(this.isCallable(r))return l._("Rozpocznij wideorozmow\u0119 z u\u017cytkownikiem {shortname}",[l.param("shortname",s)]);return l._("Obecnie nie mo\u017cna przeprowadzi\u0107 wideorozmowy z u\u017cytkownikiem {shortname}",[l.param("shortname",s)]);};e.exports=q;},null);
__d("FBRTCCallabilityStore",["FBRTCDispatcher","RTCCallabilityStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new h(g);},null);
__d("ChatAnimatedGifs",["URI"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={shouldHideBody:function(i){if(!i.has_attachment)return false;for(var j=0;j<i.attachments.length;j++){var k=i.attachments[j];if(k.preview_url){var l=h.getRawUrlFromSafeUrl(k.preview_url);if(i.body==l)return true;}}return false;},getRawUrlFromSafeUrl:function(i){return new g(i).getQueryData().url;}};e.exports=h;},null);
__d("getImageSize",["DataViewPolyfill"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=a.DataView||g;function i(m){return {width:m.getUint16(6,true),height:m.getUint16(8,true)};}function j(m){return {width:m.getUint32(16,false),height:m.getUint32(20,false)};}function k(m){var n=m.byteLength,o=2;while(o<n){var p=m.getUint16(o,false);o+=2;if(p==65472||p==65474){return {width:m.getUint16(o+5,false),height:m.getUint16(o+3,false)};}else o+=m.getUint16(o,false);}return null;}function l(m){var n=new h(m);if(n.getUint8(0)==255&&n.getUint8(1)==216)return k(n);if(n.getUint8(0)==71&&n.getUint8(1)==73&&n.getUint8(2)==70)return i(n);if(n.getUint8(0)==137&&n.getUint8(1)==80&&n.getUint8(2)==78&&n.getUint8(3)==71)return j(n);return null;}e.exports=l;l.gif=i;l.png=j;l.jpeg=k;},null);
__d("ChatAutoSendPhotoUploader",["ArbiterMixin","AsyncUploadRequest","DOM","Event","FileForm","FileFormResetOnSubmit","FileInput","FormSubmitOnChange","JpegResizer","MercuryAttachmentType","PhotosMimeType","PhotosUploadID","SubscriptionsHandler","arrayContains","csx","getImageSize","getObjectValues","invariant","isEmpty","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();'use strict';function aa(){return 'upload_'+r.getNewID();}var ba=z(g);for(var ca in ba)if(ba.hasOwnProperty(ca))ea[ca]=ba[ca];var da=ba===null?null:ba.prototype;ea.prototype=Object.create(da);ea.prototype.constructor=ea;ea.__superConstructor__=ba;function ea(fa,ga,ha){this.$ChatAutoSendPhotoUploader0=ha;this.$ChatAutoSendPhotoUploader1=ga;this.$ChatAutoSendPhotoUploader2=new s();this.$ChatAutoSendPhotoUploader3={};this.$ChatAutoSendPhotoUploader4={};this.$ChatAutoSendPhotoUploader5=false;this.$ChatAutoSendPhotoUploader6=fa.getAttribute('action');this.$ChatAutoSendPhotoUploader7=new k(fa,[n,l]);this.$ChatAutoSendPhotoUploader7.setAllowCrossOrigin(true);this.$ChatAutoSendPhotoUploader7.setUploadInParallel(true);var ia=i.find(fa,"._4q60"),ja=i.find(ia,"._4q61");this.$ChatAutoSendPhotoUploader8=new m(ia,ja,ga);this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.$ChatAutoSendPhotoUploader7.subscribe('submit',this.$ChatAutoSendPhotoUploader9.bind(this)),this.$ChatAutoSendPhotoUploader7.subscribe('success',this.$ChatAutoSendPhotoUploadera.bind(this)),this.$ChatAutoSendPhotoUploader7.subscribe('failure',this.$ChatAutoSendPhotoUploaderb.bind(this)),this.$ChatAutoSendPhotoUploader7.subscribe('progress',this.$ChatAutoSendPhotoUploaderc.bind(this)),j.listen(ja,'click',function(){if(this.$ChatAutoSendPhotoUploaderd===(void 0))this.$ChatAutoSendPhotoUploadere();if(this.$ChatAutoSendPhotoUploaderd)if(o.prepareResource)o.prepareResource();this.inform('open');}.bind(this)));}ea.prototype.$ChatAutoSendPhotoUploadere=function(){this.$ChatAutoSendPhotoUploaderd=o.isSupported();if(this.$ChatAutoSendPhotoUploaderd)this.$ChatAutoSendPhotoUploader7.setPreprocessHandler(this.$ChatAutoSendPhotoUploaderf.bind(this));};ea.prototype.isUploading=function(){return !y(this.$ChatAutoSendPhotoUploader3);};ea.prototype.destroy=function(){this.$ChatAutoSendPhotoUploader2.release();this.$ChatAutoSendPhotoUploader7.destroy();this.$ChatAutoSendPhotoUploader3={};this.$ChatAutoSendPhotoUploader4={};};ea.prototype.$ChatAutoSendPhotoUploaderg=function(fa,ga){var ha=this.$ChatAutoSendPhotoUploaderh(fa);if(ga){ha.preview_width=ga.width;ha.preview_height=ga.height;}return ha;};ea.prototype.$ChatAutoSendPhotoUploaderh=function(fa){var ga={upload_id:fa,on_progress:function(ha){this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.subscribe('progress',ha));}.bind(this),on_resizing_progress:function(ha){this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.subscribe('resize_progress',ha));}.bind(this),on_success:function(ha){this.$ChatAutoSendPhotoUploader2.addSubscriptions(this.subscribe('success',ha));}.bind(this),upload_canceled:this.$ChatAutoSendPhotoUploaderi.bind(this),attach_type:p.PHOTO,preview_uploading:true};return ga;};ea.prototype.$ChatAutoSendPhotoUploaderf=function(fa,ga){var ha=fa.getFile();if(!q(ha.type).isJpeg())return ga(fa);o.getSingleton().resizeBlob(ha,function(ia,ja,ka){if(ja)fa.setFile(ja);ga(fa);},this.$ChatAutoSendPhotoUploaderj.bind(this,fa));};ea.prototype.$ChatAutoSendPhotoUploader9=function(){var fa=aa();this.$ChatAutoSendPhotoUploaderk(fa,this.$ChatAutoSendPhotoUploader1.files);};ea.prototype.$ChatAutoSendPhotoUploaderk=function(fa,ga){var ha={};if(typeof FileReader!=='undefined'&&FileReader.prototype.readAsArrayBuffer&&ga&&ga.length===1){this.$ChatAutoSendPhotoUploader3[fa]=fa;ha[fa]=ga[0];var ia=new FileReader();ia.onload=function(){this.inform('submit',{upload_id:fa,preview_attachments:[this.$ChatAutoSendPhotoUploaderg(fa,v(ia.result))]});}.bind(this);ia.onerror=function(){this.inform('submit',{upload_id:fa,preview_attachments:[this.$ChatAutoSendPhotoUploaderh(fa)]});}.bind(this);ia.readAsArrayBuffer(ga[0]);}else{var ja=[];if(!ga){this.$ChatAutoSendPhotoUploader3[fa]=fa;this.$ChatAutoSendPhotoUploader0.value=fa;ja.push(this.$ChatAutoSendPhotoUploaderh(fa));}else for(var ka=0;ka<ga.length;++ka){var la=aa();ha[la]=ga[ka];this.$ChatAutoSendPhotoUploader3[la]=fa;ja.push(this.$ChatAutoSendPhotoUploaderh(la));}this.inform('submit',{upload_id:fa,preview_attachments:ja});}if(Object.keys(ha).length>0)this.$ChatAutoSendPhotoUploader7.setFiles(ha);};ea.prototype.$ChatAutoSendPhotoUploadera=function(event,fa){var ga=this.$ChatAutoSendPhotoUploaderl(fa);if(this.$ChatAutoSendPhotoUploader3[ga]){var ha=this.$ChatAutoSendPhotoUploader3[ga];delete this.$ChatAutoSendPhotoUploader3[ga];var ia=fa.response.getPayload();if(!this.$ChatAutoSendPhotoUploader4[ha])this.$ChatAutoSendPhotoUploader4[ha]=[];this.$ChatAutoSendPhotoUploader4[ha].push({id:ga,audio_id:ia.metadata[0].audio_id,image_id:ia.metadata[0].image_id,file_id:ia.metadata[0].file_id,gif_id:ia.metadata[0].gif_id});this.inform('success',{upload_id:ga});if(!this.$ChatAutoSendPhotoUploaderm(ha))this.$ChatAutoSendPhotoUploadern(ha);this.$ChatAutoSendPhotoUploader8.clear();this.$ChatAutoSendPhotoUploader1=this.$ChatAutoSendPhotoUploader8.getInput();}};ea.prototype.$ChatAutoSendPhotoUploadern=function(fa){x(!this.$ChatAutoSendPhotoUploaderm(fa));this.$ChatAutoSendPhotoUploader4[fa].sort(function(ga,ha){return ga.id<ha.id?-1:1;});this.inform('all-uploads-completed',{upload_id:fa,audio_ids:this.$ChatAutoSendPhotoUploader4[fa].map(function(ga){return ga.audio_id;}),image_ids:this.$ChatAutoSendPhotoUploader4[fa].map(function(ga){return ga.image_id;}),file_ids:this.$ChatAutoSendPhotoUploader4[fa].map(function(ga){return ga.file_id;}),gif_ids:this.$ChatAutoSendPhotoUploader4[fa].map(function(ga){return ga.gif_id;})});delete this.$ChatAutoSendPhotoUploader4[fa];};ea.prototype.$ChatAutoSendPhotoUploaderc=function(event,fa){this.inform('progress',{upload_id:fa.upload.getName(),event:fa.event});};ea.prototype.$ChatAutoSendPhotoUploaderj=function(fa,event){this.inform('resize_progress',{upload_id:fa.getName(),event:event});};ea.prototype.$ChatAutoSendPhotoUploaderm=function(fa){return t(w(this.$ChatAutoSendPhotoUploader3),fa);};ea.prototype.$ChatAutoSendPhotoUploaderb=function(event,fa){var ga=this.$ChatAutoSendPhotoUploaderl(fa);this.$ChatAutoSendPhotoUploadero(ga,'last-upload-failed');this.$ChatAutoSendPhotoUploader8.clear();this.$ChatAutoSendPhotoUploader1=this.$ChatAutoSendPhotoUploader8.getInput();return false;};ea.prototype.$ChatAutoSendPhotoUploaderi=function(fa){this.$ChatAutoSendPhotoUploadero(fa,'last-upload-canceled');};ea.prototype.$ChatAutoSendPhotoUploadero=function(fa,ga){if(!this.$ChatAutoSendPhotoUploader3[fa])return;var ha=this.$ChatAutoSendPhotoUploader3[fa];delete this.$ChatAutoSendPhotoUploader3[fa];if(!this.$ChatAutoSendPhotoUploaderm(ha))if(this.$ChatAutoSendPhotoUploader4[ha]){this.$ChatAutoSendPhotoUploadern(ha);}else this.inform(ga,{upload_id:ha});};ea.prototype.$ChatAutoSendPhotoUploaderl=function(fa){if(fa.upload){return fa.upload.getName();}else return fa.response.getPayload().uploadID;};ea.prototype.uploadFile=function(fa){var ga=aa(),ha={};ha[ga]=fa;var ia=new h(this.$ChatAutoSendPhotoUploader6).setAllowCrossOrigin(true).setAllowCrossPageTransition(this.$ChatAutoSendPhotoUploader5).setRelativeTo(this.$ChatAutoSendPhotoUploader7.getRoot()).setFiles(ha);this.$ChatAutoSendPhotoUploader2.addSubscriptions(ia.subscribe('success',function(event,ja){this.$ChatAutoSendPhotoUploadera(event,{upload:ja,response:ja.getResponse()});}.bind(this)),ia.subscribe('failure',this.$ChatAutoSendPhotoUploaderb.bind(this)));ia.send();this.$ChatAutoSendPhotoUploaderk(ga,[fa]);};ea.prototype.setAllowCrossPage=function(fa){this.$ChatAutoSendPhotoUploader5=fa;this.$ChatAutoSendPhotoUploader7.setAllowCrossPageTransition(fa);};e.exports=ea;},null);
__d("ChatPrivacyActionController",["ChatVisibility","JSLogger","PresencePrivacy","copyProperties"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=function(l,m){this._userID=l;this._logger=h.create('blackbird');this._getState=function(){if(g.isOnline())return i.allows(this._userID)?k.NORMAL:k.BLOCKED;return k.OFFLINE;};this._togglePrivacy=function(){var n=this._getState();switch(this._getState()){case k.OFFLINE:if(g.isOnline()){this._logger.error('tabs_already_online');break;}this._logger.log('tabs_go_online',{tab_id:this._userID});g.goOnline(function(){if(!i.allows(this._userID)){if(this._getState()!==k.BLOCKED)this._logger.error('privacy_action_controller_blocked_inconsistency');this._togglePrivacy();}}.bind(this));break;case k.BLOCKED:i.allow(this._userID);this._logger.log('tabs_unblock',{tab_id:this._userID});break;case k.NORMAL:i.disallow(this._userID);this._logger.log('tabs_block',{tab_id:this._userID});break;}};setTimeout(function(){var n=function(){m&&m(this._getState());}.bind(this);n();this._subscribeToken=i.subscribe('privacy-changed',n);}.bind(this),0);};k.OFFLINE='offline';k.BLOCKED='blocked';k.NORMAL='normal';j(k.prototype,{togglePrivacy:function(){this._logger.log('gear_menu_toggle_privacy',{tab_id:this._userID});this._togglePrivacy();},destroy:function(){this._subscribeToken&&i.unsubscribe(this._subscribeToken);}});e.exports=k;},null);
__d("ChatShareLinkUploader",["AsyncRequest","CSS","DOM","URLScraper","MercuryShareLinkUploader","MercuryAttachmentTemplates","Event"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();for(var n in k)if(k.hasOwnProperty(n))p[n]=k[n];var o=k===null?null:k.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=k;function p(q,r,s,t,u){"use strict";this.$ChatShareLinkUploader0=q;this.$ChatShareLinkUploader1=r;this.$ChatShareLinkUploader2=s;this.$ChatShareLinkUploader3=false;this.$ChatShareLinkUploader4=null;this.$ChatShareLinkUploader5=t;this.$ChatShareLinkUploader6=u;this.$ChatShareLinkUploader7=false;m.listen(r,'keyup',function(){!this.getInputValue().length&&this.$ChatShareLinkUploader8.enable();}.bind(this));this.$ChatShareLinkUploader8=new j(r,t);this.$ChatShareLinkUploader8.subscribe('match',function(v,w){this.loadShare(w&&w.url);}.bind(this));this.$ChatShareLinkUploader9=1337;this.$ChatShareLinkUploadera=null;}p.prototype.getInputValue=function(){"use strict";return this.$ChatShareLinkUploader5?this.$ChatShareLinkUploader5():this.$ChatShareLinkUploader1.value;};p.prototype.getAttachData=function(){"use strict";return this.loadAttachData(this.$ChatShareLinkUploader3,this.$ChatShareLinkUploader0,this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader5);};p.prototype.getShareData=function(){"use strict";if(!this.$ChatShareLinkUploader3)return null;return this.getShareDataFromStage(this.$ChatShareLinkUploader3,this.$ChatShareLinkUploader0);};p.prototype.close=function(){"use strict";this.$ChatShareLinkUploaderb();this.$ChatShareLinkUploader8.disable();this.inform('closed');};p.prototype.clear=function(){"use strict";this.$ChatShareLinkUploaderb();this.$ChatShareLinkUploader8.enable();};p.prototype.$ChatShareLinkUploaderb=function(){"use strict";var q=this.$ChatShareLinkUploadera;delete this.$ChatShareLinkUploadera;if(q){i.remove(q);this.inform('dom-updated');}this.$ChatShareLinkUploaderc();this.$ChatShareLinkUploader3=false;this.$ChatShareLinkUploader7=false;this.$ChatShareLinkUploader4&&this.$ChatShareLinkUploader4.abort();this.$ChatShareLinkUploader4=null;this.$ChatShareLinkUploader8&&this.$ChatShareLinkUploader8.reset();};p.prototype.loadShareFromParams=function(q,r){"use strict";this.$ChatShareLinkUploader7=true;this.$ChatShareLinkUploaderd(new g().setMethod('POST').setURI('/ajax/share_params.php').setData({chat:true,share_type:q,share_params:r}));};p.prototype.loadShare=function(q,r){"use strict";this.$ChatShareLinkUploaderd(new g().setMethod('POST').setURI('/ajax/share_scrape.php').setData({chat:true,extra_params:JSON.stringify(r),u:q}),q);};p.prototype.loadedFromFeed=function(){"use strict";return this.$ChatShareLinkUploader7;};p.prototype.$ChatShareLinkUploaderc=function(){"use strict";return (++this.$ChatShareLinkUploader9);};p.prototype.$ChatShareLinkUploadere=function(){"use strict";return this.$ChatShareLinkUploader9;};p.prototype.$ChatShareLinkUploaderd=function(q,r){"use strict";this.$ChatShareLinkUploader4&&this.$ChatShareLinkUploader4.abort();var s=l[':fb:mercury:share-link-row'].build();if(this.$ChatShareLinkUploadera)i.remove(this.$ChatShareLinkUploadera);this.$ChatShareLinkUploadera=s.getRoot();m.listen(s.getNode('closeFileUpload'),'click',function(event){this.close();event.kill();}.bind(this));i.appendContent(this.$ChatShareLinkUploader0,this.$ChatShareLinkUploadera);h.show(this.$ChatShareLinkUploader0);this.inform('dom-updated');var t=this.$ChatShareLinkUploaderc();this.$ChatShareLinkUploader4=q.setHandler(function(u){return this.$ChatShareLinkUploaderf(t,u,r);}.bind(this));this.$ChatShareLinkUploader4.send();this.inform('link-detected');};p.prototype.$ChatShareLinkUploaderf=function(q,r,s){"use strict";if(this.$ChatShareLinkUploadere()!==q)return;this.$ChatShareLinkUploader4=null;i.appendContent(this.$ChatShareLinkUploadera,r.payload);this.$ChatShareLinkUploader2();this.$ChatShareLinkUploader3=true;if(!this.getAttachData()){this.close();if(s&&this.getInputValue().indexOf(s)===-1)this.$ChatShareLinkUploader6(s);return;}h.addClass(this.$ChatShareLinkUploadera,'done');};e.exports=p;},null);
__d("StickersFlyoutTriggerSelector.react",["React","Sticker.react","StickerConstants","StickerUtils","XUIContextualDialog.react","XUICloseButton.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g,o=n.PropTypes,p=84,q=g.createClass({displayName:"StickersFlyoutTriggerSelector",getDefaultProps:function(){return {stickers:[]};},propTypes:{context:o.object.isRequired,stickers:o.array,onStickerSelect:o.func.isRequired},shouldComponentUpdate:function(r){if(this.props.stickers.length!==r.stickers.length)return true;for(var s=0;s<Math.min(this.props.stickers.length,5);s++)if(this.props.stickers[s].id!==r.stickers[s].id)return true;return false;},_renderStickers:function(){if(!this.props.stickers||this.props.stickers.length===0)return null;var r=Math.floor(Math.random()*Math.min(this.props.stickers.length,5)),s=this.props.stickers[r],t=j.getScaledDimensions(s.height,s.width,i.TRAY_SIZE);return (g.createElement("div",null,g.createElement(l,{size:"small",className:"_2ohj",onClick:this.props.onDismissTrigger}),g.createElement("div",{className:"_5r8h _onc","data-id":s.id,onClick:function(){return this.props.onStickerSelect(s.id);}.bind(this)},g.createElement(h,{animationTrigger:"hover",className:"_5r8i",frameCount:s.frameCount,frameRate:s.frameRate||83,framesPerCol:s.framesPerCol,framesPerRow:s.framesPerRow,sourceHeight:t.height,sourceURI:s.sourceURI,sourceWidth:t.width,spriteURI:s.spriteURI,paddedSpriteURI:s.paddedSpriteURI,stickerID:s.id,style:{cursor:'pointer',height:'64px'}}))));},render:function(){return (g.createElement(k,{alignment:"left",autoFocus:false,context:this.props.context,onBlur:this._resetFlyout,offsetY:11,position:"above",shown:this.props.stickers&&this.props.stickers.length>0,width:p},this._renderStickers()));}});e.exports=q;},null);
__d("StickerTrigger",["EmoticonsList","Map","StickerConfig","StickerSearch","StickerServerRequests"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=new h(),m={findTriggerForInput:function(n,o){if(n===null){o([],null);return;}j.prepareTagsData().then(function(){return this.findTagForInput(n,function(p,q){return o(p,q);});}.bind(this));},findTagForInput:function(n,o){var p=this.findTriggeredWord(n);if(p){if(l.has(p)){o(l.get(p),p);}else k.getStickersForQuery(p,function(q){var r=q.getPayload();l.set(p,r);o(r,p);});}else o([],null);},_getRegex:function(){if(i.TriggerConfidence==='emoji_only'){return g.noncapturingRegexp;}else if(i.TriggerConfidence==='high')return (/^(?:\w+\s?){1,4}$/);return null;},findTriggeredWord:function(n){var o=j.getTagsIndex();if(!o)return null;n=n.toLowerCase();var p=n.match(this._getRegex()),q=null;for(var r=0;p!==null&&r<p.length;r++)if(o[p[r]])q=p[r];return q;}};e.exports=m;},null);
__d("StickerTriggerIndicator.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.PropTypes,k=g.createClass({displayName:"StickerTriggerIndicator",getDefaultProps:function(){return {stickers:[]};},propTypes:{stickers:j.array},shouldComponentUpdate:function(l){var m=this.props.stickers.length>0,n=l.stickers.length>0;return m!==n;},render:function(){var l=this.props.stickers&&this.props.stickers.length>0;return g.createElement("span",{className:((l?"emoticonIndicator":''))});}});e.exports=k;},null);
__d("ChatStickerTriggerController",["BanzaiLogger","React","StickerConfig","StickersFlyoutTriggerSelector.react","StickerTrigger","StickerTriggerIndicator.react"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(n,o,p,q,r){this.$ChatStickerTriggerController0=null;this.$ChatStickerTriggerController1=null;this.$ChatStickerTriggerController2=null;this.$ChatStickerTriggerController3=r;this.$ChatStickerTriggerController4=q;this.$ChatStickerTriggerController5=null;if(i.TriggerInterface==='one_tap'){this.$ChatStickerTriggerController1=h.render(h.createElement(j,{context:p,onStickerSelect:this.$ChatStickerTriggerController6.bind(this),onDismissTrigger:this.$ChatStickerTriggerController7.bind(this)}),n);this.$ChatStickerTriggerController2=n;}else if(i.TriggerInterface==='hyperlink'){this.$ChatStickerTriggerController1=h.render(h.createElement(l,null),o);this.$ChatStickerTriggerController2=o;}}m.prototype.setInput=function(n){this.$ChatStickerTriggerController8=n;};m.prototype.activateAfterparty=function(){this.$ChatStickerTriggerController9=true;clearTimeout(this.$ChatStickerTriggerControllera);this.$ChatStickerTriggerControllera=setTimeout(this.$ChatStickerTriggerControllerb.bind(this),5000);};m.prototype.updateInput=function(n){if(this.$ChatStickerTriggerController9)this.$ChatStickerTriggerControllerb();this.$ChatStickerTriggerControllerc(n);};m.prototype.onFlyoutShown=function(n){if(this.$ChatStickerTriggerController0&&!this.$ChatStickerTriggerControllerd){this.$ChatStickerTriggerControllerd=true;this.$ChatStickerTriggerController3(this.$ChatStickerTriggerController0,n);this.$ChatStickerTriggerController1.isMounted()&&this.$ChatStickerTriggerController1.setProps({stickers:[]});}else n();};m.prototype.getTriggeredWord=function(){return this.$ChatStickerTriggerController0;};m.prototype.$ChatStickerTriggerController6=function(n){this.$ChatStickerTriggerController4(n);this.$ChatStickerTriggerController7();};m.prototype.$ChatStickerTriggerController7=function(){this.$ChatStickerTriggerControllerd=true;this.$ChatStickerTriggerController1.isMounted()&&this.$ChatStickerTriggerController1.setProps({stickers:[]});};m.prototype.$ChatStickerTriggerControllere=function(n,o){if(this.$ChatStickerTriggerController5===null||this.$ChatStickerTriggerController5&&this.$ChatStickerTriggerController5.toLowerCase().indexOf(o)===-1){this.$ChatStickerTriggerController8.isMounted()&&this.$ChatStickerTriggerController8.setProps({triggeredWord:null});this.$ChatStickerTriggerController1.isMounted()&&this.$ChatStickerTriggerController1.setProps({stickers:[]});return;}if(o)g.log('StickersLoggerConfig',{event:'sticker_trigger_activated',numsearchresults:n.length,triggeredword:o,triggerused:false});this.$ChatStickerTriggerController0=o;this.$ChatStickerTriggerController8.isMounted()&&this.$ChatStickerTriggerController8.setProps({triggeredWord:o});if(!this.$ChatStickerTriggerControllerd)this.$ChatStickerTriggerController1.isMounted()&&this.$ChatStickerTriggerController1.setProps({stickers:n});};m.prototype.$ChatStickerTriggerControllerb=function(){clearTimeout(this.$ChatStickerTriggerControllera);this.$ChatStickerTriggerController9=false;this.$ChatStickerTriggerControllerd=false;this.$ChatStickerTriggerController0=null;this.$ChatStickerTriggerControllerc(null);};m.prototype.$ChatStickerTriggerControllerc=function(n){if(this.$ChatStickerTriggerController5!==n){this.$ChatStickerTriggerController5=n;k.findTriggerForInput(this.$ChatStickerTriggerController5,this.$ChatStickerTriggerControllere.bind(this));}};m.prototype.destroy=function(){h.unmountComponentAtNode(this.$ChatStickerTriggerController2);clearTimeout(this.$ChatStickerTriggerControllera);};e.exports=m;},null);
__d("ChatDateBreak.react",["React","Timestamp.react","cx","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"ChatDateBreak",propTypes:{date:m.instanceOf(Date).isRequired},shouldComponentUpdate:function(o){return this.props.date.getTime()!==o.date.getTime();},render:function(){var o=this.props.date,p=j(o,{today:'g:ia',withinWeek:'l g:ia',thisYear:'F jS, g:ia',older:'F j, Y g:i a'}),q=Math.round(o.getTime()/1000);return (g.createElement("div",g.__spread({},this.props,{className:k(this.props.className,"_5w-5")}),g.createElement("div",{className:"_5w-6"},g.createElement(h,{time:q,verbose:p,text:p}))));}});e.exports=n;},null);
__d("ChatAuthorPhotoBlock.react",["MercuryParticipants","React","cx","fbt","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=86400000,p=h.createClass({displayName:"ChatAuthorPhotoBlock",propTypes:{authorID:n.string.isRequired,hideName:n.bool,hidePhoto:n.bool,timestamp:n.number},getInitialState:function(){return {author:{id:null,name:'',href:'#',image_src:''}};},componentDidMount:function(){this.updateAuthor(this.props.authorID);},componentWillReceiveProps:function(q){if(q.authorID!=this.state.author.id)this.updateAuthor(q.authorID);},render:function(){return (h.createElement("div",h.__spread({},this.props,{className:l(this.props.className,"_5yt9")}),this.renderAuthorName(),this.renderAuthorPhoto(),this.props.children));},renderAuthorName:function(){if(!this.props.hideName)return (h.createElement("div",{className:"_5ys-",ref:"name"},this.state.author.name));},renderAuthorPhoto:function(){if(!this.props.hidePhoto){var q=null;if(this.props.timestamp){var r=this._getFormat(this.props.timestamp);q=k(new Date(this.props.timestamp),r);}var s=j._("{name} {time}",[j.param("name",this.state.author.name),j.param("time",q)]);return (h.createElement("a",{"aria-label":s,className:"_5ys_","data-hover":"tooltip","data-tooltip-position":"left",href:this.state.author.href||'#',ref:"link"},h.createElement("img",{src:this.state.author.image_src,ref:"image"})));}},updateAuthor:function(q){g.get(q,function(r){this.isMounted()&&this.setState({author:r});}.bind(this));},_getFormat:function(q){if(Date.now()-this.props.timestamp<o){return 'g:ia';}else if((new Date()).getFullYear()===(new Date(q).getFullYear())){return 'M jS, g:ia';}else return 'M j, Y g:ia';}});e.exports=p;},null);
__d("MessageBubbleMixin",["DOMDimensions","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=2,j={getInitialState:function(){return {bubbleWidth:null};},componentDidMount:function(){this._restyleBubble(this.props);},componentDidUpdate:function(k){if(k.maxWidth!==this.props.maxWidth||k.body!==this.props.body||(!k.attachments&&this.props.attachments))this._restyleBubble(k);},_restyleBubble:function(k){if(this.props.attachments){this.setState({bubbleWidth:null});return;}var l=h.findDOMNode(this.refs.bubble);if(k.maxWidth!==this.props.maxWidth||g.getElementDimensions(l).width>this.props.maxWidth){var m=this.props.maxWidth;this.setState({bubbleWidth:m},this._shrinkBubble);return;}this._shrinkBubble();},_shrinkBubble:function(){var k=h.findDOMNode(this.refs.bubble),l=g.getElementDimensions(k).width,m=h.findDOMNode(this.refs.content),n=(m)?(g.getElementDimensions(m).width+g.measureElementBox(h.findDOMNode(this.refs.contentWrapper),'width',true,false,false)):0,o=n+i;if(n>0&&o<this.props.maxWidth&&l-o-this.getBoxWidth()>0)this.setState({bubbleWidth:o});}};e.exports=j;},null);
__d("ChatBubble.react",["DOMDimensions","MercuryMessageBody.react","MessageBubbleMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=null,p=j.createClass({displayName:"ChatBubble",mixins:[i],propTypes:{attachments:n.node,body:n.string,maxWidth:n.number.isRequired,threadID:n.string},_renderContent:function(){if(!this.props.body)return null;return (j.createElement("div",{className:"_d97",ref:"contentWrapper"},j.createElement("span",{className:"_5yl5",ref:"content"},j.createElement(h,{body:this.props.body,ranges:this.props.ranges,threadID:this.props.threadID}))));},render:function(){return (j.createElement("div",j.__spread({},this.props,{className:l("_5w1r",this.props.className),ref:"bubble",style:{maxWidth:this.props.maxWidth,width:this.state.bubbleWidth}}),this._renderContent(),this.props.attachments));},contentWraps:function(){var q=j.findDOMNode(this.refs.content),r=q.getClientRects(),s=g.getElementDimensions(q).height;return (r&&r.length>1&&r[0].height<s);},getBoxWidth:function(){if(!o)o=g.measureElementBox(j.findDOMNode(this.refs.bubble),'width',true,true,false);return o;}});e.exports=p;},null);
__d("MessengerHotLikePreviewEvents",["mixInEventEmitter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={START:'start',STOP:'stop',POP:'pop'};g(h,{start:true,stop:true,pop:true});e.exports=h;},null);
__d("MessengerHotLikePreview.react",["MessengerHotLikePreviewEvents","MessengerHotLikeUtils","React","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=3,n=i.createClass({displayName:"MessengerHotLikePreview",propTypes:{since:l.number},getInitialState:function(){return {snapped:false};},componentDidMount:function(){g.addListener(g.STOP,this._snap);},getStyle:function(){var o=h.getPreviewURI();return Object.assign({backgroundImage:'url('+o+')',backgroundSize:'contain'},this._getSize());},render:function(){return (i.createElement("div",{className:(("_3w5x")+(this.state.snapped?' '+"_3w5y":'')+(this.props.isChat?' '+"mvs":'')),style:this.state.snapped?Object.assign({},this._getSize()):null},i.createElement("div",i.__spread({className:"_3w5-"},this.props,{style:Object.assign({},(this.props.style||{}),this.getStyle())}))));},_getSize:function(){var o=this._getGrowth();return this.state.snapped?h.getMetadataForHotLike(this.state.snapped):{height:o,width:o};},_getGrowth:function(){var o=h.getGrowCoefficientForSince(this.props.since);return 35*Math.max(1,o*m);},_snap:function(){if(this.state.snapped)return;var o=Date.now()-this.props.since,p=h.getStickerIDForTime(o);if(p)this.setState({snapped:p});}});e.exports=n;},null);
__d("MercuryAttachments.react",["MercuryAttachmentRenderer","DOM","Event","ImmutableObject","MessengerHotLikePreview.react","React","SubscriptionsHandler","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l,p=o.PropTypes,q=l.createClass({displayName:"MercuryAttachments",_fullReact:false,propTypes:{attachments:p.array.isRequired,maxWidth:p.number.isRequired,message:p.instanceOf(j).isRequired,isChat:p.bool,onImageLoad:p.func,onStickerClick:p.func},getDefaultProps:function(){return {isChat:false,onImageLoad:n,onStickerClick:n};},componentDidMount:function(){this._subscriptionsHandler=new m();this.renderAttachments();},componentDidUpdate:function(){this.renderAttachments();},componentWillUnmount:function(){this._subscriptionsHandler.release();},render:function(){if(this.props.attachments.length===1&&g.isShareAttachment(this.props.attachments[0])){this._fullReact=true;return g.constructStoryBasedShareAttachment(this.props.message,this.props.attachments[0],this.props.isChat,this.props.onImageLoad,this.props.maxWidth);}if(this.props.message.is_like_preview)return (l.createElement(k,{isChat:this.props.isChat,key:'hlp:'+this.props.message.like_preview_since,since:this.props.message.like_preview_since}));if(this._isStickerAttachment())return g.constructStickerComponent(this.props.message,this.props.attachments[0].metadata,this.props.onStickerClick,this.props.isChat);return l.createElement("div",l.__spread({},this.props));},renderAttachments:function(){if(this._isStickerAttachment())return;var r=l.findDOMNode(this);if(!this._fullReact){h.empty(r);var s=this.props.message,t=g.sortAttachmentsStablyByType(this.props.attachments),u=g.renderPhotoAttachments(t.filter(g.isPhotoAttachment),s,this.props.maxWidth);u&&h.appendContent(r,u);for(var v=0;v<t.length;v++){var w=t[v];if(g.isPhotoAttachment(w))continue;var x=g.renderAttachment(this.props.isChat,w,s,this.props.maxWidth,null,this.props.onStickerClick);x.error&&h.appendContent(r,x.error);x.content&&h.appendContent(r,x.content);}}h.scry(r,'img').forEach(function(y){this._subscriptionsHandler.addSubscriptions(i.listen(y,'load',function(){this.props.onImageLoad(y);}.bind(this)));}.bind(this));},_isStickerAttachment:function(){return (this.props.attachments.length===1&&g.isStickerAttachment(this.props.attachments[0]));}});e.exports=q;},null);
__d("ChatMessage.react",["Bootloader","BootloadedComponent.react","ChatAnimatedGifs","ChatAuthorPhotoBlock.react","ChatBubble.react","CSS","ImmutableObject","MercuryAttachment","MercuryAttachments.react","MercuryAttachmentRenderer","MercuryAttachmentType","MercuryErrorInfo","MercuryIDs","MercuryMessageError.react","MercuryMessageInfo","MercuryShareStyleMap","React","cx","fbt","formatDate","isRTL","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();'use strict';var ca=w,da=ca.PropTypes,ea=w.createClass({displayName:"ChatMessage",propTypes:{message:da.instanceOf(m).isRequired,maxBubbleWidth:da.number.isRequired,onImageLoad:da.func,onStickerClick:da.func},componentDidMount:function(){l.conditionClass(w.findDOMNode(this),"_2cnu",this.isOneLine());},isOneLine:function(){var ga=this.props.message;return (u.isInbound(ga)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps());},shouldComponentUpdate:function(ga,ha){return ga.message!==this.props.message;},render:function(){var ga=this.props.message,ha=u.isInbound(ga),ia=s.isGroupChat(ga.thread_id),ja=aa(ga.body),ka=r.hasErrorStatus(ga),la=(("_5wd4")+(ha?' '+"_1nc7":'')+(!ha?' '+"_1nc6":'')+(ha&&ia?' '+"_5ysy":'')+(ka?' '+"_1zcs":'')+(ja?' '+"direction_rtl":'')+(!ja?' '+"direction_ltr":'')),ma=new Date(ga.timestamp);return (w.createElement(j,w.__spread({},this.props,{authorID:ga.author,className:ba(this.props.className,la),hideName:!ha||!ia,hidePhoto:!ha,timestamp:ga.timestamp,title:ha?null:z(ma,'g:ia')}),this._renderInner(),this._renderUndertext()));},_renderInner:function(){if(this.props.message.is_filtered_content)return (w.createElement("div",{className:"_5wd9",ref:"inner"},this._renderFilteredContent()));return (w.createElement("div",{className:"_5wd9",ref:"inner"},this._renderBubble(),this._renderAttachments('outside')));},_renderUndertext:function(){if(this.props.message.is_filtered_content)return null;return (w.createElement("div",{className:"_3ry4",ref:"undertext"},w.createElement(t,{className:"_5wda clearfix",message:this.props.message,ref:"status"}),this._renderSpoofWarning()));},_renderSpoofWarning:function(){return (this.props.message.is_spoof_warning?w.createElement(h,{bootloadPlaceholder:w.createElement("span",null),bootloadComponent:function(ga){g.loadModules(["MercurySpoofWarning.react"],ga);},authorID:this.props.message.author,className:"_5wdb"}):null);},_renderFilteredContent:function(){return w.createElement("div",{className:"_5wdc uiBoxYellow clearfix"},y._("Ta wiadomo\u015b\u0107 nie jest ju\u017c dost\u0119pna, bo zosta\u0142a oznaczona jako naruszenie zasad lub spam."));},_renderAttachments:function(ga){var ha=this.props.message,ia=ga=='inside'?'attachmentsInside':'attachmentsOutside',ja=n.get(ha).filter(function(ka){var la=p.isBubblePreferred(ka)&&!((p.isPhotoAttachment(ka)||p.isVideoAttachment(ka))&&!ha.body);return (la&&ga==='inside')||(!la&&ga==='outside');});if(ja.length>0)return w.createElement(o,{className:((ga==='outside'?"_3e7u":'')),isChat:true,message:ha,attachments:ja,ref:ia,onImageLoad:this.props.onImageLoad,onStickerClick:this.props.onStickerClick,maxWidth:this.props.maxBubbleWidth});},_renderBubble:function(){var ga=this.props.message,ha=ga.body,ia=this._renderAttachments('inside'),ja=u.isInbound(ga);if(i.shouldHideBody(ga))ha='';if(ha||ia)return (w.createElement("div",{className:"_5wde"},w.createElement(k,{attachments:ia,body:ha,className:(("_5wdf")+(fa(ga,ja)?' '+"_3okg":'')),maxWidth:this.props.maxBubbleWidth,ranges:ga.ranges,ref:"bubble",threadID:ga.thread_id})));}});function fa(ga,ha){var ia=n.get(ga);if(!ga.body&&ia)return !ia.some(function(ja){if(ja.attach_type!==q.SHARE||!ja.share)return false;var ka=v.getStyleFactory(ja.share);if(ka){var la=ka.factory;return (la.requiresNoBubbleTail&&la.requiresNoBubbleTail(ja,ha));}return false;});return true;}e.exports=ea;},null);
__d("ChatVideoCallLink.react",["AvailableList","AvailableListConstants","ChatVisibility","MercuryViewer","React","SubscriptionsHandler","VideoCallCore","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=k,q=p.PropTypes,r=k.createClass({displayName:"ChatVideoCallLink",propTypes:{message:q.object.isRequired,onClick:q.func.isRequired},componentDidMount:function(){this._subscriptions=new l();this._subscriptions.addSubscriptions(g.subscribe(h.ON_AVAILABILITY_CHANGED,this.availabilityChanged));},componentWillUnmount:function(){this._subscriptions.release();},render:function(){return (k.createElement("a",{className:(("callBackLink")+(this.shouldHideLink()?' '+"hidden_elem":'')),"data-gt":JSON.stringify({videochat:'clicked_callback_link'}),href:"#",onClick:this.linkClicked},this.renderLinkText()));},renderLinkText:function(){if(this.props.message.log_message_data.event_name=='install_canceled'){return (o._("Spr\u00f3buj ponownie przeprowadzi\u0107 konfiguracj\u0119 i oddzwo\u0144."));}else if(!this.props.message.log_message_data.event_name&&this.props.message.log_message_data.callee==j.getID()&&!this.props.message.log_message_data.answered)return (o._("Oddzwo\u0144"));},shouldHideLink:function(){return !i.isOnline()||!m.availableForCall(this.props.message.log_message_data.to);},linkClicked:function(){var s;if(this.props.message.log_message_data.event_name=='install_canceled'){s='callback_cancelinstall_link';}else if(!this.props.message.log_message_data.event_name&&this.props.message.log_message_data.callee==j.getID()&&!this.props.message.log_message_data.answered)s='callback_link';this.props.onClick(this.props.message.log_message_data.to,this.props.message.thread_id,s);},availabilityChanged:function(){this.forceUpdate();}});e.exports=r;},null);
__d("MercuryLogMessage.react",["DOM","Event","ChatVideoCallLink.react","ImmutableObject","MercuryLogMessageRenderer","MercuryLogMessageType","React","VideoCallSupport","cx","emptyFunction","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=m,t=s.PropTypes,u=m.createClass({displayName:"MercuryLogMessage",propTypes:{maxWidth:t.number,message:t.instanceOf(j).isRequired,onImageLoad:t.func,onVideoCallLinkClick:t.func},getDefaultProps:function(){return {onImageLoad:p};},getInitialState:function(){return {messageText:null};},componentDidMount:function(){this.componentWillReceiveProps(this.props);},componentWillReceiveProps:function(v){k.renderText(v.message,function(w){this.setState({messageText:w});}.bind(this));},shouldComponentUpdate:function(v,w){return (this.state.messageText!=w.messageText||v.maxWidth!==this.props.maxWidth);},componentDidUpdate:function(){var v=m.findDOMNode(this.refs.attachment);k.renderAttachmentLegacy(v,this.props.message);g.scry(v,'img').forEach(function(w){var x=h.listen(w,'load',function(){this.props.onImageLoad(w);x.remove();}.bind(this));}.bind(this));},render:function(){return (m.createElement("div",m.__spread({},this.props,{className:r(this.props.className,"_5ye6"),style:Object.assign({},this.props.style,this._getStyle()),title:q(new Date(this.props.message.timestamp),'g:ia')}),k.renderIcon(this.props.message),m.createElement("div",{className:"_5ye7"},this.state.messageText,this.renderVideoCallLink()),m.createElement("div",{className:"_5ye8",ref:"attachment"})));},renderVideoCallLink:function(){if(this.props.message.log_message_type!==l.VIDEO_CALL||!this.props.onVideoCallLinkClick||!n.isVideoCallSupported())return null;return (m.createElement(i,{message:this.props.message,onClick:this.props.onVideoCallLinkClick}));},_getStyle:function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null;}});e.exports=u;},null);
__d("ChatConversation.react",["ChatDateBreak.react","ChatMessage.react","ImmutableObject","MercuryActionType","MercuryLogMessage.react","React","cx","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l,p=o.PropTypes,q=1000*60*60,r=l.createClass({displayName:"ChatConversation",propTypes:{maxBubbleWidth:p.number.isRequired,messages:p.arrayOf(p.instanceOf(i)).isRequired,onCallLinkClick:p.func,onImageLoad:p.func,onStickerClick:p.func},componentWillReceiveProps:function(s){n(s.maxBubbleWidth===this.props.maxBubbleWidth);},render:function(){var s=this.props.messages,t=[];for(var u=0;u<s.length;u++){var v=s[u],w=(u>0)?s[u-1]:null;if(!w||v.timestamp-w.timestamp>q)t.push(l.createElement(g,{date:new Date(v.timestamp),key:'db:'+v.message_id}));if(v.action_type==j.LOG_MESSAGE){t.push(l.createElement(k,{className:"_5w0o",key:v.message_id,message:v,onImageLoad:this.props.onImageLoad,onCallLinkClick:this.props.onCallLinkClick}));}else t.push(l.createElement(h,{key:v.message_id,message:v,maxBubbleWidth:this.props.maxBubbleWidth,onImageLoad:this.props.onImageLoad,onStickerClick:this.props.onStickerClick}));}return l.createElement("div",null,t);}});e.exports=r;},null);
__d("MercuryMessageList",["immutable","LogHistory","Map","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h.getInstance('mercury_message_list');function l(n){this.$MercuryMessageList0=g.List(n||[]);this.$MercuryMessageList1();}l.prototype.append=function(n){var o;this.$MercuryMessageList0=(o=this.$MercuryMessageList0).push.apply(o,n);this.$MercuryMessageList1();m('append',n);};l.prototype.prepend=function(n){var o;this.$MercuryMessageList0=(o=this.$MercuryMessageList0).unshift.apply(o,n);this.$MercuryMessageList1();m('prepend',n);};l.prototype.update=function(n){var o=n.filter(function(p){return this.contains(p);}.bind(this));if(o.length===0)return;this.$MercuryMessageList0=this.$MercuryMessageList0.withMutations(function(p){o.forEach(function(q){var r=this.$MercuryMessageList2.get(q.message_id);if(r!==(void 0))p.set(r,q);}.bind(this));}.bind(this));m('update',o);};l.prototype.reorder=function(n){this.$MercuryMessageList0=g.List(n);this.$MercuryMessageList1();m('reorder',n);};l.prototype.at=function(n){return this.$MercuryMessageList0.get(n);};l.prototype.contains=function(n){return this.$MercuryMessageList2.has(n.message_id);};l.prototype.toArray=function(){return this.$MercuryMessageList0.toArray();};l.prototype.toMap=function(){return new i(g.Seq(this.$MercuryMessageList0).map(function(n){return [n.message_id,n];}));};l.prototype.$MercuryMessageList1=function(){this.$MercuryMessageList2=new i(g.Seq(this.$MercuryMessageList0).map(function(n,o){return [n.message_id,o];}));};function m(event,n){j(function(){k.debug(event,{messageIDs:n.map(function(o){return o.message_id;})});},0);}e.exports=l;},null);
__d("MercuryMessageStore",["MercuryAPIArgsSource","LogHistory","MercuryViewer","MercuryMessageList","SubscriptionsHandler","MercuryThreadlistConstants","copyProperties","merge","mixInEventEmitter","setImmediate","setTimeoutAcrossTransitions","MercuryMessages","MercuryThreadInformer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=b('MercuryMessages').get(),s=b('MercuryThreadInformer').get(),t=b('MercuryThreads').get(),u=h.getInstance('mercury_message_store');function v(x,y){this.$MercuryMessageStore0=x;this.$MercuryMessageStore1=new j();this.$MercuryMessageStore2=1;this.$MercuryMessageStore3=null;this.$MercuryMessageStore4=0;this.$MercuryMessageStore5=y||l.RECENT_MESSAGES_LIMIT;this.$MercuryMessageStore6=new k();this.$MercuryMessageStore6.addSubscriptions(s.subscribe('messages-received',function(z,aa){return this.$MercuryMessageStore8(aa);}.bind(this)),s.subscribe('messages-updated',function(z,aa){return aa[this.$MercuryMessageStore0]&&this.$MercuryMessageStore9(aa[this.$MercuryMessageStore0]);}.bind(this)),s.subscribe('messages-reordered',function(z,aa){return aa[this.$MercuryMessageStore0]&&this.$MercuryMessageStorea();}.bind(this)));u.debug('constructed',{threadID:this.$MercuryMessageStore0});this.$MercuryMessageStoreb();}v.prototype.setNewThreadID=function(x){this.$MercuryMessageStorec=x;};v.prototype.destroy=function(){this.$MercuryMessageStore6&&this.$MercuryMessageStore6.release();u.debug('destroyed',{threadID:this.$MercuryMessageStore0});};v.prototype.subscribe=function(x){return this.addRetroactiveListener('updated',x);};v.prototype.fetchMoreMessages=function(){if(r.hasLoadedExactlyNMessages(this.$MercuryMessageStore0,this.$MercuryMessageStore4)&&r.hasLoadedAllMessages(this.$MercuryMessageStore0))return false;if(t.isNewEmptyLocalThread(this.$MercuryMessageStore0))return false;this.$MercuryMessageStoreb();return true;};v.prototype.$MercuryMessageStoreb=function(){var x=this.$MercuryMessageStore4+this.$MercuryMessageStore5*this.$MercuryMessageStore2;u.debug('fetching',{threadID:this.$MercuryMessageStore0,limit:x});r.getThreadMessagesRange(this.$MercuryMessageStore0,0,x,this.$MercuryMessageStored.bind(this),null,g.MERCURY);if(this.$MercuryMessageStore2<10)this.$MercuryMessageStore2+=1;if(r.hasLoadedNMessages(this.$MercuryMessageStore0,x))p(function(){this.$MercuryMessageStorea();}.bind(this));};v.prototype.$MercuryMessageStored=function(x){if(x&&x.length){this.$MercuryMessageStore3=x[0].timestamp;this.$MercuryMessageStore4=x.length;u.debug('fetched',{threadID:this.$MercuryMessageStore0,earliestMessageTimestamp:this.$MercuryMessageStore3,count:this.$MercuryMessageStore4});}else if(x&&!x.length&&!this.$MercuryMessageStore4)this.$MercuryMessageStoree(v.THREAD_IS_EMPTY);};v.prototype.$MercuryMessageStore8=function(x){var y=[],z=x[this.$MercuryMessageStore0];if(z&&z.length)y=y.concat(z);if(this.$MercuryMessageStorec){var aa=x[this.$MercuryMessageStorec];if(aa&&aa.length){y=y.concat(aa);this.$MercuryMessageStorec=null;}}if(y.length){this.$MercuryMessageStore1.append(y);this.$MercuryMessageStore4+=y.length;var ba=y.every(function(ca){return ca.author!=i.getID();});this.$MercuryMessageStoree(v.MESSAGES_RECEIVED,{allFromOthers:ba});}};v.prototype.$MercuryMessageStore9=function(x){this.$MercuryMessageStore1.update(r.getMessagesFromIDs(Object.keys(x)));this.$MercuryMessageStoref();this.$MercuryMessageStoree(v.MESSAGES_CHANGED);};v.prototype.$MercuryMessageStorea=function(){if(!this.$MercuryMessageStore3)return;this.$MercuryMessageStore1.reorder(r.getThreadMessagesSinceTimestamp(this.$MercuryMessageStore0,this.$MercuryMessageStore3));this.$MercuryMessageStoref();this.$MercuryMessageStoree(v.MESSAGES_REORDERED);};v.prototype.$MercuryMessageStoree=function(x,y){var z=this.$MercuryMessageStore1.toArray();this.releaseHeldEventType('updated');this.emitAndHold('updated',n({messages:z,eventType:x},y));w(this.$MercuryMessageStore0,x,z);};v.prototype.$MercuryMessageStoref=function(){var x=this.$MercuryMessageStore1.at(0);if(x)this.$MercuryMessageStore3=x.timestamp;};function w(x,y,z){q(function(){u.debug('update:'+y,{threadID:x,messageIDs:z.map(function(aa){return aa.message_id;})});},0);}m(v,{MESSAGES_FETCHED:'fetched',MESSAGES_CHANGED:'changed',MESSAGES_RECEIVED:'received',MESSAGES_REORDERED:'reordered',THREAD_IS_EMPTY:'thread-is-empty'});o(v,{updated:true});e.exports=v;},null);
__d("ChatTabMessagesView",["Animation","Arbiter","BanzaiLogger","BootloadedComponent.react","Bootloader","ChatConfig","ChatConversation.react","ChatPerfInstrumentation","ChatTabViewEvents","ChatWelcomeMessage","CSS","DOM","Event","MercuryLastMessageIndicator.react","LiveTimer","MessengerHotLikePreviewEvents","MercuryViewer","MercuryMessageStore","React","Scroll","ServerTime","StickerActions","StickerState","StickerStoreController","Style","SubscriptionsHandler","UserAgent_DEPRECATED","arrayContains","copyProperties","getElementPosition","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka){b.__markCompiled&&b.__markCompiled();'use strict';var la=70,ma=null,na=20;function oa(qa){if(ma===null){var ra=qa.childNodes[0];ea.set(qa,'overflow','scroll');ma=ra.clientWidth-la;ea.set(qa,'overflow','');}return ma;}function pa(qa,ra,sa,ta,ua,va,wa,xa){this.loadingIcon=ua;this.threadID=qa;this.sheetController=ra;this.scrollContainer=sa;this.conversationElem=ta;this.tabView=xa;u.restart(aa.get()/1000);this._loadingMoreMessages=false;this._initialLoadFinished=false;function ya(){o.inform('interaction-with-tab',qa);}this._subscriptions=new fa();this._subscriptions.addSubscriptions(h.subscribe('overflow-applied-to-body',this.scrollToBottom.bind(this)),s.listen(this.scrollContainer,'mousedown',ya));if(ga.firefox()){var za=('WheelEvent' in window)?'wheel':'DOMMouseScroll';this.scrollContainer.addEventListener(za,ya,false);}else this._subscriptions.addSubscriptions(s.listen(this.scrollContainer,'mousewheel',ya));this._subscriptions.addSubscriptions(s.listen(this.scrollContainer,'scroll',ka(this.scrolling,50,this)));if(l.get('chat_react')){var ab;y.render(y.createElement(j,{bootloadPlaceholder:y.createElement("span",null),bootloadComponent:function(cb){k.loadModules(["ChatTypingIndicators.react"],cb);},threadID:this.threadID,indicatorsWillShow:function(){return ab=this.isScrolledToBottom();}.bind(this),indicatorsDidShow:function(){return ab&&this.scrollToBottom(true);}.bind(this)}),wa);}else k.loadModules(["MercuryTypingIndicator"],function(cb){this.typingIndicator=new cb(this.threadID,wa,this);}.bind(this));var bb;this.lastMessageIndicatorNode=va;this.lastMessageIndicator=y.render(y.createElement(t,{threadID:this.threadID,hideTyping:true,indicatorWillShow:function(){return bb=this.isScrolledToBottom();}.bind(this),indicatorDidShow:function(){return bb&&this.scrollToBottom(true);}.bind(this)}),this.lastMessageIndicatorNode);this.initializeConversation();}ia(pa.prototype,{initializeConversation:function(){this._store=new x(this.threadID);this._conversation=y.render(y.createElement(m,{maxBubbleWidth:oa(this.scrollContainer),messages:[],onImageLoad:function(qa){var ra=this.scrollContainer,sa=z.getTop(ra)+ra.clientHeight;if(sa+qa.offsetHeight>=ra.scrollHeight)this.scrollToBottom();}.bind(this),onStickerClick:this._onStickerClick.bind(this),onCallLinkClick:function(qa,ra,sa){o.inform('video-call-clicked',{userID:qa,threadID:ra,clickSource:sa});}}),this.conversationElem);this._subscriptions.addSubscriptions(this._store.subscribe(this._updateMessageFromStore.bind(this)),v.addListener(v.START,function(qa,ra){if(this.threadID!==ra)return;this._likePreview=qa;this._conversation.setProps({messages:this._getNormalizedMessages()},this.scrollToBottom.bind(this));this.scrollToBottom();this._scrollToBottomInterval=setInterval(this.scrollToBottom.bind(this),50);}.bind(this)),v.addListener(v.STOP,function(qa){if(this.threadID!==qa)return;this._likePreview=null;clearInterval(this._scrollToBottomInterval);}.bind(this)),v.addListener(v.POP,function(qa){if(this.threadID!==qa)return;clearInterval(this._scrollToBottomInterval);this._likePreview=null;this._conversation.setProps({messages:this._getNormalizedMessages()});}.bind(this)));},_updateMessageFromStore:function(qa){if(qa.eventType==x.MESSAGES_RECEIVED&&qa.allFromOthers&&!this.isScrolledToBottom()){this.sheetController.openNewMessagesSheet();this._newMessagesSheetOpened=true;}if(qa.eventType==x.MESSAGES_REORDERED){this._loadingMoreMessages=false;q.hide(this.loadingIcon);}var ra=this.isScrolledToBottom(),sa=this._getLoadingHeight(),ta=this.scrollContainer.scrollHeight,ua=z.getTop(this.scrollContainer);this._messages=qa.messages;var va=p.getWelcomeMessage(this.threadID);if(va)this._messages.push(va);this._conversation.setProps({messages:this._getNormalizedMessages()},function(){if(ra||this._shouldScrollToBottom){this.scrollToBottom();this.setShouldScrollToBottom(false);}else if(qa.eventType==x.MESSAGES_REORDERED)this.scrollToPosition(this.scrollContainer.scrollHeight-ta-sa+ua);if(!this._initialLoadFinished){this._initialLoadFinished=true;n.logCHAT_CONVERSATION_TTI();}}.bind(this));this.lastMessageIndicator.setProps({lastMessage:this._messages.length>0?this._messages[this._messages.length-1]:null});if(qa.eventType==x.MESSAGES_RECEIVED&&this._shouldShowStickerReplyNUX(this._messages)&&this.tabView&&this.tabView.isFocused())this.tabView.showStickerReplyNUX();if(qa.eventType==x.MESSAGES_CHANGED)this._checkToAnimateSticker();},setShouldScrollToBottom:function(qa){this._shouldScrollToBottom=qa;},scrolling:function(){this._checkToAnimateSticker();if(this.isScrolledNearTop()&&!this._loadingMoreMessages&&!this.isScrolledToBottom()&&!this.tabView._isDragDropActive)if(this._store.fetchMoreMessages()){q.show(this.loadingIcon);this._loadingMoreMessages=true;}if(!this._newMessagesSheetOpened)return;if(this.isScrolledToBottom()){this.sheetController.closeNewMessagesSheet();this._newMessagesSheetOpened=false;}},getScrollTop:function(){return this.scrollContainer&&z.getTop(this.scrollContainer);},destroy:function(){r.scry(this.conversationElem,'.stickerContainer').forEach(function(qa){return y.unmountComponentAtNode(qa);});y.unmountComponentAtNode(this.conversationElem);this._subscriptions&&this._subscriptions.release();y.unmountComponentAtNode(this.lastMessageIndicatorNode);delete this.lastMessageIndicator;this._store&&this._store.destroy();this.destroyed=true;},_getLoadingHeight:function(){return this.loadingHeight||this.loadingIcon.clientHeight;},_shouldShowStickerReplyNUX:function(qa){if(!ca.shouldShowStickerReplyNUX()||!qa.length)return false;var ra=qa[qa.length-1];if(ra.author===w.getID())return false;if(ra.has_attachment)return ra.attachments.some(function(sa){return sa.attach_type==='sticker';});return false;},isScrolledToBottom:function(qa){var ra=this.scrollContainer;qa=qa||na;return z.getTop(ra)+ra.clientHeight>=ra.scrollHeight-qa;},isScrolledNearTop:function(){return z.getTop(this.scrollContainer)<this.scrollContainer.clientHeight;},scrollToBottom:function(qa){this.scrollToPosition(this.scrollContainer.scrollHeight,qa);},scrollToPosition:function(qa,ra){this._scrollTopAnimation&&this._scrollTopAnimation.stop();if(ra===true){this._scrollTopAnimation=(new g(this.scrollContainer)).to('scrollTop',qa).ease(g.ease.end).duration(400).go();}else z.setTop(this.scrollContainer,qa);},_onStickerClick:function(qa,ra){if(!qa)return;i.log('StickersLoggerConfig',{event:'click_sticker',packid:qa,stickerid:ra});var sa=this.tabView;ca.onTrayDataReady(function(){if(ha(ca.getPackIDsInTray(),qa)){var ta=ca.getPack(qa);if(ta&&ta.isPromoted)ba.addPack(qa);sa.setStickersFlyoutPackID(qa);}else da.showStore(qa);});},_checkToAnimateSticker:function(){var qa=ja(this.scrollContainer);h.inform('chatScrolled/'+this.threadID,{scrollTop:z.getTop(this.scrollContainer),top:qa.y,viewHeight:qa.height});},setNewThreadID:function(qa){this._store.setNewThreadID(qa);},_getNormalizedMessages:function(){if(this._likePreview){this._messages.push(this._likePreview);}else this._messages=this._messages.filter(function(qa){return !qa.is_like_preview;});return this._messages;}});e.exports=pa;},null);
__d("ChatTabOfficeStatus",["fbt","formatDate","CSS"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=1,k=2,l=3,m={update:function(n,o){if(!n||!o||!o.officeStatus)return;this._updateIcon(n,o);this._updateTooltip(n,o);},_updateIcon:function(n,o){i.removeClass(n,'officeStatusNone');i.removeClass(n,'officeStatusAvailable');i.removeClass(n,'officeStatusSporadic');i.removeClass(n,'officeStatusOutOfOffice');switch(o.officeStatus){case j:i.addClass(n,'officeStatusAvailable');break;case k:i.addClass(n,'officeStatusSporadic');break;case l:i.addClass(n,'officeStatusOutOfOffice');break;default:i.addClass(n,'officeStatusNone');break;}},_updateTooltip:function(n,o){var p='';switch(o.officeStatus){case j:p+=g._("DOST\u0118PNE");p+='\n';break;case k:p+=g._("SPORADYCZNIE");p+='\n';break;case l:p+=g._("POZA SIECI\u0104");p+='\n';break;default:p+=g._("NIEZNANY");p+='\n';break;}if(o.officeStatusComment)p+=o.officeStatusComment;if(o.officeStatusLocation)p+=' ('+o.officeStatusLocation+')';if(o.officeStatusComment||o.officeStatusLocation)p+='\n';if(o.officeStatusEndDate){var q=h(o.officeStatusEndDate,'M d, Y');p+=g._("Do {date}",[g.param("date",q)]);}n.setAttribute('aria-label',p);n.setAttribute('data-hover','tooltip');}};e.exports=m;},null);
__d("ChatTabTypeaheadRenderer",["DOM","CompactTypeaheadRenderer","MercuryTypeaheadConstants","MercuryThreadMetadataRawRenderer","TypeaheadFacepile"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(n,o){switch(n.type){case i.USER_TYPE:case i.PAGE_TYPE:return h(n,o);case i.THREAD_TYPE:return m(n,o);default:return g.create('div');}}function m(n,o){var p=[],q=n.mercury_thread;if(q.image_src){p.push(g.create('img',{alt:'',src:q.image_src}));}else{var r=n.participants_to_render.map(function(u){return u.big_image_src||u.image_src;});if(r){if(r instanceof Array){r=k.render(r);}else r=g.create('img',{alt:'',src:r});p.push(r);}}var s=q.name,t=j.renderRawParticipantList(q.thread_id,n.participants_to_render,q.participants.length,{names_renderer:j.renderShortNames});p.push(g.create('span',{className:'timestamp'},q.timestamp_relative));p.push(g.create('span',{className:'text'},s));p.push(g.create('span',{className:'subtext'},t));return g.create('li',{className:'node'},p);}l.className='compact';e.exports=l;},null);
__d("ChatAddToThreadButton.react",["Link.react","ReactComponentWithPureRenderMixin","React","TrackingNodes","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"ChatAddToThreadButton",mixins:[h],propTypes:{isFBAtWork:n.bool,onClick:n.func,shown:n.bool},render:function(){var p=this.props.isFBAtWork?l._("Dodaj wi\u0119cej wsp\u00f3\u0142pracownik\u00f3w do czatu"):l._("Dodaj wi\u0119cej znajomych do czatu"),q=j.getTrackingInfo(j.types.ADD_TO_THREAD);return (i.createElement(g,{"aria-label":p,className:(("addToThread")+(' '+"button")+(!this.props.shown?' '+"hidden_elem":'')),"data-ft":q,"data-hover":"tooltip","data-tooltip-alignv":"top",onClick:this.props.onClick}));}});e.exports=o;},null);
__d("ChatArchiveWarning.react",["Image.react","ReactComponentWithPureRenderMixin","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"ChatArchiveWarning",mixins:[h],propTypes:{isFBAtWork:m.bool,shown:m.bool},render:function(){var o=this.props.isFBAtWork?k('images/chat/tab/archive-grey.png'):k('images/chat/tab/archive.png');return (i.createElement(g,{src:o,className:(("titanArchiveWarning")+(' '+"button")+(!this.props.shown?' '+"hidden_elem":'')),"data-hover":"tooltip","data-tooltip-alignh":"center","aria-label":"All employee-to-employee conversations will be archived"}));}});e.exports=n;},null);
__d("ChatCloseButton.react",["Link.react","ReactComponentWithPureRenderMixin","React","TrackingNodes","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"ChatCloseButton",mixins:[h],propTypes:{onClick:m.func,onKeyUp:m.func,onMouseDown:m.func,active:m.bool},getDefaultProps:function(){return {active:false};},render:function(){var o=j.getTrackingInfo(j.types.CLOSE_BUTTON),p=k._("Naci\u015bnij Esc, aby zamkn\u0105\u0107"),q=k._("Zamknij kart\u0119");return (i.createElement(g,{"aria-label":this.props.active?p:q,className:"close button","data-ft":o,"data-hover":"tooltip","data-tooltip-position":"above",onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onMouseDown:this.props.onMouseDown}));}});e.exports=n;},null);
__d("ChatPhotoUploader.react",["ChatAutoSendPhotoUploader","Image.react","InlineBlock.react","Link.react","MercuryConfig","React","SubscriptionsHandler","cx","emptyFunction","fbt","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=l,t=s.PropTypes,u=l.createClass({displayName:"ChatPhotoUploader",propTypes:{actionURI:t.string,allowCrossPage:t.bool,disabled:t.bool,imageClassName:t.string,imagesOnly:t.bool,linkClassName:t.string,onSubmit:t.func,onAllUploadsComplete:t.func,onLastUploadFail:t.func,onLastUploadCancel:t.func},getDefaultProps:function(){return {actionURI:k.upload_url,allowCrossPage:true,disabled:false,imageClassName:"_509w",imagesOnly:true,linkClassName:'',onSubmit:o,onAllUploadsComplete:o,onLastUploadFail:o,onLastUploadCancel:o};},componentDidMount:function(){this._uploader=new g(l.findDOMNode(this.refs.form),l.findDOMNode(this.refs.input),l.findDOMNode(this.refs.attachID));this._uploader.setAllowCrossPage(this.props.allowCrossPage);this._subscriptions=new m();this._subscriptions.addSubscriptions(this._uploader.subscribe('submit',this._handleSubmit),this._uploader.subscribe('all-uploads-completed',this._handleAllUploadsCompleted),this._uploader.subscribe('last-upload-failed',this._handleLastUploadFailed),this._uploader.subscribe('last-upload-canceled',this._handleLastUploadCanceled));},shouldComponentUpdate:function(v,w){return v.actionURI!=this.props.actionURI||v.disabled!==this.props.disabled;},componentDidUpdate:function(v,w){this._uploader.setAllowCrossPage(this.props.allowCrossPage);},componentWillUnmount:function(){if(!this.isUploading()||!this.props.allowCrossPage)this._cleanup();},render:function(){return (l.createElement("form",{action:this.props.actionURI,title:this.props.imagesOnly?p._("Dodaj zdj\u0119cia"):p._("Dodaj pliki"),method:"post",onClick:function(v){v.stopPropagation();if(this.props.disabled)v.preventDefault();}.bind(this),ref:"form"},l.createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),l.createElement("input",{type:"hidden",name:"images_only",value:this.props.imagesOnly}),l.createElement(i,{className:"_m _4q60 _3rzn"},l.createElement(j,{className:r("_4q61 _5f0v _509v",this.props.linkClassName)},l.createElement(h,{className:this.props.imageClassName,src:q('/images/chat/chat_camera_icon.png'),alt:p._("Aparat")})),l.createElement("input",{disabled:this.props.disabled,type:"file",className:"_n",name:"attachment[]",multiple:"true",accept:this.props.imagesOnly?'image/*':'*',ref:"input"}))));},_handleSubmit:function(v,w){this.props.onSubmit(v,w);},_handleAllUploadsCompleted:function(v,w){this.props.onAllUploadsComplete(v,w);if(!this.isMounted())this._cleanup();},_handleLastUploadFailed:function(v,w){this.props.onLastUploadFail(v,w);if(!this.isMounted())this._cleanup();},_handleLastUploadCanceled:function(v,w){this.props.onLastUploadCancel(v,w);if(!this.isMounted())this._cleanup();},isUploading:function(){return this._uploader&&this._uploader.isUploading();},uploadFile:function(v){this._uploader.uploadFile(v);},_cleanup:function(){this._subscriptions&&this._subscriptions.release();this._uploader&&this._uploader.destroy();}});e.exports=u;},null);
__d("StickerContextualDialog.react",["ReactAbstractContextualDialog","ReactLayer","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=47,k=h.createClass(g.createSpec({displayName:'StickerXUIContextualDialog',theme:{wrapperClassName:"_53ii",arrowDimensions:{offset:j,length:16}}}));k.WIDTH={NORMAL:312,WIDE:400};e.exports=k;},null);
__d("ChatStickerButton.react",["BanzaiODS","React","ReactLayeredComponentMixin","StickerContextualDialog.react","StickersFlyout.react","StickerState","cx","emptyFunction","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=h,r=q.PropTypes,s=278,t=h.createClass({displayName:"ChatStickerButton",propTypes:{className:r.string,flyoutClassName:r.string,flyoutWidth:r.number,wrapperClass:r.func,onStickerSelect:r.func,onEmoticonSelect:r.func,onFlyoutShown:r.func,onFlyoutHidden:r.func},getInitialState:function(){return {shown:false,packID:l.getTrayPackID()};},mixins:[i],getDefaultProps:function(){return {flyoutWidth:s,onStickerSelect:n,onEmoticonSelect:n};},componentDidMount:function(){g.bumpEntityKey('chat.web','sticker_button.mounted');this._subscription=l.addListener(l.PACK_SELECTED,function(u){return this.setState({packID:u});}.bind(this));},shouldComponentUpdate:function(u,v){return (v.packID!=this.state.packID||v.shown!=this.state.shown);},componentWillUnmount:function(){this._subscription&&this._subscription.remove();},render:function(){return (h.createElement("a",{onClick:this.showFlyout,onMouseDown:this._prepareForClick,title:o._("Wybierz naklejk\u0119 lub emotikona"),ref:"link"},h.createElement("span",{className:p(this.props.className,((this.state.shown?"open":'')))})));},renderLayers:function(){var u=this.props.wrapperClass||j;return {contextualDialog:h.createElement(u,{alignment:this.props.flyoutAlignment,className:"_5e-r",contextRef:function(){return this.refs.link;}.bind(this),onBlur:this._hideFlyout,position:"above",shown:this.state.shown,width:this.props.flyoutWidth},h.createElement("div",null,h.createElement(k,{className:this.props.flyoutClassName,onShown:function(v){return this.props.onFlyoutShown&&this.props.onFlyoutShown(v);}.bind(this),onHidden:function(){return this.props.onFlyoutHidden&&this.props.onFlyoutHidden();}.bind(this),onEscKeyDown:this._hideFlyout,onStickerSelect:this._handleStickerSelected,onEmoticonSelect:this._handleEmoticonSelected,packID:this.state.packID,shown:this.state.shown})))};},_prepareForClick:function(){this._clickGuard=this.state.shown;},showFlyout:function(){!this._clickGuard&&this.setState({shown:true});},_hideFlyout:function(){this.setState({shown:false});},_handleStickerSelected:function(u){this.props.onStickerSelect(u);},_handleEmoticonSelected:function(u){this._hideFlyout();this.props.onEmoticonSelect(u);}});e.exports=t;},null);
__d("ChatFileUploaderMixin",["SubscriptionsHandler","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=h,j=i.PropTypes,k={propTypes:{attachmentsShelf:j.object,onFileUploaderMounted:j.func,onUploadFinished:j.func,onUpdateAttachmentsShelf:j.func,onSubmit:j.func},setUpSubscriptionsHandler:function(l){this._uploader=l;this._subscriptions=new g();this._subscriptions.addSubscriptions(this._uploader.subscribe(['all-uploads-completed','upload-canceled'],this._handleUploadFinished),this._uploader.subscribe('dom-updated',this._handleUpdateAttachmentsShelf),this._uploader.subscribe('submit',this._handleSubmit));this.props.onFileUploaderMounted(this._uploader);},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();if(!this.props.uploaderIsFromHigherLevel)this._uploader&&this._uploader.destroy();},isUploading:function(){return this._uploader.isUploading();},getAttachments:function(){return this._uploader.getAttachments();},getImageFiles:function(){return this._uploader.getImageFiles();},getVideoFiles:function(){return this._uploader.getVideoFiles();},getAudioFiles:function(){return this._uploader.getAudioFiles();},getFiles:function(){return this._uploader.getFiles();},removeAttachments:function(){return this._uploader.removeAttachments();},_handleUploadFinished:function(){if(this.props.onUploadFinished)this.props.onUploadFinished();},_handleUpdateAttachmentsShelf:function(){if(this.props.onUpdateAttachmentsShelf)this.props.onUpdateAttachmentsShelf();},_handleSubmit:function(){if(this.props.onSubmit)this.props.onSubmit();}};e.exports=k;},null);
__d("ChatFileUploader.react",["ChatFileUploaderMixin","InlineBlock.react","MercuryConfig","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j.createClass({displayName:"ChatFileUploader",mixins:[g],getDefaultProps:function(){return {uploaderIsFromHigherLevel:true};},shouldComponentUpdate:function(){return false;},componentDidMount:function(){var n=this.props.initFileUploaderFn(j.findDOMNode(this.refs.form),j.findDOMNode(this.refs.input),j.findDOMNode(this.refs.attachID));this.setUpSubscriptionsHandler(n);},render:function(){return (j.createElement("form",{ref:"form",action:i.upload_url,method:"post"},j.createElement("input",{type:"hidden",ref:"attachID",name:"attach_id"}),j.createElement(h,{className:"_m _4q60 itemLabel"},j.createElement("input",{type:"file",className:"_n",name:"attachment[]",multiple:"true",ref:"input"}),j.createElement("span",{className:"_4q61 itemAnchor"},l._("Dodaj pliki...")))));}});e.exports=m;},null);
__d("ChatTabMenu.react",["ChatFileUploader.react","ChatPrivacyActionController","MercuryConfig","MercuryIDs","MercuryFileUploader","MercuryMessengerBlockingUtils","MercuryThreadMuter","ReactComponentWithPureRenderMixin","React","PopoverMenu.react","ReactMenu","MenuSeparator.react","Toggler","TrackingNodes","WebMessengerThreadPermalinks","cx","fbt","goURI","MercuryThreadActions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=b('MercuryThreadActions').get(),z=q.Item,aa=o,ba=aa.PropTypes,ca=o.createClass({displayName:"ChatTabMenu",mixins:[n],propTypes:{onFileUploaderMounted:ba.func,updatePrivacyLinkFunc:ba.func,nameConversationFunc:ba.func,leaveConversationFunc:ba.func,showParticipantsFunc:ba.func,deleteConversationFunc:ba.func,reportSpamFunc:ba.func,blockMessagesFunc:ba.func,createGroupFunc:ba.func,switchToWorkFunc:ba.func,isGroupChat:ba.bool,isEmptyChat:ba.bool,hasSwitchToWork:ba.bool,showAddFriend:ba.func,threadID:ba.string,attachmentsShelf:ba.object,onUploadFinished:ba.func,onUpdateAttachmentsShelf:ba.func,onSubmit:ba.func,enableDesktopNotif:ba.func},getInitialState:function(){return {url:null};},getDefaultProps:function(){return {show:true};},componentDidMount:function(){u.getThreadURI(this.props.threadID,function(da){this.isMounted()&&this.setState({url:da});}.bind(this));if(!this.props.isGroupChat)this._privacyActionController=new h(j.getUserIDFromThreadID(this.props.threadID),this.props.updatePrivacyLinkFunc);},_initFileUploader:function(da,ea,fa){if(this._fileUploader){this._fileUploader.updateElements(da,ea,fa);}else this._fileUploader=new k(this.props.attachmentsShelf,da,ea,fa);return this._fileUploader;},componentWillUnmount:function(){this._privacyActionController&&this._privacyActionController.destroy();this._fileUploader&&this._fileUploader.destroy();},_unmuteThread:function(){y.unmute(this.props.threadID);s.hide();},_togglePrivacyFunc:function(){this._privacyActionController.togglePrivacy();},getURL:function(){return this.state.url;},_renderFileUploader:function(){return (o.createElement(z,{className:"_37_x"},o.createElement(g,{onFileUploaderMounted:this.props.onFileUploaderMounted,attachmentsShelf:this.props.attachmentsShelf,initFileUploaderFn:this._initFileUploader,onUploadFinished:this.props.onUploadFinished,onUpdateAttachmentsShelf:this.props.onUpdateAttachmentsShelf,onSubmit:this.props.onSubmit})));},_renderOpenFullConversation:function(){if(this.state.url)return (o.createElement(z,{onclick:function(){return x(this.state.url);}.bind(this)},w._("Zobacz pe\u0142n\u0105 konwersacj\u0119")));return null;},_renderAddFriend:function(){if(!this.props.showAddFriend)return null;return (o.createElement(z,{onclick:this.props.showAddFriend},w._("Dodaj znajomych do czatu...")));},_renderTogglePrivacy:function(){if(!this.props.isGroupChat&&this.props.privacyText)return (o.createElement(z,{onclick:this._togglePrivacyFunc},this.props.privacyText));return null;},_renderMuteConversation:function(){if(!this.props.isMuted){var da=m.showMuteChangeDialog.bind(null,this.props.threadID,null);return (o.createElement(z,{onclick:da},w._("Wycisz konwersacj\u0119...")));}else return (o.createElement(z,{onclick:this._unmuteThread},w._("Wzn\u00f3w konwersacj\u0119...")));},_renderDeleteConversation:function(){return (o.createElement(z,{onclick:this.props.deleteConversationFunc},w._("Usu\u0144 konwersacj\u0119...")));},_renderReportSpam:function(){if(!this.props.isGroupChat)return (o.createElement(z,{onclick:this.props.reportSpamFunc},w._("Zg\u0142o\u015b jako spam lub naruszenie...")));return null;},_blockMessagesItem:function(){if(!this.props.isGroupChat&&l.gk_result&&!this.props.hasMessageBlocked)return (o.createElement(z,{onclick:this.props.blockMessagesFunc},w._("Zablokuj wiadomo\u015bci...")));return null;},_renderCreateGroup:function(){if(this.props.isGroupChat)return (o.createElement(z,{onclick:this.props.createGroupFunc},w._("Utw\u00f3rz grup\u0119")));return null;},_renderSwitchToWork:function(){if(this.props.hasSwitchToWork)return (o.createElement(z,{onclick:this.props.switchToWorkFunc},w._("Przenie\u015b na konto s\u0142u\u017cbowe")));},_renderConversationName:function(){if(this.props.isGroupChat&&this.state.url)return (o.createElement(z,{onclick:this.props.nameConversationFunc},w._("Edytuj nazw\u0119 konwersacji")));return null;},_renderLeaveConversation:function(){if(this.props.isGroupChat)return (o.createElement(z,{onclick:this.props.leaveConversationFunc},w._("Opu\u015b\u0107 konwersacj\u0119...")));return null;},_renderEnableDesktopNotifications:function(){if(i.DesktopNotificationsGK&&"Notification" in window&&Notification.permission!=="granted")return (o.createElement(z,{onclick:this.props.enableDesktopNotif},w._("W\u0142\u0105cz powiadomienia na komputerze")));return null;},_renderPeopleList:function(){if(this.props.isGroupChat&&this.state.url)return (o.createElement(z,{onclick:this.props.showParticipantsFunc},w._("Edytuj uczestnik\u00f3w...")));return null;},render:function(){var da=this._renderReportSpam(),ea=this._blockMessagesItem(),fa=this._renderCreateGroup(),ga=o.createElement(q,{className:(("chatReact")+(!this.props.show?' '+"hidden_elem":''))},this._renderOpenFullConversation(),this._renderFileUploader(),this._renderAddFriend(),this._renderTogglePrivacy(),this._renderConversationName(),this._renderPeopleList(),o.createElement(r,null),this._renderSwitchToWork(),this._renderMuteConversation(),this._renderDeleteConversation(),this._renderLeaveConversation(),(da||ea)?(o.createElement(r,null)):null,ea,da,fa?(o.createElement(r,null)):null,fa,this._renderEnableDesktopNotifications()),ha=w._("Opcje"),ia=t.getTrackingInfo(t.types.DROPDOWN_BUTTON);return (o.createElement(p,{menu:ga},o.createElement("a",{"data-ft":ia,"data-hover":"tooltip","aria-label":ha,"data-tooltip-alignh":"center",className:(("button")+(this.props.isEmptyChat?' '+"hidden_elem":''))})));}});e.exports=ca;},null);
__d("ChatAddFriendsTabSheetRawRenderer",["ChatConfig","ChatTabTypeaheadRenderer","ContextualTypeaheadView","DOM","Event","MercuryDataSourceWrapper","MercuryTypeahead","ChatTabTemplates","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={render:function(q,r,s,t,u,v){var w=v?n[':fb:mercury:chat:tab-sheet:add-friends-empty-tab'].build():n[':fb:mercury:chat:tab-sheet:add-friends'].build(),x=v?l.chat_typeahead_source:l.chat_add_people_source;x.setShowThreads(v);var y=new m(x,i);y.setViewOption('renderer',h);y.setExcludedParticipantsFromThreadMeta(t);if(!v){var z=g.get('IsWorkUser',false)?o._("Dodaj wsp\u00f3\u0142pracownik\u00f3w do tego czatu"):o._("Dodaj znajomego do czatu");y.setPlaceholder(z);}y.build();j.replace(w.getNode('participantsTypeahead'),y.getElement());j.setContent(s,w.getRoot());y.getTokenizer().adjustWidth();var aa=w.getNode('participantsTypeahead').getAttribute('data-labelid'),ba=j.scry(y.getElement(),'input[type="text"]')[0];if(ba)if(aa){ba.setAttribute('aria-labelledby',aa);}else ba.setAttribute('aria-label',o._("Do"));y.focus();if(!v){var ca=function(){var da=y.getSelectedParticipantIDs();if(da.length)u(da);r.close(q);};k.listen(w.getNode('doneButton'),'click',ca);y.subscribe('tokens-return',function(){if(y.getTokens().length)ca();});}return y;}};e.exports=p;},null);
__d("XAssociateGroupThreadController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/groups\/messenger\/associate_group_thread\/",{});},null);
__d("MultiChatController",["AsyncSignal","ChatOpenTab","copyProperties","Form","MercuryIDs","MercuryLocalIDs","MercuryViewer","MercuryServerDispatcher","XAssociateGroupThreadController","MercuryThreadIDMap","MercuryThreads","MercuryServerRequests"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=b('MercuryThreadIDMap').get(),q=b('MercuryThreads').get(),r=b('MercuryServerRequests').get(),s=o.getURIBuilder().getURI().toString();function t(){}i(t,{subscribe:function(v,w){v.subscribe('confirm',function(){this.createGroupThreadFromChooserDialog(v,w);}.bind(this));},createGroupThreadFromChooserDialog:function(v,w){var x=j.serialize(v.getRoot()),y=JSON.parse(x.profileChooserItems),z=[];for(var aa in y)if(y[aa])z.push(aa);var ba=t.createThreadForFBIDs(z),ca=r.subscribe('update-thread-ids',function(da,ea){for(var fa in ea)if(ea[fa]==ba){var ga=q.getThreadMetaNow(ba),ha=p.getFBIDFromClientIDNow(ba);if(ga&&!ga.is_canonical&&ha)n.trySend(s,{group_id:w,thread_id:ha});new g('/ajax/groups/chat/log',{group_id:w,message_id:fa}).send();r.unsubscribe(ca);break;}});v.hide();},createThreadForTokens:function(v){var w=m.getID();if(!v.length)return;v=v.filter(function(y){return y!==w;});var x;if(v.length===0){return;}else if(v.length===1){x=k.getThreadIDFromParticipantID(v[0]);h.openThread(x,'ChatTabView');}else{x=l.generateThreadID();v.unshift(w);q.createNewLocalThread(x,v);h.openThread(x,'MultiChatController');}return x;},createThreadForFBIDs:function(v){var w=[];for(var x=0;x<v.length;x++)w.push("fbid:"+v[x]);return t.createThreadForTokens(w);}});var u={};u[s]={mode:n.IMMEDIATE};n.registerEndpoints(u);e.exports=t;},null);
__d("ChatAddFriendsTabSheet",["ArbiterMixin","BanzaiLogger","ChatAddFriendsTabSheetRawRenderer","ChatConfig","ChatOpenTab","ChatTabActions","MercuryLogMessageType","MercurySourceType","MercuryTypeaheadConstants","MultiChatController","Style","copyProperties","MercuryMessageObject","MercuryMessageActions","MercuryThreadActions","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=b('MercuryMessageObject').get(),t=b('MercuryMessageActions').get(),u=b('MercuryThreadActions').get(),v=b('MercuryThreads').get();function w(aa,ba,ca,da){this._threadID=aa;this._rootElement=ba;this._sheetView=ca;this._typeahead=null;this._chatTabView=da;}r(w.prototype,g,{render:function(){v.getThreadMeta(this._threadID,function(aa){var ba=aa.is_canonical_user?x:y,ca=v.isNewEmptyLocalThread(this._threadID);this._typeahead=i.render(this,this._sheetView,this._rootElement,aa,ba.bind(null,aa),ca);this._typeahead.subscribe('tokens-changed',function(){if(ca)z(this,this._typeahead,this._threadID,this._chatTabView);}.bind(this));this._typeahead.subscribe('resize',function(){this._sheetView.resize();}.bind(this));this._typeahead.subscribe('esc-pressed',function(){this.inform('esc-pressed');}.bind(this));}.bind(this));},getParticipants:function(){if(!this._typeahead)return null;return this._typeahead.getSelectedParticipantIDs();},isPermanent:function(){return true;},isSheetWithInput:function(){return true;},getType:function(){return 'add_friends_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);},getHeight:function(){return q.get(this._rootElement,'height');}});function x(aa,ba){var ca=aa.participants;p.createThreadForTokens(ca.concat(ba));}function y(aa,ba){var ca=aa.thread_id;if(v.isEmptyLocalThread(ca)){u.addParticipants(ca,ba);}else t.send(s.constructLogMessageObject(n.CHAT_WEB,ca,m.SUBSCRIBE,{added_participants:ba}));k.openThread(ca,'ChatAddFriendsTabSheet');}function z(aa,ba,ca,da){var ea=ba.getTypeahead().getData(),fa=ba.getTokens(),ga=ba.getTypeahead().getCore();ga.getElement().removeAttribute('disabled');ea.setShowThreads(fa.length===0);var ha=fa.length==1&&fa[0].getInfo().render_type===o.THREAD_TYPE;if(ha){var ia=fa[0].getInfo().mercury_thread;if(ia){var ja=j.get('chat_react_share_uploader')?da._sharePreview.getShareData():da._shareLinkUploader.getShareData();if(ja)var ka=j.get('chat_react_share_uploader')?function(la){return la.loadShareFromParams(ja.share_type,ja.share_params);}:function(la){return la.loadShareFromParams(ja.type,ja.params);};k.openThread(ia.thread_fbid,'openGroupChat','',ka);}h.log('MercuryQueryResultsLoggerConfig',{event:'chat_tab_group_thread_click'});l.closeTab(ca,'open_group_chat');}else{if(fa.length==1&&fa[0].getInfo().render_type===o.PAGE_TYPE)ga.getElement().setAttribute('disabled','disabled');h.log('MercuryQueryResultsLoggerConfig',{event:'chat_tab_tokens_changed',chat_tab_tokens:fa.map(function(la){return la.info.uid;})});aa.inform('chat/tokens-changed',{token_count:fa.length});}}e.exports=w;},null);
__d("ChatNameConversationTabSheetRawRenderer",["DOM","Event","Input","Keys","ChatTabTemplates","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m={render:function(n,o,p,q,r,s){var t=k[':fb:mercury:chat:tab-sheet:name-conversation'].build(),u=t.getNode('nameInput'),v=t.getNode('doneButton'),w=l._("Gotowe"),x=l._("Ukryj"),y=q.name;if(y){i.setValue(u,y);}else g.setContent(v,x);var z=function(){var aa=i.getValue(u);if(aa)r(aa);s();o.close(n);};h.listen(u,'input',function(){g.setContent(v,i.getValue(u).length===0?x:w);});h.listen(v,'click',z);h.listen(u,'keyup',function(aa){if(aa.keyCode===j.RETURN){z();return false;}});g.setContent(p,t.getRoot());!n.isAutomatic()&&u.focus();}};e.exports=m;},null);
__d("ChatNameConversationTabSheet",["AsyncRequest","ChatNameConversationTabSheetRawRenderer","MercuryAPIArgsSource","MercuryLogMessageType","MercurySourceType","MercuryMessageObject","MercuryMessageActions","MercuryThreadIDMap","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=b('MercuryMessageObject').get(),m=b('MercuryMessageActions').get(),n=b('MercuryThreadIDMap').get(),o=b('MercuryThreads').get(),p='/ajax/chat/multichat/name_conversation/dismiss.php',q={};function r(s,t,u){"use strict";this.$ChatNameConversationTabSheet0=s;this.$ChatNameConversationTabSheet1=t;this.$ChatNameConversationTabSheet2=u;this.$ChatNameConversationTabSheet3=false;}r.prototype.render=function(){"use strict";o.getThreadMeta(this.$ChatNameConversationTabSheet0,function(s){h.render(this,this.$ChatNameConversationTabSheet2,this.$ChatNameConversationTabSheet1,s,this.$ChatNameConversationTabSheet4.bind(null,s),this.$ChatNameConversationTabSheet5.bind(this,s));this.$ChatNameConversationTabSheet2.resize();}.bind(this));};r.prototype.isPermanent=function(){"use strict";return true;};r.prototype.isSheetWithInput=function(){"use strict";return true;};r.prototype.getType=function(){"use strict";return 'name_conversation_type';};r.prototype.open=function(s){"use strict";this.$ChatNameConversationTabSheet3=s;if(!(this.$ChatNameConversationTabSheet3&&this.$ChatNameConversationTabSheet6()))this.$ChatNameConversationTabSheet2.open(this);};r.prototype.close=function(){"use strict";this.$ChatNameConversationTabSheet2.close(this);};r.prototype.isAutomatic=function(){"use strict";return this.$ChatNameConversationTabSheet3;};r.prototype.$ChatNameConversationTabSheet6=function(){"use strict";return !!q[this.$ChatNameConversationTabSheet0];};r.prototype.$ChatNameConversationTabSheet7=function(){"use strict";q[this.$ChatNameConversationTabSheet0]=true;};r.prototype.$ChatNameConversationTabSheet5=function(s){"use strict";if(!s.name_conversation_sheet_dismissed||!this.$ChatNameConversationTabSheet6()){this.$ChatNameConversationTabSheet7();n.getFBIDFromClientID(s.thread_id,function(t){new g(p).setData({thread_fbid:t}).send();});}};r.prototype.$ChatNameConversationTabSheet4=function(s,t){"use strict";var u=s.name;if((t||u)&&(t!=u))m.send(l.constructLogMessageObject(k.CHAT_WEB,s.thread_id,j.THREAD_NAME,{name:t}),null,i.CHAT);};e.exports=r;},null);
__d("ChatNewMessagesTabSheet",["Event","ArbiterMixin","DOM","ChatTabTemplates","copyProperties","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(n,o,p){this._threadID=n;this._rootElement=o;this._sheetView=p;}k(m.prototype,h,{render:function(){var n=j[':fb:mercury:chat:tab-sheet:clickable-message-icon-sheet'].build();i.setContent(n.getNode('text'),l._("Przewi\u0144 w d\u00f3\u0142, aby wy\u015bwietli\u0107 nowe wiadomo\u015bci."));i.setContent(this._rootElement,n.getRoot());g.listen(n.getRoot(),'click',function(){this.inform('clicked',this._threadID);}.bind(this));},isPermanent:function(){return true;},isSheetWithInput:function(){return true;},getType:function(){return 'new_messages_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});e.exports=m;},null);
__d("ChatNoRecipientsTabSheet",["DOM","MercuryViewer","ChatTabTemplates","copyProperties","fbt","MercuryThreads","MercuryThreadInformer"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=b('MercuryThreads').get(),m=b('MercuryThreadInformer').get();function n(o,p,q){this._threadID=o;this._rootElement=p;this._sheetView=q;m.subscribe('threads-updated',this._handleThreadsUpdated.bind(this));}j(n.prototype,{render:function(){var o=i[':fb:mercury:chat:tab-sheet:message-icon-sheet'].build();g.setContent(o.getNode('text'),k._("Wszyscy opu\u015bcili t\u0119 konwersacj\u0119."));g.setContent(this._rootElement,o.getRoot());},isPermanent:function(){return true;},getType:function(){return 'no_recipients_type';},_handleThreadsUpdated:function(){l.getThreadMeta(this._threadID,function(o){var p=h.getID(),q=o.participants.filter(function(r){return r!=p;});if(q.length<1&&!l.isNewEmptyLocalThread(this._threadID)){this._sheetView.open(this);}else this._sheetView.close(this);}.bind(this));}});e.exports=n;},null);
__d("ChatOfflineTabSheet",["ChatPrivacyActionController","ChatVisibility","CSS","DOM","JSXDOM","Event","JSLogger","MercuryIDs","MercuryParticipants","ChatTabTemplates","WorkModeConfig","copyProperties","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();function u(v,w,x){this._rootElement=w;this._sheetView=x;this._logger=m.create('blackbird');this._canonicalUser=n.getUserIDFromThreadID(v);if(this._canonicalUser)this._privacyActionController=new g(this._canonicalUser,this._handlePrivacyChange.bind(this));}r(u.prototype,{render:function(){if(!this._canonicalUser){this._logger.error('offline_sheet_open_with_non_friend');return;}var v=p[':fb:mercury:chat:tab-sheet:message-icon-sheet'].build(),w='fbid:'+this._canonicalUser;o.get(w,function(x){var y='fbChatGoOnlineLink',z=k.a({href:"#",className:y},t._("w\u0142\u0105cz czat")),aa;if(q.is_work_user){aa=t._("Aby czatowa\u0107 z u\u017cytkownikiem {name} i innymi wsp\u00f3\u0142pracownikami, {link}.",[t.param("name",x.short_name),t.param("link",z)]);}else aa=t._("Aby rozmawia\u0107 na czacie z u\u017cytkownikiem {name} i innymi znajomymi, {link}.",[t.param("name",x.short_name),t.param("link",z)]);j.setContent(v.getNode('text'),aa);i.addClass(v.getRoot(),"_1sk1");j.setContent(this._rootElement,v.getRoot());l.listen(this._rootElement,'click',function(event){if(i.hasClass(event.getTarget(),y)){if(h.isOnline())this._logger.error('tab_sheet_already_online');this._privacyActionController.togglePrivacy();this._logger.log('tab_sheet_go_online',{tab_id:this._canonicalUser});return false;}}.bind(this));this._sheetView.resize();}.bind(this));},_handlePrivacyChange:function(v){if(!this._canonicalUser)this._logger.error('user_blocked_sheet_privacy_changed_non_friend');switch(v){case g.OFFLINE:this._sheetView.open(this);break;case g.NORMAL:case g.BLOCKED:this._sheetView.close(this);break;}},isPermanent:function(){return true;},getType:function(){return 'offline_type';},destroy:function(){this._privacyActionController&&this._privacyActionController.destroy();}});e.exports=u;},null);
__d("ChatUploadWarningTabSheet",["DOM","ChatTabTemplates","fbt","copyProperties"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l,m,n){this._threadID=l;this._rootElement=m;this._sheetView=n;}j(k.prototype,{render:function(){var l=h[':fb:mercury:chat:tab-sheet:message-icon-sheet'].build();g.setContent(l.getNode('text'),i._("Przed wys\u0142aniem wiadomo\u015bci zaczekaj na zako\u0144czenie procesu dodawania za\u0142\u0105cznika."));g.setContent(this._rootElement,l.getRoot());},isPermanent:function(){return false;},getType:function(){return 'upload_warning_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});e.exports=k;},null);
__d("ChatReadOnlyTabSheet",["React","MercuryReadOnlyReason","cx","MercuryThreads"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=b('MercuryThreads').get();function k(l,m,n){"use strict";this.$ChatReadOnlyTabSheet0=l;this.$ChatReadOnlyTabSheet1=m;this.$ChatReadOnlyTabSheet2=n;}k.prototype.render=function(){"use strict";var l=h.getReason(j.getThreadMetaNow(this.$ChatReadOnlyTabSheet0));g.render(g.createElement("div",{className:"_87-"},l),this.$ChatReadOnlyTabSheet1);};k.prototype.isPermanent=function(){"use strict";return false;};k.prototype.getType=function(){"use strict";return 'chat-thread-is-read-only';};k.prototype.open=function(){"use strict";this.$ChatReadOnlyTabSheet2.open(this);};k.prototype.close=function(){"use strict";this.$ChatReadOnlyTabSheet2.open(this);};e.exports=k;},null);
__d("ChatThreadIsMutedTabSheet",["Event","ArbiterMixin","DOM","ChatTabTemplates","copyProperties","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(n,o,p){this._threadID=n;this._rootElement=o;this._sheetView=p;}k(m.prototype,h,{render:function(){var n=j[':fb:mercury:chat:tab-sheet:message-mute-sheet'].build();i.setContent(n.getNode('text'),l._("Konwersacja jest wyciszona. Dla wiadomo\u015bci z tej konwersacji nie b\u0119d\u0105 wy\u015bwietlane wyskakuj\u0105ce karty. R\u00f3wnie\u017c powiadomienia push s\u0105 wy\u0142\u0105czone."));i.setContent(this._rootElement,n.getRoot());g.listen(n.getNode('unmuteButton'),'click',function(){this.inform('clicked',this._threadID);}.bind(this));},isPermanent:function(){return false;},getType:function(){return 'chat-thread-is-muted';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});e.exports=m;},null);
__d("ChatEmployeeAwaySheet",["ArbiterMixin","DOM","mixin","ChatTabTemplates"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=i(g);for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(o,p,q){"use strict";this.$ChatEmployeeAwaySheet0=o;this.$ChatEmployeeAwaySheet1=p;this.$ChatEmployeeAwaySheet2=q;}n.prototype.render=function(){"use strict";var o=j[':fb:mercury:employee-away-sheet'].build();h.setContent(this.$ChatEmployeeAwaySheet1,o.getRoot());};n.prototype.isPermanent=function(){"use strict";return true;};n.prototype.getType=function(){"use strict";return 'employee-away';};n.prototype.open=function(){"use strict";this.$ChatEmployeeAwaySheet2.open(this);};n.prototype.close=function(){"use strict";this.$ChatEmployeeAwaySheet2.close(this);};e.exports=n;},null);
__d("ChatUserBlockedTabSheet",["CSS","ChatPrivacyActionController","DOM","Event","GenderConst","JSLogger","MercuryIDs","MercuryParticipants","ChatTabTemplates","copyProperties","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(t,u,v){this._rootElement=u;this._sheetView=v;this._logger=l.create('blackbird');this._canonicalUser=m.getUserIDFromThreadID(t);if(this._canonicalUser)this._privacyActionController=new h(this._canonicalUser,this._handlePrivacyChange.bind(this));}p(s.prototype,{render:function(){if(!this._canonicalUser){this._logger.error('user_blocked_sheet_open_with_non_friend');return;}var t=o[':fb:mercury:chat:tab-sheet:user-blocked'].build(),u='fbid:'+this._canonicalUser;n.get(u,function(v){var w=null;switch(v.gender){case k.FEMALE_SINGULAR:case k.FEMALE_SINGULAR_GUESS:w=r._("You turned off chat for {name} but you can still send her a message.",[r.param("name",v.short_name)]);break;case k.MALE_SINGULAR:case k.MALE_SINGULAR_GUESS:w=r._("You turned off chat for {name} but you can still send him a message.",[r.param("name",v.short_name)]);break;default:w=r._("You turned off chat for {name} but you can still send them a message.",[r.param("name",v.short_name)]);}i.setContent(t.getNode('text'),w+' ');var x=r._("W\u0142\u0105czy\u0107 czat dla u\u017cytkownika {name}?",[r.param("name",v.short_name)]);i.setContent(t.getNode('actionLink'),x);g.addClass(t.getRoot(),"_1sk0");i.setContent(this._rootElement,t.getRoot());j.listen(t.getNode('actionLink'),'click',this._privacyActionController.togglePrivacy.bind(this._privacyActionController));this._sheetView.resize();}.bind(this));},_handlePrivacyChange:function(t){if(!this._canonicalUser)this._logger.error('user_blocked_sheet_privacy_changed_non_friend');if(t==h.BLOCKED){var u='fbid:'+this._canonicalUser;n.get(u,function(v){if(v.is_friend){this._sheetView.open(this);}else this._sheetView.close(this);}.bind(this));return;}this._sheetView.close(this);},isPermanent:function(){return true;},getType:function(){return 'user_blocked_type';},destroy:function(){this._privacyActionController&&this._privacyActionController.destroy();}});e.exports=s;},null);
__d("ChatTabSheetController",["ChatAddFriendsTabSheet","ChatNameConversationTabSheet","ChatNewMessagesTabSheet","ChatNoRecipientsTabSheet","ChatOfflineTabSheet","ChatUploadWarningTabSheet","ChatReadOnlyTabSheet","ChatThreadIsMutedTabSheet","ChatEmployeeAwaySheet","ChatUserBlockedTabSheet","MercuryIDs","MercurySheetView","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=function(u,v,w,x){this._sheetView=new r(u,v,w);this._addFriendsTabSheet=new g(u,v,this._sheetView,x);this._nameConversationTabSheet=new h(u,v,this._sheetView);this._userBlockedTabSheet=new p(u,v,this._sheetView);this._offlineTabSheet=new k(u,v,this._sheetView);this._newMessagesTabSheet=new i(u,v,this._sheetView);this._uploadWarningTabSheet=new l(u,v,this._sheetView);this._threadIsMutedTabSheet=new n(u,v,this._sheetView);this._employeeAwaySheet=new o(u,v,this._sheetView);this._readOnlyTabSheet=new m(u,v,this._sheetView);if(!q.getUserIDFromThreadID(u))this._noRecipientsTabSheet=new j(u,v,this._sheetView);};s(t.prototype,{openAddFriendsSheet:function(){this._addFriendsTabSheet.open();},getAddFriendsTabSheet:function(){return this._addFriendsTabSheet;},getAddFriendsParticipants:function(){var u=this._addFriendsTabSheet.getParticipants();this._addFriendsTabSheet.close();return u;},openNameConversationSheet:function(u){this._nameConversationTabSheet.open(u);},openReadOnlySheet:function(){this._readOnlyTabSheet.open();},openNewMessagesSheet:function(){this._newMessagesTabSheet.open();},openUploadWarningTabSheet:function(){this._uploadWarningTabSheet.open();},openThreadIsMutedTabSheet:function(){this._threadIsMutedTabSheet.open();},openEmployeeAwaySheet:function(){this._employeeAwaySheet.open();},closeAutomaticNameConversationSheet:function(){if(this._nameConversationTabSheet.isAutomatic())this._nameConversationTabSheet.close();},closeThreadIsMutedTabSheet:function(){this._threadIsMutedTabSheet.close();},closeNewMessagesSheet:function(){this._newMessagesTabSheet.close();},closeUploadWarningTabSheet:function(){this._uploadWarningTabSheet.close();},onClickNewMessagesSheet:function(u){this._newMessageClickSub=this._newMessagesTabSheet.subscribe('clicked',u);},onClickThreadIsMutedSheet:function(u){this._threadIsMutedClickSub=this._threadIsMutedTabSheet.subscribe('clicked',u);},onResize:function(u){this._sheetView.subscribe('resize',u);},onTokensChanged:function(u){this._addFriendsTabSheet.subscribe('chat/tokens-changed',u);},onEscape:function(u){this._addFriendsTabSheet.subscribe('esc-pressed',u);},destroy:function(){this._sheetView&&this._sheetView.destroy();this._offlineTabSheet&&this._offlineTabSheet.destroy();this._userBlockedTabSheet&&this._userBlockedTabSheet.destroy();this._newMessageClickSub&&this._newMessageClickSub.unsubscribe();this._threadIsMutedClickSub&&this._threadIsMutedClickSub.unsubscribe();}});e.exports=t;},null);
__d("ChatTitleLink.react",["Link.react","MercuryThreadTitle.react","React","TrackingNodes","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"ChatTitleLink",propTypes:{href:m.string,isNewThread:m.bool,thread:m.object,viewer:m.string},getDefaultProps:function(){return {href:null};},getTitle:function(){return this.refs.threadTitle.getTitle();},render:function(){if(!this.props.thread)return null;return (i.createElement(g,{"aria-level":"3",className:(("titlebarText")+(this.props.href===null?' '+"noLink":'')),"data-ft":j.getTrackingInfo(j.types.TITLE),"data-hover":"tooltip",href:this.props.href},i.createElement(h,{ref:"threadTitle",isNewThread:this.props.isNewThread,thread:this.props.thread,useAndSeparator:true,useShortName:!this.props.thread.is_canonical,viewer:this.props.viewer})));}});e.exports=n;},null);
__d("ChatVideoCallButton.react",["Link.react","ReactComponentWithPureRenderMixin","React","TrackingNodes","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"ChatVideoCallButton",mixins:[h],propTypes:{onClick:n.func,onKeyUp:n.func,shown:n.bool,tooltipLabel:n.string},getDefaultProps:function(){return {tooltipLabel:(l._("Rozpocznij wideorozmow\u0119"))};},render:function(){var p=j.getTrackingInfo(j.types.VIDEOCHAT),q=JSON.stringify({videochat:'call_clicked_bhat_tab'});return (i.createElement(g,{"aria-label":this.props.tooltipLabel,className:(("videoicon")+(' '+"button")+(!this.props.shown?' '+"hidden_elem":'')),"data-ft":p,"data-gt":q,"data-hover":"tooltip","data-tooltip-position":"above",onClick:this.props.onClick,onKeyUp:this.props.onKeyUp}));}});e.exports=o;},null);
__d("EmoticonUtils",["EmoticonsList","Parent"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i='emoticon_',j=g.symbols,k={getEmoteFromTarget:function(l){var m=h.byClass(l,'emoticon');if(!m)return null;var n=null;m.className.split(' ').forEach(function(o){if(o.startsWith(i))n=o.substring(i.length);});return j[n]||null;},insertEmoticon:function(l,m,n){var o=m.substring(0,n.start),p=m.substring(n.end);if(n.start>0&&!o.endsWith(' '))l=' '+l;if(!p.startsWith(' '))l+=' ';var q=o+l+p;n.start+=l.length;n.end=n.start;return {result:q,start:n.start,end:n.end};}};e.exports=k;},null);
__d("MercuryShareImage.react",["ChatImageArrowDirection","ChatImageWithArrow.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"MercuryShareImage",propTypes:{height:l.number.isRequired,source:l.string.isRequired,width:l.number.isRequired},render:function(){return (i.createElement("div",{className:"_4hsl"},i.createElement(h,{arrowDirection:g.BOTH,height:this.props.height,source:this.props.source,width:this.props.width})));}});e.exports=m;},null);
__d("MessengerAttachmentImageBlock.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"MessengerAttachmentImageBlock",propTypes:{attachment:k.object.isRequired},render:function(){return (g.createElement("div",{className:i(this.props.className,this._computeClass())},this._renderImage(),g.createElement("div",{className:"_5swm"},this.props.children)));},_renderImage:function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return null;var n=this._getDimensions(),o=n.height,p=n.width,q=o>p,r=m(o,p),s=o&&p?o/p*100:100,t=(q||r)?.2:1,u=(q||r)?s:52;return (g.createElement("div",{className:"_3xn1",style:{backgroundImage:'url('+this.props.attachment.media.image+')',paddingBottom:q&&s>150?'136px':u*t+'%'}}));},_computeClass:function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return "_3xn3 _5swn";var n=this._getDimensions(),o=n.height,p=n.width,q=o>p;return (("_3xn3")+(m(o,p)&&!q?' '+"_3xn5":'')+(q?' '+"_3xn6":'')+(p>=o?' '+"_3xn7":''));},_getDimensions:function(){var n=this.props.attachment.properties||{},o=n.height,p=n.width;if(o&&p){o=parseInt(o,10);p=parseInt(p,10);return {height:o,width:p};}return {height:0,width:0};}});function m(n,o){return n<=300&&o<=300;}e.exports=l;},null);
__d("MercuryFallbackShareAttachmentContent.react",["Image.react","ImageBlock.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","MercuryShareImage.react","MessengerAttachmentImageBlock.react","React","URI","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=m,r=q.PropTypes,s=72,t=m.createClass({displayName:"MercuryFallbackShareAttachmentContent",propTypes:{attachment:j,location:r.oneOf(i.getValues())},statics:{modifyURIUsingLocation:function(u,v){if(v===i.MESSENGER&&!u.getDomain())u.setDomain('facebook.com').setSubdomain(n.getRequestURI().getSubdomain()).setProtocol('https');return u;}},render:function(){var u=this.props.attachment,v=this.props.location,w=((i.CHAT===v?"_49or":'')+(i.WEB_INBOX===v?' '+"__nm":'')+(i.CHAT_PREVIEW===v?' '+"_324d":'')+(i.CHAT!==v?' '+"_tih":'')+(!(u&&u.media.image)?' '+"_49ou":'')),x=(m.createElement("div",{className:"__6j"},m.createElement("div",{className:"__6k"},u.title),m.createElement("div",{className:"__6l"},u.description),m.createElement("div",{className:"__6m"},u.source)));if(u.media&&u.media.image){if(i.CHAT===v||i.CHAT_PREVIEW===v){return (m.createElement(h,{className:w,spacing:"medium"},m.createElement(k,{height:s,source:u.media.image,width:s}),m.createElement("div",{style:{display:'flex',justifyContent:'center',flexDirection:'column',height:s}},x)));}else if(i.MESSENGER===v)return (m.createElement(l,{className:w,attachment:u},x,this.props.children));return (m.createElement(h,{className:p(this.props.className,w)},m.createElement(g,{className:"__6n",src:u.media.image,width:s}),x,this.props.children));}return (m.createElement("div",{className:p(this.props.className,w)},x,this.props.children));}});e.exports=t;},null);
__d("MercuryFallbackShareAttachment.react",["Link.react","MercuryFallbackShareAttachmentContent.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","React","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k,o=n.PropTypes,p=k.createClass({displayName:"MercuryFallbackShareAttachment",propTypes:{attachment:j,location:o.oneOf(i.getValues())},renderLink:function(q){var r=this.props.location;if(i.isPreview(r))return q;var s=h.modifyURIUsingLocation(new l(this.props.attachment.uri),r);return (k.createElement(g,{className:"_5rw4",href:s,target:"_blank"},q));},render:function(){return this.renderLink(k.createElement(h,k.__spread({},this.props)));}});e.exports=p;},null);
__d("MercurySharePreview.react",["AsyncRequest","LeftRight.react","LoadingIndicator.react","MercuryFallbackShareAttachment.react","MercuryShareAttachmentRenderLocations","React","XUICloseButton.react","cx","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=l,q=p.PropTypes,r=l.createClass({displayName:"MercurySharePreview",propTypes:{imageSize:q.shape({width:q.number.isRequired,height:q.number.isRequired}).isRequired,location:q.oneOf(k.getValues()).isRequired,share:q.shape({params:q.array,type:q.number}),uri:q.string,onClose:q.func,onUpdate:q.func},getInitialState:function(){return {attachmentData:null,loading:false};},componentWillMount:function(){this._requestID=1337;this._currentRequest=null;},componentWillUnmount:function(){this._reset();},componentWillReceiveProps:function(s){o(!(s.share&&s.uri));if(!s.share&&!s.uri)return this._reset();var t=this.state.attachmentData||this.state.loading;if(s.share&&!t){this._loadFromShare(s.share);}else if(s.uri&&!(t&&this.props.uri==s.uri))this._loadFromURI(s.uri);},componentDidUpdate:function(s,t){this.props.onUpdate&&this.props.onUpdate(this);},getShareData:function(){return this.state.attachmentData&&this.state.attachmentData.share_data;},isLoading:function(){return this.state.loading;},_loadFromShare:function(s){this._currentRequest=new g().setURI('/message_share_attachment/fromParams/').setData({image_height:this.props.imageSize.height,image_width:this.props.imageSize.width,share_params:s.params,share_type:s.type}).setHandler(this._onShareLoaded.bind(this,this._getNextRequestID()));this._currentRequest.send();this.setState({loading:true,attachmentData:null});},_loadFromURI:function(s){this._currentRequest=new g().setURI('/message_share_attachment/fromURI/').setData({image_height:this.props.imageSize.height,image_width:this.props.imageSize.width,uri:s}).setHandler(this._onShareLoaded.bind(this,this._getNextRequestID()));this._currentRequest.send();this.setState({loading:true,attachmentData:null});},_getNextRequestID:function(){return (++this._requestID);},_getCurrentRequestID:function(){return this._requestID;},_onShareLoaded:function(s,t){if(this._getCurrentRequestID()!==s)return;this.setState({loading:false,attachmentData:t.payload});},_close:function(){this._reset();this.props.onClose&&this.props.onClose();},_reset:function(){this._getNextRequestID();this._currentRequest&&this._currentRequest.abort();this._currentRequest=null;this.setState({loading:false,attachmentData:null});},render:function(){var s=(("_tig")+(' '+"_tih"));if(this.state.loading)return (l.createElement(h,{direction:h.DIRECTION.right,className:s},l.createElement(i,{className:"_tii",size:"large",color:"white"}),l.createElement(m,{className:"_tij",shade:"dark",size:"small",onClick:this._close})));var t=this.state.attachmentData;if(!t)return l.createElement("div",null);return (l.createElement("div",null,l.createElement(m,{className:"_tij",shade:"dark",size:"small",onClick:this._close}),l.createElement(j,{attachment:t,location:k.CHAT_PREVIEW})));}});e.exports=r;},null);
__d("MessengerHotLikeButton.react",["ImmutableObject","Keys","KeyStatus","Link.react","MercurySourceType","MessengerHotLikePreviewEvents","MessengerHotLikeUtils","ReactComponentWithPureRenderMixin","React","StickerConstants","fbt","MercuryMessageObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=b('MercuryMessageObject').get(),s=o,t=s.PropTypes,u=o.createClass({displayName:"MessengerHotLikeButton",mixins:[n],propTypes:{onClick:t.func.isRequired,threadID:t.string,disabled:t.bool},render:function(){return (o.createElement(j,{"aria-label":q._("Wy\u015blij polubienie"),className:this.props.className,disabled:this.props.disabled,onClick:this._handleClickEvent,onMouseDown:this._handleMouseDown,onMouseUp:this._handleMouseUp},o.createElement("i",{style:{opacity:0,backgroundImage:'url('+m.getURIWithID(p.HOT_LIKE_LARGE_STICKER_ID)+')'}}),o.createElement("i",{style:{opacity:0,backgroundImage:'url('+m.getURIWithID(p.HOT_LIKE_SMALL_STICKER_ID)+')'}}),o.createElement("i",{style:{opacity:0,backgroundImage:'url('+m.getURIWithID(p.HOT_LIKE_MEDIUM_STICKER_ID)+')'}})));},_handleClick:function(v){setTimeout(function(){return this.props.onClick(v);}.bind(this),301);},_handleMouseDown:function(v){if(this.props.disabled||this._pressedSince){v.preventDefault();v.stopPropagation();}if(this.props.disabled||v.button!==0)return;this._pressedSince=Date.now();this._informPreviewStart();this._preparePop();},_handleMouseUp:function(){if(!this.props.threadID){this._handleClick(m.getStickerIDForTime(1));return;}if(!this._pressedSince)return;var v=Date.now()-this._pressedSince;this._pressedSince=0;var w=m.getStickerIDForTime(v);this._cancelPop();this._informPreviewStop(v);if(w)this._handleClick(w);},_informPreviewStart:function(){l.emit(l.START,this._getFakeMessage(),this.props.threadID);},_informPreviewStop:function(v){l.emit(l.STOP,this.props.threadID);},_informPreviewPop:function(){l.emit(l.POP,this.props.threadID);},_getFakeMessage:function(){var v=r.constructStickerMessageObject(p.HOT_LIKE_SMALL_STICKER_ID,k.MESSENGER_WEB,this.props.threadID);r.normalizeNewMessage(v);v.is_like_preview=true;v.like_preview_since=this._pressedSince;v.body='';return new g(v);},_preparePop:function(){this._cancelPop();this._popTimeout=setTimeout(this._informPreviewPop,m.SizeTimes.large);},_cancelPop:function(){clearTimeout(this._popTimeout);},_handleClickEvent:function(v){v.stopPropagation();if(this.props.disabled)return;if(i.getKeyDownCode()===h.RETURN)this._handleClick(m.getStickerIDForTime(1));}});e.exports=u;},null);
__d("P2PAbstractSendMoneyButton.react",["React","TooltipLink.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.PropTypes,m=g.createClass({displayName:"P2PAbstractSendMoneyButton",propTypes:{isDialogOpen:l.bool.isRequired,isDisabled:l.bool.isRequired,isMessenger:l.bool.isRequired,onClick:l.func.isRequired,onMouseOver:l.func,recipientName:l.string},_clickGuard:(false),render:function(){return (g.createElement(h,{alignH:"center",className:((this.props.isDialogOpen?"open":'')+(this.props.isDisabled?' '+"disabled":'')+(!this.props.isMessenger?' '+"_5uqy":'')+(this.props.isMessenger?' '+"_3ggc":'')),href:"#",onClick:this._handleClick,onMouseDown:this._prepareForClick,onMouseOver:this.props.onMouseOver,position:"above",title:this._getLinkTitle(),tooltip:this._getDisabledTitle()}));},_getLinkTitle:function(){if(this.props.isDisabled)return null;return (j._("Wy\u015blij pieni\u0105dze"));},_getDisabledTitle:function(){if(!this.props.isDisabled)return null;return (j._("{receiverName} nie mo\u017ce teraz odebra\u0107 pieni\u0119dzy.",[j.param("receiverName",this.props.recipientName)]));},_prepareForClick:function(){this._clickGuard=this.props.isDialogOpen;},_handleClick:function(n){n.stopPropagation();if(this._clickGuard){this._clickGuard=false;return;}this.props.onClick();}});e.exports=m;},null);
__d("P2PSendMoneyButton.react",["BootloadedComponent.react","Bootloader","CurrentEnvironment","P2PAbstractSendMoneyButton.react","React","Run","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k,o=n.PropTypes,p=i.messengerdotcom,q=k.createClass({displayName:"P2PSendMoneyButton",propTypes:{isNewEmptyLocalThread:o.bool,isGroupChat:o.bool,onTrigger:o.func,participants:o.arrayOf(o.object),threadID:o.string,threadFBID:o.string},getDefaultProps:function(){return {participants:[]};},render:function(){return (k.createElement(g,k.__spread({bootloadComponent:r,bootloadPlaceholder:this._renderPlaceholder()},this.props)));},_renderPlaceholder:function(){return (k.createElement(j,{isDialogOpen:false,isDisabled:true,isMessenger:p,onClick:m,onMouseOver:s,recipientName:this._getRecipientName()}));},_getRecipientName:function(){var t=this.props.participants;if(!this.props.isGroupChat&&t&&t.length>0)return t[0].short_name;return null;}});function r(t){l.onAfterLoad(function(){h.loadModules(["P2PSendMoneyButtonImpl.react"],t);});}function s(){h.loadModules(["P2PSendMoneyButtonImpl.react"],m);}e.exports=q;},null);
__d("P2PAPIUtils",["CreditCardFormParam","fbt","guid","merge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={genRequestID:function(){return 'id:'+i()+':'+Date.now();},getUncaughtErrorMessage:function(){return (h._("Wyst\u0105pi\u0142 b\u0142\u0105d. Spr\u00f3buj ponownie p\u00f3\u017aniej."));},prepareCardMutationData:function(l){var m={},n=l[g.CARD_NUMBER].replace(/ /g,'');m[g.CARD_NUMBER]=n;if(typeof l[g.CARD_EXPIRATION]==='string'){var o=l[g.CARD_EXPIRATION].split('/');m[g.MONTH]=o[0];m[g.YEAR]=o[1];m[g.CARD_EXPIRATION]={};m[g.CARD_EXPIRATION][g.MONTH]=m[g.MONTH];m[g.CARD_EXPIRATION][g.YEAR]=m[g.YEAR];}else{m[g.MONTH]=l[g.CARD_EXPIRATION][g.MONTH];m[g.YEAR]=l[g.CARD_EXPIRATION][g.YEAR];}return j(l,m);}};e.exports=k;},null);
__d("XP2PCardBINValidateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/card_bin\/validate\/",{bin_number:{type:"String",required:true}});},null);
__d("XP2PCreditCardDeleteController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_delete\/",{});},null);
__d("XP2PCreditCardUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_update\/",{});},null);
__d("XP2PCreditCardCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_create\/",{});},null);
__d("XP2PCreditCardVerifyController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_verify\/",{});},null);
__d("XP2PCreditCardsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/",{type:{type:"Int",defaultValue:1}});},null);
__d("XP2PPasswordProtectionStatusController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/password_protection_status\/",{});},null);
__d("XP2PPasswordProtectionStatusUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/password_protection_status\/_update\/",{});},null);
__d("XP2PPresetCreditCardSetController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/preset_credit_card\/_set\/",{});},null);
__d("XP2PTransactionsCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_create\/",{});},null);
__d("XP2PTransactionsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/",{since:{type:"Int"}});},null);
__d("XP2PTransactionsDeclineController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_decline\/",{});},null);
__d("XP2PTransactionsCancelController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_cancel\/",{});},null);
__d("XP2PUserEligibilityController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/user_eligibility\/",{user_ids:{type:"StringVector",required:true}});},null);
__d("P2PAPI",["AsyncRequest","CreditCardFormParam","P2PActions","P2PAPIUtils","P2PPasswordProtectionParam","P2PPaymentCreditCardsTypes","P2PTransferParam","ImmutableObject","URI","XP2PCardBINValidateController","XP2PCreditCardDeleteController","XP2PCreditCardUpdateController","XP2PCreditCardCreateController","XP2PCreditCardVerifyController","XP2PCreditCardsController","XP2PPasswordProtectionStatusController","XP2PPasswordProtectionStatusUpdateController","XP2PPresetCreditCardSetController","XP2PTransactionsCreateController","XP2PTransactionsController","XP2PTransactionsDeclineController","XP2PTransactionsCancelController","XP2PUserEligibilityController","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();'use strict';var ea={getAllCreditCards:function(){var fa=(u.getURIBuilder()).getURI();new g().setData({type:l.SENDING}).setURI(fa).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(ga){var ha=ga.getPayload();if(!ha.error)i.updateCreditCards(ha);}.bind(this)).send();},createTransaction:function(fa){var ga=(y.getURIBuilder()).getURI(),ha={},ia=fa.formData,ja=fa.success||da,ka=fa.error||da;ha[h.CREDENTIAL_ID]=ia[h.CREDENTIAL_ID];ha.amount=ia.amount;ha.receiver_id=ia.receiverId;ha.offline_threading_id=j.genRequestID();ha.group_thread_fbid=ia.group_thread_fbid;new g().setData(ha).setMethod('POST').setURI(ga).setAllowCrossPageTransition(true).setHandler(function(la){var ma=la?la.getPayload():{};if(ma.error){ka(ma.error);}else{ja(ma);this.getAllCreditCards();}}.bind(this)).setErrorHandler(function(){ka({message:j.getUncaughtErrorMessage()});}.bind(this)).send();},addCreditCard:function(fa){var ga=(s.getURIBuilder()).getURI().getPath(),ha=new o('/ajax/payment/token_proxy.php').addQueryData('tpe',ga);fa=j.prepareCardMutationData(fa);var ia=new n(fa);new g().setData(fa).setMethod('POST').setURI(ha).setHandler(function(ja){var ka=ja.getPayload(),la={};if(!ka.errors){la[h.CREDENTIAL_ID]=ka[h.CARD_FBID];la.isPreset=ka.isPreset;la.isVerified=ka.isVerified;la.passwordProtection=ka.passwordProtection;ia=n.set(ia,la);i.addCreditCard(ia);}else i.addCreditCardError(Object.assign({requestID:ia.requestID},ka));}.bind(this)).setErrorHandler(function(){i.addCreditCardError({requestID:ia.requestID,errors:{general:{message:j.getUncaughtErrorMessage()}}});}.bind(this)).send();},getTransactions:function(fa){fa=fa||{};var ga={},ha=fa,ia=(z.getURIBuilder()).getURI(),ja=new n(ha);if(ha.since)ga.since=ha.since;return new g().setData(ga).setURI(ia).setMethod('GET').setReadOnly(true).setHandler(function(ka){var la=ka.getPayload();if(!la.error){i.updateTransfers(la);}else i.updateTransfersError(Object.assign({requestID:ja.requestID},la));}.bind(this)).setErrorHandler(function(){i.updateTransfersError({error:{message:j.getUncaughtErrorMessage()},requestID:ja.requestID});}.bind(this)).send();},getNUXTransactions:function(){var fa=(new Date()),ga=Math.round((fa.setDate(fa.getDate()-15))/1000),ha=(z.getURIBuilder()).getURI();return new g().setData({since:ga}).setURI(ha).setMethod('GET').setReadOnly(true).setHandler(function(ia){var ja=ia.getPayload();if(!ja.error)i.updateNUXTransfers(ja);}.bind(this)).send();},updatePresetCreditCard:function(fa){var ga=(x.getURIBuilder()).getURI();new g().setData(fa).setURI(ga).setMethod('POST').setHandler(function(ha){var ia=ha.getPayload();if(!ia.error){i.updatePresetCreditCard(Object.assign({},ia,{requestID:fa.requestID}));i.transferAccepted();}else i.updatePresetCreditCardError(Object.assign({},ia,{requestID:fa.requestID}));}.bind(this)).setErrorHandler(function(){i.updatePresetCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:fa.requestID});}.bind(this)).send();},updateCreditCard:function(fa){var ga=(r.getURIBuilder()).getURI().getPath(),ha=new o('/ajax/payment/token_proxy.php').addQueryData('tpe',ga);fa=j.prepareCardMutationData(fa);var ia=new n(fa);new g().setData(fa).setMethod('POST').setURI(ha).setHandler(function(ja){var ka=ja.getPayload();if(!ka.errors){i.updateCreditCard(ia);}else i.updateCreditCardError(Object.assign({},ka,{requestID:ia.requestID}));}.bind(this)).setErrorHandler(function(){i.updateCreditCardError({errors:{general:{message:j.getUncaughtErrorMessage()}},requestID:ia.requestID});}.bind(this)).send();},deleteCreditCard:function(fa){var ga=(q.getURIBuilder()).getURI();new g().setData(fa).setMethod('POST').setURI(ga).setHandler(function(ha){var ia=ha.getPayload();if(!ia.error){i.deleteCreditCard(Object.assign({},ia,{requestID:fa.requestID}));}else i.deleteCreditCardError(Object.assign({},ia,{requestID:fa.requestID}));}.bind(this)).setErrorHandler(function(){i.deleteCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:fa.requestID});}.bind(this)).send();},getPasswordProtectionSetting:function(fa){var ga=(v.getURIBuilder()).getURI(),ha=fa.success||da,ia=fa.error||da;new g().setURI(ga).setMethod('GET').setReadOnly(true).setHandler(function(ja){var ka=ja?ja.getPayload():[];if(ka.error){ia();}else ha(ka);}.bind(this)).setErrorHandler(function(){ia();}.bind(this)).send();},setPasswordProtectionSetting:function(fa){var ga=(w.getURIBuilder()).getURI(),ha=fa.formData,ia=fa.success||da,ja=fa.error||da,ka={};ka[k.STATUS]=ha[k.STATUS];new g().setData(ka).setURI(ga).setMethod('POST').setHandler(function(la){var ma=la?la.getPayload():{};if(ma.error){ja(ma.error);}else ia();}.bind(this)).setErrorHandler(function(){ja();}.bind(this)).send();},declineTransaction:function(fa){var ga=(aa.getURIBuilder()).getURI(),ha=fa.formData,ia=fa.success||da,ja=fa.error||da,ka={};ka[m.TRANSFER_ID]=ha[m.TRANSFER_ID];new g().setData(ka).setURI(ga).setMethod('POST').setHandler(function(la){var ma=la?la.getPayload():{},na={};if(ma.error){ja(ma.error);}else{ia();na[m.TRANSFER_ID]=ka[m.TRANSFER_ID];i.transferDeclined(na);}}.bind(this)).setErrorHandler(function(){ja();}.bind(this)).send();},cancelTransaction:function(fa){var ga=(ba.getURIBuilder()).getURI(),ha=fa.formData,ia=fa.success||da,ja=fa.error||da,ka={};ka[m.TRANSFER_ID]=ha[m.TRANSFER_ID];new g().setData(ka).setURI(ga).setMethod('POST').setHandler(function(la){var ma=la?la.getPayload():{};if(ma.error){ja(ma.error);}else ia();}.bind(this)).setErrorHandler(function(){ja();}.bind(this)).send();},verifyCreditCard:function(fa){var ga=(t.getURIBuilder()).getURI().getPath(),ha=new o('/ajax/payment/token_proxy.php').addQueryData('tpe',ga);new g().setData(fa).setMethod('POST').setURI(ha).setHandler(function(ia){var ja=ia.getPayload();if(!ja.error){i.verifyCreditCard(Object.assign({},ja,{requestID:fa.requestID}));}else i.verifyCreditCardError(Object.assign({},ja,{requestID:fa.requestID}));}.bind(this)).setErrorHandler(function(){i.verifyCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:fa.requestID});}.bind(this)).send();},validateBINNumber:function(fa){fa=fa||{};var ga=new n(fa),ha=(p.getURIBuilder()).setString('bin_number',fa.binNumber).getURI();return new g().setURI(ha).setMethod('GET').setReadOnly(true).setHandler(function(ia){var ja=ia.getPayload();if(!ja.error){i.binNumberValidated(Object.assign({},ja,{requestID:fa.requestID}));}else i.binNumberValidatedError(Object.assign({},ja,{requestID:ga.requestID}));}.bind(this)).send();},getUserEligibility:function(fa){fa=fa||{};var ga=(ca.getURIBuilder()).setStringVector('user_ids',fa.userIDs).getURI();return new g().setURI(ga).setMethod('GET').setReadOnly(true).setHandler(function(ha){var ia=ha.getPayload();if(!ia.error)i.userEligibilityUpdated(ia);}.bind(this)).send();}};e.exports=ea;},null);
__d("P2PCreditCard",["CreditCardFormParam","CreditCardTypeEnum","PaymentMethodUtils","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={visa:{image:k('/images/payments/icons/visa.png'),imageLarge:k('/images/payments/icons/visa-lg.png'),name:'Visa'},mc:{image:k('/images/payments/icons/mc.png'),imageLarge:k('/images/payments/icons/mc-lg.png'),name:'MasterCard'},disc:{image:k('/images/payments/icons/disc.png'),imageLarge:k('/images/payments/icons/disc-lg.png'),name:'Discover'},jcb:{image:k('/images/payments/icons/jcb.png'),imageLarge:k('/images/payments/icons/jcb-lg.png'),name:'JCB'},amex:{image:k('/images/payments/icons/amex.png'),imageLarge:k('/images/payments/icons/amex-lg.png'),name:'American Express'},unknown:{image:k('/images/brands/credit_card/credit_32.png'),imageLarge:k('/images/brands/credit_card/credit_32.png'),name:j._("Nieznany typ karty")}};function m(n){this.setCredentialId(n[g.CREDENTIAL_ID]);this.setCardType(n[g.CARD_TYPE]);this.setCreditCardNumber(n[g.CARD_NUMBER]);this.setSelected(n.selected);this.setZipCode(n[g.ZIP]);this.setCSC(n[g.CSC]);this.setExp(n[g.CARD_EXPIRATION]);this.setIsPreset(n.isPreset);this.setIsVerified(n.isVerified);this.setIsMobileVerified(n.isMobileVerified);}m.prototype.getCreditCardNumber=function(){return this[g.CARD_NUMBER];};m.prototype.setCreditCardNumber=function(n){n=n.replace(/ /g,'');this.setCardProviderProps(this[g.CARD_TYPE],n);n=n.substr(n.length-4);this[g.CARD_NUMBER]=n;};m.prototype.setCardProviderProps=function(n,o){var p=this.$P2PCreditCard0(n,o);if(l[p]){this.setImage(l[p].image);this.setImageLarge(l[p].imageLarge);this.setName(l[p].name);}};m.prototype.getExp=function(){return this[g.CARD_EXPIRATION];};m.prototype.getExpFormatted=function(){var n=this[g.CARD_EXPIRATION];return n?n[g.MONTH]+'/'+n[g.YEAR]:'';};m.prototype.getExpFormattedShort=function(){var n=this[g.CARD_EXPIRATION],o='';if(n&&n[g.MONTH]&&n[g.YEAR]){o=n[g.MONTH]+'/';if(n[g.YEAR].length===4){o+=n[g.YEAR].substr(2);}else o+=n[g.YEAR];}return o;};m.prototype.setExp=function(n){if(!n)return;var o,p,q={};q[g.MONTH]=n[g.MONTH];q[g.YEAR]=n[g.YEAR];if(q[g.MONTH]&&q[g.MONTH].length===1)q[g.MONTH]='0'+q[g.MONTH];if(q[g.YEAR]&&q[g.YEAR].length===2){o=(new Date()).getFullYear()+'';p=o.substr(0,2);q[g.YEAR]=p+q[g.YEAR];}this[g.CARD_EXPIRATION]=q;};m.prototype.getCSC=function(){return this[g.CSC];};m.prototype.setCSC=function(n){this[g.CSC]=n;};m.prototype.getZipCode=function(){return this[g.ZIP];};m.prototype.setZipCode=function(n){this[g.ZIP]=n;};m.prototype.getSelected=function(){return this.$P2PCreditCard1;};m.prototype.setSelected=function(n){this.$P2PCreditCard1=n;};m.prototype.getCardType=function(){return this[g.CARD_TYPE];};m.prototype.setCardType=function(n){this[g.CARD_TYPE]=n;this.setCardProviderProps(n,this[g.CARD_NUMBER]);};m.prototype.getCredentialId=function(){return this[g.CREDENTIAL_ID];};m.prototype.setCredentialId=function(n){this[g.CREDENTIAL_ID]=n;};m.prototype.$P2PCreditCard0=function(n,o){var p='default',q,r;if(n){q=Object.keys(h).filter(function(s){return h[s]===n;})[0];p=this.$P2PCreditCard2(q);}else if(o){r=i.getCardType(o);if(r)p=r.name;}return p;};m.prototype.getImage=function(){return this.$P2PCreditCard3||l.unknown.image;};m.prototype.setImage=function(n){this.$P2PCreditCard3=n;};m.prototype.getImageLarge=function(){return this.$P2PCreditCard4||l.unknown.imageLarge;};m.prototype.setImageLarge=function(n){this.$P2PCreditCard4=n;};m.prototype.getName=function(){return this.$P2PCreditCard5||l.unknown.name;};m.prototype.setName=function(n){this.$P2PCreditCard5=n;};m.prototype.getIsPreset=function(){return this.$P2PCreditCard6;};m.prototype.setIsPreset=function(n){this.$P2PCreditCard6=n||false;};m.prototype.$P2PCreditCard2=function(n){switch(n){case 'VISA':n='visa';break;case 'AMERICANEXPRESS':n='amex';break;case 'MASTERCARD':n='mc';break;case 'DISCOVER':n='disc';break;case 'JCB':n='jcb';break;default:n='unknown';break;}return n;};m.prototype.getCreditCardNumberFormatted=function(){return '*'+this[g.CARD_NUMBER];};m.prototype.getCreditCardNumberMask=function(){return '**** **** **** '+this[g.CARD_NUMBER];};m.prototype.getMaxCSCLength=function(){var n=this.$P2PCreditCard0(this[g.CARD_TYPE],this[g.CARD_NUMBER]);return n==='amex'?4:3;};m.prototype.getIsVerified=function(){return this.$P2PCreditCard7||false;};m.prototype.setIsVerified=function(n){this.$P2PCreditCard7=n;};m.prototype.getIsMobileVerified=function(){return this.$P2PCreditCard8||false;};m.prototype.setIsMobileVerified=function(n){this.$P2PCreditCard8=n;};m.prototype.isExpired=function(){var n=this.getExp();if(!n)return false;var o=n,p=o.month,q=o.year,r=new Date(),s=r.getFullYear()+'',t=(r.getMonth()+1)+'';t=t.length===1?'0'+t:t;return q<s||(s===q&&p<t);};e.exports=m;},null);
__d("P2PNUXRendererUtils",["MercuryConstants","CurrentUser","ImmutableObject","MercuryAttachmentType","P2PTransferParam","P2PTransferStatus","StoryAttachmentStyle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g.MercurySupportedShareType,o={getTransferFromMessage:function(p){var q,r;if(!p||!p.attachments||!p.attachments.length)return;r=p.attachments[0];if(this.isShareAttachment(r)){q=r.share.target;}else if(r.share_data_type===n.FB_ORION)q=r.metadata;if(q)q=new i(q);return q;},isShareAttachment:function(p){return !!(typeof p!=='string'&&p.attach_type==j.SHARE&&p.share&&p.share.style_list&&p.share.style_list.indexOf(m.ORION)>=0);},doesNUXNeedCreditCards:function(p){var q=h.getID()===p.sender.id;return (!q&&p[k.STATUS]===l.PENDING_RECIPIENT_NUX);},isRecipientActionableStatus:function(p){var q=p[k.STATUS],r=h.getID()===p.sender.id;return (!r&&(q===l.PENDING_RECIPIENT_NUX||q===l.PENDING_RECIPIENT_VERIFICATION||q===l.PENDING_PUSH_FAIL));}};e.exports=o;},null);
__d("P2PTransferStore",["Arbiter","P2PActionConstants","ChannelConstants","CreditCardFormParam","EventEmitter","ImmutableObject","P2PActions","P2PAPI","P2PChannelType","P2PCreditCard","P2PDispatcher","P2PNUXRendererUtils","P2PTransferParam","P2PTransferStatus","MercuryThreadInformer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=b('MercuryThreadInformer').get(),v,w,x,y,z,aa,ba,ca,da,ea=null,fa=false;function ga(la,ma){if(la)da[la]=new l(ma);}function ha(la,ma){if(la)da[la]={error:ma};}for(var ia in k)if(k.hasOwnProperty(ia))ka[ia]=k[ia];var ja=k===null?null:k.prototype;ka.prototype=Object.create(ja);ka.prototype.constructor=ka;ka.__superConstructor__=k;function ka(){k.call(this);v=false;x=[];da={};z=g.subscribe(i.getArbiterType(o.TRANSFER_STATUS_CHANGED),this.handleChannelTransferStatusChanged.bind(this));aa=u.subscribe('messages-received',this.handleMessageReceived.bind(this));ba=u.subscribe('messages-updated',this.handleMessageUpdated.bind(this));y=q.register(this.onEventDispatched.bind(this));}ka.prototype.onEventDispatched=function(la){var ma=la.data,na=la.type;switch(na){case h.TRANSFERS_UPDATED:this.handleTransfersUpdated(ma);this.emit('change');break;case h.TRANSFERS_UPDATED_ERROR:this.handleTransfersUpdatedError(ma);this.emit('change');break;case h.NUX_TRANSFERS_UPDATED:this.handleNUXTransfersUpdated(ma);this.emit('change');break;case h.TRANSFER_ADDED:this.handleTransferAdded(ma);this.emit('change');break;case h.TRANSFER_UPDATED:this.handleTransferUpdated(ma);this.emit('change');break;case h.TRANSFER_ACCEPTED:this.handleTransferAccepted();this.emit('change');break;case h.TRANSFER_DECLINED:this.handleTransferDeclined(ma);this.emit('change');break;}};ka.prototype.getAsyncRequestState=function(){return da;};ka.prototype.handleTransfersUpdated=function(la){ca=null;fa=true;x=la.map(function(ma){var na={};if(ma.creditCard){na[j.CREDENTIAL_ID]=ma.creditCard[j.CREDENTIAL_ID];na[j.CARD_NUMBER]=ma.creditCard[j.CARD_NUMBER];na[j.CARD_TYPE]=ma.creditCard[j.CARD_TYPE];ma.creditCard=new p(na);}return new l(ma);});};ka.prototype.handleTransfersUpdatedError=function(la){ca=la.error;ha(la.requestID,la.error);};ka.prototype.handleNUXTransfersUpdated=function(la){if(!fa)this.handleTransfersUpdated(la);};ka.prototype.handleTransferAdded=function(la){var ma=null;ga(la.requestID,la);ma=x.filter(function(na){return (na[s.TRANSFER_ID]===la[s.TRANSFER_ID]);})[0];if(ma)return;x.push(new l(la));x=x.sort(function(na,oa){return oa.creationTime-na.creationTime;});};ka.prototype.handleTransferAddedError=function(la){ha(la.requestID,la.errors);};ka.prototype.handleChannelTransferStatusChanged=function(la,ma){ma=ma.obj;m.transferUpdated(ma);};ka.prototype.getPendingMessageAttachment=function(){return ea;};ka.prototype.handleMessageReceived=function(la,ma){for(var na in ma)if(ma.hasOwnProperty(na)){var oa=ma[na];for(var pa=0;pa<oa.length;pa++)if(oa[pa].attachments&&oa[pa].attachments.length){ea=oa[pa];return;}}};ka.prototype.handleMessageUpdated=function(la,ma){if(!ea)return;for(var na in ma)if(ma.hasOwnProperty(na)){var oa=ma[na];for(var pa in oa)if(oa.hasOwnProperty(pa)&&ea.message_id===pa){var qa=r.getTransferFromMessage(ea);if(qa){m.transferAdded(qa);ea=null;return;}}}};ka.prototype.handleTransferUpdated=function(la){for(var ma=0,na=x.length;ma<na;ma++)if(x[ma][s.TRANSFER_ID]===la[s.TRANSFER_ID])x[ma]=l.set(x[ma],la);};ka.prototype.handleTransferAccepted=function(){var la;for(var ma=0,na=x.length;ma<na;ma++)if(x[ma][s.STATUS]===t.PENDING_RECIPIENT_NUX){la={};la[s.STATUS]=t.COMPLETED;x[ma]=l.set(x[ma],la);}};ka.prototype.handleTransferDeclined=function(la){var ma;for(var na=0,oa=x.length;na<oa;na++)if(x[na][s.TRANSFER_ID]===la[s.TRANSFER_ID]&&x[na][s.STATUS]===t.PENDING_RECIPIENT_NUX){ma={};ma[s.STATUS]=t.CANCELED_DECLINED;x[na]=l.set(x[na],ma);break;}};ka.prototype.handleTransferUpdatedError=function(la){ha(la.requestID,la.errors);};ka.prototype.getTransferByID=function(la){return x.filter(function(ma){return la===ma[s.TRANSFER_ID];})[0];};ka.prototype.getAll=function(la){if(!v){v=true;n.getTransactions(la);}return x;};ka.prototype.getNUXTransfer=function(){var la=x.filter(function(ma){return r.isRecipientActionableStatus(ma);})[0];if(!la&&!w&&!v){w=true;n.getNUXTransactions();}return la;};ka.prototype.hasTransfers=function(){return x.length>0;};ka.prototype.hasReceivedFromSender=function(la){for(var ma=0,na=x.length;ma<na;ma++)if(x[ma].sender.id===la)return true;return false;};ka.prototype.getTransferFetchError=function(){return ca;};e.exports=new ka();},null);
__d("XPagesMercuryIndicatorController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pages\/messaging\/mercury\/indicator\/",{});},null);
__d("PagesMercuryChatTabIndicatorHandler",["AsyncRequest","FBID","MercuryIDs","XPagesMercuryIndicatorController"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l,m){"use strict";this.$PagesMercuryChatTabIndicatorHandler0=i.getUserIDFromThreadID(l);this.$PagesMercuryChatTabIndicatorHandler1=m;}k.prototype.checkResponsiveness=function(){"use strict";if(!this.$PagesMercuryChatTabIndicatorHandler0||h.isUser(this.$PagesMercuryChatTabIndicatorHandler0))return;var l=j.getURIBuilder().getURI();new g().setURI(l).setMethod('POST').setData({page_id:this.$PagesMercuryChatTabIndicatorHandler0}).setHandler(function(m){var n=m.payload;if(n.responsiveness)this.$PagesMercuryChatTabIndicatorHandler1(n.responsiveness);}.bind(this)).send();};e.exports=k;},null);
__d("SelectionPosition",["Event","InputSelection","SubscriptionsHandler","merge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l){"use strict";this.$SelectionPosition0=l;this.$SelectionPosition1={start:0,end:0};this.$SelectionPosition2=new i();this.$SelectionPosition3=false;this.updatePos();this.enable();}k.prototype.getPos=function(){"use strict";return j(this.$SelectionPosition1);};k.prototype.setPos=function(l,m){"use strict";this.$SelectionPosition1={start:l,end:m};this.restore();};k.prototype.updatePos=function(){"use strict";this.$SelectionPosition1=h.get(this.$SelectionPosition0);};k.prototype.restore=function(){"use strict";h.set(this.$SelectionPosition0,this.$SelectionPosition1.start,this.$SelectionPosition1.end);};k.prototype.enable=function(){"use strict";if(!this.$SelectionPosition3){this.$SelectionPosition2.addSubscriptions(g.listen(this.$SelectionPosition0,'keyup',this.updatePos.bind(this)),g.listen(this.$SelectionPosition0,'click',this.updatePos.bind(this)));this.$SelectionPosition3=true;}};k.prototype.disable=function(){"use strict";if(this.$SelectionPosition3){this.$SelectionPosition2.release();this.$SelectionPosition3=false;}};e.exports=k;},null);
__d("XStickerReplyNUXController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/tooltip\/",{});},null);
__d("ChatTabView",["Animation","Arbiter","AsyncDialog","AsyncRequest","AsyncSignal","AvailableList","AvailableListConstants","BanzaiODS","Bootloader","BootloadedComponent.react","ChatAddToThreadButton.react","ChatArchiveWarning.react","ChatBehavior","ChatCloseButton.react","ChatConfig","ChatEmployeeAwayWarning","ChatOpenTab","ChatPhotoUploader.react","ChatPrivacyActionController","ChatQuietLinks","ChatShareLinkUploader","ChatStickerButton.react","ChatStickerTriggerController","ChatTabActions","ChatTabMenu.react","ChatTabMessagesView","ChatTabOfficeStatus","ChatTabSheetController","ChatTabViewEvents","ChatTabViewInstances","ChatTitleLink.react","ChatVisibility","ChatVideoCallButton.react","MercuryConstants","CurrentUser","CSS","CurrentLocale","Dialog","Dock","DOM","DOMEvent","DOMQuery","DragDropTarget","EmoticonsList","EmoticonUtils","Event","FBRTCCallabilityStore","FBID","Focus","ImmutableObject","Input","Keys","Locale","LogHistory","MercuryIDs","MercuryLogMessageType","MercuryMessengerBlockingUtils","MercuryParticipants","MercuryShareAttachmentRenderLocations","MercurySharePreview.react","MercurySourceType","MercuryThreadInfo","MercuryThreadMetadataRawRenderer","MercuryViewer","MessengerHotLikeButton.react","NubController","P2PGKValues","P2PSendMoneyButton.react","P2PTransferStore","PagesMercuryChatTabIndicatorHandler","Parent","PhotosUploadWaterfall","PresenceStatus","React","Run","Scroll","SelectionPosition","StickerActions","StickerConfig","StickerConstants","StickersFlyout.react","StickerState","Style","SubscriptionsHandler","SyntheticMouseEvent","ChatTabTemplates","TextAreaControl","Toggler","Tooltip","TypingDetectorController","URLScraper","URI","UserAgent_DEPRECATED","WaterfallIDGenerator","WebMessengerDeleteThreadDialog","WebMessengerThreadPermalinks","NFXChatHeadGK","XNFXStartForMessageThreadController","XStickerReplyNUXController","cancelAnimationFrame","copyProperties","createCancelableFunction","csx","cx","emptyFunction","fbt","getActiveElement","isEmpty","requestAnimationFrame","setIntervalAcrossTransitions","ChatReactInput","MercuryTypingReceiver","MercuryMessageActions","MercuryMessages","MercuryMessageObject","MercuryThreadIDMap","MercuryServerRequests","MercuryThreadInformer","MercuryThreadMetadataRenderer","MercuryThreadActions","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld){b.__markCompiled&&b.__markCompiled();'use strict';var md=b('ChatReactInput').module,nd=b('MercuryTypingReceiver').get(),od=b('MercuryMessageActions').get(),pd=b('MercuryMessages').get(),qd=b('MercuryMessageObject').get(),rd=b('MercuryThreadIDMap').get(),sd=b('MercuryServerRequests').get(),td=b('MercuryThreadInformer').get(),ud=b('MercuryThreadMetadataRenderer').get(),vd=b('MercuryThreadActions').get(),wd=b('MercuryThreads').get(),xd=/^\s*$/,yd=ja,zd=null,ae,be=10,ce=960,de=hb.getInstance('chat_tab_view');function ee(ze,af){var bf=ta.create('div');af=af&&af.filter(function(ef){return ef!=rb.getID();});if(jd(af))return qc.remove(ze);var cf=af.length,df=cf-be;if(df>1)af=af.slice(0,be);lb.getMulti(af,function(ef){for(var ff in ef){var gf=ef[ff],hf=nc[':fb:mercury:chat:multichat-tooltip-item'].build();ta.setContent(hf.getNode('name'),gf.name);var jf=ib.getUserIDFromParticipantID(ff),kf=jf&&ac.get(jf)==m.ACTIVE;pa.conditionShow(hf.getNode('icon'),kf);pa.conditionClass(hf.getNode('name'),'tooltipItemWithIcon',kf);ta.appendContent(bf,hf.getRoot());}if(df>1){var lf=hd._("i jeszcze {number of hidden chat participants}.",[hd.param("number of hidden chat participants",df)]);ta.appendContent(bf,ta.create('div',{},lf));}qc.set(ze,bf,'above');});}var fe={},ge=null,he=false;function ie(ze,af,bf){if(bf){fe[ze]=af;if(!ge)ge=ld(je,600);}else{pa.removeClass(af,'highlightTitle');delete fe[ze];}}function je(){for(var ze in fe){var af=fe[ze];if(af.parentNode){pa.conditionClass(af,'highlightTitle',he);}else delete fe[ze];}he=!he;if(!Object.keys(fe).length){clearInterval(ge);ge=null;}}function ke(ze){var af=ib.tokenize(ze);switch(af.type){case 'user':return nc[':fb:mercury:chat:user-tab'].build();}return nc[':fb:mercury:chat:multichat-tab'].build();}function le(ze){var af=ze._getInputValue(),bf=ze._fileUploader.getAttachments();if(re(ze))ne(ze,af,bf,function(cf){var df=ze._fileUploader.getImageFiles();if(df.length>0){cf.image_ids=df;cf.has_attachment=true;}var ef=ze._fileUploader.getAnimatedImageFiles();if(ef.length>0){cf.gif_ids=ef;cf.has_attachment=true;}var ff=ze._fileUploader.getVideoFiles();if(ff.length>0){cf.video_ids=ff;cf.has_attachment=true;}var gf=ze._fileUploader.getAudioFiles();if(gf.length>0){cf.audio_ids=gf;cf.has_attachment=true;}var hf=ze._fileUploader.getFiles();if(hf.length>0){cf.file_ids=hf;cf.has_attachment=true;}od.send(cf);ze._fileUploader.removeAttachments();ze._shareLinkUploader&&ze._shareLinkUploader.clear();if(ze._sharePreview)ze._sharePreview.setProps({share:null,uri:null});if(!u.get('chat_react_input'))ze._getNode('input').value='';ze._typingDetector&&ze._typingDetector.resetState();ze._messagesView&&ze._messagesView.setShouldScrollToBottom(true);});}function me(ze,af){if(af===0)return;te(ze,zb.POST_PUBLISHED,{count:af});ze._waterfallID=vc.generate();}function ne(ze,af,bf,cf){wd.getThreadMeta(ze._threadID,function(df){var ef=ob.CHAT_WEB;if(ze._shareLinkUploader&&ze._shareLinkUploader.getAttachData()&&ze._shareLinkUploader.loadedFromFeed())ef=ob.SAM_UFI;var ff=qd.constructUserGeneratedMessageObject(af,ef,ze._threadID);if(bf.length>0){ff.has_attachment=true;ff.raw_attachments=bf;}if(ze._shareLinkUploader){var gf=ze._shareLinkUploader.getAttachData();if(gf){ff.has_attachment=true;ff.content_attachment=gf;}}if(ze._sharePreview){var hf=ze._sharePreview.getShareData();if(hf){ff.has_attachment=true;ff.shareable_attachment=hf;}}if(wd.isNewEmptyLocalThread(ze._threadID)){var jf=ze._sheetController.getAddFriendsParticipants();if(jf===null||jf.length===0)return;jf=jf.filter(function(mf){return mf!=rb.getID();});if(jf.length===0){ff.thread_id=ib.getThreadIDFromUserID(oa.getID());}else if(jf.length===1){ff.thread_id=ib.getThreadIDFromParticipantID(jf[0]);}else vd.addParticipants(ze._threadID,jf);}if(wd.isEmptyLocalThread(ze._threadID)){ff.message_id=ib.tokenize(ze._threadID).value;var kf=wd.getThreadMetaNow(df.thread_id);ff.specific_to_list=Array.from(kf.participants);}if(typeof ff!='undefined')ff.signatureID=ze._signatureID;ff.ui_push_phase=na.UIPushPhase;cf(ff);if(ze._threadID!==ff.thread_id&&!ze._photoUploader.isUploading()){var lf=ze._getInputValue();da.closeTab(ze._threadID);w.openThread(ff.thread_id,'ChatTabView',null,af?gd:function(mf){return mf.appendTextToInput(lf);});}});}function oe(ze){ze._blocked=true;ze._sheetController.openUploadWarningTabSheet();}function pe(ze){return (ze._fileUploader.isUploading()||ze._photoUploader.isUploading()||(ze._sharePreview&&ze._sharePreview.isLoading()));}function qe(ze){return (ze._fileUploader&&ze._fileUploader.isUploading());}function re(ze){var af=ze._getInputValue();if(!xd.test(af))return true;if(ze._fileUploader.getAttachments().length>0||ze._fileUploader.getImageFiles().length>0||ze._fileUploader.getAnimatedImageFiles().length>0||ze._fileUploader.getVideoFiles().length>0||ze._fileUploader.getAudioFiles().length>0||ze._fileUploader.getFiles().length>0)return true;if(ze._shareLinkUploader&&ze._shareLinkUploader.getAttachData())return true;if(ze._sharePreview&&ze._sharePreview.getShareData())return true;return false;}function se(ze){ze._nubController.flyoutContentChanged();var af=ze._getNode('attachmentShelf');dc.setTop(af,af.scrollHeight);}function te(ze,af,bf){zb.sendSignal(cd({qn:ze._waterfallID,step:af,uploader:zb.APP_CHAT},bf||{}));}function ue(ze,af,bf,cf,df){var ef,ff,gf;if(af)sd.ensureThreadIsFetched(af);this._threadID=ze;this._signatureID=bf;this._eventListeners=[];this._tabTemplate=ke(ze);this._tabElem=this._tabTemplate.getRoot();if(df&&df.getTabElem()){this.insertBefore(df);}else this.appendTo(cf);this._stickersFlyoutShown=false;this._messagesView=null;if(zd===null)zd=!u.get('seen_autosend_photo_nux');this._titlebar=this._getNode('nubFlyoutTitlebar');this._iconsContainerNode=this._getNode('iconsContainer');this._inputContainerNode=this._getNode('inputContainer');this._pagesMessageIndicator=this._getNode('pagesMessageIndicator');this._waterfallID=vc.generate();this._subscriptionsHandler=new lc();this._initializeSheetController();var hf=[gd,this._initializeHotLike.bind(this),this._initializeHeader.bind(this),this._initializeUIListeners.bind(this),this._initializeAutoSendPhotoUploader.bind(this),this._initializeTitleHREF.bind(this),this._initializeP2P.bind(this),this._initializeInput.bind(this),this._initializeStickers.bind(this),function(){wd.getThreadMeta(this._threadID,function(lf){this._setUpMutingSettings(lf);this._setUpMessageBlockStatus(lf);}.bind(this));z.removeEmptyHrefs(this._tabElem);}.bind(this),function(){this.updateAvailableStatus();this.updateTab();this._setCloseTooltip(false);}.bind(this),this._initializeUnloadListeners.bind(this),this._initializeDragDropTarget.bind(this),this._initializePageMessagingIndicator.bind(this)];if(u.get('chat_defer_initialization',false)){var jf=function(lf){if(!lf.length){delete this._initFrame;return;}var mf=lf.shift();this._initFrame=kd(function(){jf(lf);});mf();}.bind(this);jf(hf);}else{var kf;for(ef=hf,ff=Array.isArray(ef),gf=0,ef=ff?ef:ef[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(ff){if(gf>=ef.length)break;kf=ef[gf++];}else{gf=ef.next();if(gf.done)break;kf=gf.value;}kf();}}yd.set(ze,this);this._logOpenTab();}function ve(ze){if(ze._photoUploader.isUploading())te(ze,zb.CANCEL_DURING_UPLOAD);}function we(){var ze,af,bf,cf;for(ze=yd.values(),af=Array.isArray(ze),bf=0,ze=af?ze:ze[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(af){if(bf>=ze.length)break;cf=ze[bf++];}else{bf=ze.next();if(bf.done)break;cf=bf.value;}cf.updateAvailableStatus();cf.updateMultichatTooltip();}}function xe(){var ze,af,bf,cf;for(ze=yd.values(),af=Array.isArray(ze),bf=0,ze=af?ze:ze[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(af){if(bf>=ze.length)break;cf=ze[bf++];}else{bf=ze.next();if(bf.done)break;cf=bf.value;}cf.updateCallLink();}}l.subscribe(m.ON_AVAILABILITY_CHANGED,we);ab.addListener(xe);s.subscribe(s.ON_CHANGED,function(){var ze,af,bf,cf;for(ze=yd.keys(),af=Array.isArray(ze),bf=0,ze=af?ze:ze[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(af){if(bf>=ze.length)break;cf=ze[bf++];}else{bf=ze.next();if(bf.done)break;cf=bf.value;}wd.getThreadMeta(cf,function(df){yd.get(cf)._updateUnreadCount(df);});}});nd.addRetroactiveListener('state-changed',function(ze){for(var af in ze){var bf=ze[af]&&ze[af].length,cf=yd.get(af);cf&&cf.showTypingIndicator(bf);}});td.subscribe('threads-updated',function(ze,af){var bf,cf,df,ef;for(bf=yd.keys(),cf=Array.isArray(bf),df=0,bf=cf?bf:bf[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(cf){if(df>=bf.length)break;ef=bf[df++];}else{df=bf.next();if(df.done)break;ef=df.value;}var ff=yd.get(ef);af[ef]&&ff.updateTab();if(ff._newThreadIDFromPhotoUpload&&!ff._photoUploader.isUploading()&&af[ff._newThreadIDFromPhotoUpload]){da.closeTab(ff._threadID);w.openThread(ff._newThreadIDFromPhotoUpload,'ChatTabView');ff._newThreadIDFromPhotoUpload=null;}}});td.subscribe('threads-deleted',function(ze,af){var bf,cf,df,ef;for(bf=yd.keys(),cf=Array.isArray(bf),df=0,bf=cf?bf:bf[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(cf){if(df>=bf.length)break;ef=bf[df++];}else{df=bf.next();if(df.done)break;ef=df.value;}af[ef]&&da.closeTab(ef,'thread_deleted');}});cd(ue.prototype,{getThreadID:function(){return this._threadID;},getTabElem:function(){return this._tabElem;},showAddFriend:function(){setTimeout((function(){this._sheetController.openAddFriendsSheet();}).bind(this),0);},showNameConversation:function(ze){setTimeout((function(){this._sheetController.openNameConversationSheet(ze);}).bind(this),0);},hideAutomaticNameConversation:function(){setTimeout((function(){this._sheetController.closeAutomaticNameConversationSheet();}).bind(this),0);},isVisible:function(){return pa.shown(this._tabElem);},setVisibleState:function(ze,af){var bf=pa.shown(this._tabElem),cf=pa.hasClass(this._tabElem,'opened');pa.conditionShow(this._tabElem,ze);pa.conditionClass(this._tabElem,'opened',af);if(!(bf&&cf)&&ze&&af){if(!this._messagesView)this._messagesView=new fa(this._threadID,this._sheetController,this._getNode('scrollingArea'),this._getNode('conversation'),this._getNode('loadingIndicator'),this._getNode('lastMessageIndicator'),this._getNode('typingIndicator'),this);this._nubController.flyoutContentChanged();this._messagesView.scrollToBottom();}},focus:function(){if(pa.hasClass(this._tabElem,'opened')){this._focusInput();}else this._getNode('dockButton').focus();},isFocused:function(){var ze=id();return yb.byClass(ze,"_50mz")===this._tabElem;},hasEmptyInput:function(){var ze;if(u.get('chat_react_input')){if(!this._chatInput||!this._chatInput.isMounted())return false;ze=this._chatInput.getValue();}else ze=this._getNode('input').value;return xd.test(ze);},getInputElem:function(){if(u.get('chat_react_input')){if(!this._chatInput||!this._chatInput.isMounted())return null;return bc.findDOMNode(this._chatInput);}else return this._getNode('input');},setStickersFlyoutPackID:function(ze){if(this._stickerButton){this._setPackIDReact(ze);}else this._setPackIDLegacy(ze);},loadShareFromParams:function(ze,af){this._shareLinkUploader&&this._shareLinkUploader.loadShareFromParams(ze,af);if(this._sharePreview)this._sharePreview.setProps({share:{params:af,type:ze},uri:null});},_linkDropped:function(ze){this._shareLinkUploader&&this._shareLinkUploader.loadShare(ze);if(this._sharePreview)this._sharePreview.setProps({share:null,uri:ze});},_filesDropped:function(ze){if(this._fileUploader)this._fileUploader.addDroppedFiles(ze);},_setPackIDLegacy:function(ze){var af=this._stickersFlyout;if(!this._stickersFlyoutToggler||!af||!af.isMounted())return;fc.selectPack(ze);this._toggleStickersFlyoutShownLegacy(true);},_setPackIDReact:function(ze){if(!this._stickerButton.isMounted())return;fc.selectPack(ze);this._toggleStickersFlyoutShownReact(true);},_toggleStickersFlyoutShownReact:function(ze){this._stickerButton.showFlyout();this._stickersFlyoutShown=ze;},_toggleStickersFlyoutShownLegacy:function(ze){if(ze){pc.show(this._stickersFlyoutToggler);}else pc.hide(this._stickersFlyoutToggler);this._stickersFlyoutShown=ze;},_hideStickersFlyoutIfShown:function(){if(this._stickersFlyoutToggler&&this._stickersFlyout&&this._stickersFlyoutShown)this._toggleStickersFlyoutShownLegacy(false);},showStickerReplyNUX:function(){if(ae)return;var ze=this._getNode('stickerButtonContainer')||this._getNode('emoticons');new j(ad.getURIBuilder().getURI()).setRelativeTo(ze).setData({thread_id:this._threadID}).setHandler(function(af){jc.clearShowStickerReplyNUX();}).send();},insertBefore:function(ze){ta.insertBefore(ze.getTabElem(),this._tabElem);},appendTo:function(ze){ta.appendContent(ze,this._tabElem);},nextTabIs:function(ze){var af=ze&&ze.getTabElem();return this._tabElem.nextSibling==af;},getScrollTop:function(){return dc.getTop(ta.find(this._tabElem,'.fbNubFlyoutBody.scrollable'));},setScrollTop:function(ze){dc.setTop(ta.find(this._tabElem,'.fbNubFlyoutBody.scrollable'),ze);},_unmountComponentAtNodeSafe:function(ze){var af=this._getNode(ze);af&&bc.unmountComponentAtNode(af);},destroy:function(){this._initFrame&&bd(this._initFrame);this._selectionPosition&&this._selectionPosition.disable();while(this._eventListeners.length)this._eventListeners.pop().remove();if(this._dropTarget)this._dropTarget.disable();this._checkUnsentMessages&&this._checkUnsentMessages.cancel();this._logUnsentPhotos&&this._logUnsentPhotos.cancel();this._messagesView&&this._messagesView.destroy();this._sheetController&&this._sheetController.destroy();bc.unmountComponentAtNode(this._getNode('menuContainer'));if(u.get('chat_react_header')){bc.unmountComponentAtNode(this._getNode('addToThreadContainer'));this._unmountComponentAtNodeSafe('archiveContainer');this._unmountComponentAtNodeSafe('videoCallButtonContainer');bc.unmountComponentAtNode(this._getNode('closeButtonContainer'));bc.unmountComponentAtNode(this._getNode('titleContainer'));}if(u.get('chat_react_share_uploader')&&this._sharePreview&&this._sharePreview.isMounted()){bc.unmountComponentAtNode(bc.findDOMNode(this._sharePreview));}else this._shareLinkUploader&&this._shareLinkUploader.clear();try{bc.unmountComponentAtNode(this._getNode('photoUploaderContainer'));}catch(ze){n.bumpEntityKey('chat.web','chattab.unmount_failed');}if(u.get('chat_react_sticker_button')){bc.unmountComponentAtNode(this._getNode('stickerButtonContainer'));}else bc.unmountComponentAtNode(this._getNode('stickers'));if(gc.WebStickerTrigger)this._stickerTriggerController.destroy();this._subscriptionsHandler&&this._subscriptionsHandler.release();if(u.get('chat_react_input')){bc.unmountComponentAtNode(this._getNode('inputContainer'));}else eb.reset(this._getNode('input'));if(this._orionTriggerContainer){bc.unmountComponentAtNode(this._orionTriggerContainer);this._orionTriggerContainer=null;this._orionTrigger=null;}this._unsubscribeP2PTransferStore();ta.remove(this._tabElem);yd["delete"](this._threadID);sa.unregisterNubController(this._nubController);},updateAvailableStatus:function(){wd.getThreadMeta(this._threadID,function(ze){var af=m.OFFLINE,bf=this._getCanonicalUserID();if(bf){af=ac.get(bf);}else{var cf=ze.participants.map(function(ef){return ib.getUserIDFromParticipantID(ef);});af=ac.getGroup(cf);}if(!la.isOnline())af=m.OFFLINE;this.updateCallLink();pa.conditionClass(this._tabElem,"_5238",af===m.ACTIVE);pa.conditionClass(this._tabElem,"_5239",af===m.MOBILE);var df=this._getNode('presenceIndicator');switch(af){case m.ACTIVE:df.setAttribute('alt',hd._("Dost\u0119pny(a)"));break;case m.MOBILE:df.setAttribute('alt',hd._("Telefon kom\u00f3rkowy"));break;default:df.removeAttribute('alt');break;}}.bind(this));},updateTab:function(){wd.getThreadMeta(this._threadID,function(ze){var af=[this._getNode('name')];if(!u.get('chat_react_header')){af.push(this._getNode('titlebarText'));}else if(this._title.isMounted())this._title.setProps({thread:ze},function(){this._getNode('chatWrapper').setAttribute('aria-label',this._title.getTitle());}.bind(this));ud.renderAndSeparatedParticipantList(this._threadID,af,{names_renderer:qb.renderShortNames,check_length:true});this._updateControls(ze);this._updateMutingSettings(ze);this._updateUnreadCount(ze);this.updateMultichatTooltip();this._updateArchiveWarning(ze);this._updateEmployeeAwayWarning(ze);this._updateOfficeStatus(ze);this._updateNewThread(ze);this._updateNameConversationSheet(ze);this._updateReadOnlySheet(ze);this._updateSwitchToWork(ze);}.bind(this));},_updateNameConversationSheet:function(ze){if(pb.canReply(ze)&&!ze.name&&!ze.is_canonical&&!ze.name_conversation_sheet_dismissed&&!ze.has_email_participant&&!ze.read_only&&!wd.isEmptyLocalThread(ze.thread_id)){this.showNameConversation(true);}else this.hideAutomaticNameConversation();},_updateReadOnlySheet:function(ze){var af=pb.canReply(ze),bf=wd.isEmptyLocalThread(ze.thread_id);if(!af&&!bf)this._sheetController.openReadOnlySheet();},updateSignatureID:function(ze){this._signatureID=ze;},_showPhotoNUXIfNecessary:function(){if(zd){zd=false;new j('/ajax/chat/photo_nux.php').setRelativeTo(this._getNode('photoUploaderContainer')).setData({threadID:this._threadID}).send();return true;}},_setUpMutingSettings:function(ze){var af=pb.isMuted(ze);if(af)this._sheetController.openThreadIsMutedTabSheet();this._updateActionMenu(af);},_updateMutingSettings:function(ze){var af=pb.isMuted(ze),bf=this._reactChatTabMenu.props.isMuted;if(af&&!bf){this._sheetController.openThreadIsMutedTabSheet();}else if(!af&&bf)this._sheetController.closeThreadIsMutedTabSheet();this._updateActionMenu(af);},_updateActionMenu:function(ze){this._reactChatTabMenu.isMounted()&&this._reactChatTabMenu.setProps({isMuted:ze});},_setUpMessageBlockStatus:function(ze){this._reactChatTabMenu.setProps({hasMessageBlocked:ze.message_blocked});},_updateArchiveWarning:function(ze){if(oa.isEmployee())lb.getMulti(ze.participants,this._showArchiveWarningIfAllParticipantsAreEmployees.bind(this));},_updateEmployeeAwayWarning:function(ze){v.updateEmployeeAwayWarning(ze,function(){this._sheetController.openEmployeeAwaySheet();}.bind(this),function(){});},_updateOfficeStatus:function(ze){var af=this._getNode('officeStatus');if(!af||ib.isGroupChat(ze.thread_id))return;var bf=ib.getParticipantIDFromUserID(ze.canonical_fbid);lb.get(bf,function(cf){ga.update(af,cf);});},_updateSwitchToWork:function(ze){if(oa.isEmployee()&&oa.hasWorkUser()&&ib.isGroupChat(ze.thread_id)){lb.getMulti(ze.participants,function(af){this._showSwitchToWork(this._isEmployeesOnly(af));}.bind(this));}else this._showSwitchToWork(false);},_updateControls:function(ze,af){var bf=false;if(ze&&ze.thread_id){var cf=ib.tokenize(ze.thread_id);if(cf.type==='user'){var df=cf.value;bf=!bb.isUser(df);}}var ef=pb.canReply(ze)&&(!jd(ze.participants)||!!af);pa.conditionShow(this._inputContainerNode,ef);pa.conditionShow(this._iconsContainerNode,ef);if(this._reactChatTabMenu.isMounted()){this._reactChatTabMenu.setProps({isEmptyChat:wd.isNewEmptyLocalThread(ze.thread_id),show:ef});if(bf)this._reactChatTabMenu.setProps({showAddFriend:null});}var ff=ef&&!bf;if(u.get('chat_react_header')){this._addToThreadButton.isMounted()&&this._addToThreadButton.setProps({shown:ff});}else pa.conditionShow(this._getNode('addToThreadLink'),ff);this._resizeInputContainer();this._updateOrionTrigger(ff);},_updateOrionTrigger:function(ze){if(ze)if(this._orionTrigger){this._setOrionTriggerProps();}else if(!this._orionTrigger)this._renderOrionTrigger();},_setOrionTriggerProps:function(){this.getParticipantIDsForOrionNUX(function(ze,af){lb.getMulti(ze,function(bf){var cf=[],df,ef=wd.isNewEmptyLocalThread(this._threadID);for(var ff in bf){df=this._getUserIdFromParticipantID(ff);if(df!==oa.getID())cf.push(db.set(bf[ff],{userID:df}));}this._orionTrigger.setProps({participants:cf,isNewEmptyLocalThread:ef,isGroupChat:ib.isGroupChat(this._threadID)&&!ef,threadID:this._threadID,threadFBID:af});}.bind(this));}.bind(this));},_getUserIdFromParticipantID:function(ze){return ib.getUserIDFromParticipantID(ze);},_onP2PTransferStoreChange:function(){this._renderOrionTrigger();this._unsubscribeP2PTransferStore();},_unsubscribeP2PTransferStore:function(){if(this._transferStoreSub){this._transferStoreSub.remove();this._transferStoreSub=null;}},_isP2PEnabled:function(){return ub.P2PEnabled;},_renderOrionTrigger:function(){if(ib.isGroupChat(this._threadID)&&!ub.P2PGroupSendWWW)return false;var ze=this._isP2PEnabled()||wb.hasTransfers();if(ze){this._orionTriggerContainer=this._getNode('orionTriggerContainer');this._orionTrigger=bc.render(bc.createElement(vb,{onTrigger:this._orionTriggered.bind(this)}),this._orionTriggerContainer);pa.addClass(this._inputContainerNode,"_11d6");this._setOrionTriggerProps();}},getParticipantIDsForOrionNUX:function(ze){var af=this._sheetController.getAddFriendsTabSheet(),bf=af.getParticipants(),cf=this._getCanonicalUserID();if(cf){ze([ib.getParticipantIDFromUserID(cf)]);}else if(wd.isNewEmptyLocalThread(this._threadID)&&bf){ze(bf);}else wd.getThreadMeta(this._threadID,function(df){ze(df.participants,df.thread_fbid);}.bind(this));},_resizeInputContainer:function(){var ze=this._tabElem.clientWidth,af=2,bf=ze-(this._inputContainerNode.clientWidth+af),cf=gb.isRTL()?'left':'right';kc.set(this._iconsContainerNode,cf,bf+'px');if(!u.get('chat_react_input'))oc.getInstance(this._getNode('input')).update();},_updateNewThread:function(ze){if(wd.isNewEmptyLocalThread(ze.thread_id))this.showAddFriend();},_isEmployeesOnly:function(ze){for(var af in ze)if(!ze[af].employee)return false;return true;},_showArchiveWarningIfAllParticipantsAreEmployees:function(ze){var af=this._isEmployeesOnly(ze),bf=u.get('chat_react_header'),cf=bf?this._getNode('archiveContainer'):this._getNode('titanArchiveWarning');if(cf){if(this._titlebarTooltipAnchor)pa.conditionClass(this._titlebarTooltipAnchor,'narrowTitleBar',af);if(bf){this._archiveWarning.isMounted()&&this._archiveWarning.setProps({shown:af});}else pa.conditionShow(cf,af);}},_showSwitchToWork:function(ze){if(this._reactChatTabMenu.isMounted())this._reactChatTabMenu.setProps({hasSwitchToWork:ze});},updateMultichatTooltip:function(){wd.getThreadMeta(this._threadID,function(ze){if(!ze.is_canonical){var af;if(u.get('chat_react_header')){af=bc.findDOMNode(this._title);}else af=this._titlebarTooltipAnchor;ee(af,ze.participants);}}.bind(this));},_getNode:function(ze){return this._tabTemplate.getNode(ze);},_getCanonicalUserID:function(){return ib.getUserIDFromThreadID(this._threadID);},_listen:function(ze,event,af,bf){var cf=this._getNode(ze);if(cf){this._eventListeners.push(za.listen(cf,event,af.bind(this)));}else if(!bf)throw new Error('Could not find node "'+ze+'"');},_closePreClicked:function(ze){this._closeMouseDown=true;},_closeClicked:function(ze){ve(this);da.closeTab(this._threadID);if(ze instanceof mc){ze.stopPropagation();return;}ze.kill();},_closeEnter:function(ze){if(ze.keyCode===fb.RETURN)this._closeClicked(ze);},_nubClicked:function(ze){ze.kill();return ia.inform('nub-activated',this._threadID);},_dockKeyDown:function(event){if(event.keyCode===fb.RETURN||event.keyCode===fb.SPACE){ia.inform('nub-activated',this._threadID);event.kill();}else this._handleHotkeyPressed(event);},_handleHotkeyPressed:function(event){if(event.keyCode===fb.ESC){this._handleEscape();if(u.get('chat_react_input'))event=new ua(event);event.kill();}else if(event.keyCode===fb.TAB)this._handleTabPressed(event);},_handleTabPressed:function(event){if(!event.ctrlKey){var ze=ia.inform('tab-pressed',{id:this._threadID,shiftPressed:event.shiftKey});if(u.get('chat_react_input'))event=new ua(event);!ze&&event.kill();return true;}},_handleEscape:function(){if(this._stickersFlyoutShown){this._stickerButton?this._toggleStickersFlyoutShownReact(false):this._toggleStickersFlyoutShownLegacy(false);return;}ve(this);if(this.hasEmptyInput()){ia.inform('esc-pressed',this._threadID);}else{var ze=hd._("Czy na pewno chcesz zamkn\u0105\u0107 to okno czatu?"),af=hd._("Wiadomo\u015b\u0107 nie zosta\u0142a wys\u0142ana."),bf=new ra().setTitle(ze).setBody(af).setButtons([ra.CLOSE,ra.CANCEL]).setHandler(ia.inform.bind(ia,'esc-pressed',this._threadID,null)).setModal(true).show(),cf=bf.getButtonElement('yes');cf&&cb.set(cf);}},_titleClicked:function(event){var ze=event.getTarget();if(!yb.byClass(ze,'titlebarText')&&!yb.byClass(ze,'uiSelector')&&!yb.byClass(ze,'addToThread')&&!yb.byClass(ze,'optionMenu')&&!yb.byClass(ze,'videoicon')&&!yb.byClass(ze,'close')){event.kill();da.lowerTab(this._threadID);this.focus();}},_callEnter:function(ze){if(ze.keyCode===fb.RETURN)this._callClicked(ze);},_callClicked:function(ze){if(ze.target)ze.target.blur();var af=this._getCanonicalUserID();if(this._videoCallLinkEnabled){var bf='chat_tab_icon';if(ze.target&&pa.hasClass(ze.target,'video_call_tour'))bf='chat_tab_icon_tour';ia.inform('video-call-clicked',{threadID:this._threadID,userID:af,clickSource:bf});}if(u.get('chat_react_header')){ze.stopPropagation();}else return false;},_addFriendLinkClicked:function(){this.showAddFriend();},_nameConversationLinkClicked:function(){this.showNameConversation();},_showParticipantsClicked:function(){rd.getFBIDFromClientID(this._threadID,function(ze){i.send(new j(new tc('/ajax/browser/dialog/multichat_members/').addQueryData({id:ze})));});},_deleteConversation:function(){wc.show(this._threadID);},_unsubscribeLinkClicked:function(){var ze=[];ze.push({name:'unsubscribe',label:hd._("Opu\u015b\u0107 konwersacj\u0119"),handler:this._unsubscribeToThread.bind(this)});ze.push(ra.CANCEL);new ra().setTitle(hd._("Opu\u015bci\u0107 konwersacj\u0119?")).setBody(hd._({"*":"Przestaniesz otrzymywa\u0107 wiadomo\u015bci z tej konwersacji, a jej uczestnicy zobacz\u0105, \u017ce opu\u015bci\u0142e\u015b(a\u015b) konwersacj\u0119.","16777216":"Przestaniesz otrzymywa\u0107 wiadomo\u015bci z tej konwersacji, a jej uczestnicy zobacz\u0105, \u017ce opu\u015bci\u0142e\u015b konwersacj\u0119.","33554432":"Przestaniesz otrzymywa\u0107 wiadomo\u015bci z tej konwersacji, a jej uczestnicy zobacz\u0105, \u017ce opu\u015bci\u0142a\u015b konwersacj\u0119.","__vcg":1})).setButtons(ze).show();},_switchToWorkUserClicked:function(){var ze=[];ze.push({name:'move',label:hd._("Przenie\u015b konwersacj\u0119"),handler:this._switchToWork.bind(this)});ze.push(ra.CANCEL);new ra().setTitle(hd._("Przenie\u015b\u0107 konwersacj\u0119 na konto s\u0142u\u017cbowe?")).setBody(hd._("Czy chcesz przenie\u015b\u0107 t\u0119 konwersacj\u0119, aby by\u0142a wy\u015bwietlana na Twoim koncie s\u0142u\u017cbowym?")).setButtons(ze).show();},_getUserParticipants:function(ze){var af=[];ze.forEach(function(bf){var cf=ib.getUserIDFromParticipantID(bf);cf&&af.push(cf);});return af;},_createGroupClicked:function(){wd.getThreadMeta(this._threadID,function(ze){if(!ze.is_canonical){var af=new tc('/ajax/groups/create_get.php').addQueryData({ref:'web_messenger_dock',parent_id:'0'}),bf=this._getUserParticipants(ze.participants);af.addQueryData({members:bf});if(ze.name)af.addQueryData({name:ze.name});i.send(new j(af));}}.bind(this));},_enableDesktopNotif:function(){Notification.requestPermission();},_reportSpamClicked:function(){var ze=this._getCanonicalUserID(),af=new tc('/ajax/chat/report.php').addQueryData({id:ze}).addQueryData({src:'top_report_link'});if(yc.result)af=zc.getURIBuilder().setString('thread_fbid',ze).setEnum('location','www_chat_head').getURI();i.send(new j(af));},_messageBlockedClicked:function(){var ze=JSON.stringify({reportable_ent_token:this._getCanonicalUserID(),initial_action_name:kb.block_messages});i.send(new j(new tc('/ajax/nfx/messenger_direct_action').addQueryData({story_location:'messenger',context:ze})));},_inputPasted:function(event){if(uc.chrome()){var ze=event.clipboardData||event.originalEvent.clipboardData;if(!ze||!ze.items||ze.items.length<1)return;var af=ze.items[0].type;if(af!=='image/png')return;if(ze.items[0].getAsFile){var bf=ze.items[0].getAsFile();this._photoUploader.uploadFile(bf);}}},_focusInput:function(){if(u.get('chat_react_input')){this._chatInput&&this._chatInput.isMounted()&&this._chatInput.focus();}else this._getNode('input').focus();},_focusTab:function(){pa.addClass(this._tabElem,'focusedTab');this.tryMarkAsRead();if(!ae&&this._showPhotoNUXIfNecessary())h.subscribe(['ChatNUX/show','ChatNUX/hide'],function(event){ae=event==='ChatNUX/show';});this._closeMouseDown=false;this._setCloseTooltip(true);ia.inform('focus-tab',this._threadID);},_blurTab:function(){pa.removeClass(this._tabElem,'focusedTab');!this._closeMouseDown&&this._setCloseTooltip(false);},_setCloseTooltip:function(ze){if(u.get('chat_react_header')){this._closeButton.isMounted()&&this._closeButton.setProps({active:ze});return;}var af=this._getNode('titlebarCloseButton'),bf=ze?hd._("Naci\u015bnij Esc, aby zamkn\u0105\u0107"):hd._("Zamknij kart\u0119");qc.set(af,bf,'above');},_inputKeyDown:function(event){this.tryMarkAsRead();if(event.keyCode===fb.RETURN&&!event.shiftKey){if(qe(this)){oe(this);event.kill&&event.kill();return;}le(this);if(gc.WebStickerTrigger)this._stickerTriggerController.activateAfterparty();event.kill&&event.kill();return;}if(event.keyCode===fb.DOWN&&event.shiftKey&&this.hasEmptyInput()){event.kill&&event.kill();da.lowerTab(this._threadID);this.focus();return;}this._handleHotkeyPressed(event);},_initializeInput:function(){if(!u.get('chat_react_input')){var ze=this._inputContainerNode.clientHeight;oc.getInstance(this._getNode('input')).subscribe('resize',function(){var af=this._inputContainerNode.clientHeight;if(af!=ze)this._nubController.flyoutContentChanged();ze=af;}.bind(this));this._listen('input','focus',this._focusTab);this._listen('input','blur',this._blurTab);this._listen('input','paste',this._inputPasted);if(uc.firefox()&&qa.get()=='ko_KR'){this._listen('input','keyup',this._inputKeyDown);}else this._listen('input','keydown',this._inputKeyDown);this._initializeThingsWithInputFn(this._tabTemplate.getNode('input'));}else this._chatInput=bc.render(bc.createElement(md,{initializeThingsWithInputFn:this._initializeThingsWithInputFn.bind(this),inputChanged:function(af){if(gc.WebStickerTrigger)this._stickerTriggerController.updateInput(af);}.bind(this),inputKeyDown:this._inputKeyDown.bind(this),onAddMention:this._onAddMention.bind(this),onBlur:this._blurTab.bind(this),onEscape:this._handleEscape.bind(this),onFocus:this._focusTab.bind(this),onTab:this._handleTabPressed.bind(this),openFlyoutFn:this._toggleStickersFlyoutShownLegacy.bind(this,true),stickersFlyoutToggler:this._stickersFlyoutToggler,searchTriggeredWord:function(){this._toggleStickersFlyoutShownLegacy(true);this._searchStickers(this._stickerTriggerController.getTriggeredWord());}.bind(this),resizeFn:function(af){kc.set(this._getNode('inputContainer'),'height',af+'px');this._nubController.flyoutContentChanged();}.bind(this),uploadPhotoFn:function(af){this._photoUploader&&this._photoUploader.uploadFile(af);}.bind(this)}),this._getNode('chatInputContainer'));},_initializeSharePreview:function(ze,af){this._sharePreview=bc.render(bc.createElement(nb,{imageSize:{width:ce,height:ce},location:mb.CHAT_PREVIEW,onClose:this._focusInput.bind(this),onUpdate:function(){se(this);this._unblockSend();}.bind(this)}),this._getNode('shareAttachmentShelf'));za.listen(ze,'keyup',function(){var bf=af?af():ze.value;!bf.length&&this._urlScraper.reset();}.bind(this));this._urlScraper=new sc(ze,af);this._urlScraper.subscribe('match',function(bf,cf){this._sharePreview.setProps({share:null,uri:(cf&&cf.url)});}.bind(this));},_initializeThingsWithInputFn:function(ze,af){if(u.get('chat_react_share_uploader')){this._initializeSharePreview(ze,af);}else{this._shareLinkUploader=new aa(this._getNode('shareAttachmentShelf'),ze,this.focus.bind(this),af,this.appendTextToInput.bind(this));this._initializeUploader(this._shareLinkUploader);}wd.getThreadMeta(this._threadID,function(bf){rd.getFBIDFromClientID(this._threadID,function(cf){this._typingDetector=new rc(this._getCanonicalUserID(),ze,'mercury-chat',null,cf,af);}.bind(this));}.bind(this));},_getInputValue:function(){if(u.get('chat_react_input')){if(!this._chatInput||!this._chatInput.isMounted())return '';return this._chatInput.getValue()||'';}else return this._tabTemplate.getNode('input').value||'';},appendTextToInput:function(ze){if(u.get('chat_react_input')){if(this._chatInput&&this._chatInput.isMounted())this._chatInput.appendText(ze);}else this._getNode('input').value+=ze;},_hasUnfinishedPost:function(){return re(this)||pe(this);},tryMarkAsRead:function(){if(!this._messagesView||this._messagesView.isScrolledToBottom()){vd.markRead(this._threadID);vd.markSeen(this._threadID);return true;}return false;},_chatConvClicked:function(ze){this.tryMarkAsRead();if(yb.byTag(ze.getTarget(),'a')||ta.getSelection())return;this.focus();},_inputContainerClicked:function(ze){this.tryMarkAsRead();this.focus();},_initializePageMessagingIndicator:function(){if(!this._pagesMessageIndicator)return;pa.hide(this._pagesMessageIndicator);this._pagesMessageIndicatorHandler=new xb(this._threadID,function(ze){if(!ze)return;ta.setContent(this._pagesMessageIndicator,ze);pa.show(this._pagesMessageIndicator);}.bind(this));this._pagesMessageIndicatorHandler.checkResponsiveness();},showTypingIndicator:function(ze){if(u.get('chat_closed_tab_typing_indicator_animated')){var af=ta.find(this._tabElem,"._54m9");if(ze){this._animatedTypingIndicator=bc.render(bc.createElement(p,{bootloadPlaceholder:bc.createElement("span",null),bootloadComponent:function(bf){o.loadModules(["MercuryTypingAnimation.react"],bf);}}),af);this._updateAnimatedIndicatorColor();pa.addClass(this._tabElem,"_54m8");pa.show(af);}else{pa.removeClass(this._tabElem,"_54m8");pa.hide(af);bc.unmountComponentAtNode(af);this._animatedTypingIndicator=null;}}else pa.conditionClass(this._tabElem,'typing',ze);},_updateAnimatedIndicatorColor:function(){if(this._animatedTypingIndicator){var ze=pa.hasClass(this._tabElem,'highlightTab')?'light':'dark';this._animatedTypingIndicator.setProps({color:ze});}},_updateUnreadCount:function(ze){var af=ze.unread_count;if(typeof af!='undefined'){var bf=!!af&&(!s.showsTabUnreadUI||s.showsTabUnreadUI()),cf=this._getNode('numMessages');pa.conditionShow(cf,bf);pa.conditionClass(this._tabElem,'highlightTab',bf);this._updateAnimatedIndicatorColor();ie(this._threadID,this._tabElem,bf);ta.setContent(cf,af);}},updateCallLink:function(){var ze=this._getCanonicalUserID();if(!ze||ze===oa.getID()||!bb.isUser(ze)){if(u.get('chat_react_header')){this._videoCallButton.isMounted()&&this._videoCallButton.setProps({shown:false});}else{var af=this._getNode('videoCallLink');if(af)pa.hide(af);}this._videoCallLinkEnabled=false;return;}this._videoCallLinkEnabled=ab.isCallable(ze);pa.conditionClass(this._tabElem,"_4hwz",this._videoCallLinkEnabled);lb.get(ib.getParticipantIDFromUserID(ze),function(bf){var cf=ab.callButtonTooltip(ze,bf.short_name);this._setVideoCallTooltip(cf);}.bind(this));},_setVideoCallTooltip:function(ze){if(u.get('chat_react_header')){this._videoCallButton.isMounted()&&this._videoCallButton.setProps({tooltipLabel:ze});}else qc.set(this._getNode('videoCallLink'),ze);},_setPrivacyLinkText:function(ze){this._reactChatTabMenu.isMounted()&&this._reactChatTabMenu.setProps({privacyText:ze});},_updatePrivacyLink:function(ze){var af;if(ze==y.OFFLINE){af=hd._("Przejd\u017a do trybu online");this._setPrivacyLinkText(af);return;}var bf=this._getCanonicalUserID();if(!bf)return;var cf='fbid:'+bf;lb.get(cf,function(df){if(!df.is_friend){af=null;}else if(ze==y.BLOCKED){af=hd._("W\u0142\u0105cz czat dla u\u017cytkownika {name}",[hd.param("name",df.short_name)]);}else af=hd._("Wy\u0142\u0105cz czat dla u\u017cytkownika {name}",[hd.param("name",df.short_name)]);this._setPrivacyLinkText(af);}.bind(this));},_unsubscribeToThread:function(){if(!wd.isEmptyLocalThread(this._threadID)){var ze=qd.constructLogMessageObject(ob.CHAT_WEB,this._threadID,jb.UNSUBSCRIBE,{removed_participants:[rb.getID()]});od.send(ze);}da.closeTab(this._threadID,'unsubscribed');return true;},_switchToWork:function(){if(!wd.isEmptyLocalThread(this._threadID)){var ze=qd.constructLogMessageObject(ob.CHAT_WEB,this._threadID,jb.SWITCH_TO_WORK,{removed_participants:[rb.getID()]});od.send(ze);}da.closeTab(this._threadID,'unsubscribed');return true;},_initializeSheetController:function(){this._sheetController=new ha(this._threadID,this._getNode('sheet'),this._tabElem,this);this._sheetController.onClickNewMessagesSheet(function(){this._messagesView&&this._messagesView.scrollToBottom();this.focus();this.tryMarkAsRead();}.bind(this));this._sheetController.onClickThreadIsMutedSheet(function(){vd.unmute(this._threadID);this.focus();}.bind(this));this._sheetController.onTokensChanged(function(ze,af){wd.getThreadMeta(this._threadID,function(bf){this._updateControls(bf,af.token_count);}.bind(this));}.bind(this));this._nubController=new tb().init(this._tabElem);this._sheetController.onResize(function(){this._nubController.flyoutContentChanged();}.bind(this));this._nubController.subscribe('resize',function(){this._resizeInputContainer();}.bind(this));},_initializeUploader:function(ze){this._subscriptionsHandler.addSubscriptions(ze.subscribe(['all-uploads-completed','upload-canceled'],function(){return this._unblockSend();}.bind(this)),ze.subscribe('dom-updated',function(){se(this);}.bind(this)),ze.subscribe('submit',function(){this._focusInput();}.bind(this)));},_initializeHeader:function(){this._initializeReactMenu(this._getNode('fileAttachmentShelf'));this._initializeArchiveWarning();this._initializeAddToThreadButton();this._initializeVideoCallButton();this._initializeCloseButton();this._initializeTitle();},_initializeReactMenu:function(ze){var af=this._getNode('menuContainer'),bf=ib.isGroupChat(this._threadID),cf=wd.isNewEmptyLocalThread(this._threadID),df=this._sheetController.openAddFriendsSheet.bind(this._sheetController);if(af)this._reactChatTabMenu=bc.render(bc.createElement(ea,{onFileUploaderMounted:this.setFileUploader.bind(this),updatePrivacyLinkFunc:this._updatePrivacyLink.bind(this),nameConversationFunc:this._nameConversationLinkClicked.bind(this),showParticipantsFunc:this._showParticipantsClicked.bind(this),leaveConversationFunc:this._unsubscribeLinkClicked.bind(this),deleteConversationFunc:this._deleteConversation.bind(this),reportSpamFunc:this._reportSpamClicked.bind(this),blockMessagesFunc:this._messageBlockedClicked.bind(this),createGroupFunc:this._createGroupClicked.bind(this),switchToWorkFunc:this._switchToWorkUserClicked.bind(this),isGroupChat:bf,isEmptyChat:cf,showAddFriend:df,threadID:this._threadID,attachmentsShelf:ze,onUploadFinished:this._unblockSend.bind(this),onUpdateAttachmentsShelf:se.bind(this,this),onSubmit:this._focusInput.bind(this),enableDesktopNotif:function(){this._enableDesktopNotif();}.bind(this)}),af);},_initializeArchiveWarning:function(){if(u.get('chat_react_header'))this._archiveWarning=bc.render(bc.createElement(r,{isFBAtWork:u.IsWorkUser,shown:true}),this._getNode('archiveContainer'));},_initializeAddToThreadButton:function(){if(u.get('chat_react_header')){this._addToThreadButton=bc.render(bc.createElement(q,{isFBAtWork:u.get('IsWorkUser',false),onClick:this._addFriendLinkClicked.bind(this),shown:true}),this._getNode('addToThreadContainer'));}else this._listen('addToThreadLink','click',this._addFriendLinkClicked,true);},_initializeVideoCallButton:function(){if(!ib.getUserIDFromThreadID(this._threadID))return;var ze=null;if(u.get('chat_react_header')){this._videoCallButton=bc.render(bc.createElement(ma,{shown:true,onClick:this._callClicked.bind(this),onKeyUp:this._callEnter.bind(this)}),this._getNode('videoCallButtonContainer'));ze=bc.findDOMNode(this._videoCallButton);}else{ze=this._getNode('videoCallLink');this._listen('videoCallLink','click',this._callClicked,true);this._listen('videoCallLink','keyup',this._callEnter,true);}},_initializeCloseButton:function(){if(u.get('chat_react_header')){this._closeButton=bc.render(bc.createElement(t,{onClick:this._closeClicked.bind(this),onKeyUp:this._closeEnter.bind(this),onMouseDown:this._closePreClicked.bind(this)}),this._getNode('closeButtonContainer'));}else{this._listen('titlebarCloseButton','click',this._closeClicked);this._listen('titlebarCloseButton','keyup',this._closeEnter);this._listen('titlebarCloseButton','mousedown',this._closePreClicked);}},_initializeTitle:function(){if(u.get('chat_react_header')){var ze=wd.getThreadMetaNow(this._threadID);this._title=bc.render(bc.createElement(ka,{isNewThread:wd.isNewEmptyLocalThread(this._threadID),thread:ze,viewer:oa.getID()}),this._getNode('titleContainer'));}},_initializeTitleHREF:function(){xc.getThreadURI(this._threadID,function(af){return this._setTitleHref(af);}.bind(this));if(!ib.getUserIDFromThreadID(this._threadID))this._titlebarTooltipAnchor=this._getNode('titlebarText');var ze=this._getCanonicalUserID();if(this._getCanonicalUserID()){lb.get(ib.getParticipantIDFromUserID(ze),function(af){if(af.href)this._setTitleHref(af.href);}.bind(this));}else if(this._reactChatTabMenu.getURL())this._setTitleHref(this._reactChatTabMenu.getURL());},_initializeUIListeners:function(){if(this._pagesMessageIndicator)this._listen('scrollingArea','scroll',function(event){var ze=event.target;if(ze.scrollHeight-ze.offsetHeight!==ze.scrollTop)new g(this._pagesMessageIndicator).to('height',0).duration(100).hide().go();}.bind(this));this._listen('closeButton','click',this._closeClicked);this._listen('dockButton','click',this._nubClicked);this._listen('dockButton','keydown',this._dockKeyDown);this._listen('nubFlyoutTitlebar','click',this._titleClicked);this._listen('chatConv','click',this._chatConvClicked);this._listen('inputContainer','click',this._inputContainerClicked);this._listen('sheet','keydown',function(event){if(!event.getModifiers().any&&event.keyCode===fb.TAB){this._focusInput();event.kill();}}.bind(this));if(this._getNode('officeStatus'))this._listen('officeStatus','click',function(){return false;},true);},setFileUploader:function(ze){this._fileUploader=ze;},_initializeAutoSendPhotoUploader:function(){this._photoUploader=bc.render(bc.createElement(x,{onSubmit:this._handlePUSubmit.bind(this),onAllUploadsComplete:this._handlePUAllUploadsCompleted.bind(this),onLastUploadFail:this._handlePULastUploadFailed.bind(this),onLastUploadCancel:this._handlePULastUploadCanceled.bind(this)}),this._getNode('photoUploaderContainer'));},_initializeStickers:function(){this._stickersFlyoutToggler=this._getNode('emoticons');if(u.get('chat_react_input')&&gc.WebStickerTrigger){this._stickerTriggerController=new ca(this._getNode('stickersTriggerFlyoutContainer'),this._getNode('emoticonIndicator'),this._stickersFlyoutToggler,this._stickerSelected.bind(this),this._searchStickers.bind(this));if(this._chatInput)this._stickerTriggerController.setInput(this._chatInput);}if(jc.shouldShowStickerSearchNUX())this._listen('emoticons','click',function(){if(jc.shouldShowStickerSearchNUX()){fc.selectPack(hc.SEARCH_PACK_ID);jc.clearShowStickerSearchNUX();}},true);if(u.get('chat_react_sticker_button')){this._stickerButton=bc.render(bc.createElement(ba,{className:"_4vui",flyoutAlignment:"left",onFlyoutShown:this._onFlyoutShown.bind(this),onFlyoutHidden:this._onFlyoutHidden.bind(this),onStickerSelect:this._stickerSelected.bind(this),onEmoticonSelect:this._emoticonSelected.bind(this)}),this._getNode('stickerButtonContainer'));n.bumpEntityKey('chat.web','sticker_button.mounting_attempted');}else{var ze=this._getNode('stickers');if(ze)this._stickersFlyout=bc.render(bc.createElement(ic,{onStickerSelect:function(af){this._stickerSelected(af);}.bind(this),onShown:this._onFlyoutShown.bind(this),onHidden:this._onFlyoutHidden.bind(this),onEmoticonSelect:this._emoticonSelected.bind(this),onEscKeyDown:this._hideStickersFlyoutIfShown.bind(this)}),ze);this._eventListeners.push(jc.addListener(jc.PACK_SELECTED,function(af){if(this._stickersFlyout&&this._stickersFlyout.isMounted())this._stickersFlyout.setProps({packID:af});}.bind(this)));}},_initializeDragDropTarget:function(){var ze=va.scry(this._tabElem,"._1ia");if(ze&&ze.length>0){this._dropTarget=new wa(ze[0]);this._dropTarget.setOnFilesDropCallback(this._filesDropped.bind(this));this._dropTarget.setOnURLDropCallback(this._linkDropped.bind(this));this._dropTarget.enable();}},_initializeP2P:function(){if(!this._isP2PEnabled()){this._transferStoreSub=wb.addListener('change',this._onP2PTransferStoreChange.bind(this));}else this._renderOrionTrigger();},_initializeHotLike:function(){if(this._getNode('hotLikeContainer')){bc.render(bc.createElement(sb,{className:"_3s0d",onClick:this._stickerSelected.bind(this),threadID:this._threadID}),this._getNode('hotLikeContainer'));pa.addClass(this._inputContainerNode,"_n4k");}},_initializeUnloadListeners:function(){this._checkUnsentMessages=dd(function(){if(this._hasUnfinishedPost())return hd._({"*":"Nie wys\u0142a\u0142e\u015b(a\u015b) jeszcze swojej wiadomo\u015bci. Czy chcesz wyj\u015b\u0107, nie wysy\u0142aj\u0105c wiadomo\u015bci?","16777216":"Nie wys\u0142a\u0142e\u015b jeszcze swojej wiadomo\u015bci. Czy chcesz wyj\u015b\u0107, nie wysy\u0142aj\u0105c wiadomo\u015bci?","33554432":"Nie wys\u0142a\u0142a\u015b jeszcze swojej wiadomo\u015bci. Czy chcesz wyj\u015b\u0107, nie wysy\u0142aj\u0105c wiadomo\u015bci?","__vcg":1});if(pd.getNumberLocalMessages(this._threadID))return hd._("Twoja wiadomo\u015b\u0107 wci\u0105\u017c jest wysy\u0142ana. Na pewno chcesz wyj\u015b\u0107?");return null;}.bind(this));cc.onBeforeUnload(this._checkUnsentMessages,false);this._logUnsentPhotos=dd(ve.bind(null,this));cc.onUnload(this._logUnsentPhotos);},_handlePUSubmit:function(ze,af){te(this,zb.UPLOAD_START,af);ne(this,'',[],function(bf){if(this._threadID!==bf.thread_id){this._newThreadIDFromPhotoUpload=bf.thread_id;if(this._messagesView)this._messagesView.setNewThreadID(bf.thread_id);}bf.content_attachment=null;od.addAttachmentPlaceholder(bf,af.upload_id,af);}.bind(this));ye('submit',af);this._focusInput();},_handlePULastUploadFailed:function(ze,af){te(this,zb.CLIENT_ERROR,af);ye('failed',af);od.cancelAttachmentPlaceholder(af.upload_id,af);var bf=hd._("Dodawanie zdj\u0119cia nie powiod\u0142o si\u0119"),cf=hd._("Spr\u00f3buj jeszcze raz. Sprawd\u017a, czy przesy\u0142asz prawid\u0142owe zdj\u0119cie.");new ra().setTitle(bf).setBody(cf).setButtons(ra.OK).show();},_handlePULastUploadCanceled:function(ze,af){te(this,zb.CANCEL_DURING_UPLOAD,af);ye('canceled',af);od.cancelAttachmentPlaceholder(af.upload_id,af);},_handlePUAllUploadsCompleted:function(ze,af){te(this,zb.ALL_UPLOADS_DONE,af);ye('completed',af);od.confirmAttachmentPlaceholder(af.upload_id,af);var bf=af.image_ids.length||af.attachments.length;me(this,bf);},_stickerSelected:function(ze){ne(this,'',[],function(af){af.has_attachment=true;af.sticker_id=ze;od.send(af);this.focus();}.bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_emoticonSelected:function(ze){var af=xa.symbols[ze];if(!af)return;if(u.get('chat_react_input')){this._chatInput.insertEmoticon(af);return;}this._selectionPosition=this._selectionPosition||new ec(this._getNode('input'));var bf=oc.getInstance(this._getNode('input')),cf=bf.getValue(),df=ya.insertEmoticon(af,cf,this._selectionPosition.getPos());bf.setValue(df.result);this._selectionPosition.setPos(df.start,df.end);},_orionTriggered:function(){ne(this,'',[],function(ze){this.focus();}.bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_addStickerSearchNUXIndicator:function(){pa.addClass(this._getNode('emoticonIndicator'),'nux');ae=false;},_onFlyoutShown:function(ze){if(u.get('chat_react_sticker_button')){var af=this._stickersFlyout.props.packID;if(af!==hc.SEARCH_PACK_ID)this.focus();}if(gc.WebStickerTrigger){this._stickerTriggerController.onFlyoutShown(ze);}else ze();this._stickersFlyoutShown=true;},_searchStickers:function(ze,af){this._stickersFlyout.isMounted()&&this._stickersFlyout.setProps({packID:hc.SEARCH_PACK_ID,trigger:ze},af);},_onFlyoutHidden:function(){this._stickersFlyoutShown=false;this.focus();},_setTitleHref:function(ze){if(u.get('chat_react_header')){this._title.isMounted()&&this._title.setProps({href:ze});}else{var af=this._getNode('titlebarText');af.setAttribute('href',ze);af.removeAttribute('rel');pa.removeClass(af,'noLink');}},_onAddMention:function(ze){this._linkDropped((new tc(ze.getURI())).getQualifiedURI().toString());},_unblockSend:function(){if(!this._blocked||qe(this))return;this._blocked=false;le(this);this._sheetController.closeUploadWarningTabSheet();},_logOpenTab:function(){new k('/ajax/chat/opentab_tracking.php',{threadID:this._threadID,userID:this._getCanonicalUserID(),signatureID:this._signatureID}).send();}});function ye(ze,af){de.debug('photo_uploader:'+ze,Object.assign({},af));}e.exports=ue;},null);
__d("ChatTabTypeaheadDataSource",["MercuryTypeaheadConstants","MercuryTypeaheadDataSource"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(l){"use strict";l=l||{};l.maxResults=g.COMPOSER_CHATTAB_MAX;h.call(this,l);this.$ChatTabTypeaheadDataSource0=true;}k.prototype.buildData=function(l){"use strict";var m=[],n=[],o=[],p=[],q=[];l.forEach(function(r){var s=j.getEntry.call(this,r);switch(s.render_type){case g.FRIEND_TYPE:m.push(r);break;case g.THREAD_TYPE:if(this.$ChatTabTypeaheadDataSource0)n.push(r);break;case g.NON_FRIEND_TYPE:o.push(r);break;case g.FB4C_TYPE:p.push(r);break;case g.PAGE_TYPE:if(this.$ChatTabTypeaheadDataSource0)q.push(r);break;default:this.logQuery({event:'chat_tab_render_type_error'});break;}},this);return j.buildData.call(this,m.concat(p,n,q,o));};k.prototype.query=function(l,m,n,o){"use strict";this.logQuery({event:'query_chat_tab',query:l});return j.query.call(this,l,m,n,o);};k.prototype.respond=function(l,m,n){"use strict";var o=j.respond.call(this,l,m,n);this.logResponse({event:'query_response_chat_tab',response_query:l,response_uids:m});return o;};k.prototype.setShowThreads=function(l){"use strict";this.$ChatTabTypeaheadDataSource0=l;};e.exports=k;},null);